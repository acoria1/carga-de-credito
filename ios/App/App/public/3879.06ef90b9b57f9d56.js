"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3879],{7423:(we,W,h)=>{h.d(W,{Uw:()=>z,fo:()=>ne,ur:()=>E,xz:()=>D});var v=h(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var E=(()=>{return(c=E||(E={})).Unimplemented="UNIMPLEMENTED",c.Unavailable="UNAVAILABLE",E;var c})();class D extends Error{constructor(i,a,f){super(i),this.message=i,this.code=a,this.data=f}}const te=c=>{var i,a,f,g,d;const S=c.CapacitorCustomPlatform||null,p=c.Capacitor||{},x=p.Plugins=p.Plugins||{},A=c.CapacitorPlatforms,k=(null===(i=null==A?void 0:A.currentPlatform)||void 0===i?void 0:i.getPlatform)||(()=>null!==S?S.name:(c=>{var i,a;return null!=c&&c.androidBridge?"android":null!==(a=null===(i=null==c?void 0:c.webkit)||void 0===i?void 0:i.messageHandlers)&&void 0!==a&&a.bridge?"ios":"web"})(c)),Se=(null===(a=null==A?void 0:A.currentPlatform)||void 0===a?void 0:a.isNativePlatform)||(()=>"web"!==k()),N=(null===(f=null==A?void 0:A.currentPlatform)||void 0===f?void 0:f.isPluginAvailable)||(P=>{const I=ie.get(P);return!!(null!=I&&I.platforms.has(k())||ve(P))}),ve=(null===(g=null==A?void 0:A.currentPlatform)||void 0===g?void 0:g.getPluginHeader)||(P=>{var I;return null===(I=p.PluginHeaders)||void 0===I?void 0:I.find(R=>R.name===P)}),ie=new Map,me=(null===(d=null==A?void 0:A.currentPlatform)||void 0===d?void 0:d.registerPlugin)||((P,I={})=>{const R=ie.get(P);if(R)return console.warn(`Capacitor plugin "${P}" already registered. Cannot register plugins twice.`),R.proxy;const U=k(),G=ve(P);let Z;const Y=function(){var T=(0,v.Z)(function*(){return!Z&&U in I?Z=Z="function"==typeof I[U]?yield I[U]():I[U]:null!==S&&!Z&&"web"in I&&(Z=Z="function"==typeof I.web?yield I.web():I.web),Z});return function(){return T.apply(this,arguments)}}(),X=T=>{let t;const n=(...e)=>{const r=Y().then(o=>{const l=((T,t)=>{var n,e;if(!G){if(T)return null===(e=T[t])||void 0===e?void 0:e.bind(T);throw new D(`"${P}" plugin is not implemented on ${U}`,E.Unimplemented)}{const r=null==G?void 0:G.methods.find(o=>t===o.name);if(r)return"promise"===r.rtype?o=>p.nativePromise(P,t.toString(),o):(o,l)=>p.nativeCallback(P,t.toString(),o,l);if(T)return null===(n=T[t])||void 0===n?void 0:n.bind(T)}})(o,T);if(l){const u=l(...e);return t=null==u?void 0:u.remove,u}throw new D(`"${P}.${T}()" is not implemented on ${U}`,E.Unimplemented)});return"addListener"===T&&(r.remove=(0,v.Z)(function*(){return t()})),r};return n.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(n,"name",{value:T,writable:!1,configurable:!1}),n},ae=X("addListener"),se=X("removeListener"),Pe=(T,t)=>{const n=ae({eventName:T},t),e=function(){var o=(0,v.Z)(function*(){const l=yield n;se({eventName:T,callbackId:l},t)});return function(){return o.apply(this,arguments)}}(),r=new Promise(o=>n.then(()=>o({remove:e})));return r.remove=(0,v.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield e()}),r},q=new Proxy({},{get(T,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return G?Pe:ae;case"removeListener":return se;default:return X(t)}}});return x[P]=q,ie.set(P,{name:P,proxy:q,platforms:new Set([...Object.keys(I),...G?[U]:[]])}),q});return p.convertFileSrc||(p.convertFileSrc=P=>P),p.getPlatform=k,p.handleError=P=>c.console.error(P),p.isNativePlatform=Se,p.isPluginAvailable=N,p.pluginMethodNoop=(P,I,R)=>Promise.reject(`${R} does not have an implementation of "${I}".`),p.registerPlugin=me,p.Exception=D,p.DEBUG=!!p.DEBUG,p.isLoggingEnabled=!!p.isLoggingEnabled,p.platform=p.getPlatform(),p.isNative=p.isNativePlatform(),p},$=(c=>c.Capacitor=te(c))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ne=$.registerPlugin;class z{constructor(i){this.listeners={},this.windowListeners={},i&&(console.warn(`Capacitor WebPlugin "${i.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=i)}addListener(i,a){var f=this;this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(a);const d=this.windowListeners[i];d&&!d.registered&&this.addWindowListener(d);const S=function(){var x=(0,v.Z)(function*(){return f.removeListener(i,a)});return function(){return x.apply(this,arguments)}}(),p=Promise.resolve({remove:S});return Object.defineProperty(p,"remove",{value:(x=(0,v.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield S()}),function(){return x.apply(this,arguments)})}),p;var x}removeAllListeners(){var i=this;return(0,v.Z)(function*(){i.listeners={};for(const a in i.windowListeners)i.removeWindowListener(i.windowListeners[a]);i.windowListeners={}})()}notifyListeners(i,a){const f=this.listeners[i];f&&f.forEach(g=>g(a))}hasListeners(i){return!!this.listeners[i].length}registerWindowListener(i,a){this.windowListeners[a]={registered:!1,windowEventName:i,pluginEventName:a,handler:f=>{this.notifyListeners(a,f)}}}unimplemented(i="not implemented"){return new $.Exception(i,E.Unimplemented)}unavailable(i="not available"){return new $.Exception(i,E.Unavailable)}removeListener(i,a){var f=this;return(0,v.Z)(function*(){const g=f.listeners[i];if(!g)return;const d=g.indexOf(a);f.listeners[i].splice(d,1),f.listeners[i].length||f.removeWindowListener(f.windowListeners[i])})()}addWindowListener(i){window.addEventListener(i.windowEventName,i.handler),i.registered=!0}removeWindowListener(i){i&&(window.removeEventListener(i.windowEventName,i.handler),i.registered=!1)}}const J=c=>encodeURIComponent(c).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),oe=c=>c.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class le extends z{getCookies(){return(0,v.Z)(function*(){const i=document.cookie,a={};return i.split(";").forEach(f=>{if(f.length<=0)return;let[g,d]=f.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");g=oe(g).trim(),d=oe(d).trim(),a[g]=d}),a})()}setCookie(i){return(0,v.Z)(function*(){try{const a=J(i.key),f=J(i.value),g=`; expires=${(i.expires||"").replace("expires=","")}`,d=(i.path||"/").replace("path=",""),S=null!=i.url&&i.url.length>0?`domain=${i.url}`:"";document.cookie=`${a}=${f||""}${g}; path=${d}; ${S};`}catch(a){return Promise.reject(a)}})()}deleteCookie(i){return(0,v.Z)(function*(){try{document.cookie=`${i.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}})()}clearCookies(){return(0,v.Z)(function*(){try{const i=document.cookie.split(";")||[];for(const a of i)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(i){return Promise.reject(i)}})()}clearAllCookies(){var i=this;return(0,v.Z)(function*(){try{yield i.clearCookies()}catch(a){return Promise.reject(a)}})()}}ne("CapacitorCookies",{web:()=>new le});const ce=function(){var c=(0,v.Z)(function*(i){return new Promise((a,f)=>{const g=new FileReader;g.onload=()=>{const d=g.result;a(d.indexOf(",")>=0?d.split(",")[1]:d)},g.onerror=d=>f(d),g.readAsDataURL(i)})});return function(a){return c.apply(this,arguments)}}();class fe extends z{request(i){return(0,v.Z)(function*(){const a=((c,i={})=>{const a=Object.assign({method:c.method||"GET",headers:c.headers},i),g=((c={})=>{const i=Object.keys(c);return Object.keys(c).map(g=>g.toLocaleLowerCase()).reduce((g,d,S)=>(g[d]=c[i[S]],g),{})})(c.headers)["content-type"]||"";if("string"==typeof c.data)a.body=c.data;else if(g.includes("application/x-www-form-urlencoded")){const d=new URLSearchParams;for(const[S,p]of Object.entries(c.data||{}))d.set(S,p);a.body=d.toString()}else if(g.includes("multipart/form-data")||c.data instanceof FormData){const d=new FormData;if(c.data instanceof FormData)c.data.forEach((p,x)=>{d.append(x,p)});else for(const p of Object.keys(c.data))d.append(p,c.data[p]);a.body=d;const S=new Headers(a.headers);S.delete("content-type"),a.headers=S}else(g.includes("application/json")||"object"==typeof c.data)&&(a.body=JSON.stringify(c.data));return a})(i,i.webFetchExtra),f=((c,i=!0)=>c?Object.entries(c).reduce((f,g)=>{const[d,S]=g;let p,x;return Array.isArray(S)?(x="",S.forEach(A=>{p=i?encodeURIComponent(A):A,x+=`${d}=${p}&`}),x.slice(0,-1)):(p=i?encodeURIComponent(S):S,x=`${d}=${p}`),`${f}&${x}`},"").substr(1):null)(i.params,i.shouldEncodeUrlParams),g=f?`${i.url}?${f}`:i.url,d=yield fetch(g,a),S=d.headers.get("content-type")||"";let x,A,{responseType:p="text"}=d.ok?i:{};switch(S.includes("application/json")&&(p="json"),p){case"arraybuffer":case"blob":A=yield d.blob(),x=yield ce(A);break;case"json":x=yield d.json();break;default:x=yield d.text()}const V={};return d.headers.forEach((k,Q)=>{V[Q]=k}),{data:x,headers:V,status:d.status,url:d.url}})()}get(i){var a=this;return(0,v.Z)(function*(){return a.request(Object.assign(Object.assign({},i),{method:"GET"}))})()}post(i){var a=this;return(0,v.Z)(function*(){return a.request(Object.assign(Object.assign({},i),{method:"POST"}))})()}put(i){var a=this;return(0,v.Z)(function*(){return a.request(Object.assign(Object.assign({},i),{method:"PUT"}))})()}patch(i){var a=this;return(0,v.Z)(function*(){return a.request(Object.assign(Object.assign({},i),{method:"PATCH"}))})()}delete(i){var a=this;return(0,v.Z)(function*(){return a.request(Object.assign(Object.assign({},i),{method:"DELETE"}))})()}}ne("CapacitorHttp",{web:()=>new fe})},4132:(we,W,h)=>{h.d(W,{O:()=>j});var v=h(6895),L=h(9972),O=h(4650);function _(M,F){if(1&M&&(O.TgZ(0,"div",4),O._uU(1),O.qZA()),2&M){const E=O.oxw();O.xp6(1),O.Oqu(E.optionalMessage)}}let j=(()=>{class M{constructor(){this.optionalMessage="",this.spinnerType="lines-sharp"}ngOnInit(){}}return M.\u0275fac=function(E){return new(E||M)},M.\u0275cmp=O.Xpm({type:M,selectors:[["app-spinner"]],inputs:{optionalMessage:"optionalMessage",spinnerType:"spinnerType"},standalone:!0,features:[O.jDz],decls:5,vars:2,consts:[[1,"container","spinner"],["class","row mb-4","style","font-size : 40px",4,"ngIf"],[3,"name"],[1,"row"],[1,"row","mb-4",2,"font-size","40px"]],template:function(E,D){1&E&&(O.TgZ(0,"div",0)(1,"div"),O.YNc(2,_,2,1,"div",1),O._UZ(3,"ion-spinner",2)(4,"div",3),O.qZA()()),2&E&&(O.xp6(2),O.Q6J("ngIf",""!=D.optionalMessage),O.xp6(1),O.Q6J("name",D.spinnerType))},dependencies:[L.Pc,L.PQ,v.ez,v.O5]}),M})()},3879:(we,W,h)=>{h.r(W),h.d(W,{HomePage:()=>T});var v=h(5861),L=h(9972),O=h(4132),_=h(6895),j=h(4004),M=h(1884),F=h(3900),E=h(9646),D=h(9751),ee=h(7423);const te=(0,ee.fo)("Haptics",{web:()=>h.e(1613).then(h.bind(h,1613)).then(t=>new t.HapticsWeb)});var K=(()=>{return(t=K||(K={})).Aztec="AZTEC",t.Codabar="CODABAR",t.Code39="CODE_39",t.Code93="CODE_93",t.Code128="CODE_128",t.DataMatrix="DATA_MATRIX",t.Ean8="EAN_8",t.Ean13="EAN_13",t.Itf="ITF",t.Pdf417="PDF_417",t.QrCode="QR_CODE",t.UpcA="UPC_A",t.UpcE="UPC_E",K;var t})();const re=(0,ee.fo)("BarcodeScanner",{web:()=>h.e(5004).then(h.bind(h,5004)).then(t=>new t.BarcodeScannerWeb)}),z=[{id:"8c95def646b6127282ed50454b73240300dccabc",puntaje:10},{id:"ae338e4e0cbb4e4bcffaf9ce5b409feb8edd5172",puntaje:50},{id:"2786f4877b9091dcad7f35751bfcf5d5ea712b2f",puntaje:100}];var s=h(4650),J=h(3651),oe=h(6159),Ce=h(4968),ce={error:"cordova_not_available"},ue={error:"plugin_not_installed"};function H(t){if(typeof window<"u"&&window.angular){var e=window.document,r=window.angular.element(e.querySelector("[ng-app]")||e.body).injector();if(r)return r.get("$q")(function(l,u){t(l,u)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(l,u){t(l,u)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function i(t,n,e){var r,o;"string"==typeof t?r=t:(r=t.constructor.getPluginRef(),e=t.constructor.getPluginName(),o=t.constructor.getPluginInstallName());var l=S(r);return!(!l||n&&typeof l[n]>"u")||(typeof window>"u"||!window.cordova?(function A(t,n){typeof process>"u"&&console.warn(n?"Native: tried calling "+t+"."+n+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator":"Native: tried accessing the "+t+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator")}(e,n),ce):(function x(t,n,e){console.warn(e?"Native: tried calling "+t+"."+e+", but the "+t+" plugin is not installed.":"Native: tried accessing the "+t+" plugin but it's not installed."),n&&console.warn("Install the "+t+" plugin: 'ionic cordova plugin add "+n+"'")}(e,o,n),ue))}function g(t,n,e,r,o,l){void 0===r&&(r={}),e=function f(t,n,e,r){if(void 0===n&&(n={}),n.sync)return t;if("reverse"===n.callbackOrder)t.unshift(r),t.unshift(e);else if("node"===n.callbackStyle)t.push(function(y,w){y?r(y):e(w)});else if("object"===n.callbackStyle&&n.successName&&n.errorName){var o={};o[n.successName]=e,o[n.errorName]=r,t.push(o)}else if(typeof n.successIndex<"u"||typeof n.errorIndex<"u"){var l=function(){n.successIndex>t.length?t[n.successIndex]=e:t.splice(n.successIndex,0,e)},u=function(){n.errorIndex>t.length?t[n.errorIndex]=r:t.splice(n.errorIndex,0,r)};n.successIndex>n.errorIndex?(u(),l()):(l(),u())}else t.push(e),t.push(r);return t}(e,r,o,l);var u=i(t,n);if(!0===u){var y=S(t.constructor.getPluginRef());return y[n].apply(y,e)}return u}function S(t){return typeof window<"u"?p(window,t):null}function p(t,n){for(var e=n.split("."),r=t,o=0;o<e.length;o++){if(!r)return null;r=r[e[o]]}return r}var V=function(t,n,e){return void 0===e&&(e={}),function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e.sync?g(t,n,r,e):e.observable?function be(t,n,e,r){return void 0===r&&(r={}),new D.y(function(o){var l;return l=r.destruct?g(t,n,e,r,function(){for(var u=[],y=0;y<arguments.length;y++)u[y]=arguments[y];return o.next(u)},function(){for(var u=[],y=0;y<arguments.length;y++)u[y]=arguments[y];return o.error(u)}):g(t,n,e,r,o.next.bind(o),o.error.bind(o)),l&&l.error&&(o.error(l.error),o.complete()),function(){try{if(r.clearFunction)return r.clearWithArgs?g(t,r.clearFunction,e,r,o.next.bind(o),o.error.bind(o)):g(t,r.clearFunction,[])}catch(u){console.warn("Unable to clear the previous observable watch for",t.constructor.getPluginName(),n),console.warn(u)}}})}(t,n,r,e):e.eventObservable&&e.event?function c(t,n){return n=typeof window<"u"&&n?p(window,n):n||(typeof window<"u"?window:{}),(0,Ce.R)(n,t)}(e.event,e.element):e.otherPromise?function fe(t,n,e,r){return void 0===r&&(r={}),H(function(o,l){var u=g(t,n,e,r);u?u.error?l(u.error):u.then&&u.then(o).catch(l):l({error:"unexpected_error"})})}(t,n,r,e):function de(t,n,e,r){void 0===r&&(r={});var o,l,u=H(function(y,w){o=r.destruct?g(t,n,e,r,function(){for(var b=[],m=0;m<arguments.length;m++)b[m]=arguments[m];return y(b)},function(){for(var b=[],m=0;m<arguments.length;m++)b[m]=arguments[m];return w(b)}):g(t,n,e,r,y,w),l=w});return o&&o.error&&(u.catch(function(){}),"function"==typeof l&&l(o.error)),u}(t,n,r,e)}},ge=function(){function t(){}return t.installed=function(){return!0===i(this.pluginRef)},t.getPlugin=function(){return typeof window<"u"?function Q(t,n){for(var e=n.split("."),r=t,o=0;o<e.length;o++){if(!r)return null;r=r[e[o]]}return r}(window,this.pluginRef):null},t.getPluginName=function(){return this.pluginName},t.getPluginRef=function(){return this.pluginRef},t.getPluginInstallName=function(){return this.plugin},t.getSupportedPlatforms=function(){return this.platforms},t.pluginName="",t.pluginRef="",t.plugin="",t.repo="",t.platforms=[],t.install="",t}();function N(t,n,e,r){return V(t,n,e).apply(this,r)}!function le(){if(typeof process>"u"){var t=typeof window<"u"?window:{},e=Date.now(),r=!1;t.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-e)+" ms"),r=!0}),setTimeout(function(){!r&&t.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}();var t,he=(t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])})(n,e)},function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),me=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return he(n,t),n.prototype.preloadSimple=function(e,r){return N(this,"preloadSimple",{},arguments)},n.prototype.preloadComplex=function(e,r,o,l,u){return N(this,"preloadComplex",{},arguments)},n.prototype.play=function(e,r){return N(this,"play",{successIndex:1,errorIndex:2},arguments)},n.prototype.stop=function(e){return N(this,"stop",{},arguments)},n.prototype.loop=function(e){return N(this,"loop",{},arguments)},n.prototype.unload=function(e){return N(this,"unload",{},arguments)},n.prototype.setVolumeForComplexAsset=function(e,r){return N(this,"setVolumeForComplexAsset",{},arguments)},n.pluginName="NativeAudio",n.plugin="cordova-plugin-nativeaudio",n.pluginRef="plugins.NativeAudio",n.repo="https://github.com/floatinghotpot/cordova-plugin-nativeaudio",n.platforms=["Android","Browser","iOS"],n}(ge),P=new me;let I=(()=>{class t{constructor(){}preloadAudio(e,r){P.preloadSimple(e,r).then(()=>console.log("Audio is preloaded")).catch(o=>console.error("Error preloading audio",o))}playAudio(e){P.play(e).then(()=>console.log("Audio is playing")).catch(r=>console.error("Error playing audio",r))}unloadAudio(e){P.unload(e)}loadPlayAndUnload(e,r){P.preloadSimple(e,r).then(()=>{P.play(e,()=>P.unload(e)).catch(o=>console.error("Error playing audio",o))}).catch(o=>console.error("Error preloading audio",o))}loopComplexAudio(e,r,o,l){P.preloadComplex(e,r,o,1,0).then(()=>{P.loop(e),setTimeout(()=>{P.stop(e).catch(u=>console.log(1,u)),P.unload(e).catch(u=>console.log(2,u))},l)}).catch(u=>console.log(3,u))}stopAudio(e){P.stop(e).catch(()=>console.log("audio was not playing, id:",e))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var R=h(3726);class U{static constructUser(n){if(null!=n)return new R.n(n.email,n.nombre,n.apellido,n.edad,n.dni,n.imagenes,n.isAdmin,n.uid,n.typename,n.credits)}}var G=h(6805),Z=h(930);function Y(t,n){const e="object"==typeof n;return new Promise((r,o)=>{const l=new Z.Hp({next:u=>{r(u),l.unsubscribe()},error:o,complete:()=>{e?r(n.defaultValue):o(new G.K)}});t.subscribe(l)})}var ye=h(8445);let X=(()=>{class t{constructor(e){this.storage=e}uploadFile(e,r,o){var l=this;return(0,v.Z)(function*(){return yield(yield l.storage.upload(e,r,{customMetadata:o})).ref.getDownloadURL()})()}uploadBase64File(e,r,o){var l=this;return(0,v.Z)(function*(){return(yield l.storage.ref("rv_images/"+e+".png").putString(r,"base64",{contentType:"image/png"})).ref.getDownloadURL()})()}getFileRef(e){return Y(this.storage.ref(e).getDownloadURL())}deleteFile(e){this.storage.ref("rv_images/"+e+".png").delete()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(ye.Q1))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ae=h(1762);let se=(()=>{class t{constructor(e,r,o){this.fileService=e,this.auth=r,this._db=o,this.usuarios=this._db.collection("users")}uploadUserPhoto(e,r){var o=this;return(0,v.Z)(function*(){let l="",u=`${e.email.substring(0,e.email.lastIndexOf("@"))}_${Date.now()}`;try{l=yield o.fileService.uploadFile(u,r,{nombre:e.nombre})}catch(y){console.log(y)}return l})()}getUsuario(e){return this.usuarios.doc(e).get()}getUserAsObservable(e){return this.usuarios.doc(e).valueChanges()}getUsuarios(){return this.usuarios.valueChanges({idField:"uid"})}getCurrentUser(){return U.constructUser(JSON.parse(localStorage.getItem("user")))}getCurrentAuthData(){return U.constructUser(JSON.parse(localStorage.getItem("auth")))}getUserLogs(e){return this._db.collection("logs").doc(e).get()}cargarCredito(e,r){var o=this;return(0,v.Z)(function*(){let l=yield Y(o.usuarios.doc(r).get()),u=U.constructUser(l.data()),y=u.cargarCredito(e);return y&&o.usuarios.doc(r).update(JSON.parse(JSON.stringify(u))),y})()}borrarCreditos(e){var r=this;return(0,v.Z)(function*(){let o=yield Y(r.usuarios.doc(e).get()),l=U.constructUser(o.data());l.credits=[],r.usuarios.doc(e).update(JSON.parse(JSON.stringify(l)))})()}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(X),s.LFG(J.e),s.LFG(ae.ST))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Pe(t,n){if(1&t){const e=s.EpF();s.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"ion-button",6)(4,"div",7)(5,"h2"),s._uU(6,"CR\xc9DITO ACTUAL"),s.qZA(),s.TgZ(7,"p",8),s._uU(8),s.qZA()()()(),s.TgZ(9,"div",9)(10,"ion-button",10),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onBorrarCreditosBtnClicked())}),s.TgZ(11,"div")(12,"h4"),s._uU(13,"Borrar"),s.qZA(),s.TgZ(14,"h4"),s._uU(15,"Cr\xe9dito"),s.qZA()()()()(),s.TgZ(16,"div",11)(17,"div",12)(18,"ion-button",13),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onQrScanBtnClicked())}),s.TgZ(19,"div",14)(20,"h1",15),s._uU(21,"CARGAR"),s.qZA(),s._UZ(22,"br"),s.TgZ(23,"h1",16),s._uU(24,"CR\xc9DITO"),s.qZA(),s._UZ(25,"br")(26,"ion-icon",17),s.qZA()()()(),s.TgZ(27,"ion-fab",18)(28,"ion-fab-button",19),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.handleSignOut())}),s.TgZ(29,"p",20),s._uU(30,"SALIR"),s.qZA()()()()}if(2&t){const e=s.oxw();s.xp6(8),s.Oqu(e.animatedCounter)}}function q(t,n){1&t&&(s.TgZ(0,"div",21),s._UZ(1,"app-spinner",22),s.qZA()),2&t&&(s.xp6(1),s.Q6J("optionalMessage","Cerrando Sesi\xf3n"))}let T=(()=>{class t{constructor(e,r,o,l,u,y){this._auth=e,this._router=r,this._audioService=o,this.alertController=l,this.renderer=u,this._usersService=y,this.signingOut=!1,this.isSupported=!1,this.barcodes=[],this.animatedCounter=0,this._auth.afAuth.currentUser.then(w=>{this.userID=null==w?void 0:w.uid,this.user$=this._usersService.getUserAsObservable(null==w?void 0:w.uid),this.creditoTotal$=this.user$.pipe((0,j.U)(b=>b.credits.reduce((m,C)=>m+C.credito.puntaje*C.veces,0))),this.subscription=this.creditoTotal$.pipe((0,M.x)(),(0,F.w)(b=>this.animateCounter(this.animatedCounter,b))).subscribe(b=>this.animatedCounter=b)})}ngOnInit(){re.isSupported().then(e=>{this.isSupported=e.supported})}animateCounter(e,r){return e===r?(0,E.of)(r):new D.y(o=>{const l=Math.abs(r-e),u=r>e?1:-1,b=Math.max(10,40-Math.floor(l/4));let m=0;const C=setInterval(()=>{m+=1,this.animatedCounter=e+u*m,o.next(this.animatedCounter),m===l&&(clearInterval(C),o.complete())},b)})}onQrScanBtnClicked(){var e=this;return(0,v.Z)(function*(){e.scanCode()})()}scanCode(){var e=this;return(0,v.Z)(function*(){if(!(yield e.requestPermissions()))return void e.presentAlertPermisos();const{barcodes:o}=yield re.scan({formats:[K.QrCode]});e.barcodes.push(...o);let l=o[0].rawValue,u=z.find(y=>y.id.trim()===l.trim());null!=u?(yield e._usersService.cargarCredito(u,e.userID))||(e.presentAlertLimite("Admin"==e._usersService.getCurrentUser().typename?2:1),te.vibrate({duration:1e3})):(e.presentAlertCodeNotValid(),te.vibrate({duration:1e3}))})()}requestPermissions(){return(0,v.Z)(function*(){const{camera:e}=yield re.requestPermissions();return"granted"===e||"limited"===e})()}presentAlertPermisos(){var e=this;return(0,v.Z)(function*(){yield(yield e.alertController.create({header:"Permiso denegado",message:"Por favor permitirle a la aplicaci\xf3n el acceso a la c\xe1mara",buttons:["OK"],cssClass:"custom-alert"})).present()})()}presentAlertLimite(e){var r=this;return(0,v.Z)(function*(){yield(yield r.alertController.create({header:"L\xedmite excedido",message:`Ha llegado a la cantidad m\xe1xima permitida de cargas para este cr\xe9dito: ${e.toString()}`,buttons:["OK"],cssClass:"custom-alert-3"})).present()})()}presentAlertCodeNotValid(){var e=this;return(0,v.Z)(function*(){yield(yield e.alertController.create({header:"C\xf3digo QR no reconocido",message:"No hemos podido reconocer el c\xf3digo escaneado. Por favor intente nuevamente",buttons:["OK"],cssClass:"custom-alert-2"})).present()})()}onBorrarCreditosBtnClicked(){this.presentAlertConfirmarResetCreditos()}presentAlertConfirmarResetCreditos(){var e=this;return(0,v.Z)(function*(){yield(yield e.alertController.create({header:"\xbfEst\xe1 seguro que desea borrar sus cr\xe9ditos?",buttons:[{text:"No",role:"cancel",cssClass:"alert-button-cancel"},{text:"S\xed",role:"confirm",cssClass:"alert-button-confirm",handler:o=>{e._usersService.borrarCreditos(e.userID)}}],cssClass:"custom-alert",backdropDismiss:!0})).present()})()}handleSignOut(){var e=this;return(0,v.Z)(function*(){e.signingOut=!0,yield setTimeout(()=>{e._auth.SignOut().then(()=>{e.signingOut=!1,e._router.navigate(["login"])})},2e3)})()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(J.e),s.Y36(oe.F0),s.Y36(I),s.Y36(L.Br),s.Y36(s.Qsj),s.Y36(se))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-home"]],standalone:!0,features:[s.jDz],decls:4,vars:2,consts:[["id","main-content",1,"main"],["class","container",4,"ngIf","ngIfElse"],["spinner",""],[1,"container"],[1,"row","header-row"],[1,"col-8","h-100"],["color","warning",1,"h-100","w-100"],[1,"h-100","d-flex","flex-column","justify-content-center"],[2,"margin-bottom","0 !important","font-size","50px"],[1,"col-4","h-100",2,"padding-left","0 !important"],["color","danger",1,"h-100","w-100",3,"click"],[1,"row","content-row"],[1,"col-12",2,"padding","0"],["color","tertiary",1,"btn-alarma",3,"class","click"],[1,"text-container"],[2,"font-size","50px"],[1,"mb-5",2,"font-size","50px"],["name","qr-code-outline","size","large",1,"custom-big"],["slot","fixed","vertical","bottom","horizontal","start"],["color","secondary",1,"header",3,"click"],[2,"font-size","30px","margin-bottom","0"],[1,"signin"],[3,"optionalMessage"]],template:function(e,r){if(1&e&&(s.TgZ(0,"ion-content",0),s.YNc(1,Pe,31,1,"div",1),s.YNc(2,q,2,1,"ng-template",null,2,s.W1O),s.qZA()),2&e){const o=s.MAs(3);s.xp6(1),s.Q6J("ngIf",!r.signingOut)("ngIfElse",o)}},dependencies:[L.Pc,L.YG,L.W2,L.IJ,L.W4,L.gu,O.O,_.ez,_.O5],styles:["ion-img[_ngcontent-%COMP%]{object-fit:cover;max-height:100%}ion-img.alarma-apagada-img[_ngcontent-%COMP%]{padding:7vw;opacity:90%}ion-content.main[_ngcontent-%COMP%]{--overflow: hidden;--background: transparent !important;display:flex;justify-content:center;align-items:center;min-height:100vh}.divisor[_ngcontent-%COMP%]{background-color:#ffdd86}ion-fab-button.header[_ngcontent-%COMP%]{width:25vw!important;height:15vw!important;--border-radius: 20px !important;--border-color: black;--border-style: solid;--border-width: 2px}ion-button.btn-alarma[_ngcontent-%COMP%]{height:100%;width:-webkit-fill-available;margin:0}div.text-container[_ngcontent-%COMP%]{display:block}ion-icon.custom-big[_ngcontent-%COMP%]{height:62vw;width:62vw}div.container[_ngcontent-%COMP%]{height:100vh;padding-top:1vh;padding-bottom:1vh;display:flex;flex-direction:column;align-items:center}div.header-row[_ngcontent-%COMP%]{height:15%;padding-top:1vh}div.content-row[_ngcontent-%COMP%]{height:85%;padding-top:2vh;width:100%;padding-left:0!important;padding-right:0!important}div.yellow-container[_ngcontent-%COMP%]{background-color:var(--ion-color-warning)}"]}),t})()}}]);