(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(cn,at,$)=>{"use strict";$.d(at,{nm:()=>ae});var m=$(4976);$(4650),$(259);var Le=$(5861),Re=$(6881),Je=$(4859),mt=$(2090),Ye=$(1877);const ve=new Map,It={activated:!1,tokenObservers:[]},ze={initialized:!1,enabled:!1};function lt(ft){return ve.get(ft)||Object.assign({},It)}function Pt(){return ze}const Be="https://content-firebaseappcheck.googleapis.com/v1",Ke="exchangeDebugToken",qe={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Q{constructor(st,Tt,qt,en,or){if(this.operation=st,this.retryPolicy=Tt,this.getWaitDuration=qt,this.lowerBound=en,this.upperBound=or,this.pending=null,this.nextErrorWaitInterval=en,en>or)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(st){var Tt=this;return(0,Le.Z)(function*(){Tt.stop();try{Tt.pending=new mt.BH,yield function _t(ft){return new Promise(st=>{setTimeout(st,ft)})}(Tt.getNextRun(st)),Tt.pending.resolve(),yield Tt.pending.promise,Tt.pending=new mt.BH,yield Tt.operation(),Tt.pending.resolve(),yield Tt.pending.promise,Tt.process(!0).catch(()=>{})}catch(qt){Tt.retryPolicy(qt)?Tt.process(!1).catch(()=>{}):Tt.stop()}})()}getNextRun(st){if(st)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Tt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Tt}}}const zt=new mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function sn(ft,st){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,Le.Z)(function*({url:ft,body:st},Tt){const qt={"Content-Type":"application/json"},en=Tt.getImmediate({optional:!0});if(en){const qr=yield en.getHeartbeatsHeader();qr&&(qt["X-Firebase-Client"]=qr)}const or={method:"POST",body:JSON.stringify(st),headers:qt};let Yn,fr;try{Yn=yield fetch(ft,or)}catch(qr){throw zt.create("fetch-network-error",{originalErrorMessage:null==qr?void 0:qr.message})}if(200!==Yn.status)throw zt.create("fetch-status-error",{httpStatus:Yn.status});try{fr=yield Yn.json()}catch(qr){throw zt.create("fetch-parse-error",{originalErrorMessage:null==qr?void 0:qr.message})}const Qr=fr.ttl.match(/^([\d.]+)(s)$/);if(!Qr||!Qr[2]||isNaN(Number(Qr[1])))throw zt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${fr.ttl}`});const Cs=1e3*Number(Qr[1]),ks=Date.now();return{token:fr.token,expireTimeMillis:ks+Cs,issuedAtTimeMillis:ks}})).apply(this,arguments)}const tn="firebase-app-check-database",ir=1,Qt="firebase-app-check-store";let fn=null;function Tr(ft,st){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,Le.Z)(function*(ft,st){const qt=(yield function xn(){return fn||(fn=new Promise((ft,st)=>{try{const Tt=indexedDB.open(tn,ir);Tt.onsuccess=qt=>{ft(qt.target.result)},Tt.onerror=qt=>{var en;st(zt.create("storage-open",{originalErrorMessage:null===(en=qt.target.error)||void 0===en?void 0:en.message}))},Tt.onupgradeneeded=qt=>{0===qt.oldVersion&&qt.target.result.createObjectStore(Qt,{keyPath:"compositeKey"})}}catch(Tt){st(zt.create("storage-open",{originalErrorMessage:null==Tt?void 0:Tt.message}))}}),fn)}()).transaction(Qt,"readwrite"),or=qt.objectStore(Qt).put({compositeKey:ft,value:st});return new Promise((Yn,fr)=>{or.onsuccess=Qr=>{Yn()},qt.onerror=Qr=>{var Cs;fr(zt.create("storage-set",{originalErrorMessage:null===(Cs=Qr.target.error)||void 0===Cs?void 0:Cs.message}))}})})).apply(this,arguments)}const oi=new Ye.Yd("@firebase/app-check");function pr(ft,st){return(0,mt.hl)()?function Cr(ft,st){return Tr(function vr(ft){return`${ft.options.appId}-${ft.name}`}(ft),st)}(ft,st).catch(Tt=>{oi.warn(`Failed to write token to IndexedDB. Error: ${Tt}`)}):Promise.resolve()}function rr(){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,Le.Z)(function*(){const ft=Pt();if(ft.enabled&&ft.token)return ft.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ai={error:"UNKNOWN_ERROR"};function ei(ft){return mt.US.encodeString(JSON.stringify(ft),!1)}function li(ft){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,Le.Z)(function*(ft,st=!1){const Tt=ft.app;!function Et(ft){if(!lt(ft).activated)throw zt.create("use-before-activation",{appName:ft.name})}(Tt);const qt=lt(Tt);let or,en=qt.token;if(en&&!ue(en)&&(qt.token=void 0,en=void 0),!en){const Qr=yield qt.cachedTokenPromise;Qr&&(ue(Qr)?en=Qr:yield pr(Tt,void 0))}if(!st&&en&&ue(en))return{token:en.token};let fr,Yn=!1;if(function vi(){return Pt().enabled}()){qt.exchangeTokenPromise||(qt.exchangeTokenPromise=sn(function wn(ft,st){const{projectId:Tt,appId:qt,apiKey:en}=ft.options;return{url:`${Be}/projects/${Tt}/apps/${qt}:${Ke}?key=${en}`,body:{debug_token:st}}}(Tt,yield rr()),ft.heartbeatServiceProvider).finally(()=>{qt.exchangeTokenPromise=void 0}),Yn=!0);const Qr=yield qt.exchangeTokenPromise;return yield pr(Tt,Qr),qt.token=Qr,{token:Qr.token}}try{qt.exchangeTokenPromise||(qt.exchangeTokenPromise=qt.provider.getToken().finally(()=>{qt.exchangeTokenPromise=void 0}),Yn=!0),en=yield lt(Tt).exchangeTokenPromise}catch(Qr){"appCheck/throttled"===Qr.code?oi.warn(Qr.message):oi.error(Qr),or=Qr}return en?or?fr=ue(en)?{token:en.token,internalError:or}:ot(or):(fr={token:en.token},qt.token=en,yield pr(Tt,en)):fr=ot(or),Yn&&function Ee(ft,st){const Tt=lt(ft).tokenObservers;for(const qt of Tt)try{"EXTERNAL"===qt.type&&null!=st.error?qt.error(st.error):qt.next(st)}catch{}}(Tt,fr),fr})).apply(this,arguments)}function Qe(ft,st){const Tt=lt(ft),qt=Tt.tokenObservers.filter(en=>en.next!==st);0===qt.length&&Tt.tokenRefresher&&Tt.tokenRefresher.isRunning()&&Tt.tokenRefresher.stop(),Tt.tokenObservers=qt}function He(ft){const{app:st}=ft,Tt=lt(st);let qt=Tt.tokenRefresher;qt||(qt=function ce(ft){const{app:st}=ft;return new Q((0,Le.Z)(function*(){let qt;if(qt=lt(st).token?yield li(ft,!0):yield li(ft),qt.error)throw qt.error;if(qt.internalError)throw qt.internalError}),()=>!0,()=>{const Tt=lt(st);if(Tt.token){let qt=Tt.token.issuedAtTimeMillis+.5*(Tt.token.expireTimeMillis-Tt.token.issuedAtTimeMillis)+3e5;return qt=Math.min(qt,Tt.token.expireTimeMillis-3e5),Math.max(0,qt-Date.now())}return 0},qe.RETRIAL_MIN_WAIT,qe.RETRIAL_MAX_WAIT)}(ft),Tt.tokenRefresher=qt),!qt.isRunning()&&Tt.isTokenAutoRefreshEnabled&&qt.start()}function ue(ft){return ft.expireTimeMillis-Date.now()>0}function ot(ft){return{token:ei(ai),error:ft}}class Oe{constructor(st,Tt){this.app=st,this.heartbeatServiceProvider=Tt}_delete(){const{tokenObservers:st}=lt(this.app);for(const Tt of st)Qe(this.app,Tt.next);return Promise.resolve()}}const Ei="app-check-internal";!function mi(){(0,Re._registerComponent)(new Je.wA("app-check",ft=>function Ve(ft,st){return new Oe(ft,st)}(ft.getProvider("app").getImmediate(),ft.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ft,st,Tt)=>{ft.getProvider(Ei).initialize()})),(0,Re._registerComponent)(new Je.wA(Ei,ft=>function we(ft){return{getToken:st=>li(ft,st),addTokenListener:st=>function Kr(ft,st,Tt,qt){const{app:en}=ft,or=lt(en);if(or.tokenObservers=[...or.tokenObservers,{next:Tt,error:qt,type:st}],or.token&&ue(or.token)){const fr=or.token;Promise.resolve().then(()=>{Tt({token:fr.token}),He(ft)}).catch(()=>{})}or.cachedTokenPromise.then(()=>He(ft))}(ft,"INTERNAL",st),removeTokenListener:st=>Qe(ft.app,st)}}(ft.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)("@firebase/app-check","0.7.0")}();class ae{constructor(){return(0,m.vb)("app-check")}}typeof window<"u"&&window},1205:(cn,at,$)=>{"use strict";$.d(at,{zQ:()=>Be,ww:()=>At,rT:()=>ze,f7:()=>xt,L6:()=>ve,_Q:()=>It,lh:()=>lt,Qv:()=>Ye,nw:()=>Pt});var m=$(4650),g=$(7579),Y=$(9646),ie=$(9751),Pe=$(8996),Ae=$(6451),fe=$(5363),de=$(3900),Fe=$(4004),De=$(6063);class he extends g.x{constructor(Ke=1/0,qe=1/0,We=De.l){super(),this._bufferSize=Ke,this._windowTime=qe,this._timestampProvider=We,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=qe===1/0,this._bufferSize=Math.max(1,Ke),this._windowTime=Math.max(1,qe)}next(Ke){const{isStopped:qe,_buffer:We,_infiniteTimeWindow:Q,_timestampProvider:_t,_windowTime:Dt}=this;qe||(We.push(Ke),!Q&&We.push(_t.now()+Dt)),this._trimBuffer(),super.next(Ke)}_subscribe(Ke){this._throwIfClosed(),this._trimBuffer();const qe=this._innerSubscribe(Ke),{_infiniteTimeWindow:We,_buffer:Q}=this,_t=Q.slice();for(let Dt=0;Dt<_t.length&&!Ke.closed;Dt+=We?1:2)Ke.next(_t[Dt]);return this._checkFinalizedStatuses(Ke),qe}_trimBuffer(){const{_bufferSize:Ke,_timestampProvider:qe,_buffer:We,_infiniteTimeWindow:Q}=this,_t=(Q?1:2)*Ke;if(Ke<1/0&&_t<We.length&&We.splice(0,We.length-_t),!Q){const Dt=qe.now();let zt=0;for(let un=1;un<We.length&&We[un]<=Dt;un+=2)zt=un;zt&&We.splice(0,zt+1)}}}var be=$(3099);function Ne(vt,Ke,qe){let We,Q=!1;return vt&&"object"==typeof vt?({bufferSize:We=1/0,windowTime:Ke=1/0,refCount:Q=!1,scheduler:qe}=vt):We=null!=vt?vt:1/0,(0,be.B)({connector:()=>new he(We,Ke,qe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Q})}var je=$(590),Ue=$(576);function Xe(vt,Ke){return(0,Ue.m)(Ke)?(0,de.w)(()=>vt,Ke):(0,de.w)(()=>vt)}var Me=$(9468),Se=$(9300),oe=$(4976),et=$(2011),Le=$(6895),Re=$(6217),Je=$(9260);const Ye=new m.OlP("angularfire2.auth.use-emulator"),ve=new m.OlP("angularfire2.auth.settings"),It=new m.OlP("angularfire2.auth.tenant-id"),ze=new m.OlP("angularfire2.auth.langugage-code"),lt=new m.OlP("angularfire2.auth.use-device-language"),xt=new m.OlP("angularfire.auth.persistence"),Pt=(vt,Ke,qe,We,Q,_t,Dt,zt)=>(0,et.cc)(`${vt.name}.auth`,"AngularFireAuth",vt.name,()=>{const un=Ke.runOutsideAngular(()=>vt.auth());if(qe&&un.useEmulator(...qe),We&&(un.tenantId=We),un.languageCode=Q,_t&&un.useDeviceLanguage(),Dt)for(const[Et,ut]of Object.entries(Dt))un.settings[Et]=ut;return zt&&un.setPersistence(zt),un},[qe,We,Q,_t,Dt,zt]);let Be=(()=>{class vt{constructor(qe,We,Q,_t,Dt,zt,un,Et,ut,Ot,sn,Cn){const zn=new g.x,hn=(0,Y.of)(void 0).pipe((0,fe.Q)(Dt.outsideAngular),(0,de.w)(()=>_t.runOutsideAngular(()=>Promise.resolve().then($.bind($,9568)))),(0,Fe.U)(()=>(0,et.on)(qe,_t,We)),(0,Fe.U)(wn=>Pt(wn,_t,zt,Et,ut,Ot,un,sn)),Ne({bufferSize:1,refCount:!1}));if((0,Le.PM)(Q))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Y.of)(null);else{hn.pipe((0,je.P)()).subscribe();const tn=hn.pipe((0,de.w)(jn=>jn.getRedirectResult().then(fn=>fn,()=>null)),oe.iC,Ne({bufferSize:1,refCount:!1})),ir=hn.pipe((0,de.w)(jn=>new ie.y(fn=>({unsubscribe:_t.runOutsideAngular(()=>jn.onAuthStateChanged(xn=>fn.next(xn),xn=>fn.error(xn),()=>fn.complete()))})))),Qt=hn.pipe((0,de.w)(jn=>new ie.y(fn=>({unsubscribe:_t.runOutsideAngular(()=>jn.onIdTokenChanged(xn=>fn.next(xn),xn=>fn.error(xn),()=>fn.complete()))}))));this.authState=tn.pipe(Xe(ir),(0,Me.R)(Dt.outsideAngular),(0,fe.Q)(Dt.insideAngular)),this.user=tn.pipe(Xe(Qt),(0,Me.R)(Dt.outsideAngular),(0,fe.Q)(Dt.insideAngular)),this.idToken=this.user.pipe((0,de.w)(jn=>jn?(0,Pe.D)(jn.getIdToken()):(0,Y.of)(null))),this.idTokenResult=this.user.pipe((0,de.w)(jn=>jn?(0,Pe.D)(jn.getIdTokenResult()):(0,Y.of)(null))),this.credential=(0,Ae.T)(tn,zn,this.authState.pipe((0,Se.h)(jn=>!jn))).pipe((0,Fe.U)(jn=>null!=jn&&jn.user?jn:null),(0,Me.R)(Dt.outsideAngular),(0,fe.Q)(Dt.insideAngular))}return(0,et.pX)(this,hn,_t,{spy:{apply:(wn,tn,ir)=>{(wn.startsWith("signIn")||wn.startsWith("createUser"))&&ir.then(Qt=>zn.next(Qt))}}})}}return vt.\u0275fac=function(qe){return new(qe||vt)(m.LFG(et.Dh),m.LFG(et.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(oe.HU),m.LFG(Ye,8),m.LFG(ve,8),m.LFG(It,8),m.LFG(ze,8),m.LFG(lt,8),m.LFG(xt,8),m.LFG(Re.nm,8))},vt.\u0275prov=m.Yz7({token:vt,factory:vt.\u0275fac,providedIn:"any"}),vt})(),At=(()=>{class vt{constructor(){Je.Z.registerVersion("angularfire",oe.q4.full,"auth-compat")}}return vt.\u0275fac=function(qe){return new(qe||vt)},vt.\u0275mod=m.oAB({type:vt}),vt.\u0275inj=m.cJS({providers:[Be]}),vt})()},1762:(cn,at,$)=>{"use strict";$.d(at,{ST:()=>Sp,yb:()=>fv});var m=$(4650),g=$(4986),Y=$(9751),ie=$(8996),Pe=$(9646),Ae=$(4976),fe=$(8675),de=$(4482),Fe=$(5403);function De(){return(0,de.e)((r,e)=>{let t,s=!1;r.subscribe((0,Fe.x)(e,c=>{const p=t;t=c,s&&e.next([p,c]),s=!0}))})}var ve,he=$(4004),be=$(5026),Ne=$(1884),je=$(9300),Ue=$(2011),Xe=$(6895),Se=($(9568),$(3942)),oe=$(5861),et=$(6881),Le=$(4859),Re=$(1877),Je=$(2090),mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ye={},It=It||{},ze=mt||self;function lt(){}function xt(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function Pt(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var At="closure_uid_"+(1e9*Math.random()>>>0),vt=0;function Ke(r,e,t){return r.call.apply(r.bind,arguments)}function qe(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,s),r.apply(e,c)}}return function(){return r.apply(e,arguments)}}function We(r,e,t){return(We=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ke:qe).apply(null,arguments)}function Q(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function _t(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,c,p){for(var E=Array(arguments.length-2),F=2;F<arguments.length;F++)E[F-2]=arguments[F];return e.prototype[c].apply(s,E)}}function Dt(){this.s=this.s,this.o=this.o}Dt.prototype.s=!1,Dt.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function Be(r){Object.prototype.hasOwnProperty.call(r,At)&&r[At]||(r[At]=++vt)}(this)},Dt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const un=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Et(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function ut(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(xt(s)){const c=r.length||0,p=s.length||0;r.length=c+p;for(let E=0;E<p;E++)r[c+E]=s[E]}else r.push(s)}}function Ot(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}Ot.prototype.h=function(){this.defaultPrevented=!0};var sn=function(){if(!ze.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{ze.addEventListener("test",lt,e),ze.removeEventListener("test",lt,e)}catch{}return r}();function Cn(r){return/^[\s\xa0]*$/.test(r)}var zn=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function hn(r,e){return r<e?-1:r>e?1:0}function wn(){var r=ze.navigator;return r&&(r=r.userAgent)?r:""}function tn(r){return-1!=wn().indexOf(r)}function ir(r){return ir[" "](r),r}function Qt(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}ir[" "]=lt;var Tr,r,jn=tn("Opera"),fn=tn("Trident")||tn("MSIE"),xn=tn("Edge"),Di=xn||fn,Cr=tn("Gecko")&&!(-1!=wn().toLowerCase().indexOf("webkit")&&!tn("Edge"))&&!(tn("Trident")||tn("MSIE"))&&!tn("Edge"),Hr=-1!=wn().toLowerCase().indexOf("webkit")&&!tn("Edge");function Ur(){var r=ze.document;return r?r.documentMode:void 0}e:{var Qn="",bn=(r=wn(),Cr?/rv:([^\);]+)(\)|;)/.exec(r):xn?/Edge\/([\d\.]+)/.exec(r):fn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Hr?/WebKit\/(\S+)/.exec(r):jn?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(bn&&(Qn=bn?bn[1]:""),fn){var on=Ur();if(null!=on&&on>parseFloat(Qn)){Tr=String(on);break e}}Tr=Qn}var vr={},pr=ze.document&&fn&&(Ur()||parseInt(Tr,10))||void 0;function ii(r,e){if(Ot.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Cr){e:{try{ir(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Gn[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&ii.$.h.call(this)}}_t(ii,Ot);var Gn={2:"touch",3:"pen",4:"mouse"};ii.prototype.h=function(){ii.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var vi="closure_listenable_"+(1e6*Math.random()|0),rr=0;function Pi(r,e,t,s,c){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=c,this.key=++rr,this.fa=this.ia=!1}function Xn(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function ai(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function ei(r){const e={};for(const t in r)e[t]=r[t];return e}const li="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nr(r,e){let t,s;for(let c=1;c<arguments.length;c++){for(t in s=arguments[c],s)r[t]=s[t];for(let p=0;p<li.length;p++)t=li[p],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function si(r){this.src=r,this.g={},this.h=0}function Zr(r,e){var t=e.type;if(t in r.g){var p,s=r.g[t],c=un(s,e);(p=0<=c)&&Array.prototype.splice.call(s,c,1),p&&(Xn(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function Kr(r,e,t,s){for(var c=0;c<r.length;++c){var p=r[c];if(!p.fa&&p.listener==e&&p.capture==!!t&&p.la==s)return c}return-1}si.prototype.add=function(r,e,t,s,c){var p=r.toString();(r=this.g[p])||(r=this.g[p]=[],this.h++);var E=Kr(r,e,s,c);return-1<E?(e=r[E],t||(e.ia=!1)):((e=new Pi(e,this.src,p,!!s,c)).ia=t,r.push(e)),e};var Qe="closure_lm_"+(1e6*Math.random()|0),He={};function ce(r,e,t,s,c){if(s&&s.once)return ot(r,e,t,s,c);if(Array.isArray(e)){for(var p=0;p<e.length;p++)ce(r,e[p],t,s,c);return null}return t=Dn(t),r&&r[vi]?r.O(e,t,Pt(s)?!!s.capture:!!s,c):Ee(r,e,t,!1,s,c)}function Ee(r,e,t,s,c,p){if(!e)throw Error("Invalid event type");var E=Pt(c)?!!c.capture:!!c,F=Rt(r);if(F||(r[Qe]=F=new si(r)),(t=F.add(e,t,s,E,p)).proxy)return t;if(s=function ue(){const e=rt;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)sn||(c=E),void 0===c&&(c=!1),r.addEventListener(e.toString(),s,c);else if(r.attachEvent)r.attachEvent(we(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function ot(r,e,t,s,c){if(Array.isArray(e)){for(var p=0;p<e.length;p++)ot(r,e[p],t,s,c);return null}return t=Dn(t),r&&r[vi]?r.P(e,t,Pt(s)?!!s.capture:!!s,c):Ee(r,e,t,!0,s,c)}function Oe(r,e,t,s,c){if(Array.isArray(e))for(var p=0;p<e.length;p++)Oe(r,e[p],t,s,c);else s=Pt(s)?!!s.capture:!!s,t=Dn(t),r&&r[vi]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=Kr(p=r.g[e],t,s,c))&&(Xn(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete r.g[e],r.h--))):r&&(r=Rt(r))&&(e=r.g[e.toString()],r=-1,e&&(r=Kr(e,t,s,c)),(t=-1<r?e[r]:null)&&Ve(t))}function Ve(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[vi])Zr(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(we(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Rt(e))?(Zr(t,r),0==t.h&&(t.src=null,e[Qe]=null)):Xn(r)}}}function we(r){return r in He?He[r]:He[r]="on"+r}function rt(r,e){if(r.fa)r=!0;else{e=new ii(e,this);var t=r.listener,s=r.la||r.src;r.ia&&Ve(r),r=t.call(s,e)}return r}function Rt(r){return(r=r[Qe])instanceof si?r:null}var Yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dn(r){return"function"==typeof r?r:(r[Yt]||(r[Yt]=function(e){return r.handleEvent(e)}),r[Yt])}function _n(){Dt.call(this),this.i=new si(this),this.S=this,this.J=null}function Jn(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new Ot(e,r);else if(e instanceof Ot)e.target=e.target||r;else{var c=e;Nr(e=new Ot(s,r),c)}if(c=!0,t)for(var p=t.length-1;0<=p;p--){var E=e.g=t[p];c=kr(E,s,!0,e)&&c}if(c=kr(E=e.g=r,s,!0,e)&&c,c=kr(E,s,!1,e)&&c,t)for(p=0;p<t.length;p++)c=kr(E=e.g=t[p],s,!1,e)&&c}function kr(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,p=0;p<e.length;++p){var E=e[p];if(E&&!E.fa&&E.capture==t){var F=E.listener,K=E.la||E.src;E.ia&&Zr(r.i,E),c=!1!==F.call(K,s)&&c}}return c&&!s.defaultPrevented}_t(_n,Dt),_n.prototype[vi]=!0,_n.prototype.removeEventListener=function(r,e,t,s){Oe(this,r,e,t,s)},_n.prototype.N=function(){if(_n.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)Xn(t[s]);delete r.g[e],r.h--}}this.J=null},_n.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},_n.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var kt=ze.JSON.stringify;function Mt(){var r=ur;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Lr,Pn=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new Kn,r=>r.reset());class Kn{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function cr(r){ze.setTimeout(()=>{throw r},0)}function Mn(r,e){Lr||function Er(){var r=ze.Promise.resolve(void 0);Lr=function(){r.then(Qs)}}(),lr||(Lr(),lr=!0),ur.add(r,e)}var lr=!1,ur=new class nn{constructor(){this.h=this.g=null}add(e,t){const s=Pn.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Qs(){for(var r;r=Mt();){try{r.h.call(r.g)}catch(t){cr(t)}var e=Pn;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}lr=!1}function fs(r,e){_n.call(this),this.h=r||1,this.g=e||ze,this.j=We(this.qb,this),this.l=Date.now()}function ps(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function Oi(r,e,t){if("function"==typeof r)t&&(r=We(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=We(r.handleEvent,r)}return 2147483647<Number(e)?-1:ze.setTimeout(r,e||0)}function vn(r){r.g=Oi(()=>{r.g=null,r.i&&(r.i=!1,vn(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}_t(fs,_n),(ve=fs.prototype).ga=!1,ve.T=null,ve.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Jn(this,"tick"),this.ga&&(ps(this),this.start()))}},ve.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ve.N=function(){fs.$.N.call(this),ps(this),delete this.g};class hr extends Dt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vn(this)}N(){super.N(),this.g&&(ze.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gi(r){Dt.call(this),this.h=r,this.g={}}_t(gi,Dt);var Fr=[];function Ei(r,e,t,s){Array.isArray(t)||(t&&(Fr[0]=t.toString()),t=Fr);for(var c=0;c<t.length;c++){var p=ce(e,t[c],s||r.handleEvent,!1,r.h||r);if(!p)break;r.g[p.key]=p}}function mi(r){ai(r.g,function(e,t){this.g.hasOwnProperty(t)&&Ve(e)},r),r.g={}}function Wi(){this.g=!0}function xe(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Te(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var c=s[1];if(Array.isArray(c)&&!(1>c.length)){var p=c[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var E=1;E<c.length;E++)c[E]=""}}}return kt(t)}catch{return e}}(r,t)+(s?" "+s:"")})}gi.prototype.N=function(){gi.$.N.call(this),mi(this)},gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wi.prototype.Ea=function(){this.g=!1},Wi.prototype.info=function(){};var tt={},nt=null;function Nt(){return nt=nt||new _n}function $t(r){Ot.call(this,tt.Ta,r)}function Kt(r){const e=Nt();Jn(e,new $t(e))}function Jt(r,e){Ot.call(this,tt.STAT_EVENT,r),this.stat=e}function mn(r){const e=Nt();Jn(e,new Jt(e,r))}function qn(r,e){Ot.call(this,tt.Ua,r),this.size=e}function Ln(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return ze.setTimeout(function(){r()},e)}tt.Ta="serverreachability",_t($t,Ot),tt.STAT_EVENT="statevent",_t(Jt,Ot),tt.Ua="timingevent",_t(qn,Ot);var sr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ji={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zi(){}function st(){}Zi.prototype.h=null;var or,Tt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qt(){Ot.call(this,"d")}function en(){Ot.call(this,"c")}function Yn(){}function fr(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new gi(this),this.P=Cs,this.V=new fs(r=Di?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Qr}function Qr(){this.i=null,this.g="",this.h=!1}_t(qt,Ot),_t(en,Ot),_t(Yn,Zi),Yn.prototype.g=function(){return new XMLHttpRequest},Yn.prototype.i=function(){return{}},or=new Yn;var Cs=45e3,ks={},qr={};function zr(r,e,t){r.L=1,r.v=Co(vo(e)),r.s=t,r.S=!0,Gr(r,null)}function Gr(r,e){r.G=Date.now(),Xs(r),r.A=vo(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),Ti(t.i,"t",s),r.C=0,t=r.l.I,r.h=new Qr,r.g=Kl(r.l,t?e:null,!r.s),0<r.O&&(r.M=new hr(We(r.Pa,r,r.g),r.O)),Ei(r.U,r.g,"readystatechange",r.nb),e=r.I?ei(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),Kt(),function wr(r,e,t,s,c,p){r.info(function(){if(r.g)if(p)for(var E="",F=p.split("&"),K=0;K<F.length;K++){var te=F[K].split("=");if(1<te.length){var me=te[0];te=te[1];var it=me.split("_");E=2<=it.length&&"type"==it[1]?E+(me+"=")+te+"&":E+(me+"=redacted&")}}else E=null;else E=p;return"XMLHTTP REQ ("+s+") [attempt "+c+"]: "+e+"\n"+t+"\n"+E})}(r.j,r.u,r.A,r.m,r.W,r.s)}function Br(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function Ki(r,e,t){let c,s=!0;for(;!r.J&&r.C<t.length;){if(c=Ni(r,t),c==qr){4==e&&(r.o=4,mn(14),s=!1),xe(r.j,r.m,null,"[Incomplete Response]");break}if(c==ks){r.o=4,mn(15),xe(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}xe(r.j,r.m,c,null),xr(r,c)}Br(r)&&c!=qr&&c!=ks&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,mn(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),va(e),e.L=!0,mn(11))):(xe(r.j,r.m,t,"[Invalid Chunked Response]"),ci(r),Oo(r))}function Ni(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?qr:(t=Number(e.substring(t,s)),isNaN(t)?ks:(s+=1)+t>e.length?qr:(e=e.substr(s,t),r.C=s+t,e))}function Xs(r){r.Y=Date.now()+r.P,_o(r,r.P)}function _o(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=Ln(We(r.lb,r),e)}function Vs(r){r.B&&(ze.clearTimeout(r.B),r.B=null)}function Oo(r){0==r.l.H||r.J||Ea(r.l,r)}function ci(r){Vs(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,ps(r.V),mi(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function xr(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||A(t.h,r)))if(!r.K&&A(t.h,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var c=s;if(0==c[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;Xa(t),ma(t)}Sa(t),mn(18)}}else t.Fa=c[1],0<t.Fa-t.V&&37500>c[2]&&t.M&&0==t.A&&!t.v&&(t.v=Ln(We(t.ib,t),6e3));if(1>=Z(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Wo(t,11)}else if((r.K||t.g==r)&&Xa(t),!Cn(e))for(c=t.Ja.g.parse(e),e=0;e<c.length;e++){let te=c[e];if(t.V=te[0],te=te[1],2==t.H)if("c"==te[0]){t.J=te[1],t.oa=te[2];const me=te[3];null!=me&&(t.qa=me,t.j.info("VER="+t.qa));const it=te[4];null!=it&&(t.Ga=it,t.j.info("SVER="+t.Ga));const Ft=te[5];null!=Ft&&"number"==typeof Ft&&0<Ft&&(t.K=s=1.5*Ft,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const rn=r.g;if(rn){const Sn=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sn){var p=s.h;p.g||-1==Sn.indexOf("spdy")&&-1==Sn.indexOf("quic")&&-1==Sn.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(q(p,p.h),p.h=null))}if(s.F){const kn=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;kn&&(s.Da=kn,ui(s.G,s.F,kn))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var E=r;if((s=t).wa=yl(s,s.I?s.oa:null,s.Y),E.K){Ie(s.h,E);var F=E,K=s.K;K&&F.setTimeout(K),F.B&&(Vs(F),Xs(F)),s.g=E}else _a(s);0<t.i.length&&pl(t)}else"stop"!=te[0]&&"close"!=te[0]||Wo(t,7);else 3==t.H&&("stop"==te[0]||"close"==te[0]?"stop"==te[0]?Wo(t,7):Rs(t):"noop"!=te[0]&&t.l&&t.l.Aa(te),t.A=0)}Kt()}catch{}}function xs(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(xt(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function pa(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(xt(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function Ds(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(xt(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),c=s.length,p=0;p<c;p++)e.call(void 0,s[p],t&&t[p],r)}(ve=fr.prototype).setTimeout=function(r){this.P=r},ve.nb=function(r){r=r.target;const e=this.M;e&&3==Hi(r)?e.l():this.Pa(r)},ve.Pa=function(r){try{if(r==this.g)e:{const me=Hi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>me)&&(3!=me||Di||this.g&&(this.h.h||this.g.ja()||Xi(this.g)))){this.J||4!=me||7==e||Kt(),Vs(this);var t=this.g.da();this.aa=t;t:if(Br(this)){var s=Xi(this.g);r="";var c=s.length,p=4==Hi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ci(this),Oo(this);var E="";break t}this.h.i=new ze.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:p&&e==c-1});s.splice(0,c),this.h.g+=r,this.C=0,E=this.h.g}else E=this.g.ja();if(this.i=200==t,function ae(r,e,t,s,c,p,E){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+p+" "+E})}(this.j,this.u,this.A,this.m,this.W,me,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var F,K=this.g;if((F=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cn(F)){var te=F;break t}}te=null}if(!(t=te)){this.i=!1,this.o=3,mn(12),ci(this),Oo(this);break e}xe(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xr(this,t)}this.S?(Ki(this,me,E),Di&&this.i&&3==me&&(Ei(this.U,this.V,"tick",this.mb),this.V.start())):(xe(this.j,this.m,E,null),xr(this,E)),4==me&&ci(this),this.i&&!this.J&&(4==me?Ea(this.l,this):(this.i=!1,Xs(this)))}else 400==t&&0<E.indexOf("Unknown SID")?(this.o=3,mn(12)):(this.o=0,mn(13)),ci(this),Oo(this)}}}catch{}},ve.mb=function(){if(this.g){var r=Hi(this.g),e=this.g.ja();this.C<e.length&&(Vs(this),Ki(this,r,e),this.i&&4!=r&&Xs(this))}},ve.cancel=function(){this.J=!0,ci(this)},ve.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Ze(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Kt(),mn(17)),ci(this),this.o=2,Oo(this)):_o(this,this.Y-r)};var qi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ts(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Ts){this.h=void 0!==e?e:r.h,js(this,r.j),this.s=r.s,this.g=r.g,Qi(this,r.m),this.l=r.l,e=r.i;var t=new As;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ss(this,t),this.o=r.o}else r&&(t=String(r).match(qi))?(this.h=!!e,js(this,t[1]||"",!0),this.s=Js(t[2]||""),this.g=Js(t[3]||"",!0),Qi(this,t[4]),this.l=Js(t[5]||"",!0),Ss(this,t[6]||"",!0),this.o=Js(t[7]||"")):(this.h=!!e,this.i=new As(null,this.h))}function vo(r){return new Ts(r)}function js(r,e,t){r.j=t?Js(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Qi(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function Ss(r,e,t){e instanceof As?(r.i=e,function ls(r,e){e&&!r.j&&(wi(r),r.i=null,r.g.forEach(function(t,s){var c=s.toLowerCase();s!=c&&(ws(this,s),Ti(this,c,t))},r)),r.j=e}(r.i,r.h)):(t||(e=Do(e,Vr)),r.i=new As(e,r.h))}function ui(r,e,t){r.i.set(e,t)}function Co(r){return ui(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Js(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Do(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,Qa),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Qa(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Ts.prototype.toString=function(){var r=[],e=this.j;e&&r.push(Do(e,No,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(Do(e,No,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(Do(t,"/"==t.charAt(0)?eo:ko,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",Do(t,gs)),r.join("")};var No=/[#\/\?@]/g,ko=/[#\?:]/g,eo=/[#\?]/g,Vr=/[#\?@]/g,gs=/#/g;function As(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function wi(r){r.g||(r.g=new Map,r.h=0,r.i&&function Ba(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),c=null;if(0<=s){var p=r[t].substring(0,s);c=r[t].substring(s+1)}else p=r[t];e(p,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ws(r,e){wi(r),e=_s(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function is(r,e){return wi(r),e=_s(r,e),r.g.has(e)}function Ti(r,e,t){ws(r,e),0<t.length&&(r.i=null,r.g.set(_s(r,e),Et(t)),r.h+=t.length)}function _s(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function ga(r){this.l=r||oo,r=ze.PerformanceNavigationTiming?0<(r=ze.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(ze.g&&ze.g.Ka&&ze.g.Ka()&&ze.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ve=As.prototype).add=function(r,e){wi(this),this.i=null,r=_s(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},ve.forEach=function(r,e){wi(this),this.g.forEach(function(t,s){t.forEach(function(c){r.call(e,c,s,this)},this)},this)},ve.sa=function(){wi(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const c=r[s];for(let p=0;p<c.length;p++)t.push(e[s])}return t},ve.Z=function(r){wi(this);let e=[];if("string"==typeof r)is(this,r)&&(e=e.concat(this.g.get(_s(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},ve.set=function(r,e){return wi(this),this.i=null,is(this,r=_s(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},ve.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},ve.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const p=encodeURIComponent(String(s)),E=this.Z(s);for(s=0;s<E.length;s++){var c=p;""!==E[s]&&(c+="="+encodeURIComponent(String(E[s]))),r.push(c)}}return this.i=r.join("&")};var oo=10;function S(r){return!!r.h||!!r.g&&r.g.size>=r.j}function Z(r){return r.h?1:r.g?r.g.size:0}function A(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function q(r,e){r.g?r.g.add(e):r.h=e}function Ie(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Xt(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return Et(r.i)}function $n(){}function er(){this.g=new $n}function Tn(r,e,t){const s=t||"";try{xs(r,function(c,p){let E=c;Pt(c)&&(E=kt(c)),e.push(s+p+"="+encodeURIComponent(E))})}catch(c){throw e.push(s+"type="+encodeURIComponent("_badmap")),c}}function C(r,e,t,s,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(s)}catch{}}function I(r){this.l=r.fc||null,this.j=r.ob||!1}function D(r,e){_n.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=V,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ga.prototype.cancel=function(){if(this.i=Xt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},$n.prototype.stringify=function(r){return ze.JSON.stringify(r,void 0)},$n.prototype.parse=function(r){return ze.JSON.parse(r,void 0)},_t(I,Zi),I.prototype.g=function(){return new D(this.l,this.j)},I.prototype.i=function(r){return function(){return r}}({}),_t(D,_n);var V=0;function _e(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function ct(r){r.readyState=4,r.l=null,r.j=null,r.A=null,Gt(r)}function Gt(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(ve=D.prototype).open=function(r,e){if(this.readyState!=V)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,Gt(this)},ve.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||ze).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ve.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ct(this)),this.readyState=V},ve.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Gt(this)),this.g&&(this.readyState=3,Gt(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ze.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_e(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},ve.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?ct(this):Gt(this),3==this.readyState&&_e(this)}},ve.Za=function(r){this.g&&(this.response=this.responseText=r,ct(this))},ve.Ya=function(r){this.g&&(this.response=r,ct(this))},ve.ka=function(){this.g&&ct(this)},ve.setRequestHeader=function(r,e){this.v.append(r,e)},ve.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},ve.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(D.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var pt=ze.JSON.parse;function St(r){_n.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Dr,this.L=this.M=!1}_t(St,_n);var Dr="",Xr=/^https?$/i,ti=["POST","PUT"];function Bi(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,ki(r),es(r)}function ki(r){r.F||(r.F=!0,Jn(r,"complete"),Jn(r,"error"))}function Ps(r){if(r.h&&typeof It<"u"&&(!r.C[1]||4!=Hi(r)||2!=r.da()))if(r.v&&4==Hi(r))Oi(r.La,0,r);else if(Jn(r,"readystatechange"),4==Hi(r)){r.h=!1;try{const F=r.da();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===F){var c=String(r.I).match(qi)[1]||null;if(!c&&ze.self&&ze.self.location){var p=ze.self.location.protocol;c=p.substr(0,p.length-1)}s=!Xr.test(c?c.toLowerCase():"")}t=s}if(t)Jn(r,"complete"),Jn(r,"success");else{r.m=6;try{var E=2<Hi(r)?r.g.statusText:""}catch{E=""}r.j=E+" ["+r.da()+"]",ki(r)}}finally{es(r)}}}function es(r,e){if(r.g){Hs(r);const t=r.g,s=r.C[0]?lt:null;r.g=null,r.C=null,e||Jn(r,"ready");try{t.onreadystatechange=s}catch{}}}function Hs(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(ze.clearTimeout(r.A),r.A=null)}function Hi(r){return r.g?r.g.readyState:0}function Xi(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case Dr:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function bi(r){let e="";return ai(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function ss(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=bi(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):ui(r,e,t))}function cs(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function to(r){this.Ga=0,this.i=[],this.j=new Wi,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cs("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cs("baseRetryDelayMs",5e3,r),this.hb=cs("retryDelaySeedMs",1e4,r),this.eb=cs("forwardChannelMaxRetries",2,r),this.xa=cs("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new ga(r&&r.concurrentRequestLimit),this.Ja=new er,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Rs(r){if(Ta(r),3==r.H){var e=r.W++,t=vo(r.G);ui(t,"SID",r.J),ui(t,"RID",e),ui(t,"TYPE","terminate"),Xo(r,t),(e=new fr(r,r.j,e,void 0)).L=2,e.v=Co(vo(t)),t=!1,ze.navigator&&ze.navigator.sendBeacon&&(t=ze.navigator.sendBeacon(e.v.toString(),"")),!t&&ze.Image&&((new Image).src=e.v,t=!0),t||(e.g=Kl(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Xs(e)}ml(r)}function ma(r){r.g&&(va(r),r.g.cancel(),r.g=null)}function Ta(r){ma(r),r.u&&(ze.clearTimeout(r.u),r.u=null),Xa(r),r.h.cancel(),r.m&&("number"==typeof r.m&&ze.clearTimeout(r.m),r.m=null)}function pl(r){S(r.h)||r.m||(r.m=!0,Mn(r.Na,r),r.C=0)}function vs(r,e){var t;t=e?e.m:r.W++;const s=vo(r.G);ui(s,"SID",r.J),ui(s,"RID",t),ui(s,"AID",r.V),Xo(r,s),r.o&&r.s&&ss(s,r.o,r.s),t=new fr(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=ya(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),q(r.h,t),zr(t,s,e)}function Xo(r,e){r.ma&&ai(r.ma,function(t,s){ui(e,s,t)}),r.l&&xs({},function(t,s){ui(e,s,t)})}function ya(r,e,t){t=Math.min(r.i.length,t);var s=r.l?We(r.l.Va,r.l,r):null;e:{var c=r.i;let p=-1;for(;;){const E=["count="+t];-1==p?0<t?(p=c[0].h,E.push("ofs="+p)):p=0:E.push("ofs="+p);let F=!0;for(let K=0;K<t;K++){let te=c[K].h;const me=c[K].g;if(te-=p,0>te)p=Math.max(0,c[K].h-100),F=!1;else try{Tn(me,E,"req"+te+"_")}catch{s&&s(me)}}if(F){s=E.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,s}function _a(r){r.g||r.u||(r.ba=1,Mn(r.Ma,r),r.A=0)}function Sa(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=Ln(We(r.Ma,r),wa(r,r.A)),r.A++,0))}function va(r){null!=r.B&&(ze.clearTimeout(r.B),r.B=null)}function Jo(r){r.g=new fr(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=vo(r.wa);ui(e,"RID","rpc"),ui(e,"SID",r.J),ui(e,"CI",r.M?"0":"1"),ui(e,"AID",r.V),ui(e,"TYPE","xmlhttp"),Xo(r,e),r.o&&r.s&&ss(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=Co(vo(e)),t.s=null,t.S=!0,Gr(t,r)}function Xa(r){null!=r.v&&(ze.clearTimeout(r.v),r.v=null)}function Ea(r,e){var t=null;if(r.g==e){Xa(r),va(r),r.g=null;var s=2}else{if(!A(r.h,e))return;t=e.F,Ie(r.h,e),s=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var c=r.C;Jn(s=Nt(),new qn(s,t)),pl(r)}else _a(r);else if(3==(c=e.o)||0==c&&0<r.ta||!(1==s&&function gl(r,e){return!(Z(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=Ln(We(r.Na,r,e),wa(r,r.C)),r.C++,0)))}(r,e)||2==s&&Sa(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),c){case 1:Wo(r,5);break;case 4:Wo(r,10);break;case 3:Wo(r,6);break;default:Wo(r,2)}}function wa(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function Wo(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=We(r.pb,r);t||(t=new Ts("//www.google.com/images/cleardot.gif"),ze.location&&"http"==ze.location.protocol||js(t,"https"),Co(t)),function Ii(r,e){const t=new Wi;if(ze.Image){const s=new Image;s.onload=Q(C,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Q(C,t,s,"TestLoadImage: error",!1,e),s.onabort=Q(C,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Q(C,t,s,"TestLoadImage: timeout",!1,e),ze.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else mn(2);r.H=0,r.l&&r.l.za(e),ml(r),Ta(r)}function ml(r){if(r.H=0,r.pa=[],r.l){const e=Xt(r.h);(0!=e.length||0!=r.i.length)&&(ut(r.pa,e),ut(r.pa,r.i),r.h.i.length=0,Et(r.i),r.i.length=0),r.l.ya()}}function yl(r,e,t){var s=t instanceof Ts?vo(t):new Ts(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Qi(s,s.m);else{var c=ze.location;s=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var p=new Ts(null,void 0);s&&js(p,s),e&&(p.g=e),c&&Qi(p,c),t&&(p.l=t),s=p}return e=r.Da,(t=r.F)&&e&&ui(s,t,e),ui(s,"VER",r.qa),Xo(r,s),s}function Kl(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new St(t&&r.Ha&&!r.va?new I({ob:!0}):r.va)).Oa(r.I),e}function zs(){}function Fo(){if(fn&&!(10<=Number(pr)))throw Error("Environmental error: no available transport.")}function Ri(r,e){_n.call(this),this.g=new to(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!Cn(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cn(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new ea(this)}function Ol(r){qt.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function Gs(){en.call(this),this.status=1}function ea(r){this.g=r}function To(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ja(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var c=0;16>c;++c)s[c]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(c=0;16>c;++c)s[c]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var p=r.g[3],E=(e=r.g[0])+(p^(t=r.g[1])&((c=r.g[2])^p))+s[0]+3614090360&4294967295;E=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=t+(E<<7&4294967295|E>>>25))+((E=p+(c^e&(t^c))+s[1]+3905402710&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^p&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(p^e))+s[3]+3250441966&4294967295)<<22&4294967295|E>>>10))+((E=e+(p^t&(c^p))+s[4]+4118548399&4294967295)<<7&4294967295|E>>>25))+((E=p+(c^e&(t^c))+s[5]+1200080426&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^p&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(p^e))+s[7]+4249261313&4294967295)<<22&4294967295|E>>>10))+((E=e+(p^t&(c^p))+s[8]+1770035416&4294967295)<<7&4294967295|E>>>25))+((E=p+(c^e&(t^c))+s[9]+2336552879&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^p&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(p^e))+s[11]+2304563134&4294967295)<<22&4294967295|E>>>10))+((E=e+(p^t&(c^p))+s[12]+1804603682&4294967295)<<7&4294967295|E>>>25))+((E=p+(c^e&(t^c))+s[13]+4254626195&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^p&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(p^e))+s[15]+1236535329&4294967295)<<22&4294967295|E>>>10))+((E=e+(c^p&(t^c))+s[1]+4129170786&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^c&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(p^e))+s[11]+643717713&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(c^p))+s[0]+3921069994&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^p&(t^c))+s[5]+3593408605&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^c&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(p^e))+s[15]+3634488961&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(c^p))+s[4]+3889429448&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^p&(t^c))+s[9]+568446438&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^c&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(p^e))+s[3]+4107603335&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(c^p))+s[8]+1163531501&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^p&(t^c))+s[13]+2850285829&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^c&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(p^e))+s[7]+1735328473&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(c^p))+s[12]+2368359562&4294967295)<<20&4294967295|E>>>12))+((E=e+(t^c^p)+s[5]+4294588738&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^c)+s[8]+2272392833&4294967295)<<11&4294967295|E>>>21))+((E=c+(p^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^p^e)+s[14]+4259657740&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^p)+s[1]+2763975236&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^c)+s[4]+1272893353&4294967295)<<11&4294967295|E>>>21))+((E=c+(p^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^p^e)+s[10]+3200236656&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^p)+s[13]+681279174&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^c)+s[0]+3936430074&4294967295)<<11&4294967295|E>>>21))+((E=c+(p^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^p^e)+s[6]+76029189&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^p)+s[9]+3654602809&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^c)+s[12]+3873151461&4294967295)<<11&4294967295|E>>>21))+((E=c+(p^e^t)+s[15]+530742520&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^p^e)+s[2]+3299628645&4294967295)<<23&4294967295|E>>>9))+((E=e+(c^(t|~p))+s[0]+4096336452&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~c))+s[7]+1126891415&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(p|~t))+s[14]+2878612391&4294967295)<<15&4294967295|E>>>17))+((E=t+(p^(c|~e))+s[5]+4237533241&4294967295)<<21&4294967295|E>>>11))+((E=e+(c^(t|~p))+s[12]+1700485571&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~c))+s[3]+2399980690&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(p|~t))+s[10]+4293915773&4294967295)<<15&4294967295|E>>>17))+((E=t+(p^(c|~e))+s[1]+2240044497&4294967295)<<21&4294967295|E>>>11))+((E=e+(c^(t|~p))+s[8]+1873313359&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~c))+s[15]+4264355552&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(p|~t))+s[6]+2734768916&4294967295)<<15&4294967295|E>>>17))+((E=t+(p^(c|~e))+s[13]+1309151649&4294967295)<<21&4294967295|E>>>11))+((p=(e=t+((E=e+(c^(t|~p))+s[4]+4149444226&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~c))+s[11]+3174756917&4294967295)<<10&4294967295|E>>>22))^((c=p+((E=c+(e^(p|~t))+s[2]+718787259&4294967295)<<15&4294967295|E>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(c+(E<<21&4294967295|E>>>11))&4294967295,r.g[2]=r.g[2]+c&4294967295,r.g[3]=r.g[3]+p&4294967295}function Si(r,e){this.h=e;for(var t=[],s=!0,c=r.length-1;0<=c;c--){var p=0|r[c];s&&p==e||(t[c]=p,s=!1)}this.g=t}(ve=St.prototype).Oa=function(r){this.M=r},ve.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():or.g(),this.C=function ft(r){return r.h||(r.h=r.i())}(this.u?this.u:or),this.g.onreadystatechange=We(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(p){return void Bi(this,p)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var c in s)t.set(c,s[c]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const p of s.keys())t.set(p,s.get(p))}s=Array.from(t.keys()).find(p=>"content-type"==p.toLowerCase()),c=ze.FormData&&r instanceof ze.FormData,!(0<=un(ti,e))||s||c||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,E]of t)this.g.setRequestHeader(p,E);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Hs(this),0<this.B&&((this.L=function $r(r){return fn&&function oi(){return Qt(vr,9,function(){let r=0;const e=zn(String(Tr)).split("."),t=zn("9").split("."),s=Math.max(e.length,t.length);for(let E=0;0==r&&E<s;E++){var c=e[E]||"",p=t[E]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==c[0].length&&0==p[0].length)break;r=hn(0==c[1].length?0:parseInt(c[1],10),0==p[1].length?0:parseInt(p[1],10))||hn(0==c[2].length,0==p[2].length)||hn(c[2],p[2]),c=c[3],p=p[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=We(this.ua,this)):this.A=Oi(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(p){Bi(this,p)}},ve.ua=function(){typeof It<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jn(this,"timeout"),this.abort(8))},ve.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,Jn(this,"complete"),Jn(this,"abort"),es(this))},ve.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),es(this,!0)),St.$.N.call(this)},ve.La=function(){this.s||(this.G||this.v||this.l?Ps(this):this.kb())},ve.kb=function(){Ps(this)},ve.da=function(){try{return 2<Hi(this)?this.g.status:-1}catch{return-1}},ve.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ve.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),pt(e)}},ve.Ia=function(){return this.m},ve.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ve=to.prototype).qa=8,ve.H=1,ve.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const c=new fr(this,this.j,r,void 0);let p=this.s;if(this.U&&(p?(p=ei(p),Nr(p,this.U)):p=this.U),null!==this.o||this.O||(c.I=p,p=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ya(this,c,e),ui(t=vo(this.G),"RID",r),ui(t,"CVER",22),this.F&&ui(t,"X-HTTP-Session-Id",this.F),Xo(this,t),p&&(this.O?e="headers="+encodeURIComponent(String(bi(p)))+"&"+e:this.o&&ss(t,this.o,p)),q(this.h,c),this.bb&&ui(t,"TYPE","init"),this.P?(ui(t,"$req",e),ui(t,"SID","null"),c.ba=!0,zr(c,t,null)):zr(c,t,e),this.H=2}}else 3==this.H&&(r?vs(this,r):0==this.i.length||S(this.h)||vs(this))},ve.Ma=function(){if(this.u=null,Jo(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=Ln(We(this.jb,this),r)}},ve.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,mn(10),ma(this),Jo(this))},ve.ib=function(){null!=this.v&&(this.v=null,ma(this),Sa(this),mn(19))},ve.pb=function(r){r?(this.j.info("Successfully pinged google.com"),mn(2)):(this.j.info("Failed to ping google.com"),mn(1))},(ve=zs.prototype).Ba=function(){},ve.Aa=function(){},ve.za=function(){},ve.ya=function(){},ve.Va=function(){},Fo.prototype.g=function(r,e){return new Ri(r,e)},_t(Ri,_n),Ri.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;mn(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=yl(r,null,r.Y),pl(r)},Ri.prototype.close=function(){Rs(this.g)},Ri.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=kt(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&pl(e)},Ri.prototype.N=function(){this.g.l=null,delete this.j,Rs(this.g),delete this.g,Ri.$.N.call(this)},_t(Ol,qt),_t(Gs,en),_t(ea,zs),ea.prototype.Ba=function(){Jn(this.g,"a")},ea.prototype.Aa=function(r){Jn(this.g,new Ol(r))},ea.prototype.za=function(r){Jn(this.g,new Gs)},ea.prototype.ya=function(){Jn(this.g,"b")},_t(To,function ql(){this.blockSize=-1}),To.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},To.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,c=this.h,p=0;p<e;){if(0==c)for(;p<=t;)Ja(this,r,p),p+=this.blockSize;if("string"==typeof r){for(;p<e;)if(s[c++]=r.charCodeAt(p++),c==this.blockSize){Ja(this,s),c=0;break}}else for(;p<e;)if(s[c++]=r[p++],c==this.blockSize){Ja(this,s),c=0;break}}this.h=c,this.i+=e},To.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var Aa={};function la(r){return-128<=r&&128>r?Qt(Aa,r,function(e){return new Si([0|e],0>e?-1:0)}):new Si([0|r],0>r?-1:0)}function U(r){if(isNaN(r)||!isFinite(r))return se;if(0>r)return Sr(U(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=z;return new Si(e,0)}var z=4294967296,se=la(0),Ge=la(1),Ht=la(16777216);function Zt(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Fn(r){return-1==r.h}function Sr(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new Si(t,~r.h).add(Ge)}function jr(r,e){return r.add(Sr(e))}function Pr(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function Mr(r,e){this.g=r,this.h=e}function os(r,e){if(Zt(e))throw Error("division by zero");if(Zt(r))return new Mr(se,se);if(Fn(r))return e=os(Sr(r),e),new Mr(Sr(e.g),Sr(e.h));if(Fn(e))return e=os(r,Sr(e)),new Mr(Sr(e.g),e.h);if(30<r.g.length){if(Fn(r)||Fn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Ge,s=e;0>=s.X(r);)t=yr(t),s=yr(s);var c=xi(t,1),p=xi(s,1);for(s=xi(s,2),t=xi(t,2);!Zt(s);){var E=p.add(s);0>=E.X(r)&&(c=c.add(t),p=E),s=xi(s,1),t=xi(t,1)}return e=jr(r,c.R(e)),new Mr(c,e)}for(c=se;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),E=(p=U(t)).R(e);Fn(E)||0<E.X(r);)E=(p=U(t-=s)).R(e);Zt(p)&&(p=Ge),c=c.add(p),r=jr(r,E)}return new Mr(c,r)}function yr(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new Si(t,r.h)}function xi(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,c=[],p=0;p<s;p++)c[p]=0<e?r.D(p+t)>>>e|r.D(p+t+1)<<32-e:r.D(p+t);return new Si(c,r.h)}(ve=Si.prototype).ea=function(){if(Fn(this))return-Sr(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:z+s)*e,e*=z}return r},ve.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(Zt(this))return"0";if(Fn(this))return"-"+Sr(this).toString(r);for(var e=U(Math.pow(r,6)),t=this,s="";;){var c=os(t,e).g,p=((0<(t=jr(t,c.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(Zt(t=c))return p+s;for(;6>p.length;)p="0"+p;s=p+s}},ve.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},ve.X=function(r){return Fn(r=jr(this,r))?-1:Zt(r)?0:1},ve.abs=function(){return Fn(this)?Sr(this):this},ve.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,c=0;c<=e;c++){var p=s+(65535&this.D(c))+(65535&r.D(c)),E=(p>>>16)+(this.D(c)>>>16)+(r.D(c)>>>16);s=E>>>16,t[c]=(E&=65535)<<16|(p&=65535)}return new Si(t,-2147483648&t[t.length-1]?-1:0)},ve.R=function(r){if(Zt(this)||Zt(r))return se;if(Fn(this))return Fn(r)?Sr(this).R(Sr(r)):Sr(Sr(this).R(r));if(Fn(r))return Sr(this.R(Sr(r)));if(0>this.X(Ht)&&0>r.X(Ht))return U(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var c=0;c<r.g.length;c++){var p=this.D(s)>>>16,E=65535&this.D(s),F=r.D(c)>>>16,K=65535&r.D(c);t[2*s+2*c]+=E*K,Pr(t,2*s+2*c),t[2*s+2*c+1]+=p*K,Pr(t,2*s+2*c+1),t[2*s+2*c+1]+=E*F,Pr(t,2*s+2*c+1),t[2*s+2*c+2]+=p*F,Pr(t,2*s+2*c+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new Si(t,0)},ve.gb=function(r){return os(this,r).h},ve.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new Si(t,this.h&r.h)},ve.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new Si(t,this.h|r.h)},ve.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new Si(t,this.h^r.h)},Fo.prototype.createWebChannel=Fo.prototype.g,Ri.prototype.send=Ri.prototype.u,Ri.prototype.open=Ri.prototype.m,Ri.prototype.close=Ri.prototype.close,sr.NO_ERROR=0,sr.TIMEOUT=8,sr.HTTP_ERROR=6,ji.COMPLETE="complete",st.EventType=Tt,Tt.OPEN="a",Tt.CLOSE="b",Tt.ERROR="c",Tt.MESSAGE="d",_n.prototype.listen=_n.prototype.O,St.prototype.listenOnce=St.prototype.P,St.prototype.getLastError=St.prototype.Sa,St.prototype.getLastErrorCode=St.prototype.Ia,St.prototype.getStatus=St.prototype.da,St.prototype.getResponseJson=St.prototype.Wa,St.prototype.getResponseText=St.prototype.ja,St.prototype.send=St.prototype.ha,St.prototype.setWithCredentials=St.prototype.Oa,To.prototype.digest=To.prototype.l,To.prototype.reset=To.prototype.reset,To.prototype.update=To.prototype.j,Si.prototype.add=Si.prototype.add,Si.prototype.multiply=Si.prototype.R,Si.prototype.modulo=Si.prototype.gb,Si.prototype.compare=Si.prototype.X,Si.prototype.toNumber=Si.prototype.ea,Si.prototype.toString=Si.prototype.toString,Si.prototype.getBits=Si.prototype.D,Si.fromNumber=U,Si.fromString=function ee(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return Sr(ee(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=U(Math.pow(e,8)),s=se,c=0;c<r.length;c+=8){var p=Math.min(8,r.length-c),E=parseInt(r.substring(c,c+p),e);8>p?(p=U(Math.pow(e,p)),s=s.R(p).add(U(E))):s=(s=s.R(t)).add(U(E))}return s};var Ws=Ye.createWebChannelTransport=function(){return new Fo},ao=Ye.getStatEventTarget=function(){return Nt()},Lo=Ye.ErrorCode=sr,Ks=Ye.EventType=ji,qs=Ye.Event=tt,Bo=Ye.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},no=Ye.FetchXmlHttpFactory=I,el=Ye.WebChannel=st,ca=Ye.XhrIo=St,hu=Ye.Md5=To,Ia=Ye.Integer=Si;const Nl="@firebase/firestore";class ro{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ro.UNAUTHENTICATED=new ro(null),ro.GOOGLE_CREDENTIALS=new ro("google-credentials-uid"),ro.FIRST_PARTY=new ro("first-party-uid"),ro.MOCK_USER=new ro("mock-user");let Eo="9.21.0";const _l=new Re.Yd("@firebase/firestore");function Yl(){return _l.logLevel}function yn(r,...e){if(_l.logLevel<=Re.in.DEBUG){const t=e.map(Zl);_l.debug(`Firestore (${Eo}): ${r}`,...t)}}function ni(r,...e){if(_l.logLevel<=Re.in.ERROR){const t=e.map(Zl);_l.error(`Firestore (${Eo}): ${r}`,...t)}}function lo(r,...e){if(_l.logLevel<=Re.in.WARN){const t=e.map(Zl);_l.warn(`Firestore (${Eo}): ${r}`,...t)}}function Zl(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Zn(r="Unexpected state"){const e=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: `+r;throw ni(e),new Error(e)}function dr(r,e){r||Zn()}function Un(r,e){return r}const Lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class an extends Je.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $o{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ro.UNAUTHENTICATED))}shutdown(){}}class Ql{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $a{constructor(e){this.t=e,this.currentUser=ro.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let c=this.i;const p=te=>this.i!==c?(c=this.i,t(te)):Promise.resolve();let E=new br;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new br,e.enqueueRetryable(()=>p(this.currentUser))};const F=()=>{const te=E;e.enqueueRetryable((0,oe.Z)(function*(){yield te.promise,yield p(s.currentUser)}))},K=te=>{yn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=te,this.auth.addAuthTokenListener(this.o),F()};this.t.onInit(te=>K(te)),setTimeout(()=>{if(!this.auth){const te=this.t.getImmediate({optional:!0});te?K(te):(yn("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new br)}},0),F()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(yn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(dr("string"==typeof s.accessToken),new wc(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dr(null===e||"string"==typeof e),new ro(e)}}class ba{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=ro.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class kl{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new ba(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ro.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kd{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=p=>{null!=p.error&&yn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const E=p.token!==this.T;return this.T=p.token,yn("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>s(p))};const c=p=>{yn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.I.onInit(p=>c(p)),setTimeout(()=>{if(!this.appCheck){const p=this.I.getImmediate({optional:!0});p?c(p):yn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dr("string"==typeof t.token),this.T=t.token,new tl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vl(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class nl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const c=vl(40);for(let p=0;p<c.length;++p)s.length<20&&c[p]<t&&(s+=e.charAt(c[p]%e.length))}return s}}function Rr(r,e){return r<e?-1:r>e?1:0}function Ma(r,e,t){return r.length===e.length&&r.every((s,c)=>t(s,e[c]))}function Ic(r){return r+"\0"}class us{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new an(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new an(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new an(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new an(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return us.fromMillis(Date.now())}static fromDate(e){return us.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new us(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rr(this.nanoseconds,e.nanoseconds):Rr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class tr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tr(e)}static min(){return new tr(new us(0,0))}static max(){return new tr(new us(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fl{constructor(e,t,s){void 0===t?t=0:t>e.length&&Zn(),void 0===s?s=e.length-t:s>e.length-t&&Zn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Fl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fl?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const p=e.get(c),E=t.get(c);if(p<E)return-1;if(p>E)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $i extends Fl{construct(e,t,s){return new $i(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new an(Lt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(c=>c.length>0))}return new $i(t)}static emptyPath(){return new $i([])}}const ds=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Is extends Fl{construct(e,t,s){return new Is(e,t,s)}static isValidIdentifier(e){return ds.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Is.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Is(["__name__"])}static fromServerFormat(e){const t=[];let s="",c=0;const p=()=>{if(0===s.length)throw new an(Lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let E=!1;for(;c<e.length;){const F=e[c];if("\\"===F){if(c+1===e.length)throw new an(Lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const K=e[c+1];if("\\"!==K&&"."!==K&&"`"!==K)throw new an(Lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=K,c+=2}else"`"===F?(E=!E,c++):"."!==F||E?(s+=F,c++):(p(),c++)}if(p(),E)throw new an(Lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Is(t)}static emptyPath(){return new Is([])}}class On{constructor(e){this.path=e}static fromPath(e){return new On($i.fromString(e))}static fromName(e){return new On($i.fromString(e).popFirst(5))}static empty(){return new On($i.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$i.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $i.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new On(new $i(e.slice()))}}class qc{constructor(e,t,s,c){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=c}}function Jl(r){return r.fields.find(e=>2===e.kind)}function rl(r){return r.fields.filter(e=>2!==e.kind)}qc.UNKNOWN_ID=-1;class Yc{constructor(e,t){this.fieldPath=e,this.kind=t}}class bc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bc(0,co.min())}}function Cc(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,c=tr.fromTimestamp(1e9===s?new us(t+1,0):new us(t,s));return new co(c,On.empty(),e)}function Fs(r){return new co(r.readTime,r.key,-1)}class co{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new co(tr.min(),On.empty(),-1)}static max(){return new co(tr.max(),On.empty(),-1)}}function Ua(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=On.comparator(r.documentKey,e.documentKey),0!==t?t:Rr(r.largestBatchId,e.largestBatchId))}const Dc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Uo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function R(r){return O.apply(this,arguments)}function O(){return O=(0,oe.Z)(function*(r){if(r.code!==Lt.FAILED_PRECONDITION||r.message!==Dc)throw r;yn("LocalStore","Unexpectedly lost primary lease")}),O.apply(this,arguments)}class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Zn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new w((s,c)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(s,c)},this.catchCallback=p=>{this.wrapFailure(t,p).next(s,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof w?t:w.resolve(t)}catch(t){return w.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):w.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):w.reject(t)}static resolve(e){return new w((t,s)=>{t(e)})}static reject(e){return new w((t,s)=>{s(e)})}static waitFor(e){return new w((t,s)=>{let c=0,p=0,E=!1;e.forEach(F=>{++c,F.next(()=>{++p,E&&p===c&&t()},K=>s(K))}),E=!0,p===c&&t()})}static or(e){let t=w.resolve(!1);for(const s of e)t=t.next(c=>c?w.resolve(c):s());return t}static forEach(e,t){const s=[];return e.forEach((c,p)=>{s.push(t.call(this,c,p))}),this.waitFor(s)}static mapArray(e,t){return new w((s,c)=>{const p=e.length,E=new Array(p);let F=0;for(let K=0;K<p;K++){const te=K;t(e[te]).next(me=>{E[te]=me,++F,F===p&&s(E)},me=>c(me))}})}static doWhile(e,t){return new w((s,c)=>{const p=()=>{!0===e()?t().next(()=>{p()},c):s()};p()})}}class B{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new br,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new pe(e,t.error)):this.R.resolve()},this.transaction.onerror=s=>{const c=Vn(s.target.error);this.R.reject(new pe(e,c))}}static open(e,t,s,c){try{return new B(t,e.transaction(c,s))}catch(p){throw new pe(t,p)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(yn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ut(t)}}class W{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===W.S((0,Je.z$)())&&ni("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return yn("SimpleDb","Removing database:",e),pn(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Je.hl)())return!1;if(W.C())return!0;const e=(0,Je.z$)(),t=W.S(e),s=0<t&&t<10,c=W.N(e),p=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||p)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var t=this;return(0,oe.Z)(function*(){return t.db||(yn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,c)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=E=>{s(E.target.result)},p.onblocked=()=>{c(new pe(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=E=>{const F=E.target.error;c("VersionError"===F.name?new an(Lt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===F.name?new an(Lt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+F):new pe(e,F))},p.onupgradeneeded=E=>{yn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',E.oldVersion),t.V.$(E.target.result,p.transaction,E.oldVersion,t.version).next(()=>{yn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,c){var p=this;return(0,oe.Z)(function*(){const E="readonly"===t;let F=0;for(;;){++F;try{p.db=yield p.O(e);const K=B.open(p.db,e,E?"readonly":"readwrite",s),te=c(K).next(me=>(K.P(),me)).catch(me=>(K.abort(me),w.reject(me))).toPromise();return te.catch(()=>{}),yield K.v,te}catch(K){const te=K,me="FirebaseError"!==te.name&&F<3;if(yn("SimpleDb","Transaction failed with error:",te.message,"Retrying:",me),p.close(),!me)return Promise.reject(te)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class le{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return pn(this.L.delete())}}class pe extends an{constructor(e,t){super(Lt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dt(r){return"IndexedDbTransactionError"===r.name}class Ut{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(yn("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(yn("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),pn(s)}add(e){return yn("SimpleDb","ADD",this.store.name,e,e),pn(this.store.add(e))}get(e){return pn(this.store.get(e)).next(t=>(void 0===t&&(t=null),yn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return yn("SimpleDb","DELETE",this.store.name,e),pn(this.store.delete(e))}count(){return yn("SimpleDb","COUNT",this.store.name),pn(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const c=this.cursor(s),p=[];return this.W(c,(E,F)=>{p.push(F)}).next(()=>p)}{const c=this.store.getAll(s.range);return new w((p,E)=>{c.onerror=F=>{E(F.target.error)},c.onsuccess=F=>{p(F.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new w((c,p)=>{s.onerror=E=>{p(E.target.error)},s.onsuccess=E=>{c(E.target.result)}})}J(e,t){yn("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const c=this.cursor(s);return this.W(c,(p,E,F)=>F.delete())}X(e,t){let s;t?s=e:(s={},t=e);const c=this.cursor(s);return this.W(c,t)}Z(e){const t=this.cursor({});return new w((s,c)=>{t.onerror=p=>{const E=Vn(p.target.error);c(E)},t.onsuccess=p=>{const E=p.target.result;E?e(E.primaryKey,E.value).next(F=>{F?E.continue():s()}):s()}})}W(e,t){const s=[];return new w((c,p)=>{e.onerror=E=>{p(E.target.error)},e.onsuccess=E=>{const F=E.target.result;if(!F)return void c();const K=new le(F),te=t(F.primaryKey,F.value,K);if(te instanceof w){const me=te.catch(it=>(K.done(),w.reject(it)));s.push(me)}K.isDone?c():null===K.K?F.continue():F.continue(K.K)}}).next(()=>w.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pn(r){return new w((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const c=Vn(s.target.error);t(c)}})}let Wn=!1;function Vn(r){const e=W.S((0,Je.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new an("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Wn||(Wn=!0,setTimeout(()=>{throw s},0)),s}}return r}class zi{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;yn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,oe.Z)(function*(){t.task=null;try{yn("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){dt(s)?yn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield R(s)}yield t.et(6e4)}))}}class Ui{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,oe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let c=t,p=!0;return w.doWhile(()=>!0===p&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(E=>{if(null!==E&&!s.has(E))return yn("IndexBackiller",`Processing collection: ${E}`),this.it(e,E,c).next(F=>{c-=F,s.add(E)});p=!1})).next(()=>t-c)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,s).next(p=>{const E=p.changes;return this.localStore.indexManager.updateIndexEntries(e,E).next(()=>this.rt(c,p)).next(F=>(yn("IndexBackiller",`Updating offset: ${F}`),this.localStore.indexManager.updateCollectionGroup(e,t,F))).next(()=>E.size)}))}rt(e,t){let s=e;return t.changes.forEach((c,p)=>{const E=Fs(p);Ua(E,s)>0&&(s=E)}),new co(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ji=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=c=>this.ot(c),this.ut=c=>s.writeSequenceNumber(c))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function wo(r){return null==r}function Ys(r){return 0===r&&1/r==-1/0}function ua(r){return"number"==typeof r&&Number.isInteger(r)&&!Ys(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Ls(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Bs(e)),e=Ko(r.get(t),e);return Bs(e)}function Ko(r,e){let t=e;const s=r.length;for(let c=0;c<s;c++){const p=r.charAt(c);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function Bs(r){return r+"\x01\x01"}function da(r){const e=r.length;if(dr(e>=2),2===e)return dr("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),$i.emptyPath();const t=e-2,s=[];let c="";for(let p=0;p<e;){const E=r.indexOf("\x01",p);switch((E<0||E>t)&&Zn(),r.charAt(E+1)){case"\x01":const F=r.substring(p,E);let K;0===c.length?K=F:(c+=F,K=c,c=""),s.push(K);break;case"\x10":c+=r.substring(p,E),c+="\0";break;case"\x11":c+=r.substring(p,E+1);break;default:Zn()}p=E+2}return new $i(s)}const ta=["userId","batchId"];function wl(r,e){return[r,Ls(e)]}function ec(r,e,t){return[r,Ls(e),t]}const qu={},Ld=["prefixPath","collectionGroup","readTime","documentId"],ha=["prefixPath","collectionGroup","documentId"],fu=["collectionGroup","readTime","prefixPath","documentId"],bh=["canonicalId","targetId"],tc=["targetId","path"],Zc=["path","targetId"],nc=["collectionId","parent"],Il=["indexId","uid"],Bd=["uid","sequenceNumber"],$d=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yu=["indexId","uid","orderedDocumentKey"],Tc=["userId","collectionPath","documentId"],pu=["userId","collectionPath","largestBatchId"],Qc=["userId","collectionGroup","largestBatchId"],gu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Zu=[...gu,"documentOverlays"],rc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ic=rc,Ch=[...ic,"indexConfiguration","indexState","indexEntries"];class Xc extends Uo{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Vo(r,e){const t=Un(r);return W.M(t.at,e)}function sc(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ra(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function mu(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ms{constructor(e,t){this.comparator=e,this.root=t||So.EMPTY}insert(e,t){return new ms(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,So.BLACK,null,null))}remove(e){return new ms(this.comparator,this.root.remove(e,this.comparator).copy(null,null,So.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new il(this.root,e,this.comparator,!1)}getReverseIterator(){return new il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new il(this.root,e,this.comparator,!0)}}class il{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?s(e.key,t):1,t&&c&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class So{constructor(e,t,s,c,p){this.key=e,this.value=t,this.color=null!=s?s:So.RED,this.left=null!=c?c:So.EMPTY,this.right=null!=p?p:So.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,p){return new So(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=c?c:this.left,null!=p?p:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const p=s(e,c.key);return c=p<0?c.copy(null,null,null,c.left.insert(e,t,s),null):0===p?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return So.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return So.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,So.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,So.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Zn();const e=this.left.check();if(e!==this.right.check())throw Zn();return e+(this.isRed()?0:1)}}So.EMPTY=null,So.RED=!0,So.BLACK=!1,So.EMPTY=new class{constructor(){this.size=0}get key(){throw Zn()}get value(){throw Zn()}get color(){throw Zn()}get left(){throw Zn()}get right(){throw Zn()}copy(r,e,t,s,c){return this}insert(r,e,t){return new So(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ys{constructor(e){this.comparator=e,this.data=new ms(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bl(this.data.getIterator())}getIteratorFrom(e){return new bl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ys)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=s.getNext().key;if(0!==this.comparator(c,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ys(this.comparator);return t.data=e,t}}class bl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sl(r){return r.hasNext()?r.getNext():void 0}class jo{constructor(e){this.fields=e,e.sort(Is.comparator)}static empty(){return new jo([])}unionWith(e){let t=new ys(Is.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new jo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class oc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Io{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new oc("Invalid base64 string: "+c):c}}(e);return new Io(t)}static fromUint8Array(e){const t=function(s){let c="";for(let p=0;p<s.length;++p)c+=String.fromCharCode(s[p]);return c}(e);return new Io(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Io.EMPTY_BYTE_STRING=new Io("");const Dh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cl(r){if(dr(!!r),"string"==typeof r){let e=0;const t=Dh.exec(r);if(dr(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:hs(r.seconds),nanos:hs(r.nanos)}}function hs(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function qo(r){return"string"==typeof r?Io.fromBase64String(r):Io.fromUint8Array(r)}function Sc(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ol(r){const e=r.mapValue.fields.__previous_value__;return Sc(e)?ol(e):e}function Yo(r){const e=Cl(r.mapValue.fields.__local_write_time__.timestampValue);return new us(e.seconds,e.nanos)}class al{constructor(e,t,s,c,p,E,F,K){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=p,this.forceLongPolling=E,this.autoDetectLongPolling=F,this.useFetchStreams=K}}class Ll{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ll("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ll&&e.projectId===this.projectId&&e.database===this.database}}const fa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lc={nullValue:"NULL_VALUE"};function xa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Sc(r)?4:Wr(r)?9007199254740991:10:Zn()}function Pa(r,e){if(r===e)return!0;const t=xa(r);if(t!==xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Yo(r).isEqual(Yo(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const p=Cl(s.timestampValue),E=Cl(c.timestampValue);return p.seconds===E.seconds&&p.nanos===E.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return c=e,qo(r.bytesValue).isEqual(qo(c.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,c){return hs(s.geoPointValue.latitude)===hs(c.geoPointValue.latitude)&&hs(s.geoPointValue.longitude)===hs(c.geoPointValue.longitude)}(r,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return hs(s.integerValue)===hs(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const p=hs(s.doubleValue),E=hs(c.doubleValue);return p===E?Ys(p)===Ys(E):isNaN(p)&&isNaN(E)}return!1}(r,e);case 9:return Ma(r.arrayValue.values||[],e.arrayValue.values||[],Pa);case 10:return function(s,c){const p=s.mapValue.fields||{},E=c.mapValue.fields||{};if(sc(p)!==sc(E))return!1;for(const F in p)if(p.hasOwnProperty(F)&&(void 0===E[F]||!Pa(p[F],E[F])))return!1;return!0}(r,e);default:return Zn()}var c}function Jc(r,e){return void 0!==(r.values||[]).find(t=>Pa(t,e))}function Oa(r,e){if(r===e)return 0;const t=xa(r),s=xa(e);if(t!==s)return Rr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rr(r.booleanValue,e.booleanValue);case 2:return function(c,p){const E=hs(c.integerValue||c.doubleValue),F=hs(p.integerValue||p.doubleValue);return E<F?-1:E>F?1:E===F?0:isNaN(E)?isNaN(F)?0:-1:1}(r,e);case 3:return Va(r.timestampValue,e.timestampValue);case 4:return Va(Yo(r),Yo(e));case 5:return Rr(r.stringValue,e.stringValue);case 6:return function(c,p){const E=qo(c),F=qo(p);return E.compareTo(F)}(r.bytesValue,e.bytesValue);case 7:return function(c,p){const E=c.split("/"),F=p.split("/");for(let K=0;K<E.length&&K<F.length;K++){const te=Rr(E[K],F[K]);if(0!==te)return te}return Rr(E.length,F.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,p){const E=Rr(hs(c.latitude),hs(p.latitude));return 0!==E?E:Rr(hs(c.longitude),hs(p.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(c,p){const E=c.values||[],F=p.values||[];for(let K=0;K<E.length&&K<F.length;++K){const te=Oa(E[K],F[K]);if(te)return te}return Rr(E.length,F.length)}(r.arrayValue,e.arrayValue);case 10:return function(c,p){if(c===fa.mapValue&&p===fa.mapValue)return 0;if(c===fa.mapValue)return 1;if(p===fa.mapValue)return-1;const E=c.fields||{},F=Object.keys(E),K=p.fields||{},te=Object.keys(K);F.sort(),te.sort();for(let me=0;me<F.length&&me<te.length;++me){const it=Rr(F[me],te[me]);if(0!==it)return it;const Ft=Oa(E[F[me]],K[te[me]]);if(0!==Ft)return Ft}return Rr(F.length,te.length)}(r.mapValue,e.mapValue);default:throw Zn()}}function Va(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Rr(r,e);const t=Cl(r),s=Cl(e),c=Rr(t.seconds,s.seconds);return 0!==c?c:Rr(t.nanos,s.nanos)}function P(r){return j(r)}function j(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const c=Cl(s);return`time(${c.seconds},${c.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?qo(r.bytesValue).toBase64():"referenceValue"in r?On.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let c="[",p=!0;for(const E of s.values||[])p?p=!1:c+=",",c+=j(E);return c+"]"}(r.arrayValue):"mapValue"in r?function(s){const c=Object.keys(s.fields||{}).sort();let p="{",E=!0;for(const F of c)E?E=!1:p+=",",p+=`${F}:${j(s.fields[F])}`;return p+"}"}(r.mapValue):Zn();var e}function ke(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ht(r){return!!r&&"integerValue"in r}function Ct(r){return!!r&&"arrayValue"in r}function jt(r){return!!r&&"nullValue"in r}function In(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Nn(r){return!!r&&"mapValue"in r}function ar(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ra(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ar(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ar(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Wr(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function ri(r){return"nullValue"in r?lc:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?ke(Ll.empty(),On.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Zn()}function bs(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?ke(Ll.empty(),On.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?fa:Zn()}function Zs(r,e){const t=Oa(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function eu(r,e){const t=Oa(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class $s{constructor(e){this.value=e}static empty(){return new $s({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Nn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ar(t)}setAll(e){let t=Is.emptyPath(),s={},c=[];e.forEach((E,F)=>{if(!t.isImmediateParentOf(F)){const K=this.getFieldsMap(t);this.applyChanges(K,s,c),s={},c=[],t=F.popLast()}E?s[F.lastSegment()]=ar(E):c.push(F.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,s,c)}delete(e){const t=this.field(e.popLast());Nn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];Nn(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){Ra(t,(c,p)=>e[c]=p);for(const c of s)delete e[c]}clone(){return new $s(ar(this.value))}}function Ac(r){const e=[];return Ra(r.fields,(t,s)=>{const c=new Is([t]);if(Nn(s)){const p=Ac(s.mapValue).fields;if(0===p.length)e.push(c);else for(const E of p)e.push(c.child(E))}else e.push(c)}),new jo(e)}class Vi{constructor(e,t,s,c,p,E,F){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=p,this.data=E,this.documentState=F}static newInvalidDocument(e){return new Vi(e,0,tr.min(),tr.min(),tr.min(),$s.empty(),0)}static newFoundDocument(e,t,s,c){return new Vi(e,1,t,tr.min(),s,c,0)}static newNoDocument(e,t){return new Vi(e,2,t,tr.min(),tr.min(),$s.empty(),0)}static newUnknownDocument(e,t){return new Vi(e,3,t,tr.min(),tr.min(),$s.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$s.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$s.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ho{constructor(e,t){this.position=e,this.inclusive=t}}function Bl(r,e,t){let s=0;for(let c=0;c<r.position.length;c++){const p=e[c],E=r.position[c];if(s=p.field.isKeyField()?On.comparator(On.fromName(E.referenceValue),t.key):Oa(E,t.data.field(p.field)),"desc"===p.dir&&(s*=-1),0!==s)break}return s}function yu(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Pa(r.position[t],e.position[t]))return!1;return!0}class $l{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ud(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Th{}class Ai extends Th{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Rg(e,t,s):"array-contains"===t?new k(e,s):"in"===t?new ne(e,s):"not-in"===t?new Ce(e,s):"array-contains-any"===t?new bt(e,s):new Ai(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new x(e,s):new _(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Oa(t,this.value)):null!==t&&xa(this.value)===xa(t)&&this.matchesComparison(Oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Zn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Yi extends Th{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Yi(e,t)}matches(e){return Mc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Mc(r){return"and"===r.op}function Ul(r){return"or"===r.op}function Qu(r){return Sh(r)&&Mc(r)}function Sh(r){for(const e of r.filters)if(e instanceof Yi)return!1;return!0}function Ah(r){if(r instanceof Ai)return r.field.canonicalString()+r.op.toString()+P(r.value);if(Qu(r))return r.filters.map(e=>Ah(e)).join(",");{const e=r.filters.map(t=>Ah(t)).join(",");return`${r.op}(${e})`}}function Xu(r,e){return r instanceof Ai?(t=r,(s=e)instanceof Ai&&t.op===s.op&&t.field.isEqual(s.field)&&Pa(t.value,s.value)):r instanceof Yi?function(t,s){return s instanceof Yi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((c,p,E)=>c&&Xu(p,s.filters[E]),!0)}(r,e):void Zn();var t,s}function Mh(r,e){const t=r.filters.concat(e);return Yi.create(t,r.op)}function Mf(r){return r instanceof Ai?`${(e=r).field.canonicalString()} ${e.op} ${P(e.value)}`:r instanceof Yi?function(e){return e.op.toString()+" {"+e.getFilters().map(Mf).join(" ,")+"}"}(r):"Filter";var e}class Rg extends Ai{constructor(e,t,s){super(e,t,s),this.key=On.fromName(s.referenceValue)}matches(e){const t=On.comparator(e.key,this.key);return this.matchesComparison(t)}}class x extends Ai{constructor(e,t){super(e,"in",t),this.keys=b(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _ extends Ai{constructor(e,t){super(e,"not-in",t),this.keys=b(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function b(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>On.fromName(s.referenceValue))}class k extends Ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ct(t)&&Jc(t.arrayValue,this.value)}}class ne extends Ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jc(this.value.arrayValue,t)}}class Ce extends Ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Jc(this.value.arrayValue,t)}}class bt extends Ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ct(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Jc(this.value.arrayValue,s))}}class Wt{constructor(e,t=null,s=[],c=[],p=null,E=null,F=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=p,this.startAt=E,this.endAt=F,this.ft=null}}function Rn(r,e=null,t=[],s=[],c=null,p=null,E=null){return new Wt(r,e,t,s,c,p,E)}function Bn(r){const e=Un(r);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Ah(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),wo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>P(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>P(s)).join(",")),e.ft=t}return e.ft}function gr(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Ud(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Xu(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!yu(r.startAt,e.startAt)&&yu(r.endAt,e.endAt)}function di(r){return On.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function zo(r,e){return r.filters.filter(t=>t instanceof Ai&&t.field.isEqual(e))}function Dl(r,e,t){let s=lc,c=!0;for(const p of zo(r,e)){let E=lc,F=!0;switch(p.op){case"<":case"<=":E=ri(p.value);break;case"==":case"in":case">=":E=p.value;break;case">":E=p.value,F=!1;break;case"!=":case"not-in":E=lc}Zs({value:s,inclusive:c},{value:E,inclusive:F})<0&&(s=E,c=F)}if(null!==t)for(let p=0;p<r.orderBy.length;++p)if(r.orderBy[p].field.isEqual(e)){const E=t.position[p];Zs({value:s,inclusive:c},{value:E,inclusive:t.inclusive})<0&&(s=E,c=t.inclusive);break}return{value:s,inclusive:c}}function Rc(r,e,t){let s=fa,c=!0;for(const p of zo(r,e)){let E=fa,F=!0;switch(p.op){case">=":case">":E=bs(p.value),F=!1;break;case"==":case"in":case"<=":E=p.value;break;case"<":E=p.value,F=!1;break;case"!=":case"not-in":E=fa}eu({value:s,inclusive:c},{value:E,inclusive:F})>0&&(s=E,c=F)}if(null!==t)for(let p=0;p<r.orderBy.length;++p)if(r.orderBy[p].field.isEqual(e)){const E=t.position[p];eu({value:s,inclusive:c},{value:E,inclusive:t.inclusive})>0&&(s=E,c=t.inclusive);break}return{value:s,inclusive:c}}class Tl{constructor(e,t=null,s=[],c=[],p=null,E="F",F=null,K=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=p,this.limitType=E,this.startAt=F,this.endAt=K,this.dt=null,this._t=null}}function cc(r,e,t,s,c,p,E,F){return new Tl(r,e,t,s,c,p,E,F)}function tu(r){return new Tl(r)}function Vd(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function xc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function _u(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function nu(r){return null!==r.collectionGroup}function Vl(r){const e=Un(r);if(null===e.dt){e.dt=[];const t=_u(e),s=xc(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new $l(t)),e.dt.push(new $l(Is.keyField(),"asc"));else{let c=!1;for(const p of e.explicitOrderBy)e.dt.push(p),p.field.isKeyField()&&(c=!0);if(!c){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new $l(Is.keyField(),p))}}}return e.dt}function Ao(r){const e=Un(r);if(!e._t)if("F"===e.limitType)e._t=Rn(e.path,e.collectionGroup,Vl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of Vl(e))t.push(new $l(p.field,"desc"===p.dir?"asc":"desc"));const s=e.endAt?new Ho(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new Ho(e.startAt.position,e.startAt.inclusive):null;e._t=Rn(e.path,e.collectionGroup,t,e.filters,e.limit,s,c)}return e._t}function ru(r,e){e.getFirstInequalityField(),_u(r);const t=r.filters.concat([e]);return new Tl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function uc(r,e,t){return new Tl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Pc(r,e){return gr(Ao(r),Ao(e))&&r.limitType===e.limitType}function Ca(r){return`${Bn(Ao(r))}|lt:${r.limitType}`}function vu(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Mf(s)).join(", ")}]`),wo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(c=s).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>P(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>P(s)).join(",")),`Target(${t})`}(Ao(r))}; limitType=${r.limitType})`}function Na(r,e){return e.isFoundDocument()&&function(t,s){const c=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):On.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(r,e)&&function(t,s){for(const c of Vl(t))if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(r,e)&&function(t,s){for(const c of t.filters)if(!c.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(c,p,E){const F=Bl(c,p,E);return c.inclusive?F<=0:F<0}(t.startAt,Vl(t),s)||t.endAt&&!function(c,p,E){const F=Bl(c,p,E);return c.inclusive?F>=0:F>0}(t.endAt,Vl(t),s)));var t,s}function Rh(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ll(r){return(e,t)=>{let s=!1;for(const c of Vl(r)){const p=Ju(c,e,t);if(0!==p)return p;s=s||c.field.isKeyField()}return 0}}function Ju(r,e,t){const s=r.field.isKeyField()?On.comparator(e.key,t.key):function(c,p,E){const F=p.data.field(c),K=E.data.field(c);return null!==F&&null!==K?Oa(F,K):Zn()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Zn()}}class Oc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[c,p]of s)if(this.equalsFn(c,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,t]],void this.innerSize++;for(let p=0;p<c.length;p++)if(this.equalsFn(c[p][0],e))return void(c[p]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,(t,s)=>{for(const[c,p]of s)e(c,p)})}isEmpty(){return mu(this.inner)}size(){return this.innerSize}}const xg=new ms(On.comparator);function Go(){return xg}const Pg=new ms(On.comparator);function Eu(...r){let e=Pg;for(const t of r)e=e.insert(t.key,t);return e}function Rf(r){let e=Pg;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Da(){return xh()}function Og(){return xh()}function xh(){return new Oc(r=>r.toString(),(r,e)=>r.isEqual(e))}const p_=new ms(On.comparator),iy=new ys(On.comparator);function yi(...r){let e=iy;for(const t of r)e=e.add(t);return e}const xf=new ys(Rr);function wu(){return xf}function ed(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ys(e)?"-0":e}}function Ph(r){return{integerValue:""+r}}function Pf(r,e){return ua(e)?Ph(e):ed(r,e)}class jd{constructor(){this._=void 0}}function Mp(r,e,t){return r instanceof td?function(s,c){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&Sc(c)&&(c=ol(c)),c&&(p.fields.__previous_value__=c),{mapValue:p}}(t,e):r instanceof nd?Ng(r,e):r instanceof rd?dc(r,e):function(s,c){const p=jl(s,c),E=kg(p)+kg(s.wt);return ht(p)&&ht(s.wt)?Ph(E):ed(s.serializer,E)}(r,e)}function Iu(r,e,t){return r instanceof nd?Ng(r,e):r instanceof rd?dc(r,e):t}function jl(r,e){return r instanceof hc?ht(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class td extends jd{}class nd extends jd{constructor(e){super(),this.elements=e}}function Ng(r,e){const t=Fg(e);for(const s of r.elements)t.some(c=>Pa(c,s))||t.push(s);return{arrayValue:{values:t}}}class rd extends jd{constructor(e){super(),this.elements=e}}function dc(r,e){let t=Fg(e);for(const s of r.elements)t=t.filter(c=>!Pa(c,s));return{arrayValue:{values:t}}}class hc extends jd{constructor(e,t){super(),this.serializer=e,this.wt=t}}function kg(r){return hs(r.integerValue||r.doubleValue)}function Fg(r){return Ct(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Oh{constructor(e,t){this.field=e,this.transform=t}}class oy{constructor(e,t){this.version=e,this.transformResults=t}}class uo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new uo}static exists(e){return new uo(void 0,e)}static updateTime(e){return new uo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nh(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class Of{}function Lg(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new id(r.key,uo.none()):new kc(r.key,r.data,uo.none());{const t=r.data,s=$s.empty();let c=new ys(Is.comparator);for(let p of e.fields)if(!c.has(p)){let E=t.field(p);null===E&&p.length>1&&(p=p.popLast(),E=t.field(p)),null===E?s.delete(p):s.set(p,E),c=c.add(p)}return new Fc(r.key,s,new jo(c.toArray()),uo.none())}}function ay(r,e,t){r instanceof kc?function(s,c,p){const E=s.value.clone(),F=Sl(s.fieldTransforms,c,p.transformResults);E.setAll(F),c.convertToFoundDocument(p.version,E).setHasCommittedMutations()}(r,e,t):r instanceof Fc?function(s,c,p){if(!Nh(s.precondition,c))return void c.convertToUnknownDocument(p.version);const E=Sl(s.fieldTransforms,c,p.transformResults),F=c.data;F.setAll(Rp(s)),F.setAll(E),c.convertToFoundDocument(p.version,F).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function kh(r,e,t,s){return r instanceof kc?function(c,p,E,F){if(!Nh(c.precondition,p))return E;const K=c.value.clone(),te=ly(c.fieldTransforms,F,p);return K.setAll(te),p.convertToFoundDocument(p.version,K).setHasLocalMutations(),null}(r,e,t,s):r instanceof Fc?function(c,p,E,F){if(!Nh(c.precondition,p))return E;const K=ly(c.fieldTransforms,F,p),te=p.data;return te.setAll(Rp(c)),te.setAll(K),p.convertToFoundDocument(p.version,te).setHasLocalMutations(),null===E?null:E.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(me=>me.field))}(r,e,t,s):(E=t,Nh(r.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):E);var p,E}function Nf(r,e){let t=null;for(const s of r.fieldTransforms){const c=e.data.field(s.field),p=jl(s.transform,c||null);null!=p&&(null===t&&(t=$s.empty()),t.set(s.field,p))}return t||null}function Nc(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&Ma(t,s,(c,p)=>function sy(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof nd&&s instanceof nd||t instanceof rd&&s instanceof rd?Ma(t.elements,s.elements,Pa):t instanceof hc&&s instanceof hc?Pa(t.wt,s.wt):t instanceof td&&s instanceof td);var t,s}(c,p))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class kc extends Of{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Fc extends Of{constructor(e,t,s,c,p=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function Rp(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Sl(r,e,t){const s=new Map;dr(r.length===t.length);for(let c=0;c<t.length;c++){const p=r[c],E=p.transform,F=e.data.field(p.field);s.set(p.field,Iu(E,F,t[c]))}return s}function ly(r,e,t){const s=new Map;for(const c of r){const p=c.transform,E=t.data.field(c.field);s.set(c.field,Mp(p,E,e))}return s}class id extends Of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xp extends Of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fh{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const p=this.mutations[c];p.key.isEqual(e.key)&&ay(p,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=kh(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=kh(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Og();return this.mutations.forEach(c=>{const p=e.get(c.key),E=p.overlayedDocument;let F=this.applyToLocalView(E,p.mutatedFields);F=t.has(c.key)?null:F;const K=Lg(E,F);null!==K&&s.set(c.key,K),E.isValidDocument()||E.convertToNoDocument(tr.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yi())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,(t,s)=>Nc(t,s))&&Ma(this.baseMutations,e.baseMutations,(t,s)=>Nc(t,s))}}class Hd{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){dr(e.mutations.length===s.length);let c=p_;const p=e.mutations;for(let E=0;E<p.length;E++)c=c.insert(p[E].key,s[E].version);return new Hd(e,t,s,c)}}class Bg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $g{constructor(e,t){this.count=e,this.unchangedNames=t}}var Zo,ts;function Ug(r){switch(r){default:return Zn();case Lt.CANCELLED:case Lt.UNKNOWN:case Lt.DEADLINE_EXCEEDED:case Lt.RESOURCE_EXHAUSTED:case Lt.INTERNAL:case Lt.UNAVAILABLE:case Lt.UNAUTHENTICATED:return!1;case Lt.INVALID_ARGUMENT:case Lt.NOT_FOUND:case Lt.ALREADY_EXISTS:case Lt.PERMISSION_DENIED:case Lt.FAILED_PRECONDITION:case Lt.ABORTED:case Lt.OUT_OF_RANGE:case Lt.UNIMPLEMENTED:case Lt.DATA_LOSS:return!0}}function Vg(r){if(void 0===r)return ni("GRPC error has no .code"),Lt.UNKNOWN;switch(r){case Zo.OK:return Lt.OK;case Zo.CANCELLED:return Lt.CANCELLED;case Zo.UNKNOWN:return Lt.UNKNOWN;case Zo.DEADLINE_EXCEEDED:return Lt.DEADLINE_EXCEEDED;case Zo.RESOURCE_EXHAUSTED:return Lt.RESOURCE_EXHAUSTED;case Zo.INTERNAL:return Lt.INTERNAL;case Zo.UNAVAILABLE:return Lt.UNAVAILABLE;case Zo.UNAUTHENTICATED:return Lt.UNAUTHENTICATED;case Zo.INVALID_ARGUMENT:return Lt.INVALID_ARGUMENT;case Zo.NOT_FOUND:return Lt.NOT_FOUND;case Zo.ALREADY_EXISTS:return Lt.ALREADY_EXISTS;case Zo.PERMISSION_DENIED:return Lt.PERMISSION_DENIED;case Zo.FAILED_PRECONDITION:return Lt.FAILED_PRECONDITION;case Zo.ABORTED:return Lt.ABORTED;case Zo.OUT_OF_RANGE:return Lt.OUT_OF_RANGE;case Zo.UNIMPLEMENTED:return Lt.UNIMPLEMENTED;case Zo.DATA_LOSS:return Lt.DATA_LOSS;default:return Zn()}}(ts=Zo||(Zo={}))[ts.OK=0]="OK",ts[ts.CANCELLED=1]="CANCELLED",ts[ts.UNKNOWN=2]="UNKNOWN",ts[ts.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ts[ts.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ts[ts.NOT_FOUND=5]="NOT_FOUND",ts[ts.ALREADY_EXISTS=6]="ALREADY_EXISTS",ts[ts.PERMISSION_DENIED=7]="PERMISSION_DENIED",ts[ts.UNAUTHENTICATED=16]="UNAUTHENTICATED",ts[ts.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ts[ts.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ts[ts.ABORTED=10]="ABORTED",ts[ts.OUT_OF_RANGE=11]="OUT_OF_RANGE",ts[ts.UNIMPLEMENTED=12]="UNIMPLEMENTED",ts[ts.INTERNAL=13]="INTERNAL",ts[ts.UNAVAILABLE=14]="UNAVAILABLE",ts[ts.DATA_LOSS=15]="DATA_LOSS";class Pp{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return bu}static getOrCreateInstance(){return null===bu&&(bu=new Pp),bu}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let bu=null;function Op(){return new TextEncoder}const Np=new Ia([4294967295,4294967295],0);function jg(r){const e=Op().encode(r),t=new hu;return t.update(e),new Uint8Array(t.digest())}function Mo(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),p=e.getUint32(12,!0);return[new Ia([t,s],0),new Ia([c,p],0)]}class kp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Lh(`Invalid padding: ${t}`);if(s<0)throw new Lh(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Lh(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Lh(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=Ia.fromNumber(this.yt)}Tt(e,t,s){let c=e.add(t.multiply(Ia.fromNumber(s)));return 1===c.compare(Np)&&(c=new Ia([c.getBits(0),c.getBits(1)],0)),c.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=jg(e),[s,c]=Mo(t);for(let p=0;p<this.hashCount;p++){const E=this.Tt(s,c,p);if(!this.Et(E))return!1}return!0}static create(e,t,s){const c=e%8==0?0:8-e%8,p=new Uint8Array(Math.ceil(e/8)),E=new kp(p,c,t);return s.forEach(F=>E.insert(F)),E}insert(e){if(0===this.yt)return;const t=jg(e),[s,c]=Mo(t);for(let p=0;p<this.hashCount;p++){const E=this.Tt(s,c,p);this.Rt(E)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Lh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sd{constructor(e,t,s,c,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,zd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new sd(tr.min(),c,new ms(Rr),Go(),yi())}}class zd{constructor(e,t,s,c,p){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new zd(s,t,yi(),yi(),yi())}}class kf{constructor(e,t,s,c){this.vt=e,this.removedTargetIds=t,this.key=s,this.Pt=c}}class cy{constructor(e,t){this.targetId=e,this.bt=t}}class uy{constructor(e,t,s=Io.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class Hg{constructor(){this.Vt=0,this.St=Gg(),this.Dt=Io.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=yi(),t=yi(),s=yi();return this.St.forEach((c,p)=>{switch(p){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:Zn()}}),new zd(this.Dt,this.Ct,e,t,s)}$t(){this.xt=!1,this.St=Gg()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class zg{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=Go(),this.jt=dy(),this.zt=new ms(Rr)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const s=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&s.Mt(e.resumeToken);break;case 1:s.qt(),s.Nt||s.$t(),s.Mt(e.resumeToken);break;case 2:s.qt(),s.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(s.Ut(),s.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),s.Mt(e.resumeToken));break;default:Zn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((s,c)=>{this.Zt(c)&&t(c)})}ee(e){var t;const s=e.targetId,c=e.bt.count,p=this.ne(s);if(p){const E=p.target;if(di(E))if(0===c){const F=new On(E.path);this.Jt(s,F,Vi.newNoDocument(F,tr.min()))}else dr(1===c);else{const F=this.se(s);if(F!==c){const K=this.ie(e,F);0!==K&&(this.te(s),this.zt=this.zt.insert(s,2===K?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Pp.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(te,me,it){var Ft,rn,Sn,kn,_r,Ci;const rs={localCacheCount:me,existenceFilterCount:it.count},Mi=it.unchangedNames;return Mi&&(rs.bloomFilter={applied:0===te,hashCount:null!==(Ft=null==Mi?void 0:Mi.hashCount)&&void 0!==Ft?Ft:0,bitmapLength:null!==(kn=null===(Sn=null===(rn=null==Mi?void 0:Mi.bits)||void 0===rn?void 0:rn.bitmap)||void 0===Sn?void 0:Sn.length)&&void 0!==kn?kn:0,padding:null!==(Ci=null===(_r=null==Mi?void 0:Mi.bits)||void 0===_r?void 0:_r.padding)&&void 0!==Ci?Ci:0}),rs}(K,F,e.bt))}}}}ie(e,t){const{unchangedNames:s,count:c}=e.bt;if(!s||!s.bits)return 1;const{bits:{bitmap:p="",padding:E=0},hashCount:F=0}=s;let K,te;try{K=qo(p).toUint8Array()}catch(me){if(me instanceof oc)return lo("Decoding the base64 bloom filter in existence filter failed ("+me.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw me}try{te=new kp(K,E,F)}catch(me){return lo(me instanceof Lh?"BloomFilter error: ":"Applying bloom filter failed: ",me),1}return 0===te.yt?1:c!==t-this.re(e.targetId,te)?2:0}re(e,t){const s=this.Kt.getRemoteKeysForTarget(e);let c=0;return s.forEach(p=>{const E=this.Kt.oe(),F=`projects/${E.projectId}/databases/${E.database}/documents/${p.path.canonicalString()}`;t.At(F)||(this.Jt(e,p,null),c++)}),c}ue(e){const t=new Map;this.Gt.forEach((p,E)=>{const F=this.ne(E);if(F){if(p.current&&di(F.target)){const K=new On(F.target.path);null!==this.Qt.get(K)||this.ce(E,K)||this.Jt(E,K,Vi.newNoDocument(K,e))}p.kt&&(t.set(E,p.Ot()),p.$t())}});let s=yi();this.jt.forEach((p,E)=>{let F=!0;E.forEachWhile(K=>{const te=this.ne(K);return!te||"TargetPurposeLimboResolution"===te.purpose||(F=!1,!1)}),F&&(s=s.add(p))}),this.Qt.forEach((p,E)=>E.setReadTime(e));const c=new sd(e,t,this.zt,this.Qt,s);return this.Qt=Go(),this.jt=dy(),this.zt=new ms(Rr),c}Ht(e,t){if(!this.Zt(e))return;const s=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,s),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,s){if(!this.Zt(e))return;const c=this.Xt(e);this.ce(e,t)?c.Ft(t,1):c.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),s&&(this.Qt=this.Qt.insert(t,s))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new Hg,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new ys(Rr),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||yn("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new Hg),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function dy(){return new ms(On.comparator)}function Gg(){return new ms(On.comparator)}const Bh={asc:"ASCENDING",desc:"DESCENDING"},Fp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wg={and:"AND",or:"OR"};class Kg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fc(r,e){return r.useProto3Json||wo(e)?e:{value:e}}function Ro(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ja(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Gd(r,e){return Ro(r,e.toTimestamp())}function xo(r){return dr(!!r),tr.fromTimestamp(function(e){const t=Cl(e);return new us(t.seconds,t.nanos)}(r))}function $h(r,e){return(t=r,new $i(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function hy(r){const e=$i.fromString(r);return dr(Qg(e)),e}function od(r,e){return $h(r.databaseId,e.path)}function Lc(r,e){const t=hy(e);if(t.get(1)!==r.databaseId.projectId)throw new an(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new an(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new On(iu(t))}function Uh(r,e){return $h(r.databaseId,e)}function Lp(r){const e=hy(r);return 4===e.length?$i.emptyPath():iu(e)}function Wd(r){return new $i(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function iu(r){return dr(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Bp(r,e,t){return{name:od(r,e),fields:t.value.mapValue.fields}}function Vh(r,e,t){const s=Lc(r,e.name),c=xo(e.updateTime),p=e.createTime?xo(e.createTime):tr.min(),E=new $s({mapValue:{fields:e.fields}}),F=Vi.newFoundDocument(s,c,p,E);return t&&F.setHasCommittedMutations(),t?F.setHasCommittedMutations():F}function ad(r,e){let t;if(e instanceof kc)t={update:Bp(r,e.key,e.value)};else if(e instanceof id)t={delete:od(r,e.key)};else if(e instanceof Fc)t={update:Bp(r,e.key,e.data),updateMask:Zg(e.fieldMask)};else{if(!(e instanceof xp))return Zn();t={verify:od(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,p){const E=p.transform;if(E instanceof td)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof nd)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof rd)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof hc)return{fieldPath:p.field.canonicalString(),increment:E.wt};throw Zn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:Gd(r,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Zn()),t;var c}function ld(r,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?uo.updateTime(xo(c.updateTime)):void 0!==c.exists?uo.exists(c.exists):uo.none():uo.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(p,E){let F=null;"setToServerValue"in E?(dr("REQUEST_TIME"===E.setToServerValue),F=new td):"appendMissingElements"in E?F=new nd(E.appendMissingElements.values||[]):"removeAllFromArray"in E?F=new rd(E.removeAllFromArray.values||[]):"increment"in E?F=new hc(p,E.increment):Zn();const K=Is.fromServerFormat(E.fieldPath);return new Oh(K,F)}(r,c)):[];var c;if(e.update){const c=Lc(r,e.update.name),p=new $s({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new jo((e.updateMask.fieldPaths||[]).map(te=>Is.fromServerFormat(te)));return new Fc(c,p,E,t,s)}return new kc(c,p,t,s)}if(e.delete){const c=Lc(r,e.delete);return new id(c,t)}if(e.verify){const c=Lc(r,e.verify);return new xp(c,t)}return Zn()}function $p(r,e){return{documents:[Uh(r,e.path)]}}function Kd(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Uh(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Uh(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const c=function(K){if(0!==K.length)return jp(Yi.create(K,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const p=function(K){if(0!==K.length)return K.map(te=>{return{field:Cu((me=te).field),direction:qd(me.dir)};var me})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const E=fc(r,e.limit);var F,K;return null!==E&&(t.structuredQuery.limit=E),e.startAt&&(t.structuredQuery.startAt={before:(F=e.startAt).inclusive,values:F.position}),e.endAt&&(t.structuredQuery.endAt={before:!(K=e.endAt).inclusive,values:K.position}),t}function Up(r){let e=Lp(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){dr(1===s);const me=t.from[0];me.allDescendants?c=me.collectionId:e=e.child(me.collectionId)}let p=[];t.where&&(p=function(me){const it=Vp(me);return it instanceof Yi&&Qu(it)?it.getFilters():[it]}(t.where));let E=[];t.orderBy&&(E=t.orderBy.map(me=>{return new $l(Du((it=me).field),function(Ft){switch(Ft){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(it.direction));var it}));let F=null;t.limit&&(F=function(me){let it;return it="object"==typeof me?me.value:me,wo(it)?null:it}(t.limit));let K=null;var me;t.startAt&&(K=new Ho((me=t.startAt).values||[],!!me.before));let te=null;return t.endAt&&(te=function(me){return new Ho(me.values||[],!me.before)}(t.endAt)),cc(e,c,E,p,F,"F",K,te)}function Vp(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Du(e.unaryFilter.field);return Ai.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Du(e.unaryFilter.field);return Ai.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Du(e.unaryFilter.field);return Ai.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=Du(e.unaryFilter.field);return Ai.create(p,"!=",{nullValue:"NULL_VALUE"});default:return Zn()}}(r):void 0!==r.fieldFilter?Ai.create(Du((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Zn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Yi.create(e.compositeFilter.filters.map(t=>Vp(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Zn()}}(e.compositeFilter.op))}(r):Zn();var e}function qd(r){return Bh[r]}function fy(r){return Fp[r]}function Yg(r){return Wg[r]}function Cu(r){return{fieldPath:r.canonicalString()}}function Du(r){return Is.fromServerFormat(r.fieldPath)}function jp(r){return r instanceof Ai?function(e){if("=="===e.op){if(In(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NAN"}};if(jt(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(In(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NOT_NAN"}};if(jt(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cu(e.field),op:fy(e.op),value:e.value}}}(r):r instanceof Yi?function(e){const t=e.getFilters().map(s=>jp(s));return 1===t.length?t[0]:{compositeFilter:{op:Yg(e.op),filters:t}}}(r):Zn()}function Zg(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qg(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class Bc{constructor(e,t,s,c,p=tr.min(),E=tr.min(),F=Io.EMPTY_BYTE_STRING,K=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=F,this.expectedCount=K}withSequenceNumber(e){return new Bc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class py{constructor(e){this.le=e}}function Es(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:od(c=r.le,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Ro(c,p.version.toTimestamp()),createTime:Ro(c,p.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Al(e.version)};else{if(!e.isUnknownDocument())return Zn();s.unknownDocument={path:t.path.toArray(),version:Al(e.version)}}var c,p;return s}function Hp(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Al(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pc(r){const e=new us(r.seconds,r.nanoseconds);return tr.fromTimestamp(e)}function ud(r,e){const t=(e.baseMutations||[]).map(p=>ld(r.le,p));for(let p=0;p<e.mutations.length-1;++p)p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(e.mutations[p].updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p);const s=e.mutations.map(p=>ld(r.le,p)),c=us.fromMillis(e.localWriteTimeMs);return new Fh(e.batchId,c,t,s)}function Yd(r){const e=pc(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?pc(r.lastLimboFreeSnapshotVersion):tr.min();let s;var c;return void 0!==r.query.documents?(dr(1===(c=r.query).documents.length),s=Ao(tu(Lp(c.documents[0])))):s=Ao(Up(r.query)),new Bc(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Io.fromBase64String(r.resumeToken))}function Xg(r,e){const t=Al(e.snapshotVersion),s=Al(e.lastLimboFreeSnapshotVersion);let c;c=di(e.target)?$p(r.le,e.target):Kd(r.le,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bn(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function zp(r){const e=Up({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?uc(e,e.limit,"L"):e}function Gp(r,e){return new Bg(e.largestBatchId,ld(r.le,e.overlayMutation))}function Wp(r,e){const t=e.path.lastSegment();return[r,Ls(e.path.popLast()),t]}function Kp(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:Al(s.readTime),documentKey:Ls(s.documentKey.path),largestBatchId:s.largestBatchId}}class qp{getBundleMetadata(e,t){return Ff(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:pc(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return Ff(e).put({bundleId:(s=t).id,createTime:Al(xo(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return my(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:zp(c.bundledQuery),readTime:pc(c.readTime)};var c})}saveNamedQuery(e,t){return my(e).put({name:(s=t).name,readTime:Al(xo(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Ff(r){return Vo(r,"bundles")}function my(r){return Vo(r,"namedQueries")}class Zd{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new Zd(e,t.uid||"")}getOverlay(e,t){return su(e).get(Wp(this.userId,t)).next(s=>s?Gp(this.serializer,s):null)}getOverlays(e,t){const s=Da();return w.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&s.set(c,p)})).next(()=>s)}saveOverlays(e,t,s){const c=[];return s.forEach((p,E)=>{const F=new Bg(t,E);c.push(this.de(e,F))}),w.waitFor(c)}removeOverlaysForBatchId(e,t,s){const c=new Set;t.forEach(E=>c.add(Ls(E.getCollectionPath())));const p=[];return c.forEach(E=>{const F=IDBKeyRange.bound([this.userId,E,s],[this.userId,E,s+1],!1,!0);p.push(su(e).J("collectionPathOverlayIndex",F))}),w.waitFor(p)}getOverlaysForCollection(e,t,s){const c=Da(),p=Ls(t),E=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,Number.POSITIVE_INFINITY],!0);return su(e).j("collectionPathOverlayIndex",E).next(F=>{for(const K of F){const te=Gp(this.serializer,K);c.set(te.getKey(),te)}return c})}getOverlaysForCollectionGroup(e,t,s,c){const p=Da();let E;const F=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return su(e).X({index:"collectionGroupOverlayIndex",range:F},(K,te,me)=>{const it=Gp(this.serializer,te);p.size()<c||it.largestBatchId===E?(p.set(it.getKey(),it),E=it.largestBatchId):me.done()}).next(()=>p)}de(e,t){return su(e).put(function(s,c,p){const[E,F,K]=Wp(c,p.mutation.key);return{userId:c,collectionPath:F,documentId:K,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:ad(s.le,p.mutation)}}(this.serializer,this.userId,t))}}function su(r){return Vo(r,"documentOverlays")}class dd{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(hs(e.integerValue));else if("doubleValue"in e){const s=hs(e.doubleValue);isNaN(s)?this.ge(t,13):(this.ge(t,15),Ys(s)?t.ye(0):t.ye(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ge(t,20),"string"==typeof s?t.pe(s):(t.pe(`${s.seconds||""}`),t.ye(s.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(qo(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ge(t,45),t.ye(s.latitude||0),t.ye(s.longitude||0)}else"mapValue"in e?Wr(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):Zn()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const s=e.fields||{};this.ge(t,55);for(const c of Object.keys(s))this.Ie(c,t),this.we(s[c],t)}ve(e,t){const s=e.values||[];this.ge(t,50);for(const c of s)this.we(c,t)}Ae(e,t){this.ge(t,37),On.fromName(e).path.forEach(s=>{this.ge(t,60),this.Pe(s,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function yy(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function Jg(r){const e=64-function(t){let s=0;for(let c=0;c<8;++c){const p=yy(255&t[c]);if(s+=p,8!==p)break}return s}(r);return Math.ceil(e/8)}dd.be=new dd;class _y{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Se(s.value),s=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.xe(s.value),s=t.next();this.Ne()}ke(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Se(s);else if(s<2048)this.Se(960|s>>>6),this.Se(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Se(480|s>>>12),this.Se(128|63&s>>>6),this.Se(128|63&s);else{const c=t.codePointAt(0);this.Se(240|c>>>18),this.Se(128|63&c>>>12),this.Se(128|63&c>>>6),this.Se(128|63&c)}}this.De()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.xe(s);else if(s<2048)this.xe(960|s>>>6),this.xe(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.xe(480|s>>>12),this.xe(128|63&s>>>6),this.xe(128|63&s);else{const c=t.codePointAt(0);this.xe(240|c>>>18),this.xe(128|63&c>>>12),this.xe(128|63&c>>>6),this.xe(128|63&c)}}this.Ne()}Oe(e){const t=this.$e(e),s=Jg(t);this.Fe(1+s),this.buffer[this.position++]=255&s;for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=255&t[c]}Be(e){const t=this.$e(e),s=Jg(t);this.Fe(1+s),this.buffer[this.position++]=~(255&s);for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(c){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,c,!1),new Uint8Array(p.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let c=1;c<t.length;++c)t[c]^=s?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class vy{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class Ey{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class zh{constructor(){this.Qe=new _y,this.je=new vy(this.Qe),this.ze=new Ey(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class Hl{constructor(e,t,s,c){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=c}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Hl(this.indexId,this.documentKey,this.arrayValue,s)}}function ka(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=em(r.arrayValue,e.arrayValue),0!==t?t:(t=em(r.directionalValue,e.directionalValue),0!==t?t:On.comparator(r.documentKey,e.documentKey)))}function em(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class wy{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const s=t;s.isInequality()?this.Xe=s:this.Ye.push(s)}}Ze(e){dr(e.collectionGroup===this.collectionId);const t=Jl(e);if(void 0!==t&&!this.tn(t))return!1;const s=rl(e);let c=0,p=0;for(;c<s.length&&this.tn(s[c]);++c);if(c===s.length)return!0;if(void 0!==this.Xe){const E=s[c];if(!this.en(this.Xe,E)||!this.nn(this.Je[p++],E))return!1;++c}for(;c<s.length;++c)if(p>=this.Je.length||!this.nn(this.Je[p++],s[c]))return!1;return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Iy(r){var e,t;if(dr(r instanceof Ai||r instanceof Yi),r instanceof Ai){if(r instanceof ne){const c=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(p=>Ai.create(r.field,"==",p)))||[];return Yi.create(c,"or")}return r}const s=r.filters.map(c=>Iy(c));return Yi.create(s,r.op)}function m_(r){if(0===r.getFilters().length)return[];const e=Bf(Iy(r));return dr(Yp(e)),Lf(e)||tm(e)?[e]:e.getFilters()}function Lf(r){return r instanceof Ai}function tm(r){return r instanceof Yi&&Qu(r)}function Yp(r){return Lf(r)||tm(r)||function(e){if(e instanceof Yi&&Ul(e)){for(const t of e.getFilters())if(!Lf(t)&&!tm(t))return!1;return!0}return!1}(r)}function Bf(r){if(dr(r instanceof Ai||r instanceof Yi),r instanceof Ai)return r;if(1===r.filters.length)return Bf(r.filters[0]);const e=r.filters.map(s=>Bf(s));let t=Yi.create(e,r.op);return t=$f(t),Yp(t)?t:(dr(t instanceof Yi),dr(Mc(t)),dr(t.filters.length>1),t.filters.reduce((s,c)=>Zp(s,c)))}function Zp(r,e){let t;return dr(r instanceof Ai||r instanceof Yi),dr(e instanceof Ai||e instanceof Yi),t=r instanceof Ai?e instanceof Ai?Yi.create([r,e],"and"):Qp(r,e):e instanceof Ai?Qp(e,r):function(s,c){if(dr(s.filters.length>0&&c.filters.length>0),Mc(s)&&Mc(c))return Mh(s,c.getFilters());const p=Ul(s)?s:c,E=Ul(s)?c:s,F=p.filters.map(K=>Zp(K,E));return Yi.create(F,"or")}(r,e),$f(t)}function Qp(r,e){if(Mc(e))return Mh(e,r.getFilters());{const t=e.filters.map(s=>Zp(r,s));return Yi.create(t,"or")}}function $f(r){if(dr(r instanceof Ai||r instanceof Yi),r instanceof Ai)return r;const e=r.getFilters();if(1===e.length)return $f(e[0]);if(Sh(r))return r;const t=e.map(c=>$f(c)),s=[];return t.forEach(c=>{c instanceof Ai?s.push(c):c instanceof Yi&&(c.op===r.op?s.push(...c.filters):s.push(c))}),1===s.length?s[0]:Yi.create(s,r.op)}class y_{constructor(){this.sn=new Ml}addToCollectionParentIndex(e,t){return this.sn.add(t),w.resolve()}getCollectionParents(e,t){return w.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return w.resolve()}deleteFieldIndex(e,t){return w.resolve()}getDocumentsMatchingTarget(e,t){return w.resolve(null)}getIndexType(e,t){return w.resolve(0)}getFieldIndexes(e,t){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,t){return w.resolve(co.min())}getMinOffsetFromCollectionGroup(e,t){return w.resolve(co.min())}updateCollectionGroup(e,t,s){return w.resolve()}updateIndexEntries(e,t){return w.resolve()}}class Ml{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new ys($i.comparator),p=!c.has(s);return this.index[t]=c.add(s),p}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new ys($i.comparator)).toArray()}}const Uf=new Uint8Array(0);class nm{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new Ml,this.on=new Oc(s=>Bn(s),(s,c)=>gr(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const s=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const p={collectionId:s,parent:Ls(c)};return Vf(e).put(p)}return w.resolve()}getCollectionParents(e,t){const s=[],c=IDBKeyRange.bound([t,""],[Ic(t),""],!1,!0);return Vf(e).j(c).next(p=>{for(const E of p){if(E.collectionId!==t)break;s.push(da(E.parent))}return s})}addFieldIndex(e,t){const s=Gh(e),c={indexId:(E=t).indexId,collectionGroup:E.collectionGroup,fields:E.fields.map(F=>[F.fieldPath.canonicalString(),F.kind])};var E;delete c.indexId;const p=s.add(c);if(t.indexState){const E=hd(e);return p.next(F=>{E.put(Kp(F,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return p.next()}deleteFieldIndex(e,t){const s=Gh(e),c=hd(e),p=zl(e);return s.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=zl(e);let c=!0;const p=new Map;return w.forEach(this.un(t),E=>this.cn(e,E).next(F=>{c&&(c=!!F),p.set(E,F)})).next(()=>{if(c){let E=yi();const F=[];return w.forEach(p,(K,te)=>{var me;yn("IndexedDbIndexManager",`Using index ${me=K,`id=${me.indexId}|cg=${me.collectionGroup}|f=${me.fields.map(Mi=>`${Mi.fieldPath}:${Mi.kind}`).join(",")}`} to execute ${Bn(t)}`);const it=function(Mi,Fa){const so=Jl(Fa);if(void 0===so)return null;for(const Us of zo(Mi,so.fieldPath))switch(Us.op){case"array-contains-any":return Us.value.arrayValue.values||[];case"array-contains":return[Us.value]}return null}(te,K),Ft=function(Mi,Fa){const so=new Map;for(const Us of rl(Fa))for(const La of zo(Mi,Us.fieldPath))switch(La.op){case"==":case"in":so.set(Us.fieldPath.canonicalString(),La.value);break;case"not-in":case"!=":return so.set(Us.fieldPath.canonicalString(),La.value),Array.from(so.values())}return null}(te,K),rn=function(Mi,Fa){const so=[];let Us=!0;for(const La of rl(Fa)){const Ih=0===La.kind?Dl(Mi,La.fieldPath,Mi.startAt):Rc(Mi,La.fieldPath,Mi.startAt);so.push(Ih.value),Us&&(Us=Ih.inclusive)}return new Ho(so,Us)}(te,K),Sn=function(Mi,Fa){const so=[];let Us=!0;for(const La of rl(Fa)){const Ih=0===La.kind?Rc(Mi,La.fieldPath,Mi.endAt):Dl(Mi,La.fieldPath,Mi.endAt);so.push(Ih.value),Us&&(Us=Ih.inclusive)}return new Ho(so,Us)}(te,K),kn=this.an(K,te,rn),_r=this.an(K,te,Sn),Ci=this.hn(K,te,Ft),rs=this.ln(K.indexId,it,kn,rn.inclusive,_r,Sn.inclusive,Ci);return w.forEach(rs,Mi=>s.H(Mi,t.limit).next(Fa=>{Fa.forEach(so=>{const Us=On.fromSegments(so.documentKey);E.has(Us)||(E=E.add(Us),F.push(Us))})}))}).next(()=>F)}return w.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:m_(Yi.create(e.filters,"and")).map(s=>Rn(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,s,c,p,E,F){const K=(null!=t?t.length:1)*Math.max(s.length,p.length),te=K/(null!=t?t.length:1),me=[];for(let it=0;it<K;++it){const Ft=t?this.fn(t[it/te]):Uf,rn=this.dn(e,Ft,s[it%te],c),Sn=this._n(e,Ft,p[it%te],E),kn=F.map(_r=>this.dn(e,Ft,_r,!0));me.push(...this.createRange(rn,Sn,kn))}return me}dn(e,t,s,c){const p=new Hl(e,On.empty(),t,s);return c?p:p.He()}_n(e,t,s,c){const p=new Hl(e,On.empty(),t,s);return c?p.He():p}cn(e,t){const s=new wy(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(p=>{let E=null;for(const F of p)s.Ze(F)&&(!E||F.fields.length>E.fields.length)&&(E=F);return E})}getIndexType(e,t){let s=2;const c=this.un(t);return w.forEach(c,p=>this.cn(e,p).next(E=>{E?0!==s&&E.fields.length<function(F){let K=new ys(Is.comparator),te=!1;for(const me of F.filters)for(const it of me.getFlattenedFilters())it.field.isKeyField()||("array-contains"===it.op||"array-contains-any"===it.op?te=!0:K=K.add(it.field));for(const me of F.orderBy)me.field.isKeyField()||(K=K.add(me.field));return K.size+(te?1:0)}(p)&&(s=1):s=0})).next(()=>null!==t.limit&&c.length>1&&2===s?1:s)}wn(e,t){const s=new zh;for(const c of rl(e)){const p=t.data.field(c.fieldPath);if(null==p)return null;const E=s.We(c.kind);dd.be._e(p,E)}return s.Ge()}fn(e){const t=new zh;return dd.be._e(e,t.We(0)),t.Ge()}mn(e,t){const s=new zh;return dd.be._e(ke(this.databaseId,t),s.We(function(c){const p=rl(c);return 0===p.length?0:p[p.length-1].kind}(e))),s.Ge()}hn(e,t,s){if(null===s)return[];let c=[];c.push(new zh);let p=0;for(const E of rl(e)){const F=s[p++];for(const K of c)if(this.gn(t,E.fieldPath)&&Ct(F))c=this.yn(c,E,F);else{const te=K.We(E.kind);dd.be._e(F,te)}}return this.pn(c)}an(e,t,s){return this.hn(e,t,s.position)}pn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Ge();return t}yn(e,t,s){const c=[...e],p=[];for(const E of s.arrayValue.values||[])for(const F of c){const K=new zh;K.seed(F.Ge()),dd.be._e(E,K.We(t.kind)),p.push(K)}return p}gn(e,t){return!!e.filters.find(s=>s instanceof Ai&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Gh(e),c=hd(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(p=>{const E=[];return w.forEach(p,F=>c.get([F.indexId,this.uid]).next(K=>{E.push(function(te,me){const it=me?new bc(me.sequenceNumber,new co(pc(me.readTime),new On(da(me.documentKey)),me.largestBatchId)):bc.empty(),Ft=te.fields.map(([rn,Sn])=>new Yc(Is.fromServerFormat(rn),Sn));return new qc(te.indexId,te.collectionGroup,Ft,it)}(F,K))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,c)=>{const p=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==p?p:Rr(s.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const c=Gh(e),p=hd(e);return this.In(e).next(E=>c.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(F=>w.forEach(F,K=>p.put(Kp(K.indexId,this.user,E,s)))))}updateIndexEntries(e,t){const s=new Map;return w.forEach(t,(c,p)=>{const E=s.get(c.collectionGroup);return(E?w.resolve(E):this.getFieldIndexes(e,c.collectionGroup)).next(F=>(s.set(c.collectionGroup,F),w.forEach(F,K=>this.Tn(e,c,K).next(te=>{const me=this.En(p,K);return te.isEqual(me)?w.resolve():this.An(e,p,K,te,me)}))))})}Rn(e,t,s,c){return zl(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.mn(s,t.key),documentKey:t.key.path.toArray()})}vn(e,t,s,c){return zl(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.mn(s,t.key),t.key.path.toArray()])}Tn(e,t,s){const c=zl(e);let p=new ys(ka);return c.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,t)])},(E,F)=>{p=p.add(new Hl(s.indexId,t,F.arrayValue,F.directionalValue))}).next(()=>p)}En(e,t){let s=new ys(ka);const c=this.wn(t,e);if(null==c)return s;const p=Jl(t);if(null!=p){const E=e.data.field(p.fieldPath);if(Ct(E))for(const F of E.arrayValue.values||[])s=s.add(new Hl(t.indexId,e.key,this.fn(F),c))}else s=s.add(new Hl(t.indexId,e.key,Uf,c));return s}An(e,t,s,c,p){yn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const E=[];return function(F,K,te,me,it){const Ft=F.getIterator(),rn=K.getIterator();let Sn=sl(Ft),kn=sl(rn);for(;Sn||kn;){let _r=!1,Ci=!1;if(Sn&&kn){const rs=te(Sn,kn);rs<0?Ci=!0:rs>0&&(_r=!0)}else null!=Sn?Ci=!0:_r=!0;_r?(me(kn),kn=sl(rn)):Ci?(it(Sn),Sn=sl(Ft)):(Sn=sl(Ft),kn=sl(rn))}}(c,p,ka,F=>{E.push(this.Rn(e,t,s,F))},F=>{E.push(this.vn(e,t,s,F))}),w.waitFor(E)}In(e){let t=1;return hd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,p)=>{p.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((E,F)=>ka(E,F)).filter((E,F,K)=>!F||0!==ka(E,K[F-1]));const c=[];c.push(e);for(const E of s){const F=ka(E,e),K=ka(E,t);if(0===F)c[0]=e.He();else if(F>0&&K<0)c.push(E),c.push(E.He());else if(K>0)break}c.push(t);const p=[];for(let E=0;E<c.length;E+=2){if(this.Pn(c[E],c[E+1]))return[];p.push(IDBKeyRange.bound([c[E].indexId,this.uid,c[E].arrayValue,c[E].directionalValue,Uf,[]],[c[E+1].indexId,this.uid,c[E+1].arrayValue,c[E+1].directionalValue,Uf,[]]))}return p}Pn(e,t){return ka(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Wh)}getMinOffset(e,t){return w.mapArray(this.un(t),s=>this.cn(e,s).next(c=>c||Zn())).next(Wh)}}function Vf(r){return Vo(r,"collectionParents")}function zl(r){return Vo(r,"indexEntries")}function Gh(r){return Vo(r,"indexConfiguration")}function hd(r){return Vo(r,"indexState")}function Wh(r){dr(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const c=r[s].indexState.offset;Ua(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new co(e.readTime,e.documentKey,t)}const jf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ns{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Ns(e,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Xp(r,e,t){const s=r.store("mutations"),c=r.store("documentMutations"),p=[],E=IDBKeyRange.only(t.batchId);let F=0;const K=s.X({range:E},(me,it,Ft)=>(F++,Ft.delete()));p.push(K.next(()=>{dr(1===F)}));const te=[];for(const me of t.mutations){const it=ec(e,me.key.path,t.batchId);p.push(c.delete(it)),te.push(me.key)}return w.waitFor(p).next(()=>te)}function hi(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Zn();e=r.noDocument}return JSON.stringify(e).length}Ns.DEFAULT_COLLECTION_PERCENTILE=10,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ns.DEFAULT=new Ns(41943040,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ns.DISABLED=new Ns(-1,0,0);class Qd{constructor(e,t,s,c){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=c,this.bn={}}static fe(e,t,s,c){dr(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new Qd(p,t,s,c)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gc(e).X({index:"userMutationsIndex",range:s},(c,p,E)=>{t=!1,E.done()}).next(()=>t)}addMutationBatch(e,t,s,c){const p=Kh(e),E=gc(e);return E.add({}).next(F=>{dr("number"==typeof F);const K=new Fh(F,t,s,c),te=function(Ft,rn,Sn){const kn=Sn.baseMutations.map(Ci=>ad(Ft.le,Ci)),_r=Sn.mutations.map(Ci=>ad(Ft.le,Ci));return{userId:rn,batchId:Sn.batchId,localWriteTimeMs:Sn.localWriteTime.toMillis(),baseMutations:kn,mutations:_r}}(this.serializer,this.userId,K),me=[];let it=new ys((Ft,rn)=>Rr(Ft.canonicalString(),rn.canonicalString()));for(const Ft of c){const rn=ec(this.userId,Ft.key.path,F);it=it.add(Ft.key.path.popLast()),me.push(E.put(te)),me.push(p.put(rn,qu))}return it.forEach(Ft=>{me.push(this.indexManager.addToCollectionParentIndex(e,Ft))}),e.addOnCommittedListener(()=>{this.bn[F]=K.keys()}),w.waitFor(me).next(()=>K)})}lookupMutationBatch(e,t){return gc(e).get(t).next(s=>s?(dr(s.userId===this.userId),ud(this.serializer,s)):null)}Vn(e,t){return this.bn[t]?w.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const c=s.keys();return this.bn[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=IDBKeyRange.lowerBound([this.userId,s]);let p=null;return gc(e).X({index:"userMutationsIndex",range:c},(E,F,K)=>{F.userId===this.userId&&(dr(F.batchId>=s),p=ud(this.serializer,F)),K.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return gc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(c,p,E)=>{s=p.batchId,E.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gc(e).j("userMutationsIndex",t).next(s=>s.map(c=>ud(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=wl(this.userId,t.path),c=IDBKeyRange.lowerBound(s),p=[];return Kh(e).X({range:c},(E,F,K)=>{const[te,me,it]=E,Ft=da(me);if(te===this.userId&&t.path.isEqual(Ft))return gc(e).get(it).next(rn=>{if(!rn)throw Zn();dr(rn.userId===this.userId),p.push(ud(this.serializer,rn))});K.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ys(Rr);const c=[];return t.forEach(p=>{const E=wl(this.userId,p.path),F=IDBKeyRange.lowerBound(E),K=Kh(e).X({range:F},(te,me,it)=>{const[Ft,rn,Sn]=te,kn=da(rn);Ft===this.userId&&p.path.isEqual(kn)?s=s.add(Sn):it.done()});c.push(K)}),w.waitFor(c).next(()=>this.Sn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1,p=wl(this.userId,s),E=IDBKeyRange.lowerBound(p);let F=new ys(Rr);return Kh(e).X({range:E},(K,te,me)=>{const[it,Ft,rn]=K,Sn=da(Ft);it===this.userId&&s.isPrefixOf(Sn)?Sn.length===c&&(F=F.add(rn)):me.done()}).next(()=>this.Sn(e,F))}Sn(e,t){const s=[],c=[];return t.forEach(p=>{c.push(gc(e).get(p).next(E=>{if(null===E)throw Zn();dr(E.userId===this.userId),s.push(ud(this.serializer,E))}))}),w.waitFor(c).next(()=>s)}removeMutationBatch(e,t){return Xp(e.at,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),w.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return w.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return Kh(e).X({range:s},(p,E,F)=>{if(p[0]===this.userId){const K=da(p[1]);c.push(K)}else F.done()}).next(()=>{dr(0===c.length)})})}containsKey(e,t){return Hf(e,this.userId,t)}Cn(e){return rm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Hf(r,e,t){const s=wl(e,t.path),c=s[1],p=IDBKeyRange.lowerBound(s);let E=!1;return Kh(r).X({range:p,Y:!0},(F,K,te)=>{const[me,it,Ft]=F;me===e&&it===c&&(E=!0),te.done()}).next(()=>E)}function gc(r){return Vo(r,"mutations")}function Kh(r){return Vo(r,"documentMutations")}function rm(r){return Vo(r,"mutationQueues")}class cl{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new cl(0)}static kn(){return new cl(-1)}}class im{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const s=new cl(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>tr.fromTimestamp(new us(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Mn(e).next(c=>(c.highestListenSequenceNumber=t,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.On(e,c)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(s=>(s.targetCount+=1,this.Fn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fd(e).delete(t.targetId)).next(()=>this.Mn(e)).next(s=>(dr(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let c=0;const p=[];return fd(e).X((E,F)=>{const K=Yd(F);K.sequenceNumber<=t&&null===s.get(K.targetId)&&(c++,p.push(this.removeTargetData(e,K)))}).next(()=>w.waitFor(p)).next(()=>c)}forEachTarget(e,t){return fd(e).X((s,c)=>{const p=Yd(c);t(p)})}Mn(e){return by(e).get("targetGlobalKey").next(t=>(dr(null!==t),t))}On(e,t){return by(e).put("targetGlobalKey",t)}$n(e,t){return fd(e).put(Xg(this.serializer,t))}Fn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Bn(t),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let p=null;return fd(e).X({range:c,index:"queryTargetsIndex"},(E,F,K)=>{const te=Yd(F);gr(t,te.target)&&(p=te,K.done())}).next(()=>p)}addMatchingKeys(e,t,s){const c=[],p=Tu(e);return t.forEach(E=>{const F=Ls(E.path);c.push(p.put({targetId:s,path:F})),c.push(this.referenceDelegate.addReference(e,s,E))}),w.waitFor(c)}removeMatchingKeys(e,t,s){const c=Tu(e);return w.forEach(t,p=>{const E=Ls(p.path);return w.waitFor([c.delete([s,E]),this.referenceDelegate.removeReference(e,s,p)])})}removeMatchingKeysForTargetId(e,t){const s=Tu(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),c=Tu(e);let p=yi();return c.X({range:s,Y:!0},(E,F,K)=>{const te=da(E[1]),me=new On(te);p=p.add(me)}).next(()=>p)}containsKey(e,t){const s=Ls(t.path),c=IDBKeyRange.bound([s],[Ic(s)],!1,!0);let p=0;return Tu(e).X({index:"documentTargetsIndex",Y:!0,range:c},([E,F],K,te)=>{0!==E&&(p++,te.done())}).next(()=>p>0)}he(e,t){return fd(e).get(t).next(s=>s?Yd(s):null)}}function fd(r){return Vo(r,"targets")}function by(r){return Vo(r,"targetGlobal")}function Tu(r){return Vo(r,"targetDocuments")}function sm([r,e],[t,s]){const c=Rr(r,t);return 0===c?Rr(e,s):c}class Jp{constructor(e){this.Bn=e,this.buffer=new ys(sm),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();sm(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class om{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;yn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,oe.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){dt(s)?yn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield R(s)}yield t.Gn(3e5)}))}}class Su{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return w.resolve(Ji.ct);const s=new Jp(t);return this.Qn.forEachTarget(e,c=>s.Un(c.sequenceNumber)).next(()=>this.Qn.zn(e,c=>s.Un(c))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Qn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(yn("LruGarbageCollector","Garbage collection skipped; disabled"),w.resolve(jf)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(yn("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jf):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let s,c,p,E,F,K,te;const me=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(it=>(it>this.params.maximumSequenceNumbersToCollect?(yn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${it}`),c=this.params.maximumSequenceNumbersToCollect):c=it,E=Date.now(),this.nthSequenceNumber(e,c))).next(it=>(s=it,F=Date.now(),this.removeTargets(e,s,t))).next(it=>(p=it,K=Date.now(),this.removeOrphanedDocuments(e,s))).next(it=>(te=Date.now(),Yl()<=Re.in.DEBUG&&yn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-me}ms\n\tDetermined least recently used ${c} in `+(F-E)+`ms\n\tRemoved ${p} targets in `+(K-F)+`ms\n\tRemoved ${it} documents in `+(te-K)+`ms\nTotal Duration: ${te-me}ms`),w.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:p,documentsRemoved:it})))}}class eg{constructor(e,t){this.db=e,this.garbageCollector=function zf(r,e){return new Su(r,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(c=>s+c))}Hn(e){let t=0;return this.zn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(s,c)=>t(c))}addReference(e,t,s){return pd(e,s)}removeReference(e,t,s){return pd(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return pd(e,t)}Yn(e,t){return function(s,c){let p=!1;return rm(s).Z(E=>Hf(s,E,c).next(F=>(F&&(p=!0),w.resolve(!F)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let p=0;return this.Jn(e,(E,F)=>{if(F<=t){const K=this.Yn(e,E).next(te=>{if(!te)return p++,s.getEntry(e,E).next(()=>(s.removeEntry(E,tr.min()),Tu(e).delete([0,Ls(E.path)])))});c.push(K)}}).next(()=>w.waitFor(c)).next(()=>s.apply(e)).next(()=>p)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return pd(e,t)}Jn(e,t){const s=Tu(e);let c,p=Ji.ct;return s.X({index:"documentTargetsIndex"},([E,F],{path:K,sequenceNumber:te})=>{0===E?(p!==Ji.ct&&t(new On(da(c)),p),p=te,c=K):p=Ji.ct}).next(()=>{p!==Ji.ct&&t(new On(da(c)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pd(r,e){return Tu(r).put((s=r.currentSequenceNumber,{targetId:0,path:Ls(e.path),sequenceNumber:s}));var s}class am{constructor(){this.changes=new Oc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?w.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ou(e).put(s)}removeEntry(e,t,s){return ou(e).delete(function(c,p){const E=c.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],Hp(p),E[E.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Xn(e,s)))}getEntry(e,t){let s=Vi.newInvalidDocument(t);return ou(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Xd(t))},(c,p)=>{s=this.Zn(t,p)}).next(()=>s)}ts(e,t){let s={size:0,document:Vi.newInvalidDocument(t)};return ou(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Xd(t))},(c,p)=>{s={document:this.Zn(t,p),size:hi(p)}}).next(()=>s)}getEntries(e,t){let s=Go();return this.es(e,t,(c,p)=>{const E=this.Zn(c,p);s=s.insert(c,E)}).next(()=>s)}ns(e,t){let s=Go(),c=new ms(On.comparator);return this.es(e,t,(p,E)=>{const F=this.Zn(p,E);s=s.insert(p,F),c=c.insert(p,hi(E))}).next(()=>({documents:s,ss:c}))}es(e,t,s){if(t.isEmpty())return w.resolve();let c=new ys(au);t.forEach(K=>c=c.add(K));const p=IDBKeyRange.bound(Xd(c.first()),Xd(c.last())),E=c.getIterator();let F=E.getNext();return ou(e).X({index:"documentKeyIndex",range:p},(K,te,me)=>{const it=On.fromSegments([...te.prefixPath,te.collectionGroup,te.documentId]);for(;F&&au(F,it)<0;)s(F,null),F=E.getNext();F&&F.isEqual(it)&&(s(F,te),F=E.hasNext()?E.getNext():null),F?me.G(Xd(F)):me.done()}).next(()=>{for(;F;)s(F,null),F=E.hasNext()?E.getNext():null})}getDocumentsMatchingQuery(e,t,s,c){const p=t.path,E=[p.popLast().toArray(),p.lastSegment(),Hp(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],F=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ou(e).j(IDBKeyRange.bound(E,F,!0)).next(K=>{let te=Go();for(const me of K){const it=this.Zn(On.fromSegments(me.prefixPath.concat(me.collectionGroup,me.documentId)),me);it.isFoundDocument()&&(Na(t,it)||c.has(it.key))&&(te=te.insert(it.key,it))}return te})}getAllFromCollectionGroup(e,t,s,c){let p=Go();const E=$c(t,s),F=$c(t,co.max());return ou(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,F,!0)},(K,te,me)=>{const it=this.Zn(On.fromSegments(te.prefixPath.concat(te.collectionGroup,te.documentId)),te);p=p.insert(it.key,it),p.size===c&&me.done()}).next(()=>p)}newChangeBuffer(e){return new tg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qh(e).get("remoteDocumentGlobalKey").next(t=>(dr(!!t),t))}Xn(e,t){return qh(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const s=function gy(r,e){let t;if(e.document)t=Vh(r.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=On.fromSegments(e.noDocument.path),c=pc(e.noDocument.readTime);t=Vi.newNoDocument(s,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Zn();{const s=On.fromSegments(e.unknownDocument.path),c=pc(e.unknownDocument.version);t=Vi.newUnknownDocument(s,c)}}return e.readTime&&t.setReadTime(function(s){const c=new us(s[0],s[1]);return tr.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(tr.min()))return s}return Vi.newInvalidDocument(e)}}function Gf(r){return new lm(r)}class tg extends am{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new Oc(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const t=[];let s=0,c=new ys((p,E)=>Rr(p.canonicalString(),E.canonicalString()));return this.changes.forEach((p,E)=>{const F=this.os.get(p);if(t.push(this.rs.removeEntry(e,p,F.readTime)),E.isValidDocument()){const K=Es(this.rs.serializer,E);c=c.add(p.path.popLast());const te=hi(K);s+=te-F.size,t.push(this.rs.addEntry(e,p,K))}else if(s-=F.size,this.trackRemovals){const K=Es(this.rs.serializer,E.convertToNoDocument(tr.min()));t.push(this.rs.addEntry(e,p,K))}}),c.forEach(p=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.rs.updateMetadata(e,s)),w.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(s=>(this.os.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:s,ss:c})=>(c.forEach((p,E)=>{this.os.set(p,{size:E,readTime:s.get(p).readTime})}),s))}}function qh(r){return Vo(r,"remoteDocumentGlobal")}function ou(r){return Vo(r,"remoteDocumentsV14")}function Xd(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $c(r,e){const t=e.documentKey.path.toArray();return[r,Hp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function au(r,e){const t=r.path.toArray(),s=e.path.toArray();let c=0;for(let p=0;p<t.length-2&&p<s.length-2;++p)if(c=Rr(t[p],s[p]),c)return c;return c=Rr(t.length,s.length),c||(c=Rr(t[t.length-2],s[s.length-2]),c||Rr(t[t.length-1],s[s.length-1]))}class Wf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ng{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(null!==s&&kh(s.mutation,c,jo.empty(),us.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,yi()).next(()=>s))}getLocalViewOfDocuments(e,t,s=yi()){const c=Da();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,s).next(p=>{let E=Eu();return p.forEach((F,K)=>{E=E.insert(F,K.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const s=Da();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,yi()))}populateOverlays(e,t,s){const c=[];return s.forEach(p=>{t.has(p)||c.push(p)}),this.documentOverlayCache.getOverlays(e,c).next(p=>{p.forEach((E,F)=>{t.set(E,F)})})}computeViews(e,t,s,c){let p=Go();const E=xh(),F=xh();return t.forEach((K,te)=>{const me=s.get(te.key);c.has(te.key)&&(void 0===me||me.mutation instanceof Fc)?p=p.insert(te.key,te):void 0!==me?(E.set(te.key,me.mutation.getFieldMask()),kh(me.mutation,te,me.mutation.getFieldMask(),us.now())):E.set(te.key,jo.empty())}),this.recalculateAndSaveOverlays(e,p).next(K=>(K.forEach((te,me)=>E.set(te,me)),t.forEach((te,me)=>{var it;return F.set(te,new Wf(me,null!==(it=E.get(te))&&void 0!==it?it:null))}),F))}recalculateAndSaveOverlays(e,t){const s=xh();let c=new ms((E,F)=>E-F),p=yi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const F of E)F.keys().forEach(K=>{const te=t.get(K);if(null===te)return;let me=s.get(K)||jo.empty();me=F.applyToLocalView(te,me),s.set(K,me);const it=(c.get(F.batchId)||yi()).add(K);c=c.insert(F.batchId,it)})}).next(()=>{const E=[],F=c.getReverseIterator();for(;F.hasNext();){const K=F.getNext(),te=K.key,me=K.value,it=Og();me.forEach(Ft=>{if(!p.has(Ft)){const rn=Lg(t.get(Ft),s.get(Ft));null!==rn&&it.set(Ft,rn),p=p.add(Ft)}}),E.push(this.documentOverlayCache.saveOverlays(e,te,it))}return w.waitFor(E)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return On.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):nu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var c}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next(p=>{const E=c-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-p.size):w.resolve(Da());let F=-1,K=p;return E.next(te=>w.forEach(te,(me,it)=>(F<it.largestBatchId&&(F=it.largestBatchId),p.get(me)?w.resolve():this.remoteDocumentCache.getEntry(e,me).next(Ft=>{K=K.insert(me,Ft)}))).next(()=>this.populateOverlays(e,te,p)).next(()=>this.computeViews(e,K,te,yi())).next(me=>({batchId:F,changes:Rf(me)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new On(t)).next(s=>{let c=Eu();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const c=t.collectionGroup;let p=Eu();return this.indexManager.getCollectionParents(e,c).next(E=>w.forEach(E,F=>{const K=(te=t,me=F.child(c),new Tl(me,null,te.explicitOrderBy.slice(),te.filters.slice(),te.limit,te.limitType,te.startAt,te.endAt));var te,me;return this.getDocumentsMatchingCollectionQuery(e,K,s).next(te=>{te.forEach((me,it)=>{p=p.insert(me,it)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,s){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c))).next(p=>{c.forEach((F,K)=>{const te=K.getKey();null===p.get(te)&&(p=p.insert(te,Vi.newInvalidDocument(te)))});let E=Eu();return p.forEach((F,K)=>{const te=c.get(F);void 0!==te&&kh(te.mutation,K,jo.empty(),us.now()),Na(t,K)&&(E=E.insert(F,K))}),E})}}class Au{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return w.resolve(this.us.get(t))}saveBundleMetadata(e,t){var s;return this.us.set(t.id,{id:(s=t).id,version:s.version,createTime:xo(s.createTime)}),w.resolve()}getNamedQuery(e,t){return w.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(s=t).name,query:zp(s.bundledQuery),readTime:xo(s.readTime)}),w.resolve();var s}}class cm{constructor(){this.overlays=new ms(On.comparator),this.hs=new Map}getOverlay(e,t){return w.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Da();return w.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&s.set(c,p)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((c,p)=>{this.de(e,t,p)}),w.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.hs.get(s);return void 0!==c&&(c.forEach(p=>this.overlays=this.overlays.remove(p)),this.hs.delete(s)),w.resolve()}getOverlaysForCollection(e,t,s){const c=Da(),p=t.length+1,E=new On(t.child("")),F=this.overlays.getIteratorFrom(E);for(;F.hasNext();){const K=F.getNext().value,te=K.getKey();if(!t.isPrefixOf(te.path))break;te.path.length===p&&K.largestBatchId>s&&c.set(K.getKey(),K)}return w.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let p=new ms((te,me)=>te-me);const E=this.overlays.getIterator();for(;E.hasNext();){const te=E.getNext().value;if(te.getKey().getCollectionGroup()===t&&te.largestBatchId>s){let me=p.get(te.largestBatchId);null===me&&(me=Da(),p=p.insert(te.largestBatchId,me)),me.set(te.getKey(),te)}}const F=Da(),K=p.getIterator();for(;K.hasNext()&&(K.getNext().value.forEach((te,me)=>F.set(te,me)),!(F.size()>=c)););return w.resolve(F)}de(e,t,s){const c=this.overlays.get(s.key);if(null!==c){const E=this.hs.get(c.largestBatchId).delete(s.key);this.hs.set(c.largestBatchId,E)}this.overlays=this.overlays.insert(s.key,new Bg(t,s));let p=this.hs.get(t);void 0===p&&(p=yi(),this.hs.set(t,p)),this.hs.set(t,p.add(s.key))}}class Kf{constructor(){this.ls=new ys(na.fs),this.ds=new ys(na._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const s=new na(e,t);this.ls=this.ls.add(s),this.ds=this.ds.add(s)}ws(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gs(new na(e,t))}ys(e,t){e.forEach(s=>this.removeReference(s,t))}ps(e){const t=new On(new $i([])),s=new na(t,e),c=new na(t,e+1),p=[];return this.ds.forEachInRange([s,c],E=>{this.gs(E),p.push(E.key)}),p}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new On(new $i([])),s=new na(t,e),c=new na(t,e+1);let p=yi();return this.ds.forEachInRange([s,c],E=>{p=p.add(E.key)}),p}containsKey(e){const t=new na(e,0),s=this.ls.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class na{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return On.comparator(e.key,t.key)||Rr(e.Es,t.Es)}static _s(e,t){return Rr(e.Es,t.Es)||On.comparator(e.key,t.key)}}class Mu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new ys(na.fs)}checkEmpty(e){return w.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,c){const p=this.As;this.As++;const E=new Fh(p,t,s,c);this.mutationQueue.push(E);for(const F of c)this.Rs=this.Rs.add(new na(F.key,p)),this.indexManager.addToCollectionParentIndex(e,F.key.path.popLast());return w.resolve(E)}lookupMutationBatch(e,t){return w.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.Ps(t+1),p=c<0?0:c;return w.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new na(t,0),c=new na(t,Number.POSITIVE_INFINITY),p=[];return this.Rs.forEachInRange([s,c],E=>{const F=this.vs(E.Es);p.push(F)}),w.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ys(Rr);return t.forEach(c=>{const p=new na(c,0),E=new na(c,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([p,E],F=>{s=s.add(F.Es)})}),w.resolve(this.bs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let p=s;On.isDocumentKey(p)||(p=p.child(""));const E=new na(new On(p),0);let F=new ys(Rr);return this.Rs.forEachWhile(K=>{const te=K.key.path;return!!s.isPrefixOf(te)&&(te.length===c&&(F=F.add(K.Es)),!0)},E),w.resolve(this.bs(F))}bs(e){const t=[];return e.forEach(s=>{const c=this.vs(s);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){dr(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return w.forEach(t.mutations,c=>{const p=new na(c.key,t.batchId);return s=s.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Rs=s})}Dn(e){}containsKey(e,t){const s=new na(t,0),c=this.Rs.firstAfterOrEqual(s);return w.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return w.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class um{constructor(e){this.Ss=e,this.docs=new ms(On.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),p=c?c.size:0,E=this.Ss(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:E}),this.size+=E-p,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return w.resolve(s?s.document.mutableCopy():Vi.newInvalidDocument(t))}getEntries(e,t){let s=Go();return t.forEach(c=>{const p=this.docs.get(c);s=s.insert(c,p?p.document.mutableCopy():Vi.newInvalidDocument(c))}),w.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let p=Go();const E=t.path,F=new On(E.child("")),K=this.docs.getIteratorFrom(F);for(;K.hasNext();){const{key:te,value:{document:me}}=K.getNext();if(!E.isPrefixOf(te.path))break;te.path.length>E.length+1||Ua(Fs(me),s)<=0||(c.has(me.key)||Na(t,me))&&(p=p.insert(me.key,me.mutableCopy()))}return w.resolve(p)}getAllFromCollectionGroup(e,t,s,c){Zn()}Ds(e,t){return w.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new dm(this)}getSize(e){return w.resolve(this.size)}}class dm extends am{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?t.push(this.rs.addEntry(e,c)):this.rs.removeEntry(s)}),w.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class Uc{constructor(e){this.persistence=e,this.Cs=new Oc(t=>Bn(t),gr),this.lastRemoteSnapshotVersion=tr.min(),this.highestTargetId=0,this.xs=0,this.Ns=new Kf,this.targetCount=0,this.ks=cl.Nn()}forEachTarget(e,t){return this.Cs.forEach((s,c)=>t(c)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.xs&&(this.xs=t),w.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new cl(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,w.resolve()}updateTargetData(e,t){return this.$n(t),w.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,t,s){let c=0;const p=[];return this.Cs.forEach((E,F)=>{F.sequenceNumber<=t&&null===s.get(F.targetId)&&(this.Cs.delete(E),p.push(this.removeMatchingKeysForTargetId(e,F.targetId)),c++)}),w.waitFor(p).next(()=>c)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,t){const s=this.Cs.get(t)||null;return w.resolve(s)}addMatchingKeys(e,t,s){return this.Ns.ws(t,s),w.resolve()}removeMatchingKeys(e,t,s){this.Ns.ys(t,s);const c=this.persistence.referenceDelegate,p=[];return c&&t.forEach(E=>{p.push(c.markPotentiallyOrphaned(e,E))}),w.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),w.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ns.Ts(t);return w.resolve(s)}containsKey(e,t){return w.resolve(this.Ns.containsKey(t))}}class Vc{constructor(e,t){this.Ms={},this.overlays={},this.Os=new Ji(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new Uc(this),this.indexManager=new y_,this.remoteDocumentCache=new um(s=>this.referenceDelegate.Bs(s)),this.serializer=new py(t),this.Ls=new Au(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ms[e.toKey()];return s||(s=new Mu(t,this.referenceDelegate),this.Ms[e.toKey()]=s),s}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,s){yn("MemoryPersistence","Starting transaction:",e);const c=new Yh(this.Os.next());return this.referenceDelegate.qs(),s(c).next(p=>this.referenceDelegate.Us(c).next(()=>p)).toPromise().then(p=>(c.raiseOnCommittedEvent(),p))}Ks(e,t){return w.or(Object.values(this.Ms).map(s=>()=>s.containsKey(e,t)))}}class Yh extends Uo{constructor(e){super(),this.currentSequenceNumber=e}}class Zh{constructor(e){this.persistence=e,this.Gs=new Kf,this.Qs=null}static js(e){return new Zh(e)}get zs(){if(this.Qs)return this.Qs;throw Zn()}addReference(e,t,s){return this.Gs.addReference(s,t),this.zs.delete(s.toString()),w.resolve()}removeReference(e,t,s){return this.Gs.removeReference(s,t),this.zs.add(s.toString()),w.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),w.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(c=>this.zs.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(p=>this.zs.add(p.toString()))}).next(()=>s.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.zs,s=>{const c=On.fromPath(s);return this.Ws(e,c).next(p=>{p||t.removeEntry(c,tr.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(s=>{s?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return w.or([()=>w.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class qf{constructor(e){this.serializer=e}$(e,t,s,c){const p=new B("createOrUpgrade",t);var F;s<1&&c>=1&&(e.createObjectStore("owner"),(F=e).createObjectStore("mutationQueues",{keyPath:"userId"}),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ta,{unique:!0}),F.createObjectStore("documentMutations"),Qh(e),function(F){F.createObjectStore("remoteDocuments")}(e));let E=w.resolve();return s<3&&c>=3&&(0!==s&&(function(F){F.deleteObjectStore("targetDocuments"),F.deleteObjectStore("targets"),F.deleteObjectStore("targetGlobal")}(e),Qh(e)),E=E.next(()=>function(F){const K=F.store("targetGlobal"),te={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tr.min().toTimestamp(),targetCount:0};return K.put("targetGlobalKey",te)}(p))),s<4&&c>=4&&(0!==s&&(E=E.next(()=>function(F,K){return K.store("mutations").j().next(te=>{F.deleteObjectStore("mutations"),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ta,{unique:!0});const me=K.store("mutations"),it=te.map(Ft=>me.put(Ft));return w.waitFor(it)})}(e,p))),E=E.next(()=>{!function(F){F.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(E=E.next(()=>this.Js(p))),s<6&&c>=6&&(E=E.next(()=>(function(F){F.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(p)))),s<7&&c>=7&&(E=E.next(()=>this.Xs(p))),s<8&&c>=8&&(E=E.next(()=>this.Zs(e,p))),s<9&&c>=9&&(E=E.next(()=>{!function(F){F.objectStoreNames.contains("remoteDocumentChanges")&&F.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(E=E.next(()=>this.ti(p))),s<11&&c>=11&&(E=E.next(()=>{(function(F){F.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(F){F.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(E=E.next(()=>{!function(F){const K=F.createObjectStore("documentOverlays",{keyPath:Tc});K.createIndex("collectionPathOverlayIndex",pu,{unique:!1}),K.createIndex("collectionGroupOverlayIndex",Qc,{unique:!1})}(e)})),s<13&&c>=13&&(E=E.next(()=>function(F){const K=F.createObjectStore("remoteDocumentsV14",{keyPath:Ld});K.createIndex("documentKeyIndex",ha),K.createIndex("collectionGroupIndex",fu)}(e)).next(()=>this.ei(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(E=E.next(()=>this.ni(e,p))),s<15&&c>=15&&(E=E.next(()=>function(F){F.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),F.createObjectStore("indexState",{keyPath:Il}).createIndex("sequenceNumberIndex",Bd,{unique:!1}),F.createObjectStore("indexEntries",{keyPath:$d}).createIndex("documentKeyIndex",Yu,{unique:!1})}(e))),E}Ys(e){let t=0;return e.store("remoteDocuments").X((s,c)=>{t+=hi(c)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Js(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(c=>w.forEach(c,p=>{const E=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",E).next(F=>w.forEach(F,K=>{dr(K.userId===p.userId);const te=ud(this.serializer,K);return Xp(e,p.userId,te).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const p=[];return s.X((E,F)=>{const K=new $i(E),te=[0,Ls(K)];p.push(t.get(te).next(me=>me?w.resolve():t.put({targetId:0,path:Ls(K),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>w.waitFor(p))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:nc});const s=t.store("collectionParents"),c=new Ml,p=E=>{if(c.add(E)){const F=E.lastSegment(),K=E.popLast();return s.put({collectionId:F,parent:Ls(K)})}};return t.store("remoteDocuments").X({Y:!0},(E,F)=>{const K=new $i(E);return p(K.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([E,F,K],te)=>{const me=da(F);return p(me.popLast())}))}ti(e){const t=e.store("targets");return t.X((s,c)=>{const p=Yd(c),E=Xg(this.serializer,p);return t.put(E)})}ei(e,t){const s=t.store("remoteDocuments"),c=[];return s.X((p,E)=>{const F=t.store("remoteDocumentsV14"),K=(te=E,te.document?new On($i.fromString(te.document.name).popFirst(5)):te.noDocument?On.fromSegments(te.noDocument.path):te.unknownDocument?On.fromSegments(te.unknownDocument.path):Zn()).path.toArray();var te;const me={prefixPath:K.slice(0,K.length-2),collectionGroup:K[K.length-2],documentId:K[K.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};c.push(F.put(me))}).next(()=>w.waitFor(c))}ni(e,t){const s=t.store("mutations"),c=Gf(this.serializer),p=new Vc(Zh.js,this.serializer.le);return s.j().next(E=>{const F=new Map;return E.forEach(K=>{var te;let me=null!==(te=F.get(K.userId))&&void 0!==te?te:yi();ud(this.serializer,K).keys().forEach(it=>me=me.add(it)),F.set(K.userId,me)}),w.forEach(F,(K,te)=>{const me=new ro(te),it=Zd.fe(this.serializer,me),Ft=p.getIndexManager(me),rn=Qd.fe(me,this.serializer,Ft,p.referenceDelegate);return new ng(c,rn,it,Ft).recalculateAndSaveOverlaysForDocumentKeys(new Xc(t,Ji.ct),K).next()})})}}function Qh(r){r.createObjectStore("targetDocuments",{keyPath:tc}).createIndex("documentTargetsIndex",Zc,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bh,{unique:!0}),r.createObjectStore("targetGlobal")}const Ru="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rg{constructor(e,t,s,c,p,E,F,K,te,me,it=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.si=p,this.window=E,this.document=F,this.ii=te,this.ri=me,this.oi=it,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=Ft=>Promise.resolve(),!rg.D())throw new an(Lt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eg(this,c),this.fi=t+"main",this.serializer=new py(K),this.di=new W(this.fi,this.oi,new qf(this.serializer)),this.Fs=new im(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Gf(this.serializer),this.Ls=new qp,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===me&&ni("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new an(Lt.FAILED_PRECONDITION,Ru);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ji(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var s=(0,oe.Z)(function*(c){if(t.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,oe.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,oe.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(dt(e))return yn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return yn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return Jd(e).get("owner").next(t=>w.resolve(this.Ri(t)))}vi(e){return lu(e).delete(this.clientId)}Pi(){var e=this;return(0,oe.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=Vo(s,"clientMetadata");return c.j().next(p=>{const E=e.Vi(p,18e5),F=p.filter(K=>-1===E.indexOf(K));return w.forEach(F,K=>c.delete(K.clientId)).next(()=>F)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Si(s.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?w.resolve(!0):Jd(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new an(Lt.FAILED_PRECONDITION,Ru);return!1}}return!(!this.networkEnabled||!this.inForeground)||lu(e).j().next(s=>void 0===this.Vi(s,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(t=>(this.isPrimary!==t&&yn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,oe.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Xc(t,Ji.ct);return e.Ei(s).next(()=>e.vi(s))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(s=>this.bi(s.updateTimeMs,t)&&!this.Di(s.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>lu(e).j().next(t=>this.Vi(t,18e5).map(s=>s.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return Qd.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nm(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return Zd.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,s){yn("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",p=15===(E=this.oi)?Ch:14===E?ic:13===E?rc:12===E?Zu:11===E?gu:void Zn();var E;let F;return this.di.runTransaction(e,c,p,K=>(F=new Xc(K,this.Os?this.Os.next():Ji.ct),"readwrite-primary"===t?this.Ii(F).next(te=>!!te||this.Ti(F)).next(te=>{if(!te)throw ni(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new an(Lt.FAILED_PRECONDITION,Dc);return s(F)}).next(te=>this.Ai(F).next(()=>te)):this.Oi(F).next(()=>s(F)))).then(K=>(F.raiseOnCommittedEvent(),K))}Oi(e){return Jd(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new an(Lt.FAILED_PRECONDITION,Ru)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jd(e).put("owner",t)}static D(){return W.D()}Ei(e){const t=Jd(e);return t.get("owner").next(s=>this.Ri(s)?(yn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):w.resolve())}bi(e,t){const s=Date.now();return!(e<s-t||e>s&&(ni(`Detected an update time that is in the future: ${e} > ${s}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,Je.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return yn("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return ni("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){ni("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jd(r){return Vo(r,"owner")}function lu(r){return Vo(r,"clientMetadata")}function Yf(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class ig{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.$i=s,this.Fi=c}static Bi(e,t){let s=yi(),c=yi();for(const p of t.docChanges)switch(p.type){case 0:s=s.add(p.doc.key);break;case 1:c=c.add(p.doc.key)}return new ig(e,t.fromCache,s,c)}}class Ha{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,s,c){return this.Ui(e,t).next(p=>p||this.Ki(e,t,c,s)).next(p=>p||this.Gi(e,t))}Ui(e,t){if(Vd(t))return w.resolve(null);let s=Ao(t);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=uc(t,null,"F"),s=Ao(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(p=>{const E=yi(...p);return this.qi.getDocuments(e,E).next(F=>this.indexManager.getMinOffset(e,s).next(K=>{const te=this.Qi(t,F);return this.ji(t,te,E,K.readTime)?this.Ui(e,uc(t,null,"F")):this.zi(e,te,t,K)}))})))}Ki(e,t,s,c){return Vd(t)||c.isEqual(tr.min())?this.Gi(e,t):this.qi.getDocuments(e,s).next(p=>{const E=this.Qi(t,p);return this.ji(t,E,s,c)?this.Gi(e,t):(Yl()<=Re.in.DEBUG&&yn("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),vu(t)),this.zi(e,E,t,Cc(c,-1)))})}Qi(e,t){let s=new ys(ll(e));return t.forEach((c,p)=>{Na(e,p)&&(s=s.add(p))}),s}ji(e,t,s,c){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const p="F"===e.limitType?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(c)>0)}Gi(e,t){return Yl()<=Re.in.DEBUG&&yn("QueryEngine","Using full collection scan to execute query:",vu(t)),this.qi.getDocumentsMatchingQuery(e,t,co.min())}zi(e,t,s,c){return this.qi.getDocumentsMatchingQuery(e,s,c).next(p=>(t.forEach(E=>{p=p.insert(E.key,E)}),p))}}class hm{constructor(e,t,s,c){this.persistence=e,this.Wi=t,this.serializer=c,this.Hi=new ms(Rr),this.Ji=new Oc(p=>Bn(p),gr),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(s)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ng(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function Xh(r,e,t,s){return new hm(r,e,t,s)}function xu(r,e){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,oe.Z)(function*(r,e){const t=Un(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next(p=>(c=p,t.Zi(e),t.mutationQueue.getAllMutationBatches(s))).next(p=>{const E=[],F=[];let K=yi();for(const te of c){E.push(te.batchId);for(const me of te.mutations)K=K.add(me.key)}for(const te of p){F.push(te.batchId);for(const me of te.mutations)K=K.add(me.key)}return t.localDocuments.getDocuments(s,K).next(te=>({tr:te,removedBatchIds:E,addedBatchIds:F}))})})}),Pu.apply(this,arguments)}function eh(r){const e=Un(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function Zf(r,e,t){let s=yi(),c=yi();return t.forEach(p=>s=s.add(p)),e.getEntries(r,s).next(p=>{let E=Go();return t.forEach((F,K)=>{const te=p.get(F);K.isFoundDocument()!==te.isFoundDocument()&&(c=c.add(F)),K.isNoDocument()&&K.version.isEqual(tr.min())?(e.removeEntry(F,K.readTime),E=E.insert(F,K)):!te.isValidDocument()||K.version.compareTo(te.version)>0||0===K.version.compareTo(te.version)&&te.hasPendingWrites?(e.addEntry(K),E=E.insert(F,K)):yn("LocalStore","Ignoring outdated watch update for ",F,". Current version:",te.version," Watch version:",K.version)}),{er:E,nr:c}})}function Jh(r,e){const t=Un(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Ou(r,e){const t=Un(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return t.Fs.getTargetData(s,e).next(p=>p?(c=p,w.resolve(c)):t.Fs.allocateTargetId(s).next(E=>(c=new Bc(e,E,"TargetPurposeListen",s.currentSequenceNumber),t.Fs.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=t.Hi.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(s.targetId,s),t.Ji.set(e,s.targetId)),s})}function Nu(r,e,t){return ef.apply(this,arguments)}function ef(){return ef=(0,oe.Z)(function*(r,e,t){const s=Un(r),c=s.Hi.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",p,E=>s.persistence.referenceDelegate.removeTarget(E,c)))}catch(E){if(!dt(E))throw E;yn("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}s.Hi=s.Hi.remove(e),s.Ji.delete(c.target)}),ef.apply(this,arguments)}function ku(r,e,t){const s=Un(r);let c=tr.min(),p=yi();return s.persistence.runTransaction("Execute query","readonly",E=>function(F,K,te){const me=Un(F),it=me.Ji.get(te);return void 0!==it?w.resolve(me.Hi.get(it)):me.Fs.getTargetData(K,te)}(s,E,Ao(e)).next(F=>{if(F)return c=F.lastLimboFreeSnapshotVersion,s.Fs.getMatchingKeysForTargetId(E,F.targetId).next(K=>{p=K})}).next(()=>s.Wi.getDocumentsMatchingQuery(E,e,t?c:tr.min(),t?p:yi())).next(F=>(ag(s,Rh(e),F),{documents:F,sr:p})))}function md(r,e){const t=Un(r),s=Un(t.Fs),c=t.Hi.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",p=>s.he(p,e).next(E=>E?E.target:null))}function og(r,e){const t=Un(r),s=t.Yi.get(e)||tr.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Xi.getAllFromCollectionGroup(c,e,Cc(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(ag(t,e,c),c))}function ag(r,e,t){let s=r.Yi.get(e)||tr.min();t.forEach((c,p)=>{p.readTime.compareTo(s)>0&&(s=p.readTime)}),r.Yi.set(e,s)}function tf(){return tf=(0,oe.Z)(function*(r,e,t,s){const c=Un(r);let p=yi(),E=Go();for(const te of t){const me=e.ir(te.metadata.name);te.document&&(p=p.add(me));const it=e.rr(te);it.setReadTime(e.ur(te.metadata.readTime)),E=E.insert(me,it)}const F=c.Xi.newChangeBuffer({trackRemovals:!0}),K=yield Ou(c,(te=s,Ao(tu($i.fromString(`__bundle__/docs/${te}`)))));var te;return c.persistence.runTransaction("Apply bundle documents","readwrite",te=>Zf(te,F,E).next(me=>(F.apply(te),me)).next(me=>c.Fs.removeMatchingKeysForTargetId(te,K.targetId).next(()=>c.Fs.addMatchingKeys(te,p,K.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(te,me.er,me.nr)).next(()=>me.er)))}),tf.apply(this,arguments)}function lg(r,e){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,oe.Z)(function*(r,e,t=yi()){const s=yield Ou(r,Ao(zp(e.bundledQuery))),c=Un(r);return c.persistence.runTransaction("Save named query","readwrite",p=>{const E=xo(e.readTime);if(s.snapshotVersion.compareTo(E)>=0)return c.Ls.saveNamedQuery(p,e);const F=s.withResumeToken(Io.EMPTY_BYTE_STRING,E);return c.Hi=c.Hi.insert(F.targetId,F),c.Fs.updateTargetData(p,F).next(()=>c.Fs.removeMatchingKeysForTargetId(p,s.targetId)).next(()=>c.Fs.addMatchingKeys(p,t,s.targetId)).next(()=>c.Ls.saveNamedQuery(p,e))})}),Qf.apply(this,arguments)}function gm(r,e){return`firestore_clients_${r}_${e}`}function mm(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function za(r,e){return`firestore_targets_${r}_${e}`}class Xf{constructor(e,t,s,c){this.user=e,this.batchId=t,this.state=s,this.error=c}static cr(e,t,s){const c=JSON.parse(s);let p,E="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return E&&c.error&&(E="string"==typeof c.error.message&&"string"==typeof c.error.code,E&&(p=new an(c.error.code,c.error.message))),E?new Xf(e,t,c.state,p):(ni("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nf{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static cr(e,t){const s=JSON.parse(t);let c,p="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return p&&s.error&&(p="string"==typeof s.error.message&&"string"==typeof s.error.code,p&&(c=new an(s.error.code,s.error.message))),p?new nf(e,s.state,c):(ni("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cu{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const s=JSON.parse(t);let c="object"==typeof s&&s.activeTargetIds instanceof Array,p=wu();for(let E=0;c&&E<s.activeTargetIds.length;++E)c=ua(s.activeTargetIds[E]),p=p.add(s.activeTargetIds[E]);return c?new cu(e,p):(ni("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yd{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yd(t.clientId,t.onlineState):(ni("SharedClientState",`Failed to parse online state: ${e}`),null)}}class th{constructor(){this.activeTargetIds=wu()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nh{constructor(e,t,s,c,p){this.window=e,this.si=t,this.persistenceKey=s,this.dr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new ms(Rr),this.started=!1,this.gr=[];const E=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.yr=gm(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new th),this.Ir=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(F){return`firestore_bundle_loaded_v2_${F}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,oe.Z)(function*(){const t=yield e.syncEngine.Mi();for(const c of t){if(c===e.dr)continue;const p=e.getItem(gm(e.persistenceKey,c));if(p){const E=cu.cr(c,p);E&&(e.mr=e.mr.insert(E.clientId,E))}}e.vr();const s=e.storage.getItem(e.Ar);if(s){const c=e.Pr(s);c&&e.br(c)}for(const c of e.gr)e.wr(c);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((s,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,s){this.Sr(e,t,s),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(za(this.persistenceKey,e));if(s){const c=nf.cr(e,s);c&&(t=c.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(za(this.persistenceKey,e))}updateQueryState(e,t,s){this.Nr(e,t,s)}handleUserChange(e,t,s){t.forEach(c=>{this.Dr(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return yn("SharedClientState","READ",e,t),t}setItem(e,t){yn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){yn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(yn("SharedClientState","EVENT",s.key,s.newValue),s.key===this.yr)return void ni("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,oe.Z)(function*(){if(t.started){if(null!==s.key)if(t.Ir.test(s.key)){if(null==s.newValue){const c=t.Or(s.key);return t.$r(c,null)}{const c=t.Fr(s.key,s.newValue);if(c)return t.$r(c.clientId,c)}}else if(t.Tr.test(s.key)){if(null!==s.newValue){const c=t.Br(s.key,s.newValue);if(c)return t.Lr(c)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const c=t.qr(s.key,s.newValue);if(c)return t.Ur(c)}}else if(s.key===t.Ar){if(null!==s.newValue){const c=t.Pr(s.newValue);if(c)return t.br(c)}}else if(s.key===t.pr){const c=function(p){let E=Ji.ct;if(null!=p)try{const F=JSON.parse(p);dr("number"==typeof F),E=F}catch(F){ni("SharedClientState","Failed to read sequence number from WebStorage",F)}return E}(s.newValue);c!==Ji.ct&&t.sequenceNumberHandler(c)}else if(s.key===t.Rr){const c=t.Kr(s.newValue);yield Promise.all(c.map(p=>t.syncEngine.Gr(p)))}}else t.gr.push(s)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,s){const c=new Xf(this.currentUser,e,t,s),p=mm(this.persistenceKey,this.currentUser,e);this.setItem(p,c.ar())}Dr(e){const t=mm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,s){const c=za(this.persistenceKey,e),p=new nf(e,t,s);this.setItem(c,p.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const s=this.Or(e);return cu.cr(s,t)}Br(e,t){const s=this.Tr.exec(e),c=Number(s[1]);return Xf.cr(new ro(void 0!==s[2]?s[2]:null),c,t)}qr(e,t){const s=this.Er.exec(e),c=Number(s[1]);return nf.cr(c,t)}Pr(e){return yd.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,oe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);yn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const s=t?this.mr.insert(e,t):this.mr.remove(e),c=this.Vr(this.mr),p=this.Vr(s),E=[],F=[];return p.forEach(K=>{c.has(K)||E.push(K)}),c.forEach(K=>{p.has(K)||F.push(K)}),this.syncEngine.zr(E,F).then(()=>{this.mr=s})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=wu();return e.forEach((s,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class ym{constructor(){this.Wr=new th,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,s){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new th,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cy{Jr(e){}shutdown(){}}class cg{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){yn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){yn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Jf=null;function ug(){return null===Jf?Jf=268435456+Math.round(2147483648*Math.random()):Jf++,"0x"+Jf.toString(16)}const rf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dy{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const ra="WebChannelConnection";class dg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,s,c,p){const E=ug(),F=this.Io(e,t);yn("RestConnection",`Sending RPC '${e}' ${E}:`,F,s);const K={};return this.To(K,c,p),this.Eo(e,F,K,s).then(te=>(yn("RestConnection",`Received RPC '${e}' ${E}: `,te),te),te=>{throw lo("RestConnection",`RPC '${e}' ${E} failed with error: `,te,"url: ",F,"request:",s),te})}Ao(e,t,s,c,p,E){return this.po(e,t,s,c,p)}To(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Eo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,p)=>e[p]=c),s&&s.headers.forEach((c,p)=>e[p]=c)}Io(e,t){return`${this.wo}/v1/${t}:${rf[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,s,c){const p=ug();return new Promise((E,F)=>{const K=new ca;K.setWithCredentials(!0),K.listenOnce(Ks.COMPLETE,()=>{try{switch(K.getLastErrorCode()){case Lo.NO_ERROR:const me=K.getResponseJson();yn(ra,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(me)),E(me);break;case Lo.TIMEOUT:yn(ra,`RPC '${e}' ${p} timed out`),F(new an(Lt.DEADLINE_EXCEEDED,"Request time out"));break;case Lo.HTTP_ERROR:const it=K.getStatus();if(yn(ra,`RPC '${e}' ${p} failed with status:`,it,"response text:",K.getResponseText()),it>0){let Ft=K.getResponseJson();Array.isArray(Ft)&&(Ft=Ft[0]);const rn=null==Ft?void 0:Ft.error;if(rn&&rn.status&&rn.message){const Sn=function(kn){const _r=kn.toLowerCase().replace(/_/g,"-");return Object.values(Lt).indexOf(_r)>=0?_r:Lt.UNKNOWN}(rn.status);F(new an(Sn,rn.message))}else F(new an(Lt.UNKNOWN,"Server responded with status "+K.getStatus()))}else F(new an(Lt.UNAVAILABLE,"Connection failed."));break;default:Zn()}}finally{yn(ra,`RPC '${e}' ${p} completed.`)}});const te=JSON.stringify(c);yn(ra,`RPC '${e}' ${p} sending request:`,c),K.send(t,"POST",te,s,15)})}Ro(e,t,s){const c=ug(),p=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=Ws(),F=ao(),K={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(K.xmlHttpFactory=new no({})),this.To(K.initMessageHeaders,t,s),K.encodeInitMessageHeaders=!0;const te=p.join("");yn(ra,`Creating RPC '${e}' stream ${c}: ${te}`,K);const me=E.createWebChannel(te,K);let it=!1,Ft=!1;const rn=new Dy({io:kn=>{Ft?yn(ra,`Not sending because RPC '${e}' stream ${c} is closed:`,kn):(it||(yn(ra,`Opening RPC '${e}' stream ${c} transport.`),me.open(),it=!0),yn(ra,`RPC '${e}' stream ${c} sending:`,kn),me.send(kn))},ro:()=>me.close()}),Sn=(kn,_r,Ci)=>{kn.listen(_r,rs=>{try{Ci(rs)}catch(Mi){setTimeout(()=>{throw Mi},0)}})};return Sn(me,el.EventType.OPEN,()=>{Ft||yn(ra,`RPC '${e}' stream ${c} transport opened.`)}),Sn(me,el.EventType.CLOSE,()=>{Ft||(Ft=!0,yn(ra,`RPC '${e}' stream ${c} transport closed`),rn.fo())}),Sn(me,el.EventType.ERROR,kn=>{Ft||(Ft=!0,lo(ra,`RPC '${e}' stream ${c} transport errored:`,kn),rn.fo(new an(Lt.UNAVAILABLE,"The operation could not be completed")))}),Sn(me,el.EventType.MESSAGE,kn=>{var _r;if(!Ft){const Ci=kn.data[0];dr(!!Ci);const Mi=Ci.error||(null===(_r=Ci[0])||void 0===_r?void 0:_r.error);if(Mi){yn(ra,`RPC '${e}' stream ${c} received error:`,Mi);const Fa=Mi.status;let so=function(La){const Ih=Zo[La];if(void 0!==Ih)return Vg(Ih)}(Fa),Us=Mi.message;void 0===so&&(so=Lt.INTERNAL,Us="Unknown error status: "+Fa+" with message "+Mi.message),Ft=!0,rn.fo(new an(so,Us)),me.close()}else yn(ra,`RPC '${e}' stream ${c} received:`,Ci),rn._o(Ci)}}),Sn(F,qs.STAT_EVENT,kn=>{kn.stat===Bo.PROXY?yn(ra,`RPC '${e}' stream ${c} detected buffering proxy`):kn.stat===Bo.NOPROXY&&yn(ra,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{rn.lo()},0),rn}}function sf(){return typeof window<"u"?window:null}function ep(){return typeof document<"u"?document:null}function Ga(r){return new Kg(r,!0)}class af{constructor(e,t,s=1e3,c=1.5,p=6e4){this.si=e,this.timerId=t,this.vo=s,this.Po=c,this.bo=p,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),s=Math.max(0,Date.now()-this.Do),c=Math.max(0,t-s);c>0&&yn("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,c,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class Ty{constructor(e,t,s,c,p,E,F,K){this.si=e,this.Mo=s,this.Oo=c,this.connection=p,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=F,this.listener=K,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new af(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,oe.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,oe.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var s=this;return(0,oe.Z)(function*(){s.Wo(),s.Ho(),s.Lo.cancel(),s.$o++,4!==e?s.Lo.reset():t&&t.code===Lt.RESOURCE_EXHAUSTED?(ni(t.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),s.Lo.Co()):t&&t.code===Lt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Jo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.$o===t&&this.Xo(s,c)},s=>{e(()=>{const c=new an(Lt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Zo(c)})})}Xo(e,t){const s=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{s(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(c=>{s(()=>this.Zo(c))}),this.stream.onMessage(c=>{s(()=>this.onMessage(c))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,oe.Z)(function*(){e.state=0,e.start()}))}Zo(e){return yn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(yn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hg extends Ty{constructor(e,t,s,c,p,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,E),this.serializer=p}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function Hh(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(K=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===K?1:"REMOVE"===K?2:"CURRENT"===K?3:"RESET"===K?4:Zn(),c=e.targetChange.targetIds||[],p=function(K,te){return K.useProto3Json?(dr(void 0===te||"string"==typeof te),Io.fromBase64String(te||"")):(dr(void 0===te||te instanceof Uint8Array),Io.fromUint8Array(te||new Uint8Array))}(r,e.targetChange.resumeToken),E=e.targetChange.cause,F=E&&function(K){const te=void 0===K.code?Lt.UNKNOWN:Vg(K.code);return new an(te,K.message||"")}(E);t=new uy(s,c,p,F||null)}else if("documentChange"in e){const s=e.documentChange,c=Lc(r,s.document.name),p=xo(s.document.updateTime),E=s.document.createTime?xo(s.document.createTime):tr.min(),F=new $s({mapValue:{fields:s.document.fields}}),K=Vi.newFoundDocument(c,p,E,F);t=new kf(s.targetIds||[],s.removedTargetIds||[],K.key,K)}else if("documentDelete"in e){const s=e.documentDelete,c=Lc(r,s.document),p=s.readTime?xo(s.readTime):tr.min(),E=Vi.newNoDocument(c,p);t=new kf([],s.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const s=e.documentRemove,c=Lc(r,s.document);t=new kf([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return Zn();{const s=e.filter,{count:c=0,unchangedNames:p}=s,E=new $g(c,p);t=new cy(s.targetId,E)}}var K;return t}(this.serializer,e),s=function(c){if(!("targetChange"in c))return tr.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?tr.min():p.readTime?xo(p.readTime):tr.min()}(e);return this.listener.eu(t,s)}nu(e){const t={};t.database=Wd(this.serializer),t.addTarget=function(c,p){let E;const F=p.target;if(E=di(F)?{documents:$p(c,F)}:{query:Kd(c,F)},E.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){E.resumeToken=ja(c,p.resumeToken);const K=fc(c,p.expectedCount);null!==K&&(E.expectedCount=K)}else if(p.snapshotVersion.compareTo(tr.min())>0){E.readTime=Ro(c,p.snapshotVersion.toTimestamp());const K=fc(c,p.expectedCount);null!==K&&(E.expectedCount=K)}return E}(this.serializer,e);const s=function qg(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Zn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.zo(t)}su(e){const t={};t.database=Wd(this.serializer),t.removeTarget=e,this.zo(t)}}class Sy extends Ty{constructor(e,t,s,c,p,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,E),this.serializer=p,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(dr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function cd(r,e){return r&&r.length>0?(dr(void 0!==e),r.map(t=>function(s,c){let p=xo(s.updateTime?s.updateTime:c);return p.isEqual(tr.min())&&(p=xo(c)),new oy(p,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=xo(e.commitTime);return this.listener.uu(s,t)}return dr(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=Wd(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>ad(this.serializer,s))};this.zo(t)}}class Ay extends class{}{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=c,this.hu=!1}lu(){if(this.hu)throw new an(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,s){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection.po(e,t,s,c,p)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new an(Lt.UNKNOWN,c.toString())})}Ao(e,t,s,c){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,E])=>this.connection.Ao(e,t,s,p,E,c)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new an(Lt.UNKNOWN,p.toString())})}terminate(){this.hu=!0}}class lf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(ni(t),this.wu=!1):yn("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class _m{constructor(e,t,s,c,p){var E=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=p,this.vu.Jr(F=>{s.enqueueAndForget((0,oe.Z)(function*(){var K;jc(E)&&(yn("RemoteStore","Restarting streams for network reachability change."),yield(K=(0,oe.Z)(function*(te){const me=Un(te);me.Au.add(4),yield uu(me),me.Pu.set("Unknown"),me.Au.delete(4),yield np(me)}),function(te){return K.apply(this,arguments)})(E))}))}),this.Pu=new lf(s,c)}}function np(r){return rh.apply(this,arguments)}function rh(){return rh=(0,oe.Z)(function*(r){if(jc(r))for(const e of r.Ru)yield e(!0)}),rh.apply(this,arguments)}function uu(r){return ih.apply(this,arguments)}function ih(){return ih=(0,oe.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),ih.apply(this,arguments)}function fg(r,e){const t=Un(r);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),sp(t)?ip(t):Ed(t).Uo()&&vm(t,e))}function _d(r,e){const t=Un(r),s=Ed(t);t.Eu.delete(e),s.Uo()&&rp(t,e),0===t.Eu.size&&(s.Uo()?s.Qo():jc(t)&&t.Pu.set("Unknown"))}function vm(r,e){if(r.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tr.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ed(r).nu(e)}function rp(r,e){r.bu.Lt(e),Ed(r).su(e)}function ip(r){r.bu=new zg({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),he:e=>r.Eu.get(e)||null,oe:()=>r.datastore.serializer.databaseId}),Ed(r).start(),r.Pu.mu()}function sp(r){return jc(r)&&!Ed(r).qo()&&r.Eu.size>0}function jc(r){return 0===Un(r).Au.size}function op(r){r.bu=void 0}function mc(r){return sh.apply(this,arguments)}function sh(){return sh=(0,oe.Z)(function*(r){r.Eu.forEach((e,t)=>{vm(r,e)})}),sh.apply(this,arguments)}function ap(r,e){return vd.apply(this,arguments)}function vd(){return vd=(0,oe.Z)(function*(r,e){op(r),sp(r)?(r.Pu.pu(e),ip(r)):r.Pu.set("Unknown")}),vd.apply(this,arguments)}function Ry(r,e,t){return cf.apply(this,arguments)}function cf(){return cf=(0,oe.Z)(function*(r,e,t){if(r.Pu.set("Online"),e instanceof uy&&2===e.state&&e.cause)try{yield(s=(0,oe.Z)(function*(c,p){const E=p.cause;for(const F of p.targetIds)c.Eu.has(F)&&(yield c.remoteSyncer.rejectListen(F,E),c.Eu.delete(F),c.bu.removeTarget(F))}),function(c,p){return s.apply(this,arguments)})(r,e)}catch(s){yn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield uf(r,s)}else if(e instanceof kf?r.bu.Wt(e):e instanceof cy?r.bu.ee(e):r.bu.Yt(e),!t.isEqual(tr.min()))try{const s=yield eh(r.localStore);t.compareTo(s)>=0&&(yield function(c,p){const E=c.bu.ue(p);return E.targetChanges.forEach((F,K)=>{if(F.resumeToken.approximateByteSize()>0){const te=c.Eu.get(K);te&&c.Eu.set(K,te.withResumeToken(F.resumeToken,p))}}),E.targetMismatches.forEach((F,K)=>{const te=c.Eu.get(F);if(!te)return;c.Eu.set(F,te.withResumeToken(Io.EMPTY_BYTE_STRING,te.snapshotVersion)),rp(c,F);const me=new Bc(te.target,F,K,te.sequenceNumber);vm(c,me)}),c.remoteSyncer.applyRemoteEvent(E)}(r,t))}catch(s){yn("RemoteStore","Failed to raise snapshot:",s),yield uf(r,s)}var s}),cf.apply(this,arguments)}function uf(r,e,t){return ul.apply(this,arguments)}function ul(){return ul=(0,oe.Z)(function*(r,e,t){if(!dt(e))throw e;r.Au.add(1),yield uu(r),r.Pu.set("Offline"),t||(t=()=>eh(r.localStore)),r.asyncQueue.enqueueRetryable((0,oe.Z)(function*(){yn("RemoteStore","Retrying IndexedDB access"),yield t(),r.Au.delete(1),yield np(r)}))}),ul.apply(this,arguments)}function lp(r,e){return e().catch(t=>uf(r,t,e))}function dl(r){return df.apply(this,arguments)}function df(){return df=(0,oe.Z)(function*(r){const e=Un(r),t=yc(e);let s=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;__(e);)try{const c=yield Jh(e.localStore,s);if(null===c){0===e.Tu.length&&t.Qo();break}s=c.batchId,xy(e,c)}catch(c){yield uf(e,c)}cp(e)&&Em(e)}),df.apply(this,arguments)}function __(r){return jc(r)&&r.Tu.length<10}function xy(r,e){r.Tu.push(e);const t=yc(r);t.Uo()&&t.ru&&t.ou(e.mutations)}function cp(r){return jc(r)&&!yc(r).qo()&&r.Tu.length>0}function Em(r){yc(r).start()}function Py(r){return oh.apply(this,arguments)}function oh(){return oh=(0,oe.Z)(function*(r){yc(r).au()}),oh.apply(this,arguments)}function Oy(r){return up.apply(this,arguments)}function up(){return up=(0,oe.Z)(function*(r){const e=yc(r);for(const t of r.Tu)e.ou(t.mutations)}),up.apply(this,arguments)}function pg(r,e,t){return ah.apply(this,arguments)}function ah(){return ah=(0,oe.Z)(function*(r,e,t){const s=r.Tu.shift(),c=Hd.from(s,e,t);yield lp(r,()=>r.remoteSyncer.applySuccessfulWrite(c)),yield dl(r)}),ah.apply(this,arguments)}function Gl(r,e){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,oe.Z)(function*(r,e){var t;e&&yc(r).ru&&(yield(t=(0,oe.Z)(function*(s,c){if(Ug(p=c.code)&&p!==Lt.ABORTED){const E=s.Tu.shift();yc(s).Go(),yield lp(s,()=>s.remoteSyncer.rejectFailedWrite(E.batchId,c)),yield dl(s)}var p}),function(s,c){return t.apply(this,arguments)})(r,e)),cp(r)&&Em(r)}),Hc.apply(this,arguments)}function wm(r,e){return gg.apply(this,arguments)}function gg(){return gg=(0,oe.Z)(function*(r,e){const t=Un(r);t.asyncQueue.verifyOperationInProgress(),yn("RemoteStore","RemoteStore received new credentials");const s=jc(t);t.Au.add(3),yield uu(t),s&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield np(t)}),gg.apply(this,arguments)}function dp(r,e){return mg.apply(this,arguments)}function mg(){return mg=(0,oe.Z)(function*(r,e){const t=Un(r);e?(t.Au.delete(2),yield np(t)):e||(t.Au.add(2),yield uu(t),t.Pu.set("Unknown"))}),mg.apply(this,arguments)}function Ed(r){return r.Vu||(r.Vu=function(e,t,s){const c=Un(e);return c.lu(),new hg(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(r.datastore,r.asyncQueue,{oo:mc.bind(null,r),co:ap.bind(null,r),eu:Ry.bind(null,r)}),r.Ru.push(function(){var e=(0,oe.Z)(function*(t){t?(r.Vu.Go(),sp(r)?ip(r):r.Pu.set("Unknown")):(yield r.Vu.stop(),op(r))});return function(t){return e.apply(this,arguments)}}())),r.Vu}function yc(r){return r.Su||(r.Su=function(e,t,s){const c=Un(e);return c.lu(),new Sy(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,s)}(r.datastore,r.asyncQueue,{oo:Py.bind(null,r),co:Gl.bind(null,r),cu:Oy.bind(null,r),uu:pg.bind(null,r)}),r.Ru.push(function(){var e=(0,oe.Z)(function*(t){t?(r.Su.Go(),yield dl(r)):(yield r.Su.stop(),r.Tu.length>0&&(yn("RemoteStore",`Stopping write stream with ${r.Tu.length} pending writes`),r.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Su}class yg{constructor(e,t,s,c,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=p,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,t,s,c,p){const E=Date.now()+s,F=new yg(e,t,E,c,p);return F.start(s),F}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new an(Lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wd(r,e){if(ni("AsyncQueue",`${e}: ${r}`),dt(r))return new an(Lt.UNAVAILABLE,`${e}: ${r}`);throw r}class du{constructor(e){this.comparator=e?(t,s)=>e(t,s)||On.comparator(t.key,s.key):(t,s)=>On.comparator(t.key,s.key),this.keyedMap=Eu(),this.sortedSet=new ms(this.comparator)}static emptySet(e){return new du(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof du)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=s.getNext().key;if(!c.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new du;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Im{constructor(){this.Du=new ms(On.comparator)}track(e){const t=e.doc.key,s=this.Du.get(t);s?0!==e.type&&3===s.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==s.type?this.Du=this.Du.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Du=this.Du.remove(t):1===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):Zn():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,s)=>{e.push(s)}),e}}class lh{constructor(e,t,s,c,p,E,F,K,te){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=p,this.fromCache=E,this.syncStateChanged=F,this.excludesMetadataChanges=K,this.hasCachedResults=te}static fromInitialDocuments(e,t,s,c,p){const E=[];return t.forEach(F=>{E.push({type:0,doc:F})}),new lh(e,t,du.emptySet(t),E,s,c,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}class bm{constructor(){this.xu=void 0,this.listeners=[]}}class Ny{constructor(){this.queries=new Oc(e=>Ca(e),Pc),this.onlineState="Unknown",this.Nu=new Set}}function ch(r,e){return _g.apply(this,arguments)}function _g(){return _g=(0,oe.Z)(function*(r,e){const t=Un(r),s=e.query;let c=!1,p=t.queries.get(s);if(p||(c=!0,p=new bm),c)try{p.xu=yield t.onListen(s)}catch(E){const F=wd(E,`Initialization of query '${vu(e.query)}' failed`);return void e.onError(F)}t.queries.set(s,p),p.listeners.push(e),e.ku(t.onlineState),p.xu&&e.Mu(p.xu)&&Id(t)}),_g.apply(this,arguments)}function vg(r,e){return uh.apply(this,arguments)}function uh(){return uh=(0,oe.Z)(function*(r,e){const t=Un(r),s=e.query;let c=!1;const p=t.queries.get(s);if(p){const E=p.listeners.indexOf(e);E>=0&&(p.listeners.splice(E,1),c=0===p.listeners.length)}if(c)return t.queries.delete(s),t.onUnlisten(s)}),uh.apply(this,arguments)}function hp(r,e){const t=Un(r);let s=!1;for(const c of e){const E=t.queries.get(c.query);if(E){for(const F of E.listeners)F.Mu(c)&&(s=!0);E.xu=c}}s&&Id(t)}function _c(r,e,t){const s=Un(r),c=s.queries.get(e);if(c)for(const p of c.listeners)p.onError(t);s.queries.delete(e)}function Id(r){r.Nu.forEach(e=>{e.next()})}class ia{constructor(e,t,s){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=s||{}}Mu(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new lh(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=lh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class bd{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class hf{constructor(e){this.serializer=e}ir(e){return Lc(this.serializer,e)}rr(e){return e.metadata.exists?Vh(this.serializer,e.document,!1):Vi.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return xo(e)}}class Wl{constructor(e,t,s){this.Qu=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fp(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const s=$i.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,s=new hf(this.serializer);for(const c of e)if(c.metadata.queries){const p=s.ir(c.metadata.name);for(const E of c.metadata.queries){const F=(t.get(E)||yi()).add(p);t.set(E,F)}}return t}complete(){var e=this;return(0,oe.Z)(function*(){const t=yield function pm(r,e,t,s){return tf.apply(this,arguments)}(e.localStore,new hf(e.serializer),e.documents,e.Qu.id),s=e.zu(e.documents);for(const c of e.queries)yield lg(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function fp(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Cd{constructor(e){this.key=e}}class Dd{constructor(e){this.key=e}}class Fu{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=yi(),this.mutatedKeys=yi(),this.Zu=ll(e),this.tc=new du(this.Zu)}get ec(){return this.Ju}nc(e,t){const s=t?t.sc:new Im,c=t?t.tc:this.tc;let p=t?t.mutatedKeys:this.mutatedKeys,E=c,F=!1;const K="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,te="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((me,it)=>{const Ft=c.get(me),rn=Na(this.query,it)?it:null,Sn=!!Ft&&this.mutatedKeys.has(Ft.key),kn=!!rn&&(rn.hasLocalMutations||this.mutatedKeys.has(rn.key)&&rn.hasCommittedMutations);let _r=!1;Ft&&rn?Ft.data.isEqual(rn.data)?Sn!==kn&&(s.track({type:3,doc:rn}),_r=!0):this.ic(Ft,rn)||(s.track({type:2,doc:rn}),_r=!0,(K&&this.Zu(rn,K)>0||te&&this.Zu(rn,te)<0)&&(F=!0)):!Ft&&rn?(s.track({type:0,doc:rn}),_r=!0):Ft&&!rn&&(s.track({type:1,doc:Ft}),_r=!0,(K||te)&&(F=!0)),_r&&(rn?(E=E.add(rn),p=kn?p.add(me):p.delete(me)):(E=E.delete(me),p=p.delete(me)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const me="F"===this.query.limitType?E.last():E.first();E=E.delete(me.key),p=p.delete(me.key),s.track({type:1,doc:me})}return{tc:E,sc:s,ji:F,mutatedKeys:p}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const c=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const p=e.sc.Cu();p.sort((te,me)=>function(it,Ft){const rn=Sn=>{switch(Sn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zn()}};return rn(it)-rn(Ft)}(te.type,me.type)||this.Zu(te.doc,me.doc)),this.rc(s);const E=t?this.oc():[],F=0===this.Xu.size&&this.current?1:0,K=F!==this.Yu;return this.Yu=F,0!==p.length||K?{snapshot:new lh(this.query,e.tc,c,p,e.mutatedKeys,0===F,K,!1,!!s&&s.resumeToken.approximateByteSize()>0),uc:E}:{uc:E}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new Im,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=yi(),this.tc.forEach(s=>{this.cc(s.key)&&(this.Xu=this.Xu.add(s.key))});const t=[];return e.forEach(s=>{this.Xu.has(s)||t.push(new Dd(s))}),this.Xu.forEach(s=>{e.has(s)||t.push(new Cd(s))}),t}ac(e){this.Ju=e.sr,this.Xu=yi();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return lh.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class Lu{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Td{constructor(e){this.key=e,this.lc=!1}}class dh{constructor(e,t,s,c,p,E){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=p,this.maxConcurrentLimboResolutions=E,this.fc={},this.dc=new Oc(F=>Ca(F),Pc),this._c=new Map,this.wc=new Set,this.mc=new ms(On.comparator),this.gc=new Map,this.yc=new Kf,this.Ic={},this.Tc=new Map,this.Ec=cl.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function ff(r,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,oe.Z)(function*(r,e){const t=Wc(r);let s,c;const p=t.dc.get(e);if(p)s=p.targetId,t.sharedClientState.addLocalQueryTarget(s),c=p.view.hc();else{const E=yield Ou(t.localStore,Ao(e)),F=t.sharedClientState.addLocalQueryTarget(E.targetId);s=E.targetId,c=yield Ad(t,e,s,"current"===F,E.resumeToken),t.isPrimaryClient&&fg(t.remoteStore,E)}return c}),Sd.apply(this,arguments)}function Ad(r,e,t,s,c){return u.apply(this,arguments)}function u(){return u=(0,oe.Z)(function*(r,e,t,s,c){r.Rc=(it,Ft,rn)=>{return(Sn=(0,oe.Z)(function*(kn,_r,Ci,rs){let Mi=_r.view.nc(Ci);Mi.ji&&(Mi=yield ku(kn.localStore,_r.query,!1).then(({documents:Us})=>_r.view.nc(Us,Mi)));const Fa=rs&&rs.targetChanges.get(_r.targetId),so=_r.view.applyChanges(Mi,kn.isPrimaryClient,Fa);return Po(kn,_r.targetId,so.uc),so.snapshot}),function(kn,_r,Ci,rs){return Sn.apply(this,arguments)})(r,it,Ft,rn);var Sn};const p=yield ku(r.localStore,e,!0),E=new Fu(e,p.sr),F=E.nc(p.documents),K=zd.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,c),te=E.applyChanges(F,r.isPrimaryClient,K);Po(r,t,te.uc);const me=new Lu(e,t,E);return r.dc.set(e,me),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),te.snapshot}),u.apply(this,arguments)}function o(r,e){return a.apply(this,arguments)}function a(){return a=(0,oe.Z)(function*(r,e){const t=Un(r),s=t.dc.get(e),c=t._c.get(s.targetId);if(c.length>1)return t._c.set(s.targetId,c.filter(p=>!Pc(p,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Nu(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),_d(t.remoteStore,s.targetId),ns(t,s.targetId)}).catch(R))):(ns(t,s.targetId),yield Nu(t.localStore,s.targetId,!0))}),a.apply(this,arguments)}function y(){return y=(0,oe.Z)(function*(r,e,t){const s=qa(r);try{const c=yield function(p,E){const F=Un(p),K=us.now(),te=E.reduce((Ft,rn)=>Ft.add(rn.key),yi());let me,it;return F.persistence.runTransaction("Locally write mutations","readwrite",Ft=>{let rn=Go(),Sn=yi();return F.Xi.getEntries(Ft,te).next(kn=>{rn=kn,rn.forEach((_r,Ci)=>{Ci.isValidDocument()||(Sn=Sn.add(_r))})}).next(()=>F.localDocuments.getOverlayedDocuments(Ft,rn)).next(kn=>{me=kn;const _r=[];for(const Ci of E){const rs=Nf(Ci,me.get(Ci.key).overlayedDocument);null!=rs&&_r.push(new Fc(Ci.key,rs,Ac(rs.value.mapValue),uo.exists(!0)))}return F.mutationQueue.addMutationBatch(Ft,K,_r,E)}).next(kn=>{it=kn;const _r=kn.applyToLocalDocumentSet(me,Sn);return F.documentOverlayCache.saveOverlays(Ft,kn.batchId,_r)})}).then(()=>({batchId:it.batchId,changes:Rf(me)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(p,E,F){let K=p.Ic[p.currentUser.toKey()];K||(K=new ms(Rr)),K=K.insert(E,F),p.Ic[p.currentUser.toKey()]=K}(s,c.batchId,t),yield ho(s,c.changes),yield dl(s.remoteStore)}catch(c){const p=wd(c,"Failed to persist write");t.reject(p)}}),y.apply(this,arguments)}function T(r,e){return N.apply(this,arguments)}function N(){return N=(0,oe.Z)(function*(r,e){const t=Un(r);try{const s=yield function fm(r,e){const t=Un(r),s=e.snapshotVersion;let c=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const E=t.Xi.newChangeBuffer({trackRemovals:!0});c=t.Hi;const F=[];e.targetChanges.forEach((me,it)=>{const Ft=c.get(it);if(!Ft)return;F.push(t.Fs.removeMatchingKeys(p,me.removedDocuments,it).next(()=>t.Fs.addMatchingKeys(p,me.addedDocuments,it)));let rn=Ft.withSequenceNumber(p.currentSequenceNumber);var Sn,kn,_r;null!==e.targetMismatches.get(it)?rn=rn.withResumeToken(Io.EMPTY_BYTE_STRING,tr.min()).withLastLimboFreeSnapshotVersion(tr.min()):me.resumeToken.approximateByteSize()>0&&(rn=rn.withResumeToken(me.resumeToken,s)),c=c.insert(it,rn),kn=rn,_r=me,(0===(Sn=Ft).resumeToken.approximateByteSize()||kn.snapshotVersion.toMicroseconds()-Sn.snapshotVersion.toMicroseconds()>=3e8||_r.addedDocuments.size+_r.modifiedDocuments.size+_r.removedDocuments.size>0)&&F.push(t.Fs.updateTargetData(p,rn))});let K=Go(),te=yi();if(e.documentUpdates.forEach(me=>{e.resolvedLimboDocuments.has(me)&&F.push(t.persistence.referenceDelegate.updateLimboDocument(p,me))}),F.push(Zf(p,E,e.documentUpdates).next(me=>{K=me.er,te=me.nr})),!s.isEqual(tr.min())){const me=t.Fs.getLastRemoteSnapshotVersion(p).next(it=>t.Fs.setTargetsMetadata(p,p.currentSequenceNumber,s));F.push(me)}return w.waitFor(F).next(()=>E.apply(p)).next(()=>t.localDocuments.getLocalViewOfDocuments(p,K,te)).next(()=>K)}).then(p=>(t.Hi=c,p))}(t.localStore,e);e.targetChanges.forEach((c,p)=>{const E=t.gc.get(p);E&&(dr(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?E.lc=!0:c.modifiedDocuments.size>0?dr(E.lc):c.removedDocuments.size>0&&(dr(E.lc),E.lc=!1))}),yield ho(t,s,e)}catch(s){yield R(s)}}),N.apply(this,arguments)}function G(r,e,t){const s=Un(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const c=[];s.dc.forEach((p,E)=>{const F=E.view.ku(e);F.snapshot&&c.push(F.snapshot)}),function(p,E){const F=Un(p);F.onlineState=E;let K=!1;F.queries.forEach((te,me)=>{for(const it of me.listeners)it.ku(E)&&(K=!0)}),K&&Id(F)}(s.eventManager,e),c.length&&s.fc.eu(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function re(r,e,t){return ge.apply(this,arguments)}function ge(){return ge=(0,oe.Z)(function*(r,e,t){const s=Un(r);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.gc.get(e),p=c&&c.key;if(p){let E=new ms(On.comparator);E=E.insert(p,Vi.newNoDocument(p,tr.min()));const F=yi().add(p),K=new sd(tr.min(),new Map,new ms(Rr),E,F);yield T(s,K),s.mc=s.mc.remove(p),s.gc.delete(e),Rl(s)}else yield Nu(s.localStore,e,!1).then(()=>ns(s,e,t)).catch(R)}),ge.apply(this,arguments)}function gt(r,e){return wt.apply(this,arguments)}function wt(){return wt=(0,oe.Z)(function*(r,e){const t=Un(r),s=e.batch.batchId;try{const c=yield function sg(r,e){const t=Un(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),p=t.Xi.newChangeBuffer({trackRemovals:!0});return function(E,F,K,te){const me=K.batch,it=me.keys();let Ft=w.resolve();return it.forEach(rn=>{Ft=Ft.next(()=>te.getEntry(F,rn)).next(Sn=>{const kn=K.docVersions.get(rn);dr(null!==kn),Sn.version.compareTo(kn)<0&&(me.applyToRemoteDocument(Sn,K),Sn.isValidDocument()&&(Sn.setReadTime(K.commitVersion),te.addEntry(Sn)))})}),Ft.next(()=>E.mutationQueue.removeMutationBatch(F,me))}(t,s,e,p).next(()=>p.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(E){let F=yi();for(let K=0;K<E.mutationResults.length;++K)E.mutationResults[K].transformResults.length>0&&(F=F.add(E.batch.mutations[K].key));return F}(e))).next(()=>t.localDocuments.getDocuments(s,c))})}(t.localStore,e);Fi(t,s,null),fi(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield ho(t,c)}catch(c){yield R(c)}}),wt.apply(this,arguments)}function Vt(r,e,t){return dn.apply(this,arguments)}function dn(){return dn=(0,oe.Z)(function*(r,e,t){const s=Un(r);try{const c=yield function(p,E){const F=Un(p);return F.persistence.runTransaction("Reject batch","readwrite-primary",K=>{let te;return F.mutationQueue.lookupMutationBatch(K,E).next(me=>(dr(null!==me),te=me.keys(),F.mutationQueue.removeMutationBatch(K,me))).next(()=>F.mutationQueue.performConsistencyCheck(K)).next(()=>F.documentOverlayCache.removeOverlaysForBatchId(K,te,E)).next(()=>F.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(K,te)).next(()=>F.localDocuments.getDocuments(K,te))})}(s.localStore,e);Fi(s,e,t),fi(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield ho(s,c)}catch(c){yield R(c)}}),dn.apply(this,arguments)}function Hn(){return Hn=(0,oe.Z)(function*(r,e){const t=Un(r);jc(t.remoteStore)||yn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(p){const E=Un(p);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",F=>E.mutationQueue.getHighestUnacknowledgedBatchId(F))}(t.localStore);if(-1===s)return void e.resolve();const c=t.Tc.get(s)||[];c.push(e),t.Tc.set(s,c)}catch(s){const c=wd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),Hn.apply(this,arguments)}function fi(r,e){(r.Tc.get(e)||[]).forEach(t=>{t.resolve()}),r.Tc.delete(e)}function Fi(r,e,t){const s=Un(r);let c=s.Ic[s.currentUser.toKey()];if(c){const p=c.get(e);p&&(t?p.reject(t):p.resolve(),c=c.remove(e)),s.Ic[s.currentUser.toKey()]=c}}function ns(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.dc.delete(s),t&&r.fc.vc(s,t);r._c.delete(e),r.isPrimaryClient&&r.yc.ps(e).forEach(s=>{r.yc.containsKey(s)||io(r,s)})}function io(r,e){r.wc.delete(e.path.canonicalString());const t=r.mc.get(e);null!==t&&(_d(r.remoteStore,t),r.mc=r.mc.remove(e),r.gc.delete(t),Rl(r))}function Po(r,e,t){for(const s of t)s instanceof Cd?(r.yc.addReference(s.key,e),zc(r,s)):s instanceof Dd?(yn("SyncEngine","Document no longer in limbo: "+s.key),r.yc.removeReference(s.key,e),r.yc.containsKey(s.key)||io(r,s.key)):Zn()}function zc(r,e){const t=e.key,s=t.path.canonicalString();r.mc.get(t)||r.wc.has(s)||(yn("SyncEngine","New document in limbo: "+t),r.wc.add(s),Rl(r))}function Rl(r){for(;r.wc.size>0&&r.mc.size<r.maxConcurrentLimboResolutions;){const e=r.wc.values().next().value;r.wc.delete(e);const t=new On($i.fromString(e)),s=r.Ec.next();r.gc.set(s,new Td(t)),r.mc=r.mc.insert(t,s),fg(r.remoteStore,new Bc(Ao(tu(t.path)),s,"TargetPurposeLimboResolution",Ji.ct))}}function ho(r,e,t){return Wa.apply(this,arguments)}function Wa(){return Wa=(0,oe.Z)(function*(r,e,t){const s=Un(r),c=[],p=[],E=[];var F;s.dc.isEmpty()||(s.dc.forEach((F,K)=>{E.push(s.Rc(K,e,t).then(te=>{if((te||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(K.targetId,null!=te&&te.fromCache?"not-current":"current"),te){c.push(te);const me=ig.Bi(K.targetId,te);p.push(me)}}))}),yield Promise.all(E),s.fc.eu(c),yield(F=(0,oe.Z)(function*(K,te){const me=Un(K);try{yield me.persistence.runTransaction("notifyLocalViewChanges","readwrite",it=>w.forEach(te,Ft=>w.forEach(Ft.$i,rn=>me.persistence.referenceDelegate.addReference(it,Ft.targetId,rn)).next(()=>w.forEach(Ft.Fi,rn=>me.persistence.referenceDelegate.removeReference(it,Ft.targetId,rn)))))}catch(it){if(!dt(it))throw it;yn("LocalStore","Failed to update sequence numbers: "+it)}for(const it of te){const Ft=it.targetId;if(!it.fromCache){const rn=me.Hi.get(Ft),kn=rn.withLastLimboFreeSnapshotVersion(rn.snapshotVersion);me.Hi=me.Hi.insert(Ft,kn)}}}),function(K,te){return F.apply(this,arguments)})(s.localStore,p))}),Wa.apply(this,arguments)}function hh(r,e){return hl.apply(this,arguments)}function hl(){return hl=(0,oe.Z)(function*(r,e){const t=Un(r);if(!t.currentUser.isEqual(e)){yn("SyncEngine","User change. New user:",e.toKey());const s=yield xu(t.localStore,e);t.currentUser=e,(c=t).Tc.forEach(E=>{E.forEach(F=>{F.reject(new an(Lt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Tc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield ho(t,s.tr)}var c}),hl.apply(this,arguments)}function fh(r,e){const t=Un(r),s=t.gc.get(e);if(s&&s.lc)return yi().add(s.key);{let c=yi();const p=t._c.get(e);if(!p)return c;for(const E of p){const F=t.dc.get(E);c=c.unionWith(F.view.ec)}return c}}function Md(r,e){return Bu.apply(this,arguments)}function Bu(){return Bu=(0,oe.Z)(function*(r,e){const t=Un(r),s=yield ku(t.localStore,e.query,!0),c=e.view.ac(s);return t.isPrimaryClient&&Po(t,e.targetId,c.uc),c}),Bu.apply(this,arguments)}function ph(r,e){return pf.apply(this,arguments)}function pf(){return pf=(0,oe.Z)(function*(r,e){const t=Un(r);return og(t.localStore,e).then(s=>ho(t,s))}),pf.apply(this,arguments)}function Ir(r,e,t,s){return Or.apply(this,arguments)}function Or(){return Or=(0,oe.Z)(function*(r,e,t,s){const c=Un(r),p=yield function(E,F){const K=Un(E),te=Un(K.mutationQueue);return K.persistence.runTransaction("Lookup mutation documents","readonly",me=>te.Vn(me,F).next(it=>it?K.localDocuments.getDocuments(me,it):w.resolve(null)))}(c.localStore,e);var F;null!==p?("pending"===t?yield dl(c.remoteStore):"acknowledged"===t||"rejected"===t?(Fi(c,e,s||null),fi(c,e),F=e,Un(Un(c.localStore).mutationQueue).Dn(F)):Zn(),yield ho(c,p)):yn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Or.apply(this,arguments)}function Gi(){return Gi=(0,oe.Z)(function*(r,e){const t=Un(r);if(Wc(t),qa(t),!0===e&&!0!==t.Ac){const s=t.sharedClientState.getAllActiveQueryTargets(),c=yield fo(t,s.toArray());t.Ac=!0,yield dp(t.remoteStore,!0);for(const p of c)fg(t.remoteStore,p)}else if(!1===e&&!1!==t.Ac){const s=[];let c=Promise.resolve();t._c.forEach((p,E)=>{t.sharedClientState.isLocalQueryTarget(E)?s.push(E):c=c.then(()=>(ns(t,E),Nu(t.localStore,E,!0))),_d(t.remoteStore,E)}),yield c,yield fo(t,s),function(p){const E=Un(p);E.gc.forEach((F,K)=>{_d(E.remoteStore,K)}),E.yc.Is(),E.gc=new Map,E.mc=new ms(On.comparator)}(t),t.Ac=!1,yield dp(t.remoteStore,!1)}}),Gi.apply(this,arguments)}function fo(r,e,t){return xl.apply(this,arguments)}function xl(){return xl=(0,oe.Z)(function*(r,e,t){const s=Un(r),c=[],p=[];for(const E of e){let F;const K=s._c.get(E);if(K&&0!==K.length){F=yield Ou(s.localStore,Ao(K[0]));for(const te of K){const me=s.dc.get(te),it=yield Md(s,me);it.snapshot&&p.push(it.snapshot)}}else{const te=yield md(s.localStore,E);F=yield Ou(s.localStore,te),yield Ad(s,Ka(te),E,!1,F.resumeToken)}c.push(F)}return s.fc.eu(p),c}),xl.apply(this,arguments)}function Ka(r){return cc(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Gc(r){const e=Un(r);return Un(Un(e.localStore).persistence).Mi()}function po(r,e,t,s){return gf.apply(this,arguments)}function gf(){return gf=(0,oe.Z)(function*(r,e,t,s){const c=Un(r);if(c.Ac)return void yn("SyncEngine","Ignoring unexpected query state notification.");const p=c._c.get(e);if(p&&p.length>0)switch(t){case"current":case"not-current":{const E=yield og(c.localStore,Rh(p[0])),F=sd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Io.EMPTY_BYTE_STRING);yield ho(c,E,F);break}case"rejected":yield Nu(c.localStore,e,!0),ns(c,e,s);break;default:Zn()}}),gf.apply(this,arguments)}function Cm(r,e,t){return sa.apply(this,arguments)}function sa(){return sa=(0,oe.Z)(function*(r,e,t){const s=Wc(r);if(s.Ac){for(const c of e){if(s._c.has(c)){yn("SyncEngine","Adding an already active target "+c);continue}const p=yield md(s.localStore,c),E=yield Ou(s.localStore,p);yield Ad(s,Ka(p),E.targetId,!1,E.resumeToken),fg(s.remoteStore,E)}for(const c of t)s._c.has(c)&&(yield Nu(s.localStore,c,!1).then(()=>{_d(s.remoteStore,c),ns(s,c)}).catch(R))}}),sa.apply(this,arguments)}function Wc(r){const e=Un(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=T.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=re.bind(null,e),e.fc.eu=hp.bind(null,e.eventManager),e.fc.vc=_c.bind(null,e.eventManager),e}function qa(r){const e=Un(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gt.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vt.bind(null,e),e}class $u{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,oe.Z)(function*(){t.serializer=Ga(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Xh(this.persistence,new Ha,e.initialUser,this.serializer)}createPersistence(e){return new Vc(Zh.js,this.serializer)}createSharedClientState(e){return new ym}terminate(){var e=this;return(0,oe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Uu extends $u{constructor(e,t,s){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,oe.Z)(function*(){yield t().call(s,e),yield s.bc.initialize(s,e),yield qa(s.bc.syncEngine),yield dl(s.bc.remoteStore),yield s.persistence.pi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Xh(this.persistence,new Ha,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new om(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new Ui(t,this.persistence);return new zi(e.asyncQueue,s)}createPersistence(e){const t=Yf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Ns.withCacheSize(this.cacheSizeBytes):Ns.DEFAULT;return new rg(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,sf(),ep(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ym}}class v_ extends Uu{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,oe.Z)(function*(){yield t().call(s,e);const c=s.bc.syncEngine;s.sharedClientState instanceof nh&&(s.sharedClientState.syncEngine={Qr:Ir.bind(null,c),jr:po.bind(null,c),zr:Cm.bind(null,c),Mi:Gc.bind(null,c),Gr:ph.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.pi(function(){var p=(0,oe.Z)(function*(E){yield function Jr(r,e){return Gi.apply(this,arguments)}(s.bc.syncEngine,E),s.gcScheduler&&(E&&!s.gcScheduler.started?s.gcScheduler.start():E||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(E&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():E||s.indexBackfillerScheduler.stop())});return function(E){return p.apply(this,arguments)}}())})()}createSharedClientState(e){const t=sf();if(!nh.D(t))throw new an(Lt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Yf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nh(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class pp{initialize(e,t){var s=this;return(0,oe.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>G(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=hh.bind(null,s.syncEngine),yield dp(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ny}createDatastore(e){const t=Ga(e.databaseInfo.databaseId),s=new dg(e.databaseInfo);return new Ay(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,c=e.asyncQueue,p=F=>G(this.syncEngine,F,0),E=cg.D()?new cg:new Cy,new _m(t,s,c,p,E);var t,s,c,p,E}createSyncEngine(e,t){return function(s,c,p,E,F,K,te){const me=new dh(s,c,p,E,F,K);return te&&(me.Ac=!0),me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,oe.Z)(function*(t){const s=Un(t);yn("RemoteStore","RemoteStore shutting down."),s.Au.add(5),yield uu(s),s.vu.shutdown(),s.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Tm(r,e=10240){let t=0;return{read:()=>(0,oe.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,oe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Vu{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ky{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new br,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(s=>{s&&s.Gu()?this.metadata.resolve(s.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Ku)}`))},s=>this.metadata.reject(s))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,oe.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,oe.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,oe.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const s=e.Cc.decode(t),c=Number(s);isNaN(c)&&e.kc(`length string (${s}) is not valid number`);const p=yield e.Mc(c);return new bd(JSON.parse(p),t.length+c)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,oe.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Mc(e){var t=this;return(0,oe.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const s=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,oe.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Iv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,oe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new an(Lt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(c=(0,oe.Z)(function*(p,E){const F=Un(p),K=Wd(F.serializer)+"/documents",te={documents:E.map(rn=>od(F.serializer,rn))},me=yield F.Ao("BatchGetDocuments",K,te,E.length),it=new Map;me.forEach(rn=>{const Sn=function jh(r,e){return"found"in e?function(t,s){dr(!!s.found);const c=Lc(t,s.found.name),p=xo(s.found.updateTime),E=s.found.createTime?xo(s.found.createTime):tr.min(),F=new $s({mapValue:{fields:s.found.fields}});return Vi.newFoundDocument(c,p,E,F)}(r,e):"missing"in e?function(t,s){dr(!!s.missing),dr(!!s.readTime);const c=Lc(t,s.missing),p=xo(s.readTime);return Vi.newNoDocument(c,p)}(r,e):Zn()}(F.serializer,rn);it.set(Sn.key.toString(),Sn)});const Ft=[];return E.forEach(rn=>{const Sn=it.get(rn.toString());dr(!!Sn),Ft.push(Sn)}),Ft}),function(p,E){return c.apply(this,arguments)})(t.datastore,e);var c;return s.forEach(c=>t.recordVersion(c)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new id(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,oe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,c)=>{const p=On.fromPath(c);e.mutations.push(new xp(p,e.precondition(p)))}),yield(s=(0,oe.Z)(function*(c,p){const E=Un(c),F=Wd(E.serializer)+"/documents",K={writes:p.map(te=>ad(E.serializer,te))};yield E.po("Commit",F,K)}),function(c,p){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Zn();t=tr.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new an(Lt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(tr.min())?uo.exists(!1):uo.updateTime(t):uo.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(tr.min()))throw new an(Lt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return uo.updateTime(t)}return uo.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Fy{constructor(e,t,s,c,p){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=p,this.Fc=s.maxAttempts,this.Lo=new af(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,oe.Z)(function*(){const t=new Iv(e.datastore),s=e.Lc(t);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(p=>{e.qc(p)}))}).catch(c=>{e.qc(c)})}))}Lc(e){try{const t=this.updateFunction(e);return!wo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ug(t)}return!1}}class X0{constructor(e,t,s,c){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=ro.UNAUTHENTICATED,this.clientId=nl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var E=(0,oe.Z)(function*(F){yn("FirestoreClient","Received user=",F.uid),yield p.authCredentialListener(F),p.user=F});return function(F){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(s,E=>(yn("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,oe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new an(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const c=wd(s,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function Ly(r,e){return By.apply(this,arguments)}function By(){return By=(0,oe.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),yn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var c=(0,oe.Z)(function*(p){s.isEqual(p)||(yield xu(e.localStore,p),s=p)});return function(p){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),By.apply(this,arguments)}function $y(r,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,oe.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield oa(r);yn("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(c=>wm(e.remoteStore,c)),r.setAppCheckTokenChangeListener((c,p)=>wm(e.remoteStore,p)),r._onlineComponents=e}),Sm.apply(this,arguments)}function E_(r){return"FirebaseError"===r.name?r.code===Lt.FAILED_PRECONDITION||r.code===Lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function oa(r){return Am.apply(this,arguments)}function Am(){return Am=(0,oe.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){yn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ly(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!E_(t))throw t;lo("Error using user provided cache. Falling back to memory cache: "+t),yield Ly(r,new $u)}}else yn("FirestoreClient","Using default OfflineComponentProvider"),yield Ly(r,new $u);return r._offlineComponents}),Am.apply(this,arguments)}function Mm(r){return Uy.apply(this,arguments)}function Uy(){return Uy=(0,oe.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(yn("FirestoreClient","Using user provided OnlineComponentProvider"),yield $y(r,r._uninitializedComponentsProvider._online)):(yn("FirestoreClient","Using default OnlineComponentProvider"),yield $y(r,new pp))),r._onlineComponents}),Uy.apply(this,arguments)}function Vy(r){return oa(r).then(e=>e.persistence)}function Rm(r){return oa(r).then(e=>e.localStore)}function jy(r){return Mm(r).then(e=>e.remoteStore)}function xm(r){return Mm(r).then(e=>e.syncEngine)}function gp(r){return Hy.apply(this,arguments)}function Hy(){return Hy=(0,oe.Z)(function*(r){const e=yield Mm(r),t=e.eventManager;return t.onListen=ff.bind(null,e.syncEngine),t.onUnlisten=o.bind(null,e.syncEngine),t}),Hy.apply(this,arguments)}function Cv(r,e,t={}){const s=new br;return r.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(c,p,E,F,K){const te=new Vu({next:it=>{p.enqueueAndForget(()=>vg(c,me));const Ft=it.docs.has(E);!Ft&&it.fromCache?K.reject(new an(Lt.UNAVAILABLE,"Failed to get document because the client is offline.")):Ft&&it.fromCache&&F&&"server"===F.source?K.reject(new an(Lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):K.resolve(it)},error:it=>K.reject(it)}),me=new ia(tu(E.path),te,{includeMetadataChanges:!0,Uu:!0});return ch(c,me)}(yield gp(r),r.asyncQueue,e,t,s)})),s.promise}function Pm(r,e,t={}){const s=new br;return r.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(c,p,E,F,K){const te=new Vu({next:it=>{p.enqueueAndForget(()=>vg(c,me)),it.fromCache&&"server"===F.source?K.reject(new an(Lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):K.resolve(it)},error:it=>K.reject(it)}),me=new ia(E,te,{includeMetadataChanges:!0,Uu:!0});return ch(c,me)}(yield gp(r),r.asyncQueue,e,t,s)})),s.promise}const Kc=new Map;function vc(r,e,t){if(!t)throw new an(Lt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Gy(r,e,t,s){if(!0===e&&!0===s)throw new an(Lt.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Wy(r){if(!On.isDocumentKey(r))throw new an(Lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function b_(r){if(On.isDocumentKey(r))throw new an(Lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Om(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Zn()}function as(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new an(Lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Om(r);throw new an(Lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function C_(r,e){if(e<=0)throw new an(Lt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class Nm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new an(Lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new an(Lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rd{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new an(Lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new an(Lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $o;switch(t.type){case"firstParty":return new kl(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new an(Lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kc.get(e);t&&(yn("ComponentProvider","Removing Datastore"),Kc.delete(e),t.terminate())}(this),Promise.resolve()}}class go{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new go(this.firestore,e,this._key)}}class Ya{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ya(this.firestore,e,this._query)}}class zu extends Ya{constructor(e,t,s){super(e,t,tu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new go(this.firestore,null,new On(e))}withConverter(e){return new zu(this.firestore,e,this._path)}}function Ky(r,e,...t){if(r=(0,Je.m9)(r),vc("collection","path",e),r instanceof Rd){const s=$i.fromString(e,...t);return b_(s),new zu(r,null,s)}{if(!(r instanceof go||r instanceof zu))throw new an(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child($i.fromString(e,...t));return b_(s),new zu(r.firestore,null,s)}}function _f(r,e,...t){if(r=(0,Je.m9)(r),1===arguments.length&&(e=nl.A()),vc("doc","path",e),r instanceof Rd){const s=$i.fromString(e,...t);return Wy(s),new go(r,null,new On(s))}{if(!(r instanceof go||r instanceof zu))throw new an(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child($i.fromString(e,...t));return Wy(s),new go(r.firestore,r instanceof zu?r.converter:null,new On(s))}}function S_(r,e){return r=(0,Je.m9)(r),e=(0,Je.m9)(e),(r instanceof go||r instanceof zu)&&(e instanceof go||e instanceof zu)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function km(r,e){return r=(0,Je.m9)(r),e=(0,Je.m9)(e),r instanceof Ya&&e instanceof Ya&&r.firestore===e.firestore&&Pc(r._query,e._query)&&r.converter===e.converter}class A_{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new af(this,"async_queue_retry"),this.Yc=()=>{const t=ep();t&&yn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=ep();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=ep();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new br;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,oe.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!dt(t))throw t;yn("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(s=>{throw this.zc=s,this.Wc=!1,ni("INTERNAL UNHANDLED ERROR: ",function(p){let E=p.message||"";return p.stack&&(E=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),E}(s)),s}).then(s=>(this.Wc=!1,s))));return this.Kc=t,t}enqueueAfterDelay(e,t,s){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const c=yg.createAndSchedule(this,e,t,s,p=>this.ea(p));return this.jc.push(c),c}Xc(){this.zc&&Zn()}verifyOperationInProgress(){}na(){var e=this;return(0,oe.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function Eg(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(r)}class Fm{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mo extends Rd{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new A_,this._persistenceKey=(null==c?void 0:c.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||qy(this),this._firestoreClient.terminate()}}function Qo(r){return r._firestoreClient||qy(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function qy(r){var e,t,s;const c=r._freezeSettings(),p=(F=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new al(r._databaseId,F,r._persistenceKey,(te=c).host,te.ssl,te.experimentalForceLongPolling,te.experimentalAutoDetectLongPolling,te.useFetchStreams));var F,te;r._firestoreClient=new X0(r._authCredentials,r._appCheckCredentials,r._queue,p),null!==(t=c.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=c.cache)&&void 0!==s&&s._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.cache.kind,_offline:c.cache._offlineComponentProvider,_online:c.cache._onlineComponentProvider})}function P_(r,e,t){const s=new br;return r.asyncQueue.enqueue((0,oe.Z)(function*(){try{yield Ly(r,t),yield $y(r,e),s.resolve()}catch(c){const p=c;if(!E_(p))throw p;lo("Error enabling indexeddb cache. Falling back to memory cache: "+p),s.reject(p)}})).then(()=>s.promise)}function O_(r){if(r._initialized||r._terminated)throw new an(Lt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Gu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gu(Io.fromBase64String(e))}catch(t){throw new an(Lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gu(Io.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new an(Lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Is(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vf{constructor(e){this._methodName=e}}class Lm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new an(Lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new an(Lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rr(this._lat,e._lat)||Rr(this._long,e._long)}}const Fv=/^__.*__$/;class Lv{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Fc(e,this.data,this.fieldMask,t,this.fieldTransforms):new kc(e,this.data,t,this.fieldTransforms)}}class Yy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Fc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zy(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zn()}}class Ig{constructor(e,t,s,c,p,E){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=c,void 0===p&&this.oa(),this.fieldTransforms=p||[],this.fieldMask=E||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new Ig(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:s,ha:!1});return c.la(e),c}fa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:s,ha:!1});return c.oa(),c}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return Vm(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Zy(this.ua)&&Fv.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class N_{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ga(e)}ga(e,t,s,c=!1){return new Ig({ua:e,methodName:t,ma:s,path:Is.emptyPath(),ha:!1,wa:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gh(r){const e=r._freezeSettings(),t=Ga(r._databaseId);return new N_(r._databaseId,!!e.ignoreUndefinedProperties,t)}function bg(r,e,t,s,c,p={}){const E=r.ga(p.merge||p.mergeFields?2:0,e,t,c);Um("Data must be an object, but it was:",E,s);const F=$m(s,E);let K,te;if(p.merge)K=new jo(E.fieldMask),te=E.fieldTransforms;else if(p.mergeFields){const me=[];for(const it of p.mergeFields){const Ft=_p(e,it,t);if(!E.contains(Ft))throw new an(Lt.INVALID_ARGUMENT,`Field '${Ft}' is specified in your field mask but missing from your input data.`);F_(me,Ft)||me.push(Ft)}K=new jo(me),te=E.fieldTransforms.filter(it=>K.covers(it.field))}else K=null,te=E.fieldTransforms;return new Lv(new $s(F),K,te)}class mp extends vf{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mp}}function Qy(r,e,t){return new Ig({ua:3,ma:e.settings.ma,methodName:r._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Bm extends vf{_toFieldTransform(e){return new Oh(e.path,new td)}isEqual(e){return e instanceof Bm}}class Xy extends vf{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=Qy(this,e,!0),s=this.ya.map(p=>yp(p,t)),c=new nd(s);return new Oh(e.path,c)}isEqual(e){return this===e}}class k_ extends vf{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=Qy(this,e,!0),s=this.ya.map(p=>yp(p,t)),c=new rd(s);return new Oh(e.path,c)}isEqual(e){return this===e}}class Ef extends vf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new hc(e.serializer,Pf(e.serializer,this.pa));return new Oh(e.path,t)}isEqual(e){return this===e}}function Jy(r,e,t,s){const c=r.ga(1,e,t);Um("Data must be an object, but it was:",c,s);const p=[],E=$s.empty();Ra(s,(K,te)=>{const me=Yr(e,K,t);te=(0,Je.m9)(te);const it=c.fa(me);if(te instanceof mp)p.push(me);else{const Ft=yp(te,it);null!=Ft&&(p.push(me),E.set(me,Ft))}});const F=new jo(p);return new Yy(E,F,c.fieldTransforms)}function e_(r,e,t,s,c,p){const E=r.ga(1,e,t),F=[_p(e,s,t)],K=[c];if(p.length%2!=0)throw new an(Lt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ft=0;Ft<p.length;Ft+=2)F.push(_p(e,p[Ft])),K.push(p[Ft+1]);const te=[],me=$s.empty();for(let Ft=F.length-1;Ft>=0;--Ft)if(!F_(te,F[Ft])){const rn=F[Ft];let Sn=K[Ft];Sn=(0,Je.m9)(Sn);const kn=E.fa(rn);if(Sn instanceof mp)te.push(rn);else{const _r=yp(Sn,kn);null!=_r&&(te.push(rn),me.set(rn,_r))}}const it=new jo(te);return new Yy(me,it,E.fieldTransforms)}function wf(r,e,t,s=!1){return yp(t,r.ga(s?4:3,e))}function yp(r,e){if(Bv(r=(0,Je.m9)(r)))return Um("Unsupported field value:",e,r),$m(r,e);if(r instanceof vf)return function(t,s){if(!Zy(s.ua))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,s){const c=[];let p=0;for(const E of t){let F=yp(E,s.da(p));null==F&&(F={nullValue:"NULL_VALUE"}),c.push(F),p++}return{arrayValue:{values:c}}}(r,e)}return function(t,s){if(null===(t=(0,Je.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pf(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=us.fromDate(t);return{timestampValue:Ro(s.serializer,c)}}if(t instanceof us){const c=new us(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ro(s.serializer,c)}}if(t instanceof Lm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Gu)return{bytesValue:ja(s.serializer,t._byteString)};if(t instanceof go){const c=s.databaseId,p=t.firestore._databaseId;if(!p.isEqual(c))throw s._a(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:$h(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Om(t)}`)}(r,e)}function $m(r,e){const t={};return mu(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(r,(s,c)=>{const p=yp(c,e.aa(s));null!=p&&(t[s]=p)}),{mapValue:{fields:t}}}function Bv(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof us||r instanceof Lm||r instanceof Gu||r instanceof go||r instanceof vf)}function Um(r,e,t){if(!Bv(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Om(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function _p(r,e,t){if((e=(0,Je.m9)(e))instanceof xd)return e._internalPath;if("string"==typeof e)return Yr(r,e);throw Vm("Field path arguments must be of type string or ",r,!1,void 0,t)}const tE=new RegExp("[~\\*/\\[\\]]");function Yr(r,e,t){if(e.search(tE)>=0)throw Vm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new xd(...e.split("."))._internalPath}catch{throw Vm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Vm(r,e,t,s,c){const p=s&&!s.isEmpty(),E=void 0!==c;let F=`Function ${e}() called with invalid data`;t&&(F+=" (via `toFirestore()`)"),F+=". ";let K="";return(p||E)&&(K+=" (found",p&&(K+=` in field ${s}`),E&&(K+=` in document ${c}`),K+=")"),new an(Lt.INVALID_ARGUMENT,F+r+K)}function F_(r,e){return r.some(t=>t.isEqual(e))}class Cg{constructor(e,t,s,c,p){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new go(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vp extends Cg{data(){return super.data()}}function jm(r,e){return"string"==typeof e?Yr(r,e):e instanceof xd?e._internalPath:e._delegate._internalPath}function Dg(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new an(Lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ep{}class yo extends Ep{}function If(r,e,...t){let s=[];e instanceof Ep&&s.push(e),s=s.concat(t),function(c){const p=c.filter(F=>F instanceof Ip).length,E=c.filter(F=>F instanceof wp).length;if(p>1||p>0&&E>0)throw new an(Lt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)r=c._apply(r);return r}class wp extends yo{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new wp(e,t,s)}_apply(e){const t=this._parse(e);return bp(e._query,t),new Ya(e.firestore,e.converter,ru(e._query,t))}_parse(e){const t=gh(e.firestore);return function(c,p,E,F,K,te,me){let it;if(K.isKeyField()){if("array-contains"===te||"array-contains-any"===te)throw new an(Lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${te}' queries on documentId().`);if("in"===te||"not-in"===te){U_(me,te);const Ft=[];for(const rn of me)Ft.push(n_(F,c,rn));it={arrayValue:{values:Ft}}}else it=n_(F,c,me)}else"in"!==te&&"not-in"!==te&&"array-contains-any"!==te||U_(me,te),it=wf(E,"where",me,"in"===te||"not-in"===te);return Ai.create(K,te,it)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ip extends Ep{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ip(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Yi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,c){let p=s;const E=c.getFlattenedFilters();for(const F of E)bp(p,F),p=ru(p,F)}(e._query,t),new Ya(e.firestore,e.converter,ru(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Hm extends yo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hm(e,t)}_apply(e){const t=function(s,c,p){if(null!==s.startAt)throw new an(Lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new an(Lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new $l(c,p);return function(F,K){if(null===xc(F)){const te=_u(F);null!==te&&Cp(0,te,K.field)}}(s,E),E}(e._query,this._field,this._direction);return new Ya(e.firestore,e.converter,function(s,c){const p=s.explicitOrderBy.concat([c]);return new Tl(s.path,s.collectionGroup,p,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class zm extends yo{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new zm(e,t,s)}_apply(e){return new Ya(e.firestore,e.converter,uc(e._query,this._limit,this._limitType))}}class mh extends yo{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new mh(e,t,s)}_apply(e){const t=t_(e,this.type,this._docOrFields,this._inclusive);return new Ya(e.firestore,e.converter,(c=t,new Tl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class Gm extends yo{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Gm(e,t,s)}_apply(e){const t=t_(e,this.type,this._docOrFields,this._inclusive);return new Ya(e.firestore,e.converter,(c=t,new Tl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function t_(r,e,t,s){if(t[0]=(0,Je.m9)(t[0]),t[0]instanceof Cg)return function(c,p,E,F,K){if(!F)throw new an(Lt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const te=[];for(const me of Vl(c))if(me.field.isKeyField())te.push(ke(p,F.key));else{const it=F.data.field(me.field);if(Sc(it))throw new an(Lt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+me.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===it){const Ft=me.field.canonicalString();throw new an(Lt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ft}' (used as the orderBy) does not exist.`)}te.push(it)}return new Ho(te,K)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const c=gh(r.firestore);return function(p,E,F,K,te,me){const it=p.explicitOrderBy;if(te.length>it.length)throw new an(Lt.INVALID_ARGUMENT,`Too many arguments provided to ${K}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ft=[];for(let rn=0;rn<te.length;rn++){const Sn=te[rn];if(it[rn].field.isKeyField()){if("string"!=typeof Sn)throw new an(Lt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${K}(), but got a ${typeof Sn}`);if(!nu(p)&&-1!==Sn.indexOf("/"))throw new an(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${K}() must be a plain document ID, but '${Sn}' contains a slash.`);const kn=p.path.child($i.fromString(Sn));if(!On.isDocumentKey(kn))throw new an(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${K}() must result in a valid document path, but '${kn}' is not because it contains an odd number of segments.`);const _r=new On(kn);Ft.push(ke(E,_r))}else{const kn=wf(F,K,Sn);Ft.push(kn)}}return new Ho(Ft,me)}(r._query,r.firestore._databaseId,c,e,t,s)}}function n_(r,e,t){if("string"==typeof(t=(0,Je.m9)(t))){if(""===t)throw new an(Lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nu(e)&&-1!==t.indexOf("/"))throw new an(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child($i.fromString(t));if(!On.isDocumentKey(s))throw new an(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ke(r,new On(s))}if(t instanceof go)return ke(r,t._key);throw new an(Lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Om(t)}.`)}function U_(r,e){if(!Array.isArray(r)||0===r.length)throw new an(Lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bp(r,e){if(e.isInequality()){const s=_u(r),c=e.field;if(null!==s&&!s.isEqual(c))throw new an(Lt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${c.toString()}'`);const p=xc(r);null!==p&&Cp(0,c,p)}const t=function(s,c){for(const p of s)for(const E of p.getFlattenedFilters())if(c.indexOf(E.op)>=0)return E.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new an(Lt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Cp(r,e,t){if(!t.isEqual(e))throw new an(Lt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class r_{convertValue(e,t="none"){switch(xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Zn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ra(e,(c,p)=>{s[c]=this.convertValue(p,t)}),s}convertGeoPoint(e){return new Lm(hs(e.latitude),hs(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ol(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Yo(e));default:return null}}convertTimestamp(e){const t=Cl(e);return new us(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=$i.fromString(e);dr(Qg(s));const c=new Ll(s.get(1),s.get(3)),p=new On(s.popFirst(5));return c.isEqual(t)||ni(`Document ${p} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}function Km(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class j_ extends r_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new go(this.firestore,null,t)}}class bf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yh extends Cg{constructor(e,t,s,c,p,E){super(e,t,s,c,E),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(jm("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class qm extends yh{data(e={}){return super.data(e)}}class Cf{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new bf(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new qm(this._firestore,this._userDataWriter,s.key,s,new bf(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new an(Lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let p=0;return s._snapshot.docChanges.map(E=>({type:"added",doc:new qm(s._firestore,s._userDataWriter,E.doc.key,E.doc,new bf(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:p++}))}{let p=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(E=>c||3!==E.type).map(E=>{const F=new qm(s._firestore,s._userDataWriter,E.doc.key,E.doc,new bf(s._snapshot.mutatedKeys.has(E.doc.key),s._snapshot.fromCache),s.query.converter);let K=-1,te=-1;return 0!==E.type&&(K=p.indexOf(E.doc.key),p=p.delete(E.doc.key)),1!==E.type&&(p=p.add(E.doc),te=p.indexOf(E.doc.key)),{type:rE(E.type),doc:F,oldIndex:K,newIndex:te}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rE(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zn()}}function i_(r,e){return r instanceof yh&&e instanceof yh?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Cf&&e instanceof Cf&&r._firestore===e._firestore&&km(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class _h extends r_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new go(this.firestore,null,t)}}function z_(r,e,t){r=as(r,go);const s=as(r.firestore,mo),c=Km(r.converter,e,t);return Dp(s,[bg(gh(s),"setDoc",r._key,c,null!==r.converter,t).toMutation(r._key,uo.none())])}function G_(r,e,t,...s){r=as(r,go);const c=as(r.firestore,mo),p=gh(c);let E;return E="string"==typeof(e=(0,Je.m9)(e))||e instanceof xd?e_(p,"updateDoc",r._key,e,t,s):Jy(p,"updateDoc",r._key,e),Dp(c,[E.toMutation(r._key,uo.exists(!0))])}function s_(r,...e){var t,s,c;r=(0,Je.m9)(r);let p={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||Eg(e[E])||(p=e[E],E++);const F={includeMetadataChanges:p.includeMetadataChanges};if(Eg(e[E])){const it=e[E];e[E]=null===(t=it.next)||void 0===t?void 0:t.bind(it),e[E+1]=null===(s=it.error)||void 0===s?void 0:s.bind(it),e[E+2]=null===(c=it.complete)||void 0===c?void 0:c.bind(it)}let K,te,me;if(r instanceof go)te=as(r.firestore,mo),me=tu(r._key.path),K={next:it=>{e[E]&&e[E](Df(te,r,it))},error:e[E+1],complete:e[E+2]};else{const it=as(r,Ya);te=as(it.firestore,mo),me=it._query;const Ft=new _h(te);K={next:rn=>{e[E]&&e[E](new Cf(te,Ft,it,rn))},error:e[E+1],complete:e[E+2]},Dg(r._query)}return function(it,Ft,rn,Sn){const kn=new Vu(Sn),_r=new ia(Ft,kn,rn);return it.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return ch(yield gp(it),_r)})),()=>{kn.Sc(),it.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return vg(yield gp(it),_r)}))}}(Qo(te),me,F,K)}function Dp(r,e){return function(t,s){const c=new br;return t.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function h(r,e,t){return y.apply(this,arguments)}(yield xm(t),s,c)})),c.promise}(Qo(r),e)}function Df(r,e,t){const s=t.docs.get(e._key),c=new _h(r);return new yh(r,c,e._key,s,new bf(t.hasPendingWrites,t.fromCache),e.converter)}const o_={maxAttempts:5};class Q_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gh(e)}set(e,t,s){this._verifyNotCommitted();const c=Pd(e,this._firestore),p=Km(c.converter,t,s),E=bg(this._dataReader,"WriteBatch.set",c._key,p,null!==c.converter,s);return this._mutations.push(E.toMutation(c._key,uo.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const p=Pd(e,this._firestore);let E;return E="string"==typeof(t=(0,Je.m9)(t))||t instanceof xd?e_(this._dataReader,"WriteBatch.update",p._key,t,s,c):Jy(this._dataReader,"WriteBatch.update",p._key,t),this._mutations.push(E.toMutation(p._key,uo.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pd(e,this._firestore);return this._mutations=this._mutations.concat(new id(t._key,uo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new an(Lt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pd(r,e){if((r=(0,Je.m9)(r)).firestore!==e)throw new an(Lt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class o0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gh(e)}get(e){const t=Pd(e,this._firestore),s=new j_(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return Zn();const p=c[0];if(p.isFoundDocument())return new Cg(this._firestore,s,p.key,p,t.converter);if(p.isNoDocument())return new Cg(this._firestore,s,t._key,null,t.converter);throw Zn()})}set(e,t,s){const c=Pd(e,this._firestore),p=Km(c.converter,t,s),E=bg(this._dataReader,"Transaction.set",c._key,p,null!==c.converter,s);return this._transaction.set(c._key,E),this}update(e,t,s,...c){const p=Pd(e,this._firestore);let E;return E="string"==typeof(t=(0,Je.m9)(t))||t instanceof xd?e_(this._dataReader,"Transaction.update",p._key,t,s,c):Jy(this._dataReader,"Transaction.update",p._key,t),this._transaction.update(p._key,E),this}delete(e){const t=Pd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pd(e,this._firestore),s=new _h(this._firestore);return super.get(e).then(c=>new yh(this._firestore,s,t._key,c._document,new bf(!1,!1),t.converter))}}!function(r,e=!0){Eo=et.SDK_VERSION,(0,et._registerComponent)(new Le.wA("firestore",(t,{instanceIdentifier:s,options:c})=>{const p=t.getProvider("app").getImmediate(),E=new mo(new $a(t.getProvider("auth-internal")),new kd(t.getProvider("app-check-internal")),function(F,K){if(!Object.prototype.hasOwnProperty.apply(F.options,["projectId"]))throw new an(Lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(F.options.projectId,K)}(p,s),p);return c=Object.assign({useFetchStreams:e},c),E._setSettings(c),E},"PUBLIC").setMultipleInstances(!0)),(0,et.registerVersion)(Nl,"3.11.0",r),(0,et.registerVersion)(Nl,"3.11.0","esm2017")}();function Zm(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new an("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function X_(){if(typeof Uint8Array>"u")throw new an("unimplemented","Uint8Arrays are not available in this environment.")}function J_(){if(!function ac(){return typeof atob<"u"}())throw new an("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Sg{constructor(e){this._delegate=e}static fromBase64String(e){return J_(),new Sg(Gu.fromBase64String(e))}static fromUint8Array(e){return X_(),new Sg(Gu.fromUint8Array(e))}toBase64(){return J_(),this._delegate.toBase64()}toUint8Array(){return X_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ag(r){return function l_(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class ev{enableIndexedDbPersistence(e,t){return function R_(r,e){O_(r=as(r,mo));const t=Qo(r);if(t._uninitializedComponentsProvider)throw new an(Lt.FAILED_PRECONDITION,"SDK cache is already specified.");lo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),c=new pp;return P_(t,c,new Uu(c,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function x_(r){O_(r=as(r,mo));const e=Qo(r);if(e._uninitializedComponentsProvider)throw new an(Lt.FAILED_PRECONDITION,"SDK cache is already specified.");lo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new pp;return P_(e,s,new v_(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Mv(r){if(r._initialized&&!r._terminated)throw new an(Lt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new br;return r._queue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{yield(t=(0,oe.Z)(function*(s){if(!W.D())return Promise.resolve();const c=s+"main";yield W.delete(c)}),function(s){return t.apply(this,arguments)})(Yf(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Qm{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ll||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&lo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function D_(r,e,t,s={}){var c;const p=(r=as(r,Rd))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&lo("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let E,F;if("string"==typeof s.mockUserToken)E=s.mockUserToken,F=ro.MOCK_USER;else{E=(0,Je.Sg)(s.mockUserToken,null===(c=r._app)||void 0===c?void 0:c.options.projectId);const K=s.mockUserToken.sub||s.mockUserToken.user_id;if(!K)throw new an(Lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");F=new ro(K)}r._authCredentials=new Ql(new wc(E,F))}}(this._delegate,e,t,s)}enableNetwork(){return function xv(r){return function w_(r){return r.asyncQueue.enqueue((0,oe.Z)(function*(){const e=yield Vy(r),t=yield jy(r);return e.setNetworkEnabled(!0),function(s){const c=Un(s);return c.Au.delete(0),np(c)}(t)}))}(Qo(r=as(r,mo)))}(this._delegate)}disableNetwork(){return function Pv(r){return function bv(r){return r.asyncQueue.enqueue((0,oe.Z)(function*(){const e=yield Vy(r),t=yield jy(r);return e.setNetworkEnabled(!1),(s=(0,oe.Z)(function*(c){const p=Un(c);p.Au.add(0),yield uu(p),p.Pu.set("Offline")}),function(c){return s.apply(this,arguments)})(t);var s}))}(Qo(r=as(r,mo)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Gy("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Rv(r){return function(e){const t=new br;return e.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function gn(r,e){return Hn.apply(this,arguments)}(yield xm(e),t)})),t.promise}(Qo(r=as(r,mo)))}(this._delegate)}onSnapshotsInSync(e){return function Jv(r,e){return function ju(r,e){const t=new Vu(e);return r.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return s=yield gp(r),c=t,Un(s).Nu.add(c),void c.next();var s,c})),()=>{t.Sc(),r.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return s=yield gp(r),c=t,void Un(s).Nu.delete(c);var s,c}))}}(Qo(r=as(r,mo)),Eg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new an("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sf(this,Ky(this._delegate,e))}catch(t){throw fl(t,"collection()","Firestore.collection()")}}doc(e){try{return new Za(this,_f(this._delegate,e))}catch(t){throw fl(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pl(this,function T_(r,e){if(r=as(r,Rd),vc("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new an(Lt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ya(r,null,(t=e,new Tl($i.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw fl(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function a0(r,e,t){r=as(r,mo);const s=Object.assign(Object.assign({},o_),t);return function(c){if(c.maxAttempts<1)throw new an(Lt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,p,E){const F=new br;return c.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){const K=yield function yf(r){return Mm(r).then(e=>e.datastore)}(c);new Fy(c.asyncQueue,K,E,p,F).run()})),F.promise}(Qo(r),c=>e(new o0(r,c)),s)}(this._delegate,t=>e(new Jm(this,t)))}batch(){return Qo(this._delegate),new tv(new Q_(this._delegate,e=>Dp(this._delegate,e)))}loadBundle(e){return function Ov(r,e){const t=Qo(r=as(r,mo)),s=new Fm;return function Dv(r,e,t,s){const c=function(p,E){let F;return F="string"==typeof p?Op().encode(p):p,K=function(K,te){if(K instanceof Uint8Array)return Tm(K,void 0);if(K instanceof ArrayBuffer)return Tm(new Uint8Array(K),void 0);if(K instanceof ReadableStream)return K.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(F),new ky(K,E);var K}(t,Ga(e));r.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){!function mf(r,e,t){const s=Un(r);var c;(c=(0,oe.Z)(function*(p,E,F){try{const K=yield E.getMetadata();if(yield function(Ft,rn){const Sn=Un(Ft),kn=xo(rn.createTime);return Sn.persistence.runTransaction("hasNewerBundle","readonly",_r=>Sn.Ls.getBundleMetadata(_r,rn.id)).then(_r=>!!_r&&_r.createTime.compareTo(kn)>=0)}(p.localStore,K))return yield E.close(),F._completeWith({taskState:"Success",documentsLoaded:(Ft=K).totalDocuments,bytesLoaded:Ft.totalBytes,totalDocuments:Ft.totalDocuments,totalBytes:Ft.totalBytes}),Promise.resolve(new Set);F._updateProgress(fp(K));const te=new Wl(K,p.localStore,E.serializer);let me=yield E.Pc();for(;me;){const Ft=yield te.ju(me);Ft&&F._updateProgress(Ft),me=yield E.Pc()}const it=yield te.complete();return yield ho(p,it.Hu,void 0),yield function(Ft,rn){const Sn=Un(Ft);return Sn.persistence.runTransaction("Save bundle","readwrite",kn=>Sn.Ls.saveBundleMetadata(kn,rn))}(p.localStore,K),F._completeWith(it.progress),Promise.resolve(it.Wu)}catch(K){return lo("SyncEngine",`Loading bundle failed with ${K}`),F._failWith(K),Promise.resolve(new Set)}var Ft}),function(p,E,F){return c.apply(this,arguments)})(s,e,t).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield xm(r),c,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function Nv(r,e){return function Tv(r,e){return r.asyncQueue.enqueue((0,oe.Z)(function*(){return function(t,s){const c=Un(t);return c.persistence.runTransaction("Get named query","readonly",p=>c.Ls.getNamedQuery(p,s))}(yield Rm(r),e)}))}(Qo(r=as(r,mo)),e).then(t=>t?new Ya(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Pl(this,t):null)}}class Xm extends r_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sg(new Gu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Za.forKey(t,this.firestore,null)}}class Jm{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Xm(e)}get(e){const t=Od(e);return this._delegate.get(t).then(s=>new Tp(this._firestore,new yh(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const c=Od(e);return s?(Zm("Transaction.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const p=Od(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,s,...c),this}delete(e){const t=Od(e);return this._delegate.delete(t),this}}class tv{constructor(e){this._delegate=e}set(e,t,s){const c=Od(e);return s?(Zm("WriteBatch.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const p=Od(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,s,...c),this}delete(e){const t=Od(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vh{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new qm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Tf(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=vh.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let p=c.get(t);return p||(p=new vh(e,new Xm(e),t),c.set(t,p)),p}}vh.INSTANCES=new WeakMap;class Za{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xm(e)}static forPath(e,t,s){if(e.length%2!=0)throw new an("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Za(t,new go(t._delegate,s,new On(e)))}static forKey(e,t,s){return new Za(t,new go(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Sf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sf(this.firestore,Ky(this._delegate,e))}catch(t){throw fl(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Je.m9)(e))instanceof go&&S_(this._delegate,e)}set(e,t){t=Zm("DocumentReference.set",t);try{return t?z_(this._delegate,e,t):z_(this._delegate,e)}catch(s){throw fl(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?G_(this._delegate,e):G_(this._delegate,e,t,...s)}catch(c){throw fl(c,"updateDoc()","DocumentReference.update()")}}delete(){return function iE(r){return Dp(as(r.firestore,mo),[new id(r._key,uo.none())])}(this._delegate)}onSnapshot(...e){const t=nv(e),s=y0(e,c=>new Tp(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return s_(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Yv(r){r=as(r,go);const e=as(r.firestore,mo),t=Qo(e),s=new _h(e);return function I_(r,e){const t=new br;return r.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(s=(0,oe.Z)(function*(c,p,E){try{const F=yield function(K,te){const me=Un(K);return me.persistence.runTransaction("read document","readonly",it=>me.localDocuments.getDocument(it,te))}(c,p);F.isFoundDocument()?E.resolve(F):F.isNoDocument()?E.resolve(null):E.reject(new an(Lt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(F){const K=wd(F,`Failed to get document '${p} from cache`);E.reject(K)}}),function(c,p,E){return s.apply(this,arguments)})(yield Rm(r),e,t);var s})),t.promise}(t,r._key).then(c=>new yh(e,s,r._key,c,new bf(null!==c&&c.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function H_(r){r=as(r,go);const e=as(r.firestore,mo);return Cv(Qo(e),r._key,{source:"server"}).then(t=>Df(e,r,t))}(this._delegate):function Ym(r){r=as(r,go);const e=as(r.firestore,mo);return Cv(Qo(e),r._key).then(t=>Df(e,r,t))}(this._delegate),t.then(s=>new Tp(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Za(this.firestore,this._delegate.withConverter(e?vh.getInstance(this.firestore,e):null))}}function fl(r,e,t){return r.message=r.message.replace(e,t),r}function nv(r){for(const e of r)if("object"==typeof e&&!Ag(e))return e;return{}}function y0(r,e){var t,s;let c;return c=Ag(r[0])?r[0]:Ag(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:p=>{c.next&&c.next(e(p))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class Tp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Za(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return i_(this._delegate,e._delegate)}}class Tf extends Tp{data(e){const t=this._delegate.data(e);return function Ku(r,e){r||Zn()}(void 0!==t),t}}class Pl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xm(e)}where(e,t,s){try{return new Pl(this.firestore,If(this._delegate,function L_(r,e,t){const s=e,c=jm("where",r);return wp._create(c,s,t)}(e,t,s)))}catch(c){throw fl(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Pl(this.firestore,If(this._delegate,function B_(r,e="asc"){const t=e,s=jm("orderBy",r);return Hm._create(s,t)}(e,t)))}catch(s){throw fl(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Pl(this.firestore,If(this._delegate,function Vv(r){return C_("limit",r),zm._create("limit",r,"F")}(e)))}catch(t){throw fl(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Pl(this.firestore,If(this._delegate,function jv(r){return C_("limitToLast",r),zm._create("limitToLast",r,"L")}(e)))}catch(t){throw fl(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Pl(this.firestore,If(this._delegate,function Hv(...r){return mh._create("startAt",r,!0)}(...e)))}catch(t){throw fl(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Pl(this.firestore,If(this._delegate,function zv(...r){return mh._create("startAfter",r,!1)}(...e)))}catch(t){throw fl(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Pl(this.firestore,If(this._delegate,function Wm(...r){return Gm._create("endBefore",r,!1)}(...e)))}catch(t){throw fl(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Pl(this.firestore,If(this._delegate,function $_(...r){return Gm._create("endAt",r,!0)}(...e)))}catch(t){throw fl(t,"endAt()","Query.endAt()")}}isEqual(e){return km(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Zv(r){r=as(r,Ya);const e=as(r.firestore,mo),t=Qo(e),s=new _h(e);return function zy(r,e){const t=new br;return r.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(s=(0,oe.Z)(function*(c,p,E){try{const F=yield ku(c,p,!0),K=new Fu(p,F.sr),te=K.nc(F.documents),me=K.applyChanges(te,!1);E.resolve(me.snapshot)}catch(F){const K=wd(F,`Failed to execute query '${p} against cache`);E.reject(K)}}),function(c,p,E){return s.apply(this,arguments)})(yield Rm(r),e,t);var s})),t.promise}(t,r._query).then(c=>new Cf(e,s,r,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function Qv(r){r=as(r,Ya);const e=as(r.firestore,mo),t=Qo(e),s=new _h(e);return Pm(t,r._query,{source:"server"}).then(c=>new Cf(e,s,r,c))}(this._delegate):function Tg(r){r=as(r,Ya);const e=as(r.firestore,mo),t=Qo(e),s=new _h(e);return Dg(r._query),Pm(t,r._query).then(c=>new Cf(e,s,r,c))}(this._delegate),t.then(s=>new u_(this.firestore,new Cf(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=nv(e),s=y0(e,c=>new u_(this.firestore,new Cf(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return s_(this._delegate,t,s)}withConverter(e){return new Pl(this.firestore,this._delegate.withConverter(e?vh.getInstance(this.firestore,e):null))}}class c_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Tf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class u_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Pl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Tf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new c_(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Tf(this._firestore,s))})}isEqual(e){return i_(this._delegate,e._delegate)}}class Sf extends Pl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Za(this.firestore,e):null}doc(e){try{return new Za(this.firestore,void 0===e?_f(this._delegate):_f(this._delegate,e))}catch(t){throw fl(t,"doc()","CollectionReference.doc()")}}add(e){return function Xv(r,e){const t=as(r.firestore,mo),s=_f(r),c=Km(r.converter,e);return Dp(t,[bg(gh(r.firestore),"addDoc",s._key,c,null!==r.converter,{}).toMutation(s._key,uo.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Za(this.firestore,t))}isEqual(e){return S_(this._delegate,e._delegate)}withConverter(e){return new Sf(this.firestore,this._delegate.withConverter(e?vh.getInstance(this.firestore,e):null))}}function Od(r){return as(r,go)}class ey{constructor(...e){this._delegate=new xd(...e)}static documentId(){return new ey(Is.keyField().canonicalString())}isEqual(e){return(e=(0,Je.m9)(e))instanceof xd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Eh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function c0(){return new Bm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Eh(e)}static delete(){const e=function l0(){return new mp("deleteField")}();return e._methodName="FieldValue.delete",new Eh(e)}static arrayUnion(...e){const t=function u0(...r){return new Xy("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new Eh(t)}static arrayRemove(...e){const t=function d0(...r){return new k_("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new Eh(t)}static increment(e){const t=function h0(r){return new Ef("increment",r)}(e);return t._methodName="FieldValue.increment",new Eh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rv={Firestore:Qm,GeoPoint:Lm,Timestamp:us,Blob:Sg,Transaction:Jm,WriteBatch:tv,DocumentReference:Za,DocumentSnapshot:Tp,Query:Pl,QueryDocumentSnapshot:Tf,QuerySnapshot:u_,CollectionReference:Sf,FieldPath:ey,FieldValue:Eh,setLogLevel:function m0(r){!function Os(r){_l.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function _0(r){(function iv(r,e){r.INTERNAL.registerComponent(new Le.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},rv)))})(r,(e,t)=>new Qm(e,t,new ev)),r.registerVersion("@firebase/firestore-compat","0.3.8")}(Se.Z);var wh=$(1205),v0=$(6217),E0=$(9260);function w0(r,e){return function sv(r,e=g.z){return new Y.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(r,e)}function d_(r,e){return w0(r,e).pipe((0,he.U)(t=>({payload:t,type:"query"})))}function ty(r,e){return d_(r,e).pipe((0,fe.O)(void 0),De(),(0,he.U)(([t,s])=>{const c=s.payload.docChanges(),p=c.map(E=>({type:E.type,payload:E}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((E,F)=>{const K=c.find(me=>me.doc.ref.isEqual(E.ref)),te=null==t?void 0:t.payload.docs.find(me=>me.ref.isEqual(E.ref));K&&JSON.stringify(K.doc.metadata)===JSON.stringify(E.metadata)||!K&&te&&JSON.stringify(te.metadata)===JSON.stringify(E.metadata)||p.push({type:"modified",payload:{oldIndex:F,newIndex:F,type:"modified",doc:E}})}),p}))}function I0(r,e,t){return ty(r,t).pipe((0,be.R)((s,c)=>function b0(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function C0(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return h_(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return h_(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return h_(r,e.oldIndex,1)}return r}(r,s))}),r}(s,c.map(p=>p.payload),e),[]),(0,Ne.x)(),(0,he.U)(s=>s.map(c=>({type:c.type,payload:c}))))}function h_(r,e,t,...s){const c=r.slice();return c.splice(e,t,...s),c}function av(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class lv{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=ty(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,he.U)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,fe.O)(void 0),De(),(0,je.h)(([s,c])=>c.length>0||!s),(0,he.U)(([s,c])=>c),Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,be.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=av(e);return I0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return d_(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Ae.iC)}get(e){return(0,ie.D)(this.query.get(e)).pipe(Ae.iC)}add(e){return this.ref.add(e)}doc(e){return new cv(this.ref.doc(e),this.afs)}}class cv{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:c,query:p}=hv(s,t);return new lv(c,p,this.afs)}snapshotChanges(){return function ov(r,e){return w0(r,e).pipe((0,fe.O)(void 0),De(),(0,he.U)(([t,s])=>s.exists?null!=t&&t.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,he.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ie.D)(this.ref.get(e)).pipe(Ae.iC)}}class D0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ty(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,je.h)(t=>t.length>0),Ae.iC):ty(this.query,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,be.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=av(e);return I0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return d_(this.query,this.afs.schedulers.outsideAngular).pipe((0,he.U)(s=>s.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),Ae.iC)}get(e){return(0,ie.D)(this.query.get(e)).pipe(Ae.iC)}}const uv=new m.OlP("angularfire2.enableFirestorePersistence"),dv=new m.OlP("angularfire2.firestore.persistenceSettings"),T0=new m.OlP("angularfire2.firestore.settings"),S0=new m.OlP("angularfire2.firestore.use-emulator");function hv(r,e=(t=>t)){return{query:e(r),ref:r}}let Sp=(()=>{class r{constructor(t,s,c,p,E,F,K,te,me,it,Ft,rn,Sn,kn,_r,Ci,rs){this.schedulers=K;const Mi=(0,Ue.on)(t,F,s),Fa=me;it&&(0,wh.nw)(Mi,F,Ft,Sn,kn,_r,rn,Ci),[this.firestore,this.persistenceEnabled$]=(0,Ue.cc)(`${Mi.name}.firestore`,"AngularFirestore",Mi.name,()=>{const so=F.runOutsideAngular(()=>Mi.firestore());if(p&&so.settings(p),Fa&&so.useEmulator(...Fa),c&&!(0,Xe.PM)(E)){const Us=()=>{try{return(0,ie.D)(so.enablePersistence(te||void 0).then(()=>!0,()=>!1))}catch(La){return typeof console<"u"&&console.warn(La),(0,Pe.of)(!1)}};return[so,F.runOutsideAngular(Us)]}return[so,(0,Pe.of)(!1)]},[p,Fa,c])}collection(t,s){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:p,query:E}=hv(c,s),F=this.schedulers.ngZone.run(()=>p);return new lv(F,E,this)}collectionGroup(t,s){const c=s||(E=>E),p=this.firestore.collectionGroup(t);return new D0(c(p),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>s);return new cv(c,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(m.LFG(Ue.Dh),m.LFG(Ue.xv,8),m.LFG(uv,8),m.LFG(T0,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ae.HU),m.LFG(dv,8),m.LFG(S0,8),m.LFG(wh.zQ,8),m.LFG(wh.Qv,8),m.LFG(wh.L6,8),m.LFG(wh._Q,8),m.LFG(wh.rT,8),m.LFG(wh.lh,8),m.LFG(wh.f7,8),m.LFG(v0.nm,8))},r.\u0275prov=m.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),fv=(()=>{class r{constructor(){E0.Z.registerVersion("angularfire",Ae.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:uv,useValue:!0},{provide:dv,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=m.oAB({type:r}),r.\u0275inj=m.cJS({providers:[Sp]}),r})()},8445:(cn,at,$)=>{"use strict";$.d(at,{Q1:()=>$n,TE:()=>Ii});var m=$(9751),g=$(9646),Y=$(8996),ie=$(8372),Pe=$(4004),Ae=$(3900),fe=$(4976),de=$(4650),Fe=$(2011),De=$(3942),he=$(5861),be=$(6881),Ne=$(2090),je=$(4859);const Ue="firebasestorage.googleapis.com",Xe="storageBucket";class et extends Ne.ZR{constructor(I,D,V=0){super(Re(I),`Firebase Storage: ${D} (${Re(I)})`),this.status_=V,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,et.prototype)}get status(){return this.status_}set status(I){this.status_=I}_codeEquals(I){return Re(I)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(I){this.customData.serverResponse=I,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Le=(()=>{return(C=Le||(Le={})).UNKNOWN="unknown",C.OBJECT_NOT_FOUND="object-not-found",C.BUCKET_NOT_FOUND="bucket-not-found",C.PROJECT_NOT_FOUND="project-not-found",C.QUOTA_EXCEEDED="quota-exceeded",C.UNAUTHENTICATED="unauthenticated",C.UNAUTHORIZED="unauthorized",C.UNAUTHORIZED_APP="unauthorized-app",C.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",C.INVALID_CHECKSUM="invalid-checksum",C.CANCELED="canceled",C.INVALID_EVENT_NAME="invalid-event-name",C.INVALID_URL="invalid-url",C.INVALID_DEFAULT_BUCKET="invalid-default-bucket",C.NO_DEFAULT_BUCKET="no-default-bucket",C.CANNOT_SLICE_BLOB="cannot-slice-blob",C.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",C.NO_DOWNLOAD_URL="no-download-url",C.INVALID_ARGUMENT="invalid-argument",C.INVALID_ARGUMENT_COUNT="invalid-argument-count",C.APP_DELETED="app-deleted",C.INVALID_ROOT_OPERATION="invalid-root-operation",C.INVALID_FORMAT="invalid-format",C.INTERNAL_ERROR="internal-error",C.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Le;var C})();function Re(C){return"storage/"+C}function Je(){return new et(Le.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function lt(){return new et(Le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xt(){return new et(Le.CANCELED,"User canceled the upload/download.")}function vt(){return new et(Le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Q(C){return new et(Le.INVALID_ARGUMENT,C)}function _t(){return new et(Le.APP_DELETED,"The Firebase app was deleted.")}function Dt(C){return new et(Le.INVALID_ROOT_OPERATION,"The operation '"+C+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zt(C,I){return new et(Le.INVALID_FORMAT,"String does not match format '"+C+"': "+I)}function un(C){throw new et(Le.INTERNAL_ERROR,"Internal error: "+C)}class Et{constructor(I,D){this.bucket=I,this.path_=D}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const I=encodeURIComponent;return"/b/"+I(this.bucket)+"/o/"+I(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(I,D){let V;try{V=Et.makeFromUrl(I,D)}catch{return new Et(I,"")}if(""===V.path)return V;throw function Be(C){return new et(Le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+C+"'.")}(I)}static makeFromUrl(I,D){let V=null;const _e="([A-Za-z0-9.\\-_]+)",pt=new RegExp("^gs://"+_e+"(/(.*))?$","i");function Dr(bi){bi.path_=decodeURIComponent(bi.path)}const ti=D.replace(/[.]/g,"\\."),Xi=[{regex:pt,indices:{bucket:1,path:3},postModify:function ct(bi){"/"===bi.path.charAt(bi.path.length-1)&&(bi.path_=bi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${ti}/v[A-Za-z0-9_]+/b/${_e}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Dr},{regex:new RegExp(`^https?://${D===Ue?"(?:storage.googleapis.com|storage.cloud.google.com)":D}/${_e}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Dr}];for(let bi=0;bi<Xi.length;bi++){const ss=Xi[bi],cs=ss.regex.exec(I);if(cs){let Rs=cs[ss.indices.path];Rs||(Rs=""),V=new Et(cs[ss.indices.bucket],Rs),ss.postModify(V);break}}if(null==V)throw function Pt(C){return new et(Le.INVALID_URL,"Invalid URL '"+C+"'.")}(I);return V}}class ut{constructor(I){this.promise_=Promise.reject(I)}getPromise(){return this.promise_}cancel(I=!1){}}function wn(C){return"string"==typeof C||C instanceof String}function tn(C){return ir()&&C instanceof Blob}function ir(){return typeof Blob<"u"&&!(0,Ne.UG)()}function Qt(C,I,D,V){if(V<I)throw Q(`Invalid value for '${C}'. Expected ${I} or greater.`);if(V>D)throw Q(`Invalid value for '${C}'. Expected ${D} or less.`)}function jn(C,I,D){let V=I;return null==D&&(V=`https://${I}`),`${D}://${V}/v0${C}`}function fn(C){const I=encodeURIComponent;let D="?";for(const V in C)C.hasOwnProperty(V)&&(D=D+(I(V)+"=")+I(C[V])+"&");return D=D.slice(0,-1),D}var xn=(()=>{return(C=xn||(xn={}))[C.NO_ERROR=0]="NO_ERROR",C[C.NETWORK_ERROR=1]="NETWORK_ERROR",C[C.ABORT=2]="ABORT",xn;var C})();function Di(C,I){const D=C>=500&&C<600,_e=-1!==[408,429].indexOf(C),ct=-1!==I.indexOf(C);return D||_e||ct}class Cr{constructor(I,D,V,_e,ct,Gt,pt,St,Dr,Xr,ti,$r=!0){this.url_=I,this.method_=D,this.headers_=V,this.body_=_e,this.successCodes_=ct,this.additionalRetryCodes_=Gt,this.callback_=pt,this.errorCallback_=St,this.timeout_=Dr,this.progressCallback_=Xr,this.connectionFactory_=ti,this.retry=$r,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Bi,ki)=>{this.resolve_=Bi,this.reject_=ki,this.start_()})}start_(){const D=(V,_e)=>{const ct=this.resolve_,Gt=this.reject_,pt=_e.connection;if(_e.wasSuccessCode)try{const St=this.callback_(pt,pt.getResponse());!function Cn(C){return void 0!==C}(St)?ct():ct(St)}catch(St){Gt(St)}else if(null!==pt){const St=Je();St.serverResponse=pt.getErrorText(),Gt(this.errorCallback_?this.errorCallback_(pt,St):St)}else Gt(_e.canceled?this.appDelete_?_t():xt():lt())};this.canceled_?D(0,new Hr(!1,null,!0)):this.backoffId_=function Ot(C,I,D){let V=1,_e=null,ct=null,Gt=!1,pt=0;function St(){return 2===pt}let Dr=!1;function Xr(...es){Dr||(Dr=!0,I.apply(null,es))}function ti(es){_e=setTimeout(()=>{_e=null,C(Bi,St())},es)}function $r(){ct&&clearTimeout(ct)}function Bi(es,...Hs){if(Dr)return void $r();if(es)return $r(),void Xr.call(null,es,...Hs);if(St()||Gt)return $r(),void Xr.call(null,es,...Hs);let Xi;V<64&&(V*=2),1===pt?(pt=2,Xi=0):Xi=1e3*(V+Math.random()),ti(Xi)}let ki=!1;function Ps(es){ki||(ki=!0,$r(),!Dr&&(null!==_e?(es||(pt=2),clearTimeout(_e),ti(0)):es||(pt=1)))}return ti(0),ct=setTimeout(()=>{Gt=!0,Ps(!0)},D),Ps}((V,_e)=>{if(_e)return void V(!1,new Hr(!1,null,!0));const ct=this.connectionFactory_();this.pendingConnection_=ct;const Gt=pt=>{null!==this.progressCallback_&&this.progressCallback_(pt.loaded,pt.lengthComputable?pt.total:-1)};null!==this.progressCallback_&&ct.addUploadProgressListener(Gt),ct.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&ct.removeUploadProgressListener(Gt),this.pendingConnection_=null;const pt=ct.getErrorCode()===xn.NO_ERROR,St=ct.getStatus();if(!pt||Di(St,this.additionalRetryCodes_)&&this.retry){const Xr=ct.getErrorCode()===xn.ABORT;return void V(!1,new Hr(!1,null,Xr))}const Dr=-1!==this.successCodes_.indexOf(St);V(!0,new Hr(Dr,ct))})},D,this.timeout_)}getPromise(){return this.promise_}cancel(I){this.canceled_=!0,this.appDelete_=I||!1,null!==this.backoffId_&&function sn(C){C(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Hr{constructor(I,D,V){this.wasSuccessCode=I,this.connection=D,this.canceled=!!V}}function oi(...C){const I=function vr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==I){const D=new I;for(let V=0;V<C.length;V++)D.append(C[V]);return D.getBlob()}if(ir())return new Blob(C);throw new et(Le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const pr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ii{constructor(I,D){this.data=I,this.contentType=D||null}}function Gn(C,I){switch(C){case pr.RAW:return new ii(vi(I));case pr.BASE64:case pr.BASE64URL:return new ii(Pi(C,I));case pr.DATA_URL:return new ii(function ai(C){const I=new Xn(C);return I.base64?Pi(pr.BASE64,I.rest):function rr(C){let I;try{I=decodeURIComponent(C)}catch{throw zt(pr.DATA_URL,"Malformed data URL.")}return vi(I)}(I.rest)}(I),function ei(C){return new Xn(C).contentType}(I))}throw Je()}function vi(C){const I=[];for(let D=0;D<C.length;D++){let V=C.charCodeAt(D);V<=127?I.push(V):V<=2047?I.push(192|V>>6,128|63&V):55296==(64512&V)?D<C.length-1&&56320==(64512&C.charCodeAt(D+1))?(V=65536|(1023&V)<<10|1023&C.charCodeAt(++D),I.push(240|V>>18,128|V>>12&63,128|V>>6&63,128|63&V)):I.push(239,191,189):56320==(64512&V)?I.push(239,191,189):I.push(224|V>>12,128|V>>6&63,128|63&V)}return new Uint8Array(I)}function Pi(C,I){switch(C){case pr.BASE64:{const _e=-1!==I.indexOf("-"),ct=-1!==I.indexOf("_");if(_e||ct)throw zt(C,"Invalid character '"+(_e?"-":"_")+"' found: is it base64url encoded?");break}case pr.BASE64URL:{const _e=-1!==I.indexOf("+"),ct=-1!==I.indexOf("/");if(_e||ct)throw zt(C,"Invalid character '"+(_e?"+":"/")+"' found: is it base64 encoded?");I=I.replace(/-/g,"+").replace(/_/g,"/");break}}let D;try{D=function _i(C){if(typeof atob>"u")throw function We(C){return new et(Le.UNSUPPORTED_ENVIRONMENT,`${C} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(C)}(I)}catch(_e){throw _e.message.includes("polyfill")?_e:zt(C,"Invalid character found")}const V=new Uint8Array(D.length);for(let _e=0;_e<D.length;_e++)V[_e]=D.charCodeAt(_e);return V}class Xn{constructor(I){this.base64=!1,this.contentType=null;const D=I.match(/^data:([^,]+)?,/);if(null===D)throw zt(pr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const V=D[1]||null;null!=V&&(this.base64=function li(C,I){return C.length>=I.length&&C.substring(C.length-I.length)===I}(V,";base64"),this.contentType=this.base64?V.substring(0,V.length-7):V),this.rest=I.substring(I.indexOf(",")+1)}}class Nr{constructor(I,D){let V=0,_e="";tn(I)?(this.data_=I,V=I.size,_e=I.type):I instanceof ArrayBuffer?(D?this.data_=new Uint8Array(I):(this.data_=new Uint8Array(I.byteLength),this.data_.set(new Uint8Array(I))),V=this.data_.length):I instanceof Uint8Array&&(D?this.data_=I:(this.data_=new Uint8Array(I.length),this.data_.set(I)),V=I.length),this.size_=V,this.type_=_e}size(){return this.size_}type(){return this.type_}slice(I,D){if(tn(this.data_)){const _e=function mr(C,I,D){return C.webkitSlice?C.webkitSlice(I,D):C.mozSlice?C.mozSlice(I,D):C.slice?C.slice(I,D):null}(this.data_,I,D);return null===_e?null:new Nr(_e)}{const V=new Uint8Array(this.data_.buffer,I,D-I);return new Nr(V,!0)}}static getBlob(...I){if(ir()){const D=I.map(V=>V instanceof Nr?V.data_:V);return new Nr(oi.apply(null,D))}{const D=I.map(Gt=>wn(Gt)?Gn(pr.RAW,Gt).data:Gt.data_);let V=0;D.forEach(Gt=>{V+=Gt.byteLength});const _e=new Uint8Array(V);let ct=0;return D.forEach(Gt=>{for(let pt=0;pt<Gt.length;pt++)_e[ct++]=Gt[pt]}),new Nr(_e,!0)}}uploadData(){return this.data_}}function si(C){let I;try{I=JSON.parse(C)}catch{return null}return function hn(C){return"object"==typeof C&&!Array.isArray(C)}(I)?I:null}function Qe(C){const I=C.lastIndexOf("/",C.length-2);return-1===I?C:C.slice(I+1)}function He(C,I){return I}class ce{constructor(I,D,V,_e){this.server=I,this.local=D||I,this.writable=!!V,this.xform=_e||He}}let Ee=null;function ot(){if(Ee)return Ee;const C=[];C.push(new ce("bucket")),C.push(new ce("generation")),C.push(new ce("metageneration")),C.push(new ce("name","fullPath",!0));const D=new ce("name");D.xform=function I(ct,Gt){return function ue(C){return!wn(C)||C.length<2?C:Qe(C)}(Gt)},C.push(D);const _e=new ce("size");return _e.xform=function V(ct,Gt){return void 0!==Gt?Number(Gt):Gt},C.push(_e),C.push(new ce("timeCreated")),C.push(new ce("updated")),C.push(new ce("md5Hash",null,!0)),C.push(new ce("cacheControl",null,!0)),C.push(new ce("contentDisposition",null,!0)),C.push(new ce("contentEncoding",null,!0)),C.push(new ce("contentLanguage",null,!0)),C.push(new ce("contentType",null,!0)),C.push(new ce("metadata","customMetadata",!0)),Ee=C,Ee}function we(C,I,D){const V=si(I);return null===V?null:function Ve(C,I,D){const V={type:"file"},_e=D.length;for(let ct=0;ct<_e;ct++){const Gt=D[ct];V[Gt.local]=Gt.xform(V,I[Gt.server])}return function Oe(C,I){Object.defineProperty(C,"ref",{get:function D(){const ct=new Et(C.bucket,C.fullPath);return I._makeStorageReference(ct)}})}(V,C),V}(C,V,D)}function Rt(C,I){const D={},V=I.length;for(let _e=0;_e<V;_e++){const ct=I[_e];ct.writable&&(D[ct.server]=C[ct.local])}return JSON.stringify(D)}const Yt="prefixes",Dn="items";class kr{constructor(I,D,V,_e){this.url=I,this.method=D,this.handler=V,this.timeout=_e,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function kt(C){if(!C)throw Je()}function Mt(C,I){return function D(V,_e){const ct=we(C,_e,I);return kt(null!==ct),ct}}function Kn(C){return function I(D,V){let _e;return _e=401===D.getStatus()?D.getErrorText().includes("Firebase App Check token is invalid")?function It(){return new et(Le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function ve(){return new et(Le.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===D.getStatus()?function Ye(C){return new et(Le.QUOTA_EXCEEDED,"Quota for bucket '"+C+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(C.bucket):403===D.getStatus()?function ze(C){return new et(Le.UNAUTHORIZED,"User does not have permission to access '"+C+"'.")}(C.path):V,_e.status=D.getStatus(),_e.serverResponse=V.serverResponse,_e}}function cr(C){const I=Kn(C);return function D(V,_e){let ct=I(V,_e);return 404===V.getStatus()&&(ct=function mt(C){return new et(Le.OBJECT_NOT_FOUND,"Object '"+C+"' does not exist.")}(C.path)),ct.serverResponse=_e.serverResponse,ct}}function Mn(C,I,D){const _e=jn(I.fullServerUrl(),C.host,C._protocol),Gt=C.maxOperationRetryTime,pt=new kr(_e,"GET",Mt(C,D),Gt);return pt.errorHandler=cr(I),pt}function Lr(C,I,D,V,_e){const ct={};ct.prefix=I.isRoot?"":I.path+"/",D&&D.length>0&&(ct.delimiter=D),V&&(ct.pageToken=V),_e&&(ct.maxResults=_e);const pt=jn(I.bucketOnlyServerUrl(),C.host,C._protocol),Dr=C.maxOperationRetryTime,Xr=new kr(pt,"GET",function nn(C,I){return function D(V,_e){const ct=function Jn(C,I,D){const V=si(D);return null===V?null:function _n(C,I,D){const V={prefixes:[],items:[],nextPageToken:D.nextPageToken};if(D[Yt])for(const _e of D[Yt]){const ct=_e.replace(/\/$/,""),Gt=C._makeStorageReference(new Et(I,ct));V.prefixes.push(Gt)}if(D[Dn])for(const _e of D[Dn]){const ct=C._makeStorageReference(new Et(I,_e.name));V.items.push(ct)}return V}(C,I,V)}(C,I,_e);return kt(null!==ct),ct}}(C,I.bucket),Dr);return Xr.urlParams=ct,Xr.errorHandler=Kn(I),Xr}function ps(C,I,D){const V=Object.assign({},D);return V.fullPath=C.path,V.size=I.size(),V.contentType||(V.contentType=function fs(C,I){return C&&C.contentType||I&&I.type()||"application/octet-stream"}(null,I)),V}class vn{constructor(I,D,V,_e){this.current=I,this.total=D,this.finalized=!!V,this.metadata=_e||null}}function hr(C,I){let D=null;try{D=C.getResponseHeader("X-Goog-Upload-Status")}catch{kt(!1)}return kt(!!D&&-1!==(I||["active"]).indexOf(D)),D}const Wi={STATE_CHANGED:"state_changed"},wr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ae(C){switch(C){case"running":case"pausing":case"canceling":return wr.RUNNING;case"paused":return wr.PAUSED;case"success":return wr.SUCCESS;case"canceled":return wr.CANCELED;default:return wr.ERROR}}class xe{constructor(I,D,V){if(function zn(C){return"function"==typeof C}(I)||null!=D||null!=V)this.next=I,this.error=null!=D?D:void 0,this.complete=null!=V?V:void 0;else{const ct=I;this.next=ct.next,this.error=ct.error,this.complete=ct.complete}}}function Ze(C){return(...I)=>{Promise.resolve().then(()=>C(...I))}}let Te=null;class tt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xn.NO_ERROR,this.sendPromise_=new Promise(I=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xn.ABORT,I()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xn.NETWORK_ERROR,I()}),this.xhr_.addEventListener("load",()=>{I()})})}send(I,D,V,_e){if(this.sent_)throw un("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(D,I,!0),void 0!==_e)for(const ct in _e)_e.hasOwnProperty(ct)&&this.xhr_.setRequestHeader(ct,_e[ct].toString());return void 0!==V?this.xhr_.send(V):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw un("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw un("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw un("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw un("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(I){return this.xhr_.getResponseHeader(I)}addUploadProgressListener(I){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",I)}removeUploadProgressListener(I){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",I)}}class nt extends tt{initXhr(){this.xhr_.responseType="text"}}function Nt(){return Te?Te():new nt}class qn{constructor(I,D,V=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=I,this._blob=D,this._metadata=V,this._mappings=ot(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=_e=>{if(this._request=void 0,this._chunkMultiplier=1,_e._codeEquals(Le.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const ct=this.isExponentialBackoffExpired();if(Di(_e.status,[])){if(!ct)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();_e=lt()}this._error=_e,this._transition("error")}},this._metadataErrorHandler=_e=>{this._request=void 0,_e._codeEquals(Le.CANCELED)?this.completeTransitions_():(this._error=_e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((_e,ct)=>{this._resolve=_e,this._reject=ct,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const I=this._transferred;return D=>this._updateProgress(I+D)}_shouldDoResumable(I){return I.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(I){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([D,V])=>{switch(this._state){case"running":I(D,V);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((I,D)=>{const V=function gi(C,I,D,V,_e){const ct=I.bucketOnlyServerUrl(),Gt=ps(I,V,_e),pt={name:Gt.fullPath},St=jn(ct,C.host,C._protocol),Xr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${V.size()}`,"X-Goog-Upload-Header-Content-Type":Gt.contentType,"Content-Type":"application/json; charset=utf-8"},ti=Rt(Gt,D),ki=new kr(St,"POST",function Bi(Ps){let es;hr(Ps);try{es=Ps.getResponseHeader("X-Goog-Upload-URL")}catch{kt(!1)}return kt(wn(es)),es},C.maxUploadRetryTime);return ki.urlParams=pt,ki.headers=Xr,ki.body=ti,ki.errorHandler=Kn(I),ki}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),_e=this._ref.storage._makeRequest(V,Nt,I,D);this._request=_e,_e.getPromise().then(ct=>{this._request=void 0,this._uploadUrl=ct,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const I=this._uploadUrl;this._resolveToken((D,V)=>{const _e=function Fr(C,I,D,V){const St=new kr(D,"POST",function ct(Dr){const Xr=hr(Dr,["active","final"]);let ti=null;try{ti=Dr.getResponseHeader("X-Goog-Upload-Size-Received")}catch{kt(!1)}ti||kt(!1);const $r=Number(ti);return kt(!isNaN($r)),new vn($r,V.size(),"final"===Xr)},C.maxUploadRetryTime);return St.headers={"X-Goog-Upload-Command":"query"},St.errorHandler=Kn(I),St}(this._ref.storage,this._ref._location,I,this._blob),ct=this._ref.storage._makeRequest(_e,Nt,D,V);this._request=ct,ct.getPromise().then(Gt=>{this._request=void 0,this._updateProgress(Gt.current),this._needToFetchStatus=!1,Gt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const I=262144*this._chunkMultiplier,D=new vn(this._transferred,this._blob.size()),V=this._uploadUrl;this._resolveToken((_e,ct)=>{let Gt;try{Gt=function mi(C,I,D,V,_e,ct,Gt,pt){const St=new vn(0,0);if(Gt?(St.current=Gt.current,St.total=Gt.total):(St.current=0,St.total=V.size()),V.size()!==St.total)throw function Ke(){return new et(Le.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Dr=St.total-St.current;let Xr=Dr;_e>0&&(Xr=Math.min(Xr,_e));const ti=St.current;let Bi="";Bi=0===Xr?"finalize":Dr===Xr?"upload, finalize":"upload";const ki={"X-Goog-Upload-Command":Bi,"X-Goog-Upload-Offset":`${St.current}`},Ps=V.slice(ti,ti+Xr);if(null===Ps)throw vt();const Xi=new kr(D,"POST",function es(bi,ss){const cs=hr(bi,["active","final"]),to=St.current+Xr,Rs=V.size();let ma;return ma="final"===cs?Mt(I,ct)(bi,ss):null,new vn(to,Rs,"final"===cs,ma)},I.maxUploadRetryTime);return Xi.headers=ki,Xi.body=Ps.uploadData(),Xi.progressCallback=pt||null,Xi.errorHandler=Kn(C),Xi}(this._ref._location,this._ref.storage,V,this._blob,I,this._mappings,D,this._makeProgressCallback())}catch(St){return this._error=St,void this._transition("error")}const pt=this._ref.storage._makeRequest(Gt,Nt,_e,ct,!1);this._request=pt,pt.getPromise().then(St=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(St.current),St.finalized?(this._metadata=St.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((I,D)=>{const V=Mn(this._ref.storage,this._ref._location,this._mappings),_e=this._ref.storage._makeRequest(V,Nt,I,D);this._request=_e,_e.getPromise().then(ct=>{this._request=void 0,this._metadata=ct,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((I,D)=>{const V=function Oi(C,I,D,V,_e){const ct=I.bucketOnlyServerUrl(),Gt={"X-Goog-Upload-Protocol":"multipart"},St=function pt(){let Xi="";for(let bi=0;bi<2;bi++)Xi+=Math.random().toString().slice(2);return Xi}();Gt["Content-Type"]="multipart/related; boundary="+St;const Dr=ps(I,V,_e),Xr=Rt(Dr,D),Bi=Nr.getBlob("--"+St+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Xr+"\r\n--"+St+"\r\nContent-Type: "+Dr.contentType+"\r\n\r\n",V,"\r\n--"+St+"--");if(null===Bi)throw vt();const ki={name:Dr.fullPath},Ps=jn(ct,C.host,C._protocol),Hs=C.maxUploadRetryTime,Hi=new kr(Ps,"POST",Mt(C,D),Hs);return Hi.urlParams=ki,Hi.headers=Gt,Hi.body=Bi.uploadData(),Hi.errorHandler=Kn(I),Hi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),_e=this._ref.storage._makeRequest(V,Nt,I,D);this._request=_e,_e.getPromise().then(ct=>{this._request=void 0,this._metadata=ct,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(I){const D=this._transferred;this._transferred=I,this._transferred!==D&&this._notifyObservers()}_transition(I){if(this._state!==I)switch(I){case"canceling":case"pausing":this._state=I,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const D="paused"===this._state;this._state=I,D&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=I,this._notifyObservers();break;case"canceled":this._error=xt(),this._state=I,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const I=ae(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:I,metadata:this._metadata,task:this,ref:this._ref}}on(I,D,V,_e){const ct=new xe(D||void 0,V||void 0,_e||void 0);return this._addObserver(ct),()=>{this._removeObserver(ct)}}then(I,D){return this._promise.then(I,D)}catch(I){return this.then(null,I)}_addObserver(I){this._observers.push(I),this._notifyObserver(I)}_removeObserver(I){const D=this._observers.indexOf(I);-1!==D&&this._observers.splice(D,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(D=>{this._notifyObserver(D)})}_finishPromise(){if(void 0!==this._resolve){let I=!0;switch(ae(this._state)){case wr.SUCCESS:Ze(this._resolve.bind(null,this.snapshot))();break;case wr.CANCELED:case wr.ERROR:Ze(this._reject.bind(null,this._error))();break;default:I=!1}I&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(I){switch(ae(this._state)){case wr.RUNNING:case wr.PAUSED:I.next&&Ze(I.next.bind(I,this.snapshot))();break;case wr.SUCCESS:I.complete&&Ze(I.complete.bind(I))();break;default:I.error&&Ze(I.error.bind(I,this._error))()}}resume(){const I="paused"===this._state||"pausing"===this._state;return I&&this._transition("running"),I}pause(){const I="running"===this._state;return I&&this._transition("pausing"),I}cancel(){const I="running"===this._state||"pausing"===this._state;return I&&this._transition("canceling"),I}}class Ln{constructor(I,D){this._service=I,this._location=D instanceof Et?D:Et.makeFromUrl(D,I.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(I,D){return new Ln(I,D)}get root(){const I=new Et(this._location.bucket,"");return this._newRef(this._service,I)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qe(this._location.path)}get storage(){return this._service}get parent(){const I=function Zr(C){if(0===C.length)return null;const I=C.lastIndexOf("/");return-1===I?"":C.slice(0,I)}(this._location.path);if(null===I)return null;const D=new Et(this._location.bucket,I);return new Ln(this._service,D)}_throwIfRoot(I){if(""===this._location.path)throw Dt(I)}}function qt(C,I,D){return en.apply(this,arguments)}function en(){return(en=(0,he.Z)(function*(C,I,D){const _e=yield or(C,{pageToken:D});I.prefixes.push(..._e.prefixes),I.items.push(..._e.items),null!=_e.nextPageToken&&(yield qt(C,I,_e.nextPageToken))})).apply(this,arguments)}function or(C,I){null!=I&&"number"==typeof I.maxResults&&Qt("options.maxResults",1,1e3,I.maxResults);const D=I||{},V=Lr(C.storage,C._location,"/",D.pageToken,D.maxResults);return C.storage.makeRequestWithTokens(V,Nt)}function Qr(C){C._throwIfRoot("getDownloadURL");const I=function lr(C,I,D){const _e=jn(I.fullServerUrl(),C.host,C._protocol),Gt=C.maxOperationRetryTime,pt=new kr(_e,"GET",function Pn(C,I){return function D(V,_e){const ct=we(C,_e,I);return kt(null!==ct),function rt(C,I,D,V){const _e=si(I);if(null===_e||!wn(_e.downloadTokens))return null;const ct=_e.downloadTokens;if(0===ct.length)return null;const Gt=encodeURIComponent;return ct.split(",").map(Dr=>{const ti=C.fullPath;return jn("/b/"+Gt(C.bucket)+"/o/"+Gt(ti),D,V)+fn({alt:"media",token:Dr})})[0]}(ct,_e,C.host,C._protocol)}}(C,D),Gt);return pt.errorHandler=cr(I),pt}(C.storage,C._location,ot());return C.storage.makeRequestWithTokens(I,Nt).then(D=>{if(null===D)throw function qe(){return new et(Le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return D})}function ks(C,I){const D=function Kr(C,I){const D=I.split("/").filter(V=>V.length>0).join("/");return 0===C.length?D:C+"/"+D}(C._location.path,I),V=new Et(C._location.bucket,D);return new Ln(C.storage,V)}function Gr(C,I){if(C instanceof Xs){const D=C;if(null==D._bucket)throw function At(){return new et(Le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Xe+"' property when initializing the app?")}();const V=new Ln(D,D._bucket);return null!=I?Gr(V,I):V}return void 0!==I?ks(C,I):C}function Br(C,I){if(I&&function qr(C){return/^[A-Za-z]+:\/\//.test(C)}(I)){if(C instanceof Xs)return function zr(C,I){return new Ln(C,I)}(C,I);throw Q("To use ref(service, url), the first argument must be a Storage instance.")}return Gr(C,I)}function Ki(C,I){const D=null==I?void 0:I[Xe];return null==D?null:Et.makeFromBucketSpec(D,C)}class Xs{constructor(I,D,V,_e,ct){this.app=I,this._authProvider=D,this._appCheckProvider=V,this._url=_e,this._firebaseVersion=ct,this._bucket=null,this._host=Ue,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=_e?Et.makeFromBucketSpec(_e,this._host):Ki(this._host,this.app.options)}get host(){return this._host}set host(I){this._host=I,this._bucket=null!=this._url?Et.makeFromBucketSpec(this._url,I):Ki(I,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(I){Qt("time",0,Number.POSITIVE_INFINITY,I),this._maxUploadRetryTime=I}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(I){Qt("time",0,Number.POSITIVE_INFINITY,I),this._maxOperationRetryTime=I}_getAuthToken(){var I=this;return(0,he.Z)(function*(){if(I._overrideAuthToken)return I._overrideAuthToken;const D=I._authProvider.getImmediate({optional:!0});if(D){const V=yield D.getToken();if(null!==V)return V.accessToken}return null})()}_getAppCheckToken(){var I=this;return(0,he.Z)(function*(){const D=I._appCheckProvider.getImmediate({optional:!0});return D?(yield D.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(I=>I.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(I){return new Ln(this,I)}_makeRequest(I,D,V,_e,ct=!0){if(this._deleted)return new ut(_t());{const Gt=function on(C,I,D,V,_e,ct,Gt=!0){const pt=fn(C.urlParams),St=C.url+pt,Dr=Object.assign({},C.headers);return function Qn(C,I){I&&(C["X-Firebase-GMPID"]=I)}(Dr,I),function Ur(C,I){null!==I&&I.length>0&&(C.Authorization="Firebase "+I)}(Dr,D),function Tr(C,I){C["X-Firebase-Storage-Version"]="webjs/"+(null!=I?I:"AppManager")}(Dr,ct),function bn(C,I){null!==I&&(C["X-Firebase-AppCheck"]=I)}(Dr,V),new Cr(St,C.method,Dr,C.body,C.successCodes,C.additionalRetryCodes,C.handler,C.errorHandler,C.timeout,C.progressCallback,_e,Gt)}(I,this._appId,V,_e,D,this._firebaseVersion,ct);return this._requests.add(Gt),Gt.getPromise().then(()=>this._requests.delete(Gt),()=>this._requests.delete(Gt)),Gt}}makeRequestWithTokens(I,D){var V=this;return(0,he.Z)(function*(){const[_e,ct]=yield Promise.all([V._getAuthToken(),V._getAppCheckToken()]);return V._makeRequest(I,D,_e,ct).getPromise()})()}}const _o="@firebase/storage";function Qi(C,I){return Br(C=(0,Ne.m9)(C),I)}function Qa(C,{instanceIdentifier:I}){const D=C.getProvider("app").getImmediate(),V=C.getProvider("auth-internal"),_e=C.getProvider("app-check-internal");return new Xs(D,V,_e,I,be.SDK_VERSION)}!function No(){(0,be._registerComponent)(new je.wA("storage",Qa,"PUBLIC").setMultipleInstances(!0)),(0,be.registerVersion)(_o,"0.11.2",""),(0,be.registerVersion)(_o,"0.11.2","esm2017")}();class ko{constructor(I,D,V){this._delegate=I,this.task=D,this.ref=V}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class eo{constructor(I,D){this._delegate=I,this._ref=D,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ko(this._delegate.snapshot,this,this._ref)}then(I,D){return this._delegate.then(V=>{if(I)return I(new ko(V,this,this._ref))},D)}on(I,D,V,_e){let ct;return D&&(ct="function"==typeof D?Gt=>D(new ko(Gt,this,this._ref)):{next:D.next?Gt=>D.next(new ko(Gt,this,this._ref)):void 0,complete:D.complete||void 0,error:D.error||void 0}),this._delegate.on(I,ct,V||void 0,_e||void 0)}}class Vr{constructor(I,D){this._delegate=I,this._service=D}get prefixes(){return this._delegate.prefixes.map(I=>new gs(I,this._service))}get items(){return this._delegate.items.map(I=>new gs(I,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class gs{constructor(I,D){this._delegate=I,this.storage=D}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(I){const D=function Ss(C,I){return ks(C,I)}(this._delegate,I);return new gs(D,this.storage)}get root(){return new gs(this._delegate.root,this.storage)}get parent(){const I=this._delegate.parent;return null==I?null:new gs(I,this.storage)}put(I,D){return this._throwIfRoot("put"),new eo(function pa(C,I,D){return function ft(C,I,D){return C._throwIfRoot("uploadBytesResumable"),new qn(C,new Nr(I),D)}(C=(0,Ne.m9)(C),I,D)}(this._delegate,I,D),this)}putString(I,D=pr.RAW,V){this._throwIfRoot("putString");const _e=Gn(D,I),ct=Object.assign({},V);return null==ct.contentType&&null!=_e.contentType&&(ct.contentType=_e.contentType),new eo(new qn(this._delegate,new Nr(_e.data,!0),ct),this)}listAll(){return function Ts(C){return function Tt(C){const I={prefixes:[],items:[]};return qt(C,I).then(()=>I)}(C=(0,Ne.m9)(C))}(this._delegate).then(I=>new Vr(I,this.storage))}list(I){return function Ba(C,I){return or(C=(0,Ne.m9)(C),I)}(this._delegate,I||void 0).then(D=>new Vr(D,this.storage))}getMetadata(){return function xs(C){return function Yn(C){C._throwIfRoot("getMetadata");const I=Mn(C.storage,C._location,ot());return C.storage.makeRequestWithTokens(I,Nt)}(C=(0,Ne.m9)(C))}(this._delegate)}updateMetadata(I){return function qi(C,I){return function fr(C,I){C._throwIfRoot("updateMetadata");const D=function ur(C,I,D,V){const ct=jn(I.fullServerUrl(),C.host,C._protocol),pt=Rt(D,V),Dr=C.maxOperationRetryTime,Xr=new kr(ct,"PATCH",Mt(C,V),Dr);return Xr.headers={"Content-Type":"application/json; charset=utf-8"},Xr.body=pt,Xr.errorHandler=cr(I),Xr}(C.storage,C._location,I,ot());return C.storage.makeRequestWithTokens(D,Nt)}(C=(0,Ne.m9)(C),I)}(this._delegate,I)}getDownloadURL(){return function vo(C){return Qr(C=(0,Ne.m9)(C))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function js(C){return function Cs(C){C._throwIfRoot("deleteObject");const I=function Qs(C,I){const V=jn(I.fullServerUrl(),C.host,C._protocol),pt=new kr(V,"DELETE",function Gt(St,Dr){},C.maxOperationRetryTime);return pt.successCodes=[200,204],pt.errorHandler=cr(I),pt}(C.storage,C._location);return C.storage.makeRequestWithTokens(I,Nt)}(C=(0,Ne.m9)(C))}(this._delegate)}_throwIfRoot(I){if(""===this._delegate._location.path)throw Dt(I)}}class As{constructor(I,D){this.app=I,this._delegate=D}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(I){if(wi(I))throw Q("ref() expected a child path but got a URL, use refFromURL instead.");return new gs(Qi(this._delegate,I),this)}refFromURL(I){if(!wi(I))throw Q("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Et.makeFromUrl(I,this._delegate.host)}catch{throw Q("refFromUrl() expected a valid full URL but got an invalid one.")}return new gs(Qi(this._delegate,I),this)}setMaxUploadRetryTime(I){this._delegate.maxUploadRetryTime=I}setMaxOperationRetryTime(I){this._delegate.maxOperationRetryTime=I}useEmulator(I,D,V={}){!function Co(C,I,D,V={}){!function Ni(C,I,D,V={}){C.host=`${I}:${D}`,C._protocol="http";const{mockUserToken:_e}=V;_e&&(C._overrideAuthToken="string"==typeof _e?_e:(0,Ne.Sg)(_e,C.app.options.projectId))}(C,I,D,V)}(this._delegate,I,D,V)}}function wi(C){return/^[A-Za-z]+:\/\//.test(C)}function _s(C,{instanceIdentifier:I}){const D=C.getProvider("app-compat").getImmediate(),V=C.getProvider("storage").getImmediate({identifier:I});return new As(D,V)}!function ls(C){const I={TaskState:wr,TaskEvent:Wi,StringFormat:pr,Storage:As,Reference:gs};C.INTERNAL.registerComponent(new je.wA("storage-compat",_s,"PUBLIC").setServiceProps(I).setMultipleInstances(!0)),C.registerVersion("@firebase/storage-compat","0.3.2")}(De.Z);var Ms=$(6217),ga=$(9260);function S(C){const I=function oo(C){return new m.y(I=>{const D=Gt=>I.next(Gt);D(C.snapshot);const ct=C.on("state_changed",D);return C.then(Gt=>{D(Gt),I.complete()},Gt=>{D(C.snapshot),(Gt=>{I.error(Gt)})(Gt)}),function(){ct()}}).pipe((0,ie.b)(0))}(C);return{task:C,then:C.then.bind(C),catch:C.catch.bind(C),pause:C.pause.bind(C),cancel:C.cancel.bind(C),resume:C.resume.bind(C),snapshotChanges:()=>I,percentageChanges:()=>I.pipe((0,Pe.U)(D=>D.bytesTransferred/D.totalBytes*100))}}function Z(C){return{getDownloadURL:()=>(0,g.of)(void 0).pipe(fe.fc,(0,Ae.w)(()=>C.getDownloadURL()),fe.iC),getMetadata:()=>(0,g.of)(void 0).pipe(fe.fc,(0,Ae.w)(()=>C.getMetadata()),fe.iC),delete:()=>(0,Y.D)(C.delete()),child:I=>Z(C.child(I)),updateMetadata:I=>(0,Y.D)(C.updateMetadata(I)),put:(I,D)=>S(C.put(I,D)),putString:(I,D,V)=>S(C.putString(I,D,V)),list:I=>(0,Y.D)(C.list(I)),listAll:()=>(0,Y.D)(C.listAll())}}const A=new de.OlP("angularfire2.storageBucket"),q=new de.OlP("angularfire2.storage.maxUploadRetryTime"),Ie=new de.OlP("angularfire2.storage.maxOperationRetryTime"),Xt=new de.OlP("angularfire2.storage.use-emulator");let $n=(()=>{class C{constructor(D,V,_e,ct,Gt,pt,St,Dr,Xr,ti){const $r=(0,Fe.on)(D,Gt,V);this.storage=(0,Fe.cc)(`${$r.name}.storage.${_e}`,"AngularFireStorage",$r.name,()=>{const Bi=Gt.runOutsideAngular(()=>$r.storage(_e||void 0)),ki=Xr;return ki&&Bi.useEmulator(...ki),St&&Bi.setMaxUploadRetryTime(St),Dr&&Bi.setMaxOperationRetryTime(Dr),Bi},[St,Dr])}ref(D){return Z(this.storage.ref(D))}refFromURL(D){return Z(this.storage.refFromURL(D))}upload(D,V,_e){return Z(this.storage.ref(D)).put(V,_e)}}return C.\u0275fac=function(D){return new(D||C)(de.LFG(Fe.Dh),de.LFG(Fe.xv,8),de.LFG(A,8),de.LFG(de.Lbi),de.LFG(de.R0b),de.LFG(fe.HU),de.LFG(q,8),de.LFG(Ie,8),de.LFG(Xt,8),de.LFG(Ms.nm,8))},C.\u0275prov=de.Yz7({token:C,factory:C.\u0275fac,providedIn:"any"}),C})(),Tn=(()=>{class C{}return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=de.oAB({type:C}),C.\u0275inj=de.cJS({}),C})(),Ii=(()=>{class C{constructor(){ga.Z.registerVersion("angularfire",fe.q4.full,"gcs-compat")}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=de.oAB({type:C}),C.\u0275inj=de.cJS({providers:[$n],imports:[Tn]}),C})()},2011:(cn,at,$)=>{"use strict";$.d(at,{Dh:()=>de,GT:()=>Ae,cc:()=>je,hO:()=>Ne,on:()=>De,pX:()=>Pe,xv:()=>Fe});var m=$(4650),g=$(9260),Y=$(4976);cn=$.hmd(cn);const ie=["ngOnDestroy"],Pe=(Se,oe,et,Le={})=>new Proxy(Se,{get:(Re,Je)=>et.runOutsideAngular(()=>{var mt;if(Se[Je])return!(null===(mt=null==Le?void 0:Le.spy)||void 0===mt)&&mt.get&&Le.spy.get(Je,Se[Je]),Se[Je];if(ie.indexOf(Je)>-1)return()=>{};const Ye=oe.toPromise().then(ve=>{const It=ve&&ve[Je];return"function"==typeof It?It.bind(ve):It&&It.then?It.then(ze=>et.run(()=>ze)):et.run(()=>It)});return new Proxy(()=>{},{get:(ve,It)=>Ye[It],apply:(ve,It,ze)=>Ye.then(lt=>{var xt;const Pt=lt&&lt(...ze);return!(null===(xt=null==Le?void 0:Le.spy)||void 0===xt)&&xt.apply&&Le.spy.apply(Je,ze,Pt),Pt})})})}),Ae=(Se,oe)=>{oe.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Le=>{Object.defineProperty(Se.prototype,Le,Object.getOwnPropertyDescriptor(et.prototype||et,Le))})})};class fe{constructor(oe){return oe}}const de=new m.OlP("angularfire2.app.options"),Fe=new m.OlP("angularfire2.app.name");function De(Se,oe,et){const Re="object"==typeof et&&et||{};Re.name=Re.name||"string"==typeof et&&et||"[DEFAULT]";const mt=g.Z.apps.filter(Ye=>Ye&&Ye.name===Re.name)[0]||oe.runOutsideAngular(()=>g.Z.initializeApp(Se,Re));try{JSON.stringify(Se)!==JSON.stringify(mt.options)&&he("error",`${mt.name} Firebase App already initialized with different options${cn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(mt)}const he=(Se,...oe)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Se](...oe)},be={provide:fe,useFactory:De,deps:[de,m.R0b,[new m.FiY,Fe]]};let Ne=(()=>{class Se{constructor(et){g.Z.registerVersion("angularfire",Y.q4.full,"core"),g.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),g.Z.registerVersion("angular",m.q4F.full,et.toString())}static initializeApp(et,Le){return{ngModule:Se,providers:[{provide:de,useValue:et},{provide:Fe,useValue:Le}]}}}return Se.\u0275fac=function(et){return new(et||Se)(m.LFG(m.Lbi))},Se.\u0275mod=m.oAB({type:Se}),Se.\u0275inj=m.cJS({providers:[be]}),Se})();function je(Se,oe,et,Le,Re){const[,Je,mt]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===Se)||[];if(Je)return function Ue(Se,oe){try{return Se.toString()===oe.toString()}catch{return Se===oe}}(Re,mt)||(Me("error",`${oe} was already initialized on the ${et} Firebase App with different settings.${Xe?" You may need to reload as Firebase is not HMR aware.":""}`),Me("warn",{is:Re,was:mt})),Je;{const Ye=Le();return globalThis.\u0275AngularfireInstanceCache.push([Se,Ye,Re]),Ye}}const Xe=!!cn.hot,Me=(Se,...oe)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Se](...oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(cn,at,$)=>{"use strict";$.d(at,{q4:()=>ms,iC:()=>Pa,fc:()=>lc,HU:()=>Yo,vb:()=>hs,JM:()=>Cl});var m=$(4650),g=$(259),Y=$(5861),ie=$(6881),Pe=$(2090),Ae=$(4859),fe=$(1877);const de=(P,j)=>j.some(J=>P instanceof J);let Fe,De;const Ne=new WeakMap,je=new WeakMap,Ue=new WeakMap,Xe=new WeakMap,Me=new WeakMap;let et={get(P,j,J){if(P instanceof IDBTransaction){if("done"===j)return je.get(P);if("objectStoreNames"===j)return P.objectStoreNames||Ue.get(P);if("store"===j)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return mt(P[j])},set:(P,j,J)=>(P[j]=J,!0),has:(P,j)=>P instanceof IDBTransaction&&("done"===j||"store"===j)||j in P};function Je(P){return"function"==typeof P?function Re(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function be(){return De||(De=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...j){return P.apply(Ye(this),j),mt(Ne.get(this))}:function(...j){return mt(P.apply(Ye(this),j))}:function(j,...J){const ke=P.call(Ye(this),j,...J);return Ue.set(ke,j.sort?j.sort():[j]),mt(ke)}}(P):(P instanceof IDBTransaction&&function oe(P){if(je.has(P))return;const j=new Promise((J,ke)=>{const ht=()=>{P.removeEventListener("complete",Ct),P.removeEventListener("error",jt),P.removeEventListener("abort",jt)},Ct=()=>{J(),ht()},jt=()=>{ke(P.error||new DOMException("AbortError","AbortError")),ht()};P.addEventListener("complete",Ct),P.addEventListener("error",jt),P.addEventListener("abort",jt)});je.set(P,j)}(P),de(P,function he(){return Fe||(Fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,et):P)}function mt(P){if(P instanceof IDBRequest)return function Se(P){const j=new Promise((J,ke)=>{const ht=()=>{P.removeEventListener("success",Ct),P.removeEventListener("error",jt)},Ct=()=>{J(mt(P.result)),ht()},jt=()=>{ke(P.error),ht()};P.addEventListener("success",Ct),P.addEventListener("error",jt)});return j.then(J=>{J instanceof IDBCursor&&Ne.set(J,P)}).catch(()=>{}),Me.set(j,P),j}(P);if(Xe.has(P))return Xe.get(P);const j=Je(P);return j!==P&&(Xe.set(P,j),Me.set(j,P)),j}const Ye=P=>Me.get(P),ze=["get","getKey","getAll","getAllKeys","count"],lt=["put","add","delete","clear"],xt=new Map;function Pt(P,j){if(!(P instanceof IDBDatabase)||j in P||"string"!=typeof j)return;if(xt.get(j))return xt.get(j);const J=j.replace(/FromIndex$/,""),ke=j!==J,ht=lt.includes(J);if(!(J in(ke?IDBIndex:IDBObjectStore).prototype)||!ht&&!ze.includes(J))return;const Ct=function(){var jt=(0,Y.Z)(function*(In,...Nn){const ar=this.transaction(In,ht?"readwrite":"readonly");let Wr=ar.store;return ke&&(Wr=Wr.index(Nn.shift())),(yield Promise.all([Wr[J](...Nn),ht&&ar.done]))[0]});return function(Nn){return jt.apply(this,arguments)}}();return xt.set(j,Ct),Ct}!function Le(P){et=P(et)}(P=>({...P,get:(j,J,ke)=>Pt(j,J)||P.get(j,J,ke),has:(j,J)=>!!Pt(j,J)||P.has(j,J)}));const Be="@firebase/installations",At="0.6.4",vt=1e4,Ke=`w:${At}`,qe="FIS_v2",We="https://firebaseinstallations.googleapis.com/v1",Q=36e5,un=new Pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Et(P){return P instanceof Pe.ZR&&P.code.includes("request-failed")}function ut({projectId:P}){return`${We}/projects/${P}/installations`}function Ot(P){return{token:P.token,requestStatus:2,expiresIn:ir(P.expiresIn),creationTime:Date.now()}}function sn(P,j){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,Y.Z)(function*(P,j){const ke=(yield j.json()).error;return un.create("request-failed",{requestName:P,serverCode:ke.code,serverMessage:ke.message,serverStatus:ke.status})})).apply(this,arguments)}function zn({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function wn(P){return tn.apply(this,arguments)}function tn(){return(tn=(0,Y.Z)(function*(P){const j=yield P();return j.status>=500&&j.status<600?P():j})).apply(this,arguments)}function ir(P){return Number(P.replace("s","000"))}function fn(){return(fn=(0,Y.Z)(function*({appConfig:P,heartbeatServiceProvider:j},{fid:J}){const ke=ut(P),ht=zn(P),Ct=j.getImmediate({optional:!0});if(Ct){const ar=yield Ct.getHeartbeatsHeader();ar&&ht.append("x-firebase-client",ar)}const In={method:"POST",headers:ht,body:JSON.stringify({fid:J,authVersion:qe,appId:P.appId,sdkVersion:Ke})},Nn=yield wn(()=>fetch(ke,In));if(Nn.ok){const ar=yield Nn.json();return{fid:ar.fid||J,registrationStatus:2,refreshToken:ar.refreshToken,authToken:Ot(ar.authToken)}}throw yield sn("Create Installation",Nn)})).apply(this,arguments)}function xn(P){return new Promise(j=>{setTimeout(j,P)})}const Cr=/^[cdef][\w-]{21}$/,Hr="";function Ur(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const J=function Tr(P){return function Di(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Cr.test(J)?J:Hr}catch{return Hr}}function Qn(P){return`${P.appName}!${P.appId}`}const bn=new Map;function on(P,j){const J=Qn(P);mr(J,j),function _i(P,j){const J=function ii(){return!pr&&"BroadcastChannel"in self&&(pr=new BroadcastChannel("[Firebase] FID Change"),pr.onmessage=P=>{mr(P.data.key,P.data.fid)}),pr}();J&&J.postMessage({key:P,fid:j}),function Gn(){0===bn.size&&pr&&(pr.close(),pr=null)}()}(J,j)}function mr(P,j){const J=bn.get(P);if(J)for(const ke of J)ke(j)}let pr=null;const vi="firebase-installations-database",rr=1,Pi="firebase-installations-store";let Xn=null;function ai(){return Xn||(Xn=function ve(P,j,{blocked:J,upgrade:ke,blocking:ht,terminated:Ct}={}){const jt=indexedDB.open(P,j),In=mt(jt);return ke&&jt.addEventListener("upgradeneeded",Nn=>{ke(mt(jt.result),Nn.oldVersion,Nn.newVersion,mt(jt.transaction))}),J&&jt.addEventListener("blocked",()=>J()),In.then(Nn=>{Ct&&Nn.addEventListener("close",()=>Ct()),ht&&Nn.addEventListener("versionchange",()=>ht())}).catch(()=>{}),In}(vi,rr,{upgrade:(P,j)=>{0===j&&P.createObjectStore(Pi)}})),Xn}function ei(P,j){return li.apply(this,arguments)}function li(){return(li=(0,Y.Z)(function*(P,j){const J=Qn(P),ht=(yield ai()).transaction(Pi,"readwrite"),Ct=ht.objectStore(Pi),jt=yield Ct.get(J);return yield Ct.put(j,J),yield ht.done,(!jt||jt.fid!==j.fid)&&on(P,j.fid),j})).apply(this,arguments)}function Nr(P){return si.apply(this,arguments)}function si(){return(si=(0,Y.Z)(function*(P){const j=Qn(P),ke=(yield ai()).transaction(Pi,"readwrite");yield ke.objectStore(Pi).delete(j),yield ke.done})).apply(this,arguments)}function Zr(P,j){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,Y.Z)(function*(P,j){const J=Qn(P),ht=(yield ai()).transaction(Pi,"readwrite"),Ct=ht.objectStore(Pi),jt=yield Ct.get(J),In=j(jt);return void 0===In?yield Ct.delete(J):yield Ct.put(In,J),yield ht.done,In&&(!jt||jt.fid!==In.fid)&&on(P,In.fid),In})).apply(this,arguments)}function Qe(P){return He.apply(this,arguments)}function He(){return He=(0,Y.Z)(function*(P){let j;const J=yield Zr(P.appConfig,ke=>{const ht=function ce(P){return rt(P||{fid:Ur(),registrationStatus:0})}(ke),Ct=function Ee(P,j){if(0===j.registrationStatus){if(!navigator.onLine)return{installationEntry:j,registrationPromise:Promise.reject(un.create("app-offline"))};const J={fid:j.fid,registrationStatus:1,registrationTime:Date.now()},ke=function ue(P,j){return ot.apply(this,arguments)}(P,J);return{installationEntry:J,registrationPromise:ke}}return 1===j.registrationStatus?{installationEntry:j,registrationPromise:Oe(P)}:{installationEntry:j}}(P,ht);return j=Ct.registrationPromise,Ct.installationEntry});return J.fid===Hr?{installationEntry:yield j}:{installationEntry:J,registrationPromise:j}}),He.apply(this,arguments)}function ot(){return ot=(0,Y.Z)(function*(P,j){try{const J=yield function jn(P,j){return fn.apply(this,arguments)}(P,j);return ei(P.appConfig,J)}catch(J){throw Et(J)&&409===J.customData.serverCode?yield Nr(P.appConfig):yield ei(P.appConfig,{fid:j.fid,registrationStatus:0}),J}}),ot.apply(this,arguments)}function Oe(P){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,Y.Z)(function*(P){let j=yield we(P.appConfig);for(;1===j.registrationStatus;)yield xn(100),j=yield we(P.appConfig);if(0===j.registrationStatus){const{installationEntry:J,registrationPromise:ke}=yield Qe(P);return ke||J}return j})).apply(this,arguments)}function we(P){return Zr(P,j=>{if(!j)throw un.create("installation-not-found");return rt(j)})}function rt(P){return function Rt(P){return 1===P.registrationStatus&&P.registrationTime+vt<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function Dn(){return(Dn=(0,Y.Z)(function*({appConfig:P,heartbeatServiceProvider:j},J){const ke=function _n(P,{fid:j}){return`${ut(P)}/${j}/authTokens:generate`}(P,J),ht=function hn(P,{refreshToken:j}){const J=zn(P);return J.append("Authorization",function Qt(P){return`${qe} ${P}`}(j)),J}(P,J),Ct=j.getImmediate({optional:!0});if(Ct){const ar=yield Ct.getHeartbeatsHeader();ar&&ht.append("x-firebase-client",ar)}const In={method:"POST",headers:ht,body:JSON.stringify({installation:{sdkVersion:Ke,appId:P.appId}})},Nn=yield wn(()=>fetch(ke,In));if(Nn.ok)return Ot(yield Nn.json());throw yield sn("Generate Auth Token",Nn)})).apply(this,arguments)}function Jn(P){return kr.apply(this,arguments)}function kr(){return kr=(0,Y.Z)(function*(P,j=!1){let J;const ke=yield Zr(P.appConfig,Ct=>{if(!cr(Ct))throw un.create("not-registered");const jt=Ct.authToken;if(!j&&function Mn(P){return 2===P.requestStatus&&!function Lr(P){const j=Date.now();return j<P.creationTime||P.creationTime+P.expiresIn<j+Q}(P)}(jt))return Ct;if(1===jt.requestStatus)return J=function kt(P,j){return Mt.apply(this,arguments)}(P,j),Ct;{if(!navigator.onLine)throw un.create("app-offline");const In=function Er(P){const j={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:j})}(Ct);return J=function Pn(P,j){return Kn.apply(this,arguments)}(P,In),In}});return J?yield J:ke.authToken}),kr.apply(this,arguments)}function Mt(){return(Mt=(0,Y.Z)(function*(P,j){let J=yield nn(P.appConfig);for(;1===J.authToken.requestStatus;)yield xn(100),J=yield nn(P.appConfig);const ke=J.authToken;return 0===ke.requestStatus?Jn(P,j):ke})).apply(this,arguments)}function nn(P){return Zr(P,j=>{if(!cr(j))throw un.create("not-registered");return function lr(P){return 1===P.requestStatus&&P.requestTime+vt<Date.now()}(j.authToken)?Object.assign(Object.assign({},j),{authToken:{requestStatus:0}}):j})}function Kn(){return Kn=(0,Y.Z)(function*(P,j){try{const J=yield function Yt(P,j){return Dn.apply(this,arguments)}(P,j),ke=Object.assign(Object.assign({},j),{authToken:J});return yield ei(P.appConfig,ke),J}catch(J){if(!Et(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const ke=Object.assign(Object.assign({},j),{authToken:{requestStatus:0}});yield ei(P.appConfig,ke)}else yield Nr(P.appConfig);throw J}}),Kn.apply(this,arguments)}function cr(P){return void 0!==P&&2===P.registrationStatus}function Qs(){return(Qs=(0,Y.Z)(function*(P){const j=P,{installationEntry:J,registrationPromise:ke}=yield Qe(j);return ke?ke.catch(console.error):Jn(j).catch(console.error),J.fid})).apply(this,arguments)}function ps(){return ps=(0,Y.Z)(function*(P,j=!1){const J=P;return yield function Oi(P){return vn.apply(this,arguments)}(J),(yield Jn(J,j)).token}),ps.apply(this,arguments)}function vn(){return(vn=(0,Y.Z)(function*(P){const{registrationPromise:j}=yield Qe(P);j&&(yield j)})).apply(this,arguments)}function xe(P){return un.create("missing-app-config-values",{valueName:P})}const Ze="installations",tt=P=>{const j=P.getProvider("app").getImmediate(),J=function ae(P){if(!P||!P.options)throw xe("App Configuration");if(!P.name)throw xe("App Name");const j=["projectId","apiKey","appId"];for(const J of j)if(!P.options[J])throw xe(J);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(j);return{app:j,appConfig:J,heartbeatServiceProvider:(0,ie._getProvider)(j,"heartbeat"),_delete:()=>Promise.resolve()}},nt=P=>{const j=P.getProvider("app").getImmediate(),J=(0,ie._getProvider)(j,Ze).getImmediate();return{getId:()=>function ur(P){return Qs.apply(this,arguments)}(J),getToken:ht=>function fs(P){return ps.apply(this,arguments)}(J,ht)}};(function Nt(){(0,ie._registerComponent)(new Ae.wA(Ze,tt,"PUBLIC")),(0,ie._registerComponent)(new Ae.wA("installations-internal",nt,"PRIVATE"))})(),(0,ie.registerVersion)(Be,At),(0,ie.registerVersion)(Be,At,"esm2017");const $t="@firebase/remote-config",Ln=new Pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ni{constructor(j,J,ke,ht){this.client=j,this.storage=J,this.storageCache=ke,this.logger=ht}isCachedDataFresh(j,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ke=Date.now()-J,ht=ke<=j;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ke}. Cache max age millis (minimumFetchIntervalMillis setting): ${j}. Is cache hit: ${ht}.`),ht}fetch(j){var J=this;return(0,Y.Z)(function*(){const[ke,ht]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(ht&&J.isCachedDataFresh(j.cacheMaxAgeMillis,ke))return ht;j.eTag=ht&&ht.eTag;const Ct=yield J.client.fetch(j),jt=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ct.status&&jt.push(J.storage.setLastSuccessfulFetchResponse(Ct)),yield Promise.all(jt),Ct})()}}function Xs(P=navigator){return P.languages&&P.languages[0]||P.language}class _o{constructor(j,J,ke,ht,Ct,jt){this.firebaseInstallations=j,this.sdkVersion=J,this.namespace=ke,this.projectId=ht,this.apiKey=Ct,this.appId=jt}fetch(j){var J=this;return(0,Y.Z)(function*(){const[ke,ht]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),jt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,In={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":j.eTag||"*"},Nn={sdk_version:J.sdkVersion,app_instance_id:ke,app_instance_id_token:ht,app_id:J.appId,language_code:Xs()},ar={method:"POST",headers:In,body:JSON.stringify(Nn)},Wr=fetch(jt,ar),ri=new Promise((Vi,Ho)=>{j.signal.addEventListener(()=>{const Bl=new Error("The operation was aborted.");Bl.name="AbortError",Ho(Bl)})});let bs;try{yield Promise.race([Wr,ri]),bs=yield Wr}catch(Vi){let Ho="fetch-client-network";throw"AbortError"===(null==Vi?void 0:Vi.name)&&(Ho="fetch-timeout"),Ln.create(Ho,{originalErrorMessage:null==Vi?void 0:Vi.message})}let Zs=bs.status;const eu=bs.headers.get("ETag")||void 0;let $s,Ac;if(200===bs.status){let Vi;try{Vi=yield bs.json()}catch(Ho){throw Ln.create("fetch-client-parse",{originalErrorMessage:null==Ho?void 0:Ho.message})}$s=Vi.entries,Ac=Vi.state}if("INSTANCE_STATE_UNSPECIFIED"===Ac?Zs=500:"NO_CHANGE"===Ac?Zs=304:("NO_TEMPLATE"===Ac||"EMPTY_CONFIG"===Ac)&&($s={}),304!==Zs&&200!==Zs)throw Ln.create("fetch-status",{httpStatus:Zs});return{status:Zs,eTag:eu,config:$s}})()}}class ci{constructor(j,J){this.client=j,this.storage=J}fetch(j){var J=this;return(0,Y.Z)(function*(){const ke=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch(j,ke)})()}attemptFetch(j,{throttleEndTimeMillis:J,backoffCount:ke}){var ht=this;return(0,Y.Z)(function*(){yield function Vs(P,j){return new Promise((J,ke)=>{const ht=Math.max(j-Date.now(),0),Ct=setTimeout(J,ht);P.addEventListener(()=>{clearTimeout(Ct),ke(Ln.create("fetch-throttle",{throttleEndTimeMillis:j}))})})}(j.signal,J);try{const Ct=yield ht.client.fetch(j);return yield ht.storage.deleteThrottleMetadata(),Ct}catch(Ct){if(!function Oo(P){if(!(P instanceof Pe.ZR&&P.customData))return!1;const j=Number(P.customData.httpStatus);return 429===j||500===j||503===j||504===j}(Ct))throw Ct;const jt={throttleEndTimeMillis:Date.now()+(0,Pe.$s)(ke),backoffCount:ke+1};return yield ht.storage.setThrottleMetadata(jt),ht.attemptFetch(j,jt)}})()}}class pa{constructor(j,J,ke,ht,Ct){this.app=j,this._client=J,this._storageCache=ke,this._storage=ht,this._logger=Ct,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xs(P,j){const J=P.target.error||void 0;return Ln.create(j,{originalErrorMessage:J&&(null==J?void 0:J.message)})}const qi="app_namespace_store";class js{constructor(j,J,ke,ht=function vo(){return new Promise((P,j)=>{try{const J=indexedDB.open("firebase_remote_config",1);J.onerror=ke=>{j(xs(ke,"storage-open"))},J.onsuccess=ke=>{P(ke.target.result)},J.onupgradeneeded=ke=>{0===ke.oldVersion&&ke.target.result.createObjectStore(qi,{keyPath:"compositeKey"})}}catch(J){j(Ln.create("storage-open",{originalErrorMessage:null==J?void 0:J.message}))}})}()){this.appId=j,this.appName=J,this.namespace=ke,this.openDbPromise=ht}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(j){return this.set("last_fetch_status",j)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(j){return this.set("last_successful_fetch_timestamp_millis",j)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(j){return this.set("last_successful_fetch_response",j)}getActiveConfig(){return this.get("active_config")}setActiveConfig(j){return this.set("active_config",j)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(j){return this.set("active_config_etag",j)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(j){return this.set("throttle_metadata",j)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(j){var J=this;return(0,Y.Z)(function*(){const ke=yield J.openDbPromise;return new Promise((ht,Ct)=>{const In=ke.transaction([qi],"readonly").objectStore(qi),Nn=J.createCompositeKey(j);try{const ar=In.get(Nn);ar.onerror=Wr=>{Ct(xs(Wr,"storage-get"))},ar.onsuccess=Wr=>{const ri=Wr.target.result;ht(ri?ri.value:void 0)}}catch(ar){Ct(Ln.create("storage-get",{originalErrorMessage:null==ar?void 0:ar.message}))}})})()}set(j,J){var ke=this;return(0,Y.Z)(function*(){const ht=yield ke.openDbPromise;return new Promise((Ct,jt)=>{const Nn=ht.transaction([qi],"readwrite").objectStore(qi),ar=ke.createCompositeKey(j);try{const Wr=Nn.put({compositeKey:ar,value:J});Wr.onerror=ri=>{jt(xs(ri,"storage-set"))},Wr.onsuccess=()=>{Ct()}}catch(Wr){jt(Ln.create("storage-set",{originalErrorMessage:null==Wr?void 0:Wr.message}))}})})()}delete(j){var J=this;return(0,Y.Z)(function*(){const ke=yield J.openDbPromise;return new Promise((ht,Ct)=>{const In=ke.transaction([qi],"readwrite").objectStore(qi),Nn=J.createCompositeKey(j);try{const ar=In.delete(Nn);ar.onerror=Wr=>{Ct(xs(Wr,"storage-delete"))},ar.onsuccess=()=>{ht()}}catch(ar){Ct(Ln.create("storage-delete",{originalErrorMessage:null==ar?void 0:ar.message}))}})})()}createCompositeKey(j){return[this.appId,this.appName,this.namespace,j].join()}}class Qi{constructor(j){this.storage=j}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var j=this;return(0,Y.Z)(function*(){const J=j.storage.getLastFetchStatus(),ke=j.storage.getLastSuccessfulFetchTimestampMillis(),ht=j.storage.getActiveConfig(),Ct=yield J;Ct&&(j.lastFetchStatus=Ct);const jt=yield ke;jt&&(j.lastSuccessfulFetchTimestampMillis=jt);const In=yield ht;In&&(j.activeConfig=In)})()}setLastFetchStatus(j){return this.lastFetchStatus=j,this.storage.setLastFetchStatus(j)}setLastSuccessfulFetchTimestampMillis(j){return this.lastSuccessfulFetchTimestampMillis=j,this.storage.setLastSuccessfulFetchTimestampMillis(j)}setActiveConfig(j){return this.activeConfig=j,this.storage.setActiveConfig(j)}}function Js(){return Do.apply(this,arguments)}function Do(){return(Do=(0,Y.Z)(function*(){if(!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch{return!1}})).apply(this,arguments)}!function Ss(){(0,ie._registerComponent)(new Ae.wA("remote-config",function P(j,{instanceIdentifier:J}){const ke=j.getProvider("app").getImmediate(),ht=j.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ln.create("registration-window");if(!(0,Pe.hl)())throw Ln.create("indexed-db-unavailable");const{projectId:Ct,apiKey:jt,appId:In}=ke.options;if(!Ct)throw Ln.create("registration-project-id");if(!jt)throw Ln.create("registration-api-key");if(!In)throw Ln.create("registration-app-id");const Nn=new js(In,ke.name,J=J||"firebase"),ar=new Qi(Nn),Wr=new fe.Yd($t);Wr.logLevel=fe.in.ERROR;const ri=new _o(ht,ie.SDK_VERSION,J,Ct,jt,In),bs=new ci(ri,Nn),Zs=new Ni(bs,Nn,ar,Wr),eu=new pa(ke,Zs,ar,Nn,Wr);return function Yn(P){const j=(0,Pe.m9)(P);j._initializePromise||(j._initializePromise=j._storageCache.loadFromStorage().then(()=>{j._isInitializationComplete=!0}))}(eu),eu},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)($t,"0.4.4"),(0,ie.registerVersion)($t,"0.4.4","esm2017")}();const Qa=(P,j)=>j.some(J=>P instanceof J);let No,ko;const gs=new WeakMap,As=new WeakMap,wi=new WeakMap,ws=new WeakMap,is=new WeakMap;let ls={get(P,j,J){if(P instanceof IDBTransaction){if("done"===j)return As.get(P);if("objectStoreNames"===j)return P.objectStoreNames||wi.get(P);if("store"===j)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return S(P[j])},set:(P,j,J)=>(P[j]=J,!0),has:(P,j)=>P instanceof IDBTransaction&&("done"===j||"store"===j)||j in P};function oo(P){return"function"==typeof P?function ga(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Vr(){return ko||(ko=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...j){return P.apply(Z(this),j),S(gs.get(this))}:function(...j){return S(P.apply(Z(this),j))}:function(j,...J){const ke=P.call(Z(this),j,...J);return wi.set(ke,j.sort?j.sort():[j]),S(ke)}}(P):(P instanceof IDBTransaction&&function _s(P){if(As.has(P))return;const j=new Promise((J,ke)=>{const ht=()=>{P.removeEventListener("complete",Ct),P.removeEventListener("error",jt),P.removeEventListener("abort",jt)},Ct=()=>{J(),ht()},jt=()=>{ke(P.error||new DOMException("AbortError","AbortError")),ht()};P.addEventListener("complete",Ct),P.addEventListener("error",jt),P.addEventListener("abort",jt)});As.set(P,j)}(P),Qa(P,function eo(){return No||(No=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,ls):P)}function S(P){if(P instanceof IDBRequest)return function Ti(P){const j=new Promise((J,ke)=>{const ht=()=>{P.removeEventListener("success",Ct),P.removeEventListener("error",jt)},Ct=()=>{J(S(P.result)),ht()},jt=()=>{ke(P.error),ht()};P.addEventListener("success",Ct),P.addEventListener("error",jt)});return j.then(J=>{J instanceof IDBCursor&&gs.set(J,P)}).catch(()=>{}),is.set(j,P),j}(P);if(ws.has(P))return ws.get(P);const j=oo(P);return j!==P&&(ws.set(P,j),is.set(j,P)),j}const Z=P=>is.get(P);function A(P,j,{blocked:J,upgrade:ke,blocking:ht,terminated:Ct}={}){const jt=indexedDB.open(P,j),In=S(jt);return ke&&jt.addEventListener("upgradeneeded",Nn=>{ke(S(jt.result),Nn.oldVersion,Nn.newVersion,S(jt.transaction))}),J&&jt.addEventListener("blocked",()=>J()),In.then(Nn=>{Ct&&Nn.addEventListener("close",()=>Ct()),ht&&Nn.addEventListener("versionchange",()=>ht())}).catch(()=>{}),In}function q(P,{blocked:j}={}){const J=indexedDB.deleteDatabase(P);return j&&J.addEventListener("blocked",()=>j()),S(J).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],Xt=["put","add","delete","clear"],$n=new Map;function er(P,j){if(!(P instanceof IDBDatabase)||j in P||"string"!=typeof j)return;if($n.get(j))return $n.get(j);const J=j.replace(/FromIndex$/,""),ke=j!==J,ht=Xt.includes(J);if(!(J in(ke?IDBIndex:IDBObjectStore).prototype)||!ht&&!Ie.includes(J))return;const Ct=function(){var jt=(0,Y.Z)(function*(In,...Nn){const ar=this.transaction(In,ht?"readwrite":"readonly");let Wr=ar.store;return ke&&(Wr=Wr.index(Nn.shift())),(yield Promise.all([Wr[J](...Nn),ht&&ar.done]))[0]});return function(Nn){return jt.apply(this,arguments)}}();return $n.set(j,Ct),Ct}!function Ms(P){ls=P(ls)}(P=>({...P,get:(j,J,ke)=>er(j,J)||P.get(j,J,ke),has:(j,J)=>!!er(j,J)||P.has(j,J)}));const Tn="/firebase-messaging-sw.js",Ii="/firebase-cloud-messaging-push-scope",C="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",I="https://fcmregistrations.googleapis.com/v1",D="google.c.a.c_id",V="google.c.a.c_l",_e="google.c.a.ts",ct="google.c.a.e";var pt=(()=>{return(P=pt||(pt={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",pt;var P})();function St(P){const j=new Uint8Array(P);return btoa(String.fromCharCode(...j)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dr(P){const J=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ke=atob(J),ht=new Uint8Array(ke.length);for(let Ct=0;Ct<ke.length;++Ct)ht[Ct]=ke.charCodeAt(Ct);return ht}const Xr="fcm_token_details_db",ti=5,$r="fcm_token_object_Store";function ki(){return ki=(0,Y.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ct=>Ct.name).includes(Xr))return null;let j=null;return(yield A(Xr,ti,{upgrade:(ke=(0,Y.Z)(function*(ht,Ct,jt,In){var Nn;if(Ct<2||!ht.objectStoreNames.contains($r))return;const ar=In.objectStore($r),Wr=yield ar.index("fcmSenderId").get(P);if(yield ar.clear(),Wr)if(2===Ct){const ri=Wr;if(!ri.auth||!ri.p256dh||!ri.endpoint)return;j={token:ri.fcmToken,createTime:null!==(Nn=ri.createTime)&&void 0!==Nn?Nn:Date.now(),subscriptionOptions:{auth:ri.auth,p256dh:ri.p256dh,endpoint:ri.endpoint,swScope:ri.swScope,vapidKey:"string"==typeof ri.vapidKey?ri.vapidKey:St(ri.vapidKey)}}}else if(3===Ct){const ri=Wr;j={token:ri.fcmToken,createTime:ri.createTime,subscriptionOptions:{auth:St(ri.auth),p256dh:St(ri.p256dh),endpoint:ri.endpoint,swScope:ri.swScope,vapidKey:St(ri.vapidKey)}}}else if(4===Ct){const ri=Wr;j={token:ri.fcmToken,createTime:ri.createTime,subscriptionOptions:{auth:St(ri.auth),p256dh:St(ri.p256dh),endpoint:ri.endpoint,swScope:ri.swScope,vapidKey:St(ri.vapidKey)}}}}),function(Ct,jt,In,Nn){return ke.apply(this,arguments)})})).close(),yield q(Xr),yield q("fcm_vapid_details_db"),yield q("undefined"),function Ps(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:j}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof j.auth&&j.auth.length>0&&"string"==typeof j.p256dh&&j.p256dh.length>0&&"string"==typeof j.endpoint&&j.endpoint.length>0&&"string"==typeof j.swScope&&j.swScope.length>0&&"string"==typeof j.vapidKey&&j.vapidKey.length>0}(j)?j:null;var ke}),ki.apply(this,arguments)}const es="firebase-messaging-database",Hs=1,Hi="firebase-messaging-store";let Xi=null;function bi(){return Xi||(Xi=A(es,Hs,{upgrade:(P,j)=>{0===j&&P.createObjectStore(Hi)}})),Xi}function ss(P){return cs.apply(this,arguments)}function cs(){return cs=(0,Y.Z)(function*(P){const j=pl(P),ke=yield(yield bi()).transaction(Hi).objectStore(Hi).get(j);if(ke)return ke;{const ht=yield function Bi(P){return ki.apply(this,arguments)}(P.appConfig.senderId);if(ht)return yield to(P,ht),ht}}),cs.apply(this,arguments)}function to(P,j){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,Y.Z)(function*(P,j){const J=pl(P),ht=(yield bi()).transaction(Hi,"readwrite");return yield ht.objectStore(Hi).put(j,J),yield ht.done,j})).apply(this,arguments)}function Ta(){return(Ta=(0,Y.Z)(function*(P){const j=pl(P),ke=(yield bi()).transaction(Hi,"readwrite");yield ke.objectStore(Hi).delete(j),yield ke.done})).apply(this,arguments)}function pl({appConfig:P}){return P.appId}const vs=new Pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Xo(P,j){return ya.apply(this,arguments)}function ya(){return(ya=(0,Y.Z)(function*(P,j){const J=yield Ea(P),ke=Wo(j),ht={method:"POST",headers:J,body:JSON.stringify(ke)};let Ct;try{Ct=yield(yield fetch(Xa(P.appConfig),ht)).json()}catch(jt){throw vs.create("token-subscribe-failed",{errorInfo:null==jt?void 0:jt.toString()})}if(Ct.error)throw vs.create("token-subscribe-failed",{errorInfo:Ct.error.message});if(!Ct.token)throw vs.create("token-subscribe-no-token");return Ct.token})).apply(this,arguments)}function Sa(){return(Sa=(0,Y.Z)(function*(P,j){const J=yield Ea(P),ke=Wo(j.subscriptionOptions),ht={method:"PATCH",headers:J,body:JSON.stringify(ke)};let Ct;try{Ct=yield(yield fetch(`${Xa(P.appConfig)}/${j.token}`,ht)).json()}catch(jt){throw vs.create("token-update-failed",{errorInfo:null==jt?void 0:jt.toString()})}if(Ct.error)throw vs.create("token-update-failed",{errorInfo:Ct.error.message});if(!Ct.token)throw vs.create("token-update-no-token");return Ct.token})).apply(this,arguments)}function va(P,j){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,Y.Z)(function*(P,j){const ke={method:"DELETE",headers:yield Ea(P)};try{const Ct=yield(yield fetch(`${Xa(P.appConfig)}/${j}`,ke)).json();if(Ct.error)throw vs.create("token-unsubscribe-failed",{errorInfo:Ct.error.message})}catch(ht){throw vs.create("token-unsubscribe-failed",{errorInfo:null==ht?void 0:ht.toString()})}})).apply(this,arguments)}function Xa({projectId:P}){return`${I}/projects/${P}/registrations`}function Ea(P){return wa.apply(this,arguments)}function wa(){return(wa=(0,Y.Z)(function*({appConfig:P,installations:j}){const J=yield j.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function Wo({p256dh:P,auth:j,endpoint:J,vapidKey:ke}){const ht={web:{endpoint:J,auth:j,p256dh:P}};return ke!==C&&(ht.web.applicationPubKey=ke),ht}const ml=6048e5;function Kl(){return Kl=(0,Y.Z)(function*(P){const j=yield function ql(P,j){return To.apply(this,arguments)}(P.swRegistration,P.vapidKey),J={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:j.endpoint,auth:St(j.getKey("auth")),p256dh:St(j.getKey("p256dh"))},ke=yield ss(P.firebaseDependencies);if(ke){if(function Ja(P,j){return j.vapidKey===P.vapidKey&&j.endpoint===P.endpoint&&j.auth===P.auth&&j.p256dh===P.p256dh}(ke.subscriptionOptions,J))return Date.now()>=ke.createTime+ml?function Ri(P,j){return Ol.apply(this,arguments)}(P,{token:ke.token,createTime:Date.now(),subscriptionOptions:J}):ke.token;try{yield va(P.firebaseDependencies,ke.token)}catch(ht){console.warn(ht)}return Gs(P.firebaseDependencies,J)}return Gs(P.firebaseDependencies,J)}),Kl.apply(this,arguments)}function Fo(){return Fo=(0,Y.Z)(function*(P){const j=yield ss(P.firebaseDependencies);j&&(yield va(P.firebaseDependencies,j.token),yield function ma(P){return Ta.apply(this,arguments)}(P.firebaseDependencies));const J=yield P.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()}),Fo.apply(this,arguments)}function Ol(){return Ol=(0,Y.Z)(function*(P,j){try{const J=yield function _a(P,j){return Sa.apply(this,arguments)}(P.firebaseDependencies,j),ke=Object.assign(Object.assign({},j),{token:J,createTime:Date.now()});return yield to(P.firebaseDependencies,ke),J}catch(J){throw yield function zs(P){return Fo.apply(this,arguments)}(P),J}}),Ol.apply(this,arguments)}function Gs(P,j){return ea.apply(this,arguments)}function ea(){return(ea=(0,Y.Z)(function*(P,j){const ke={token:yield Xo(P,j),createTime:Date.now(),subscriptionOptions:j};return yield to(P,ke),ke.token})).apply(this,arguments)}function To(){return(To=(0,Y.Z)(function*(P,j){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Dr(j)})})).apply(this,arguments)}function Si(P){const j={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function Aa(P,j){if(!j.notification)return;P.notification={};const J=j.notification.title;J&&(P.notification.title=J);const ke=j.notification.body;ke&&(P.notification.body=ke);const ht=j.notification.image;ht&&(P.notification.image=ht);const Ct=j.notification.icon;Ct&&(P.notification.icon=Ct)}(j,P),function la(P,j){j.data&&(P.data=j.data)}(j,P),function U(P,j){var J,ke,ht,Ct,jt;if(!(j.fcmOptions||null!==(J=j.notification)&&void 0!==J&&J.click_action))return;P.fcmOptions={};const In=null!==(ht=null===(ke=j.fcmOptions)||void 0===ke?void 0:ke.link)&&void 0!==ht?ht:null===(Ct=j.notification)||void 0===Ct?void 0:Ct.click_action;In&&(P.fcmOptions.link=In);const Nn=null===(jt=j.fcmOptions)||void 0===jt?void 0:jt.analytics_label;Nn&&(P.fcmOptions.analyticsLabel=Nn)}(j,P),j}function z(P,j){const J=[];for(let ke=0;ke<P.length;ke++)J.push(P.charAt(ke)),ke<j.length&&J.push(j.charAt(ke));return J.join("")}function Ge(P){return vs.create("missing-app-config-values",{valueName:P})}z("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),z("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ht{constructor(j,J,ke){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ht=function se(P){if(!P||!P.options)throw Ge("App Configuration Object");if(!P.name)throw Ge("App Name");const j=["projectId","apiKey","appId","messagingSenderId"],{options:J}=P;for(const ke of j)if(!J[ke])throw Ge(ke);return{appName:P.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}(j);this.firebaseDependencies={app:j,appConfig:ht,installations:J,analyticsProvider:ke}}_delete(){return Promise.resolve()}}function Zt(P){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,Y.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(Tn,{scope:Ii}),P.swRegistration.update().catch(()=>{})}catch(j){throw vs.create("failed-service-worker-registration",{browserErrorMessage:null==j?void 0:j.message})}})).apply(this,arguments)}function jr(){return(jr=(0,Y.Z)(function*(P,j){if(!j&&!P.swRegistration&&(yield Zt(P)),j||!P.swRegistration){if(!(j instanceof ServiceWorkerRegistration))throw vs.create("invalid-sw-registration");P.swRegistration=j}})).apply(this,arguments)}function Mr(){return(Mr=(0,Y.Z)(function*(P,j){j?P.vapidKey=j:P.vapidKey||(P.vapidKey=C)})).apply(this,arguments)}function yr(){return yr=(0,Y.Z)(function*(P,j){if(!navigator)throw vs.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw vs.create("permission-blocked");return yield function Pr(P,j){return Mr.apply(this,arguments)}(P,null==j?void 0:j.vapidKey),yield function Sr(P,j){return jr.apply(this,arguments)}(P,null==j?void 0:j.serviceWorkerRegistration),function yl(P){return Kl.apply(this,arguments)}(P)}),yr.apply(this,arguments)}function Ws(){return(Ws=(0,Y.Z)(function*(P,j,J){const ke=function ao(P){switch(P){case pt.NOTIFICATION_CLICKED:return"notification_open";case pt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(j);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(ke,{message_id:J[D],message_name:J[V],message_time:J[_e],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ks(){return Ks=(0,Y.Z)(function*(P,j){const J=j.data;if(!J.isFirebaseMessaging)return;P.onMessageHandler&&J.messageType===pt.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(Si(J)):P.onMessageHandler.next(Si(J)));const ke=J.data;(function ee(P){return"object"==typeof P&&!!P&&D in P})(ke)&&"1"===ke[ct]&&(yield function xi(P,j,J){return Ws.apply(this,arguments)}(P,J.messageType,ke))}),Ks.apply(this,arguments)}const qs="@firebase/messaging",no=P=>{const j=new Ht(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function Lo(P,j){return Ks.apply(this,arguments)}(j,J)),j},el=P=>{const j=P.getProvider("messaging").getImmediate();return{getToken:ke=>function os(P,j){return yr.apply(this,arguments)}(j,ke)}};function hu(){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,Y.Z)(function*(){try{yield(0,Pe.eu)()}catch{return!1}return typeof window<"u"&&(0,Pe.hl)()&&(0,Pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ca(){(0,ie._registerComponent)(new Ae.wA("messaging",no,"PUBLIC")),(0,ie._registerComponent)(new Ae.wA("messaging-internal",el,"PRIVATE")),(0,ie.registerVersion)(qs,"0.12.4"),(0,ie.registerVersion)(qs,"0.12.4","esm2017")}();const lo="analytics",Zl="firebase_id",Zn="origin",dr=6e4,Ku="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Un="https://www.googletagmanager.com/gtag/js",Lt=new fe.Yd("@firebase/analytics"),br=new Pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function wc(P){if(!P.startsWith(Un)){const j=br.create("invalid-gtag-resource",{gtagURL:P});return Lt.warn(j.message),""}return P}function $o(P){return Promise.all(P.map(j=>j.catch(J=>J)))}function tl(){return(tl=(0,Y.Z)(function*(P,j,J,ke,ht,Ct){const jt=ke[ht];try{if(jt)yield j[jt];else{const Nn=(yield $o(J)).find(ar=>ar.measurementId===ht);Nn&&(yield j[Nn.appId])}}catch(In){Lt.error(In)}P("config",ht,Ct)})).apply(this,arguments)}function Xl(){return(Xl=(0,Y.Z)(function*(P,j,J,ke,ht){try{let Ct=[];if(ht&&ht.send_to){let jt=ht.send_to;Array.isArray(jt)||(jt=[jt]);const In=yield $o(J);for(const Nn of jt){const ar=In.find(ri=>ri.measurementId===Nn),Wr=ar&&j[ar.appId];if(!Wr){Ct=[];break}Ct.push(Wr)}}0===Ct.length&&(Ct=Object.values(j)),yield Promise.all(Ct),P("event",ke,ht||{})}catch(Ct){Lt.error(Ct)}})).apply(this,arguments)}const Ma=30,tr=new class us{constructor(j={},J=1e3){this.throttleMetadata=j,this.intervalMillis=J}getThrottleMetadata(j){return this.throttleMetadata[j]}setThrottleMetadata(j,J){this.throttleMetadata[j]=J}deleteThrottleMetadata(j){delete this.throttleMetadata[j]}};function Fl(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function ds(){return(ds=(0,Y.Z)(function*(P){var j;const{appId:J,apiKey:ke}=P,ht={method:"GET",headers:Fl(ke)},Ct=Ku.replace("{app-id}",J),jt=yield fetch(Ct,ht);if(200!==jt.status&&304!==jt.status){let In="";try{const Nn=yield jt.json();null!==(j=Nn.error)&&void 0!==j&&j.message&&(In=Nn.error.message)}catch{}throw br.create("config-fetch-failed",{httpStatus:jt.status,responseMessage:In})}return jt.json()})).apply(this,arguments)}function On(){return(On=(0,Y.Z)(function*(P,j=tr,J){const{appId:ke,apiKey:ht,measurementId:Ct}=P.options;if(!ke)throw br.create("no-app-id");if(!ht){if(Ct)return{measurementId:Ct,appId:ke};throw br.create("no-api-key")}const jt=j.getThrottleMetadata(ke)||{backoffCount:0,throttleEndTimeMillis:Date.now()},In=new Yc;return setTimeout((0,Y.Z)(function*(){In.abort()}),void 0!==J?J:dr),qc({appId:ke,apiKey:ht,measurementId:Ct},jt,In,j)})).apply(this,arguments)}function qc(P,j,J){return Jl.apply(this,arguments)}function Jl(){return Jl=(0,Y.Z)(function*(P,{throttleEndTimeMillis:j,backoffCount:J},ke,ht=tr){var Ct;const{appId:jt,measurementId:In}=P;try{yield function rl(P,j){return new Promise((J,ke)=>{const ht=Math.max(j-Date.now(),0),Ct=setTimeout(J,ht);P.addEventListener(()=>{clearTimeout(Ct),ke(br.create("fetch-throttle",{throttleEndTimeMillis:j}))})})}(ke,j)}catch(Nn){if(In)return Lt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${In} provided in the "measurementId" field in the local Firebase config. [${null==Nn?void 0:Nn.message}]`),{appId:jt,measurementId:In};throw Nn}try{const Nn=yield function $i(P){return ds.apply(this,arguments)}(P);return ht.deleteThrottleMetadata(jt),Nn}catch(Nn){const ar=Nn;if(!function Fd(P){if(!(P instanceof Pe.ZR&&P.customData))return!1;const j=Number(P.customData.httpStatus);return 429===j||500===j||503===j||504===j}(ar)){if(ht.deleteThrottleMetadata(jt),In)return Lt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${In} provided in the "measurementId" field in the local Firebase config. [${null==ar?void 0:ar.message}]`),{appId:jt,measurementId:In};throw Nn}const Wr=503===Number(null===(Ct=null==ar?void 0:ar.customData)||void 0===Ct?void 0:Ct.httpStatus)?(0,Pe.$s)(J,ht.intervalMillis,Ma):(0,Pe.$s)(J,ht.intervalMillis),ri={throttleEndTimeMillis:Date.now()+Wr,backoffCount:J+1};return ht.setThrottleMetadata(jt,ri),Lt.debug(`Calling attemptFetch again in ${Wr} millis`),qc(P,ri,ke,ht)}}),Jl.apply(this,arguments)}class Yc{constructor(){this.listeners=[]}addEventListener(j){this.listeners.push(j)}abort(){this.listeners.forEach(j=>j())}}let El,le;function Cc(){return(Cc=(0,Y.Z)(function*(P,j,J,ke,ht){if(ht&&ht.global)P("event",J,ke);else{const Ct=yield j;P("event",J,Object.assign(Object.assign({},ke),{send_to:Ct}))}})).apply(this,arguments)}function pn(){return(pn=(0,Y.Z)(function*(){if(!(0,Pe.hl)())return Lt.warn(br.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Pe.eu)()}catch(P){return Lt.warn(br.create("indexeddb-unavailable",{errorInfo:null==P?void 0:P.toString()}).message),!1}return!0})).apply(this,arguments)}function Vn(){return Vn=(0,Y.Z)(function*(P,j,J,ke,ht,Ct,jt){var In;const Nn=function Is(P){return On.apply(this,arguments)}(P);Nn.then(Zs=>{J[Zs.measurementId]=Zs.appId,P.options.measurementId&&Zs.measurementId!==P.options.measurementId&&Lt.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${Zs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Zs=>Lt.error(Zs)),j.push(Nn);const ar=function Ut(){return pn.apply(this,arguments)}().then(Zs=>{if(Zs)return ke.getId()}),[Wr,ri]=yield Promise.all([Nn,ar]);(function Rr(P){const j=window.document.getElementsByTagName("script");for(const J of Object.values(j))if(J.src&&J.src.includes(Un)&&J.src.includes(P))return J;return null})(Ct)||function $a(P,j){const J=function Ql(P,j){let J;return window.trustedTypes&&(J=window.trustedTypes.createPolicy(P,j)),J}("firebase-js-sdk-policy",{createScriptURL:wc}),ke=document.createElement("script"),ht=`${Un}?l=${P}&id=${j}`;ke.src=J?null==J?void 0:J.createScriptURL(ht):ht,ke.async=!0,document.head.appendChild(ke)}(Ct,Wr.measurementId),le&&(ht("consent","default",le),function pe(P){le=P}(void 0)),ht("js",new Date);const bs=null!==(In=null==jt?void 0:jt.config)&&void 0!==In?In:{};return bs[Zn]="firebase",bs.update=!0,null!=ri&&(bs[Zl]=ri),ht("config",Wr.measurementId,bs),El&&(ht("set",El),function dt(P){El=P}(void 0)),Wr.measurementId}),Vn.apply(this,arguments)}class zi{constructor(j){this.app=j}_delete(){return delete Ui[this.app.options.appId],Promise.resolve()}}let Ui={},Ji=[];const wo={};let Ls,Ko,Ys="dataLayer",ua="gtag",Bs=!1;function wl(P,j,J){!function ta(){const P=[];if((0,Pe.ru)()&&P.push("This is a browser extension environment."),(0,Pe.zI)()||P.push("Cookies are not available."),P.length>0){const j=P.map((ke,ht)=>`(${ht+1}) ${ke}`).join(" "),J=br.create("invalid-analytics-context",{errorInfo:j});Lt.warn(J.message)}}();const ke=P.options.appId;if(!ke)throw br.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw br.create("no-api-key");Lt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ui[ke])throw br.create("already-exists",{id:ke});if(!Bs){!function ba(P){let j=[];Array.isArray(window[P])?j=window[P]:window[P]=j}(Ys);const{wrappedGtag:Ct,gtagCore:jt}=function nl(P,j,J,ke,ht){let Ct=function(...jt){window[ke].push(arguments)};return window[ht]&&"function"==typeof window[ht]&&(Ct=window[ht]),window[ht]=function vl(P,j,J,ke){function Ct(){return Ct=(0,Y.Z)(function*(jt,...In){try{if("event"===jt){const[Nn,ar]=In;yield function kd(P,j,J,ke,ht){return Xl.apply(this,arguments)}(P,j,J,Nn,ar)}else if("config"===jt){const[Nn,ar]=In;yield function kl(P,j,J,ke,ht,Ct){return tl.apply(this,arguments)}(P,j,J,ke,Nn,ar)}else if("consent"===jt){const[Nn]=In;P("consent","update",Nn)}else if("get"===jt){const[Nn,ar,Wr]=In;P("get",Nn,ar,Wr)}else if("set"===jt){const[Nn]=In;P("set",Nn)}else P(jt,...In)}catch(Nn){Lt.error(Nn)}}),Ct.apply(this,arguments)}return function ht(jt){return Ct.apply(this,arguments)}}(Ct,P,j,J),{gtagCore:Ct,wrappedGtag:window[ht]}}(Ui,Ji,wo,Ys,ua);Ko=Ct,Ls=jt,Bs=!0}return Ui[ke]=function Wn(P,j,J,ke,ht,Ct,jt){return Vn.apply(this,arguments)}(P,Ji,wo,j,Ls,Ys,J),new zi(P)}function Ld(){return ha.apply(this,arguments)}function ha(){return(ha=(0,Y.Z)(function*(){if((0,Pe.ru)()||!(0,Pe.zI)()||!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch{return!1}})).apply(this,arguments)}const Tc="@firebase/analytics";!function Qc(){(0,ie._registerComponent)(new Ae.wA(lo,(j,{options:J})=>wl(j.getProvider("app").getImmediate(),j.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,ie._registerComponent)(new Ae.wA("analytics-internal",function P(j){try{const J=j.getProvider(lo).getImmediate();return{logEvent:(ke,ht,Ct)=>function $d(P,j,J,ke){P=(0,Pe.m9)(P),function bc(P,j,J,ke,ht){return Cc.apply(this,arguments)}(Ko,Ui[P.app.options.appId],j,J,ke).catch(ht=>Lt.error(ht))}(J,ke,ht,Ct)}}catch(J){throw br.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,ie.registerVersion)(Tc,"0.10.0"),(0,ie.registerVersion)(Tc,"0.10.0","esm2017")}();var gu=$(4408),rc=$(7565);const Ch=new class ic extends rc.v{}(class Zu extends gu.o{constructor(j,J){super(j,J),this.scheduler=j,this.work=J}schedule(j,J=0){return J>0?super.schedule(j,J):(this.delay=J,this.state=j,this.scheduler.flush(this),this)}execute(j,J){return J>0||this.closed?super.execute(j,J):this._execute(j,J)}requestAsyncId(j,J,ke=0){return null!=ke&&ke>0||null==ke&&this.delay>0?super.requestAsyncId(j,J,ke):(j.flush(this),0)}});var Vo=$(4986),sc=$(8505),Ra=$(5363),mu=$(9468);const ms=new m.GfV("7.5.0"),il="__angularfire_symbol__analyticsIsSupportedValue",So="__angularfire_symbol__analyticsIsSupported",ys="__angularfire_symbol__remoteConfigIsSupportedValue",bl="__angularfire_symbol__remoteConfigIsSupported",sl="__angularfire_symbol__messagingIsSupportedValue",jo="__angularfire_symbol__messagingIsSupported";function Cl(P,j,J){if(j){if(1===j.length)return j[0];const Ct=j.filter(jt=>jt.app===J);if(1===Ct.length)return Ct[0]}return J.container.getProvider(P).getImmediate({optional:!0})}globalThis[So]||(globalThis[So]=Ld().then(P=>globalThis[il]=P).catch(()=>globalThis[il]=!1)),globalThis[jo]||(globalThis[jo]=hu().then(P=>globalThis[sl]=P).catch(()=>globalThis[sl]=!1)),globalThis[bl]||(globalThis[bl]=Js().then(P=>globalThis[ys]=P).catch(()=>globalThis[ys]=!1));const hs=(P,j)=>{const J=j?[j]:(0,g.C6)(),ke=[];return J.forEach(ht=>{ht.container.getProvider(P).instances.forEach(jt=>{ke.includes(jt)||ke.push(jt)})}),ke};function qo(){}class Sc{constructor(j,J=Ch){this.zone=j,this.delegate=J}now(){return this.delegate.now()}schedule(j,J,ke){const ht=this.zone;return this.delegate.schedule(function(jt){ht.runGuarded(()=>{j.apply(this,[jt])})},J,ke)}}class ol{constructor(j){this.zone=j,this.task=null}call(j,J){const ke=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qo,{},qo,qo)),J.pipe((0,sc.b)({next:ke,complete:ke,error:ke})).subscribe(j).add(ke)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Yo=(()=>{class P{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new Sc(Zone.current)),this.insideAngular=J.run(()=>new Sc(Zone.current,Vo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(J){return new(J||P)(m.LFG(m.R0b))},P.\u0275prov=m.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function al(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function lc(P){return P.pipe((0,Ra.Q)(al().outsideAngular))}function Pa(P){return al(),function Jc(P){return function(J){return(J=J.lift(new ol(P.ngZone))).pipe((0,mu.R)(P.outsideAngular),(0,Ra.Q)(P.insideAngular))}}(al())(P)}},8502:(cn,at,$)=>{"use strict";$.d(at,{$:()=>Tn,A:()=>he,D:()=>je,I:()=>wr,J:()=>tt,L:()=>Ki,N:()=>Zr,P:()=>Wn,Q:()=>js,R:()=>Ua,U:()=>Co,V:()=>Js,W:()=>Do,X:()=>ui,Y:()=>eo,Z:()=>Vr,_:()=>is,a:()=>Eo,a0:()=>C,a1:()=>D,a2:()=>Gt,a3:()=>$r,a4:()=>ki,a5:()=>es,a6:()=>Hi,a7:()=>bi,a8:()=>cs,a9:()=>Rs,aA:()=>ve,aB:()=>ys,aC:()=>Nr,aD:()=>Kr,aE:()=>Ra,aF:()=>Bd,aG:()=>Il,aH:()=>Fr,aL:()=>Os,aO:()=>No,aa:()=>ma,ab:()=>pl,ac:()=>gl,ad:()=>_a,ae:()=>va,af:()=>Xa,ai:()=>ml,aj:()=>Kl,ak:()=>zs,an:()=>ga,ao:()=>Aa,aq:()=>Mr,ar:()=>qs,as:()=>ze,at:()=>rt,au:()=>Oe,av:()=>Le,aw:()=>bs,ax:()=>oc,ay:()=>Rt,az:()=>Re,b:()=>Nl,c:()=>Ko,d:()=>wl,e:()=>da,f:()=>Tc,g:()=>ic,h:()=>gu,i:()=>Ic,j:()=>Vo,k:()=>Vi,l:()=>w,m:()=>yu,p:()=>de,r:()=>W,s:()=>R,u:()=>Ut});var m=$(5861),g=$(2090),Y=$(6881),ie=$(655),Pe=$(1877),Ae=$(4859);const de={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},he={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const je=function be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ue=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Xe=new g.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new Pe.Yd("@firebase/auth");function et(x,..._){Se.logLevel<=Pe.in.ERROR&&Se.error(`Auth (${Y.SDK_VERSION}): ${x}`,..._)}function Le(x,..._){throw Ye(x,..._)}function Re(x,..._){return Ye(x,..._)}function Je(x,_,b){const k=Object.assign(Object.assign({},Ue()),{[_]:b});return new g.LL("auth","Firebase",k).create(_,{appName:x.name})}function mt(x,_,b){if(!(_ instanceof b))throw b.name!==_.constructor.name&&Le(x,"argument-error"),Je(x,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ye(x,..._){if("string"!=typeof x){const b=_[0],k=[..._.slice(1)];return k[0]&&(k[0].appName=x.name),x._errorFactory.create(b,...k)}return Xe.create(x,..._)}function ve(x,_,...b){if(!x)throw Ye(_,...b)}function It(x){const _="INTERNAL ASSERTION FAILED: "+x;throw et(_),new Error(_)}function ze(x,_){x||It(_)}function lt(){var x;return typeof self<"u"&&(null===(x=self.location)||void 0===x?void 0:x.href)||""}function xt(){return"http:"===Pt()||"https:"===Pt()}function Pt(){var x;return typeof self<"u"&&(null===(x=self.location)||void 0===x?void 0:x.protocol)||null}class vt{constructor(_,b){this.shortDelay=_,this.longDelay=b,ze(b>_,"Short delay should be less than long delay!"),this.isMobile=(0,g.uI)()||(0,g.b$)()}get(){return function Be(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(xt()||(0,g.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ke(x,_){ze(x.emulator,"Emulator should always be set here");const{url:b}=x.emulator;return _?`${b}${_.startsWith("/")?_.slice(1):_}`:b}class qe{static initialize(_,b,k){this.fetchImpl=_,b&&(this.headersImpl=b),k&&(this.responseImpl=k)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void It("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void It("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void It("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const We={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Q=new vt(3e4,6e4);function _t(x,_){return x.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:x.tenantId}):_}function Dt(x,_,b,k){return zt.apply(this,arguments)}function zt(){return(zt=(0,m.Z)(function*(x,_,b,k,ne={}){return un(x,ne,(0,m.Z)(function*(){let Ce={},bt={};k&&("GET"===_?bt=k:Ce={body:JSON.stringify(k)});const Wt=(0,g.xO)(Object.assign({key:x.config.apiKey},bt)).slice(1),Rn=yield x._getAdditionalHeaders();return Rn["Content-Type"]="application/json",x.languageCode&&(Rn["X-Firebase-Locale"]=x.languageCode),qe.fetch()(sn(x,x.config.apiHost,b,Wt),Object.assign({method:_,headers:Rn,referrerPolicy:"no-referrer"},Ce))}))})).apply(this,arguments)}function un(x,_,b){return Et.apply(this,arguments)}function Et(){return(Et=(0,m.Z)(function*(x,_,b){x._canInitEmulator=!1;const k=Object.assign(Object.assign({},We),_);try{const ne=new Cn(x),Ce=yield Promise.race([b(),ne.promise]);ne.clearNetworkTimeout();const bt=yield Ce.json();if("needConfirmation"in bt)throw zn(x,"account-exists-with-different-credential",bt);if(Ce.ok&&!("errorMessage"in bt))return bt;{const Wt=Ce.ok?bt.errorMessage:bt.error.message,[Rn,Bn]=Wt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Rn)throw zn(x,"credential-already-in-use",bt);if("EMAIL_EXISTS"===Rn)throw zn(x,"email-already-in-use",bt);if("USER_DISABLED"===Rn)throw zn(x,"user-disabled",bt);const gr=k[Rn]||Rn.toLowerCase().replace(/[_\s]+/g,"-");if(Bn)throw Je(x,gr,Bn);Le(x,gr)}}catch(ne){if(ne instanceof g.ZR)throw ne;Le(x,"network-request-failed",{message:String(ne)})}})).apply(this,arguments)}function ut(x,_,b,k){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,m.Z)(function*(x,_,b,k,ne={}){const Ce=yield Dt(x,_,b,k,ne);return"mfaPendingCredential"in Ce&&Le(x,"multi-factor-auth-required",{_serverResponse:Ce}),Ce})).apply(this,arguments)}function sn(x,_,b,k){const ne=`${_}${b}?${k}`;return x.config.emulator?Ke(x.config,ne):`${x.config.apiScheme}://${ne}`}class Cn{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((b,k)=>{this.timer=setTimeout(()=>k(Re(this.auth,"network-request-failed")),Q.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zn(x,_,b){const k={appName:x.name};b.email&&(k.email=b.email),b.phoneNumber&&(k.phoneNumber=b.phoneNumber);const ne=Re(x,_,k);return ne.customData._tokenResponse=b,ne}function wn(){return(wn=(0,m.Z)(function*(x,_){return Dt(x,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function ir(){return(ir=(0,m.Z)(function*(x,_){return Dt(x,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function jn(){return(jn=(0,m.Z)(function*(x,_){return Dt(x,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function fn(x){if(x)try{const _=new Date(Number(x));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function Cr(){return(Cr=(0,m.Z)(function*(x,_=!1){const b=(0,g.m9)(x),k=yield b.getIdToken(_),ne=Ur(k);ve(ne&&ne.exp&&ne.auth_time&&ne.iat,b.auth,"internal-error");const Ce="object"==typeof ne.firebase?ne.firebase:void 0,bt=null==Ce?void 0:Ce.sign_in_provider;return{claims:ne,token:k,authTime:fn(Hr(ne.auth_time)),issuedAtTime:fn(Hr(ne.iat)),expirationTime:fn(Hr(ne.exp)),signInProvider:bt||null,signInSecondFactor:(null==Ce?void 0:Ce.sign_in_second_factor)||null}})).apply(this,arguments)}function Hr(x){return 1e3*Number(x)}function Ur(x){const[_,b,k]=x.split(".");if(void 0===_||void 0===b||void 0===k)return et("JWT malformed, contained fewer than 3 sections"),null;try{const ne=(0,g.tV)(b);return ne?JSON.parse(ne):(et("Failed to decode base64 JWT payload"),null)}catch(ne){return et("Caught error parsing JWT payload as JSON",null==ne?void 0:ne.toString()),null}}function Qn(x,_){return bn.apply(this,arguments)}function bn(){return(bn=(0,m.Z)(function*(x,_,b=!1){if(b)return _;try{return yield _}catch(k){throw k instanceof g.ZR&&function on({code:x}){return"auth/user-disabled"===x||"auth/user-token-expired"===x}(k)&&x.auth.currentUser===x&&(yield x.auth.signOut()),k}})).apply(this,arguments)}class vr{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var b;if(_){const k=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),k}{this.errorBackoff=3e4;const ne=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,ne)}}schedule(_=!1){var b=this;if(!this.isRunning)return;const k=this.getInterval(_);this.timerId=setTimeout((0,m.Z)(function*(){yield b.iteration()}),k)}iteration(){var _=this;return(0,m.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null==b?void 0:b.code)&&_.schedule(!0))}_.schedule()})()}}class oi{constructor(_,b){this.createdAt=_,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=fn(this.lastLoginAt),this.creationTime=fn(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mr(x){return _i.apply(this,arguments)}function _i(){return _i=(0,m.Z)(function*(x){var _;const b=x.auth,k=yield x.getIdToken(),ne=yield Qn(x,function Qt(x,_){return jn.apply(this,arguments)}(b,{idToken:k}));ve(null==ne?void 0:ne.users.length,b,"internal-error");const Ce=ne.users[0];x._notifyReloadListener(Ce);const bt=null!==(_=Ce.providerUserInfo)&&void 0!==_&&_.length?function vi(x){return x.map(_=>{var{providerId:b}=_,k=(0,ie._T)(_,["providerId"]);return{providerId:b,uid:k.rawId||"",displayName:k.displayName||null,email:k.email||null,phoneNumber:k.phoneNumber||null,photoURL:k.photoUrl||null}})}(Ce.providerUserInfo):[],Wt=function Gn(x,_){return[...x.filter(k=>!_.some(ne=>ne.providerId===k.providerId)),..._]}(x.providerData,bt),gr=!!x.isAnonymous&&!(x.email&&Ce.passwordHash||null!=Wt&&Wt.length),di={uid:Ce.localId,displayName:Ce.displayName||null,photoURL:Ce.photoUrl||null,email:Ce.email||null,emailVerified:Ce.emailVerified||!1,phoneNumber:Ce.phoneNumber||null,tenantId:Ce.tenantId||null,providerData:Wt,metadata:new oi(Ce.createdAt,Ce.lastLoginAt),isAnonymous:gr};Object.assign(x,di)}),_i.apply(this,arguments)}function ii(){return(ii=(0,m.Z)(function*(x){const _=(0,g.m9)(x);yield mr(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function Pi(){return(Pi=(0,m.Z)(function*(x,_){const b=yield un(x,{},(0,m.Z)(function*(){const k=(0,g.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:ne,apiKey:Ce}=x.config,bt=sn(x,ne,"/v1/token",`key=${Ce}`),Wt=yield x._getAdditionalHeaders();return Wt["Content-Type"]="application/x-www-form-urlencoded",qe.fetch()(bt,{method:"POST",headers:Wt,body:k})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class Xn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){ve(_.idToken,"internal-error"),ve(typeof _.idToken<"u","internal-error"),ve(typeof _.refreshToken<"u","internal-error");const b="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function Tr(x){const _=Ur(x);return ve(_,"internal-error"),ve(typeof _.exp<"u","internal-error"),ve(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,b)}getToken(_,b=!1){var k=this;return(0,m.Z)(function*(){return ve(!k.accessToken||k.refreshToken,_,"user-token-expired"),b||!k.accessToken||k.isExpired?k.refreshToken?(yield k.refresh(_,k.refreshToken),k.accessToken):null:k.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,b){var k=this;return(0,m.Z)(function*(){const{accessToken:ne,refreshToken:Ce,expiresIn:bt}=yield function rr(x,_){return Pi.apply(this,arguments)}(_,b);k.updateTokensAndExpiration(ne,Ce,Number(bt))})()}updateTokensAndExpiration(_,b,k){this.refreshToken=b||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*k}static fromJSON(_,b){const{refreshToken:k,accessToken:ne,expirationTime:Ce}=b,bt=new Xn;return k&&(ve("string"==typeof k,"internal-error",{appName:_}),bt.refreshToken=k),ne&&(ve("string"==typeof ne,"internal-error",{appName:_}),bt.accessToken=ne),Ce&&(ve("number"==typeof Ce,"internal-error",{appName:_}),bt.expirationTime=Ce),bt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new Xn,this.toJSON())}_performRefresh(){return It("not implemented")}}function ai(x,_){ve("string"==typeof x||typeof x>"u","internal-error",{appName:_})}class ei{constructor(_){var{uid:b,auth:k,stsTokenManager:ne}=_,Ce=(0,ie._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=k,this.stsTokenManager=ne,this.accessToken=ne.accessToken,this.displayName=Ce.displayName||null,this.email=Ce.email||null,this.emailVerified=Ce.emailVerified||!1,this.phoneNumber=Ce.phoneNumber||null,this.photoURL=Ce.photoURL||null,this.isAnonymous=Ce.isAnonymous||!1,this.tenantId=Ce.tenantId||null,this.providerData=Ce.providerData?[...Ce.providerData]:[],this.metadata=new oi(Ce.createdAt||void 0,Ce.lastLoginAt||void 0)}getIdToken(_){var b=this;return(0,m.Z)(function*(){const k=yield Qn(b,b.stsTokenManager.getToken(b.auth,_));return ve(k,b.auth,"internal-error"),b.accessToken!==k&&(b.accessToken=k,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),k})()}getIdTokenResult(_){return function Di(x){return Cr.apply(this,arguments)}(this,_)}reload(){return function pr(x){return ii.apply(this,arguments)}(this)}_assign(_){this!==_&&(ve(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(b=>Object.assign({},b)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){const b=new ei(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}));return b.metadata._copy(this.metadata),b}_onReload(_){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,b=!1){var k=this;return(0,m.Z)(function*(){let ne=!1;_.idToken&&_.idToken!==k.stsTokenManager.accessToken&&(k.stsTokenManager.updateFromServerResponse(_),ne=!0),b&&(yield mr(k)),yield k.auth._persistUserIfCurrent(k),ne&&k.auth._notifyListenersIfCurrent(k)})()}delete(){var _=this;return(0,m.Z)(function*(){const b=yield _.getIdToken();return yield Qn(_,function hn(x,_){return wn.apply(this,arguments)}(_.auth,{idToken:b})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,b){var k,ne,Ce,bt,Wt,Rn,Bn,gr;const di=null!==(k=b.displayName)&&void 0!==k?k:void 0,zo=null!==(ne=b.email)&&void 0!==ne?ne:void 0,Dl=null!==(Ce=b.phoneNumber)&&void 0!==Ce?Ce:void 0,Rc=null!==(bt=b.photoURL)&&void 0!==bt?bt:void 0,Tl=null!==(Wt=b.tenantId)&&void 0!==Wt?Wt:void 0,cc=null!==(Rn=b._redirectEventId)&&void 0!==Rn?Rn:void 0,tu=null!==(Bn=b.createdAt)&&void 0!==Bn?Bn:void 0,Vd=null!==(gr=b.lastLoginAt)&&void 0!==gr?gr:void 0,{uid:xc,emailVerified:_u,isAnonymous:nu,providerData:Vl,stsTokenManager:Ao}=b;ve(xc&&Ao,_,"internal-error");const ru=Xn.fromJSON(this.name,Ao);ve("string"==typeof xc,_,"internal-error"),ai(di,_.name),ai(zo,_.name),ve("boolean"==typeof _u,_,"internal-error"),ve("boolean"==typeof nu,_,"internal-error"),ai(Dl,_.name),ai(Rc,_.name),ai(Tl,_.name),ai(cc,_.name),ai(tu,_.name),ai(Vd,_.name);const uc=new ei({uid:xc,auth:_,email:zo,emailVerified:_u,displayName:di,isAnonymous:nu,photoURL:Rc,phoneNumber:Dl,tenantId:Tl,stsTokenManager:ru,createdAt:tu,lastLoginAt:Vd});return Vl&&Array.isArray(Vl)&&(uc.providerData=Vl.map(Pc=>Object.assign({},Pc))),cc&&(uc._redirectEventId=cc),uc}static _fromIdTokenResponse(_,b,k=!1){return(0,m.Z)(function*(){const ne=new Xn;ne.updateFromServerResponse(b);const Ce=new ei({uid:b.localId,auth:_,stsTokenManager:ne,isAnonymous:k});return yield mr(Ce),Ce})()}}const li=new Map;function Nr(x){ze(x instanceof Function,"Expected a class definition");let _=li.get(x);return _?(ze(_ instanceof x,"Instance stored in cache mismatched with class"),_):(_=new x,li.set(x,_),_)}const Zr=(()=>{class x{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(b,k){var ne=this;return(0,m.Z)(function*(){ne.storage[b]=k})()}_get(b){var k=this;return(0,m.Z)(function*(){const ne=k.storage[b];return void 0===ne?null:ne})()}_remove(b){var k=this;return(0,m.Z)(function*(){delete k.storage[b]})()}_addListener(b,k){}_removeListener(b,k){}}return x.type="NONE",x})();function Kr(x,_,b){return`firebase:${x}:${_}:${b}`}class Qe{constructor(_,b,k){this.persistence=_,this.auth=b,this.userKey=k;const{config:ne,name:Ce}=this.auth;this.fullUserKey=Kr(this.userKey,ne.apiKey,Ce),this.fullPersistenceKey=Kr("persistence",ne.apiKey,Ce),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,m.Z)(function*(){const b=yield _.persistence._get(_.fullUserKey);return b?ei._fromJSON(_.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var b=this;return(0,m.Z)(function*(){if(b.persistence===_)return;const k=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=_,k?b.setCurrentUser(k):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,b,k="authUser"){return(0,m.Z)(function*(){if(!b.length)return new Qe(Nr(Zr),_,k);const ne=(yield Promise.all(b.map(function(){var Bn=(0,m.Z)(function*(gr){if(yield gr._isAvailable())return gr});return function(gr){return Bn.apply(this,arguments)}}()))).filter(Bn=>Bn);let Ce=ne[0]||Nr(Zr);const bt=Kr(k,_.config.apiKey,_.name);let Wt=null;for(const Bn of b)try{const gr=yield Bn._get(bt);if(gr){const di=ei._fromJSON(_,gr);Bn!==Ce&&(Wt=di),Ce=Bn;break}}catch{}const Rn=ne.filter(Bn=>Bn._shouldAllowMigration);return Ce._shouldAllowMigration&&Rn.length?(Ce=Rn[0],Wt&&(yield Ce._set(bt,Wt.toJSON())),yield Promise.all(b.map(function(){var Bn=(0,m.Z)(function*(gr){if(gr!==Ce)try{yield gr._remove(bt)}catch{}});return function(gr){return Bn.apply(this,arguments)}}())),new Qe(Ce,_,k)):new Qe(Ce,_,k)})()}}function He(x){const _=x.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(ot(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(ce(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(Ve(_))return"Blackberry";if(we(_))return"Webos";if(Ee(_))return"Safari";if((_.includes("chrome/")||ue(_))&&!_.includes("edge/"))return"Chrome";if(Oe(_))return"Android";{const k=x.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==k?void 0:k.length))return k[1]}return"Other"}function ce(x=(0,g.z$)()){return/firefox\//i.test(x)}function Ee(x=(0,g.z$)()){const _=x.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function ue(x=(0,g.z$)()){return/crios\//i.test(x)}function ot(x=(0,g.z$)()){return/iemobile/i.test(x)}function Oe(x=(0,g.z$)()){return/android/i.test(x)}function Ve(x=(0,g.z$)()){return/blackberry/i.test(x)}function we(x=(0,g.z$)()){return/webos/i.test(x)}function rt(x=(0,g.z$)()){return/iphone|ipad|ipod/i.test(x)||/macintosh/i.test(x)&&/mobile/i.test(x)}function Rt(x=(0,g.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(x)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(x)}function _n(x=(0,g.z$)()){return rt(x)||Oe(x)||we(x)||Ve(x)||/windows phone/i.test(x)||ot(x)}function kr(x,_=[]){let b;switch(x){case"Browser":b=He((0,g.z$)());break;case"Worker":b=`${He((0,g.z$)())}-${x}`;break;default:b=x}const k=_.length?_.join(","):"FirebaseCore-web";return`${b}/JsCore/${Y.SDK_VERSION}/${k}`}function Mt(){return(Mt=(0,m.Z)(function*(x){return(yield Dt(x,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function nn(x,_){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,m.Z)(function*(x,_){return Dt(x,"GET","/v2/recaptchaConfig",_t(x,_))})).apply(this,arguments)}function Kn(x){return void 0!==x&&void 0!==x.getResponse}function cr(x){return void 0!==x&&void 0!==x.enterprise}class Mn{constructor(_){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===_.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=_.recaptchaKey.split("/")[3],this.emailPasswordEnabled=_.recaptchaEnforcementState.some(b=>"EMAIL_PASSWORD_PROVIDER"===b.provider&&"OFF"!==b.enforcementState)}}function Er(x){return new Promise((_,b)=>{const k=document.createElement("script");k.setAttribute("src",x),k.onload=_,k.onerror=ne=>{const Ce=Re("internal-error");Ce.customData=ne,b(Ce)},k.type="text/javascript",k.charset="UTF-8",function Lr(){var x,_;return null!==(_=null===(x=document.getElementsByTagName("head"))||void 0===x?void 0:x[0])&&void 0!==_?_:document}().appendChild(k)})}function lr(x){return`__${x}${Math.floor(1e6*Math.random())}`}const fs="NO_RECAPTCHA";class ps{constructor(_){this.type="recaptcha-enterprise",this.auth=Fr(_)}verify(_="verify",b=!1){var k=this;return(0,m.Z)(function*(){function Ce(){return Ce=(0,m.Z)(function*(Wt){if(!b){if(null==Wt.tenantId&&null!=Wt._agentRecaptchaConfig)return Wt._agentRecaptchaConfig.siteKey;if(null!=Wt.tenantId&&void 0!==Wt._tenantRecaptchaConfigs[Wt.tenantId])return Wt._tenantRecaptchaConfigs[Wt.tenantId].siteKey}return new Promise(function(){var Rn=(0,m.Z)(function*(Bn,gr){nn(Wt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(di=>{if(void 0!==di.recaptchaKey){const zo=new Mn(di);return null==Wt.tenantId?Wt._agentRecaptchaConfig=zo:Wt._tenantRecaptchaConfigs[Wt.tenantId]=zo,Bn(zo.siteKey)}gr(new Error("recaptcha Enterprise site key undefined"))}).catch(di=>{gr(di)})});return function(Bn,gr){return Rn.apply(this,arguments)}}())}),Ce.apply(this,arguments)}function bt(Wt,Rn,Bn){const gr=window.grecaptcha;cr(gr)?gr.enterprise.ready(()=>{gr.enterprise.execute(Wt,{action:_}).then(di=>{Rn(di)}).catch(()=>{Rn(fs)})}):Bn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Wt,Rn)=>{(function ne(Wt){return Ce.apply(this,arguments)})(k.auth).then(Bn=>{if(!b&&cr(window.grecaptcha))bt(Bn,Wt,Rn);else{if(typeof window>"u")return void Rn(new Error("RecaptchaVerifier is only supported in browser"));Er("https://www.google.com/recaptcha/enterprise.js?render="+Bn).then(()=>{bt(Bn,Wt,Rn)}).catch(gr=>{Rn(gr)})}}).catch(Bn=>{Rn(Bn)})})})()}}function Oi(x,_,b){return vn.apply(this,arguments)}function vn(){return(vn=(0,m.Z)(function*(x,_,b,k=!1){const ne=new ps(x);let Ce;try{Ce=yield ne.verify(b)}catch{Ce=yield ne.verify(b,!0)}const bt=Object.assign({},_);return Object.assign(bt,k?{captchaResp:Ce}:{captchaResponse:Ce}),Object.assign(bt,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(bt,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),bt})).apply(this,arguments)}class hr{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,b){const k=Ce=>new Promise((bt,Wt)=>{try{bt(_(Ce))}catch(Rn){Wt(Rn)}});k.onAbort=b,this.queue.push(k);const ne=this.queue.length-1;return()=>{this.queue[ne]=()=>Promise.resolve()}}runMiddleware(_){var b=this;return(0,m.Z)(function*(){if(b.auth.currentUser===_)return;const k=[];try{for(const ne of b.queue)yield ne(_),ne.onAbort&&k.push(ne.onAbort)}catch(ne){k.reverse();for(const Ce of k)try{Ce()}catch{}throw b.auth._errorFactory.create("login-blocked",{originalMessage:null==ne?void 0:ne.message})}})()}}class gi{constructor(_,b,k,ne){this.app=_,this.heartbeatServiceProvider=b,this.appCheckServiceProvider=k,this.config=ne,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ei(this),this.idTokenSubscription=new Ei(this),this.beforeStateQueue=new hr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=ne.sdkClientVersion}_initializeWithPersistence(_,b){var k=this;return b&&(this._popupRedirectResolver=Nr(b)),this._initializationPromise=this.queue((0,m.Z)(function*(){var ne,Ce;if(!k._deleted&&(k.persistenceManager=yield Qe.create(k,_),!k._deleted)){if(null!==(ne=k._popupRedirectResolver)&&void 0!==ne&&ne._shouldInitProactively)try{yield k._popupRedirectResolver._initialize(k)}catch{}yield k.initializeCurrentUser(b),k.lastNotifiedUid=(null===(Ce=k.currentUser)||void 0===Ce?void 0:Ce.uid)||null,!k._deleted&&(k._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,m.Z)(function*(){if(_._deleted)return;const b=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||b){if(_.currentUser&&b&&_.currentUser.uid===b.uid)return _._currentUser._assign(b),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(b,!0)}})()}initializeCurrentUser(_){var b=this;return(0,m.Z)(function*(){var k;const ne=yield b.assertedPersistence.getCurrentUser();let Ce=ne,bt=!1;if(_&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const Wt=null===(k=b.redirectUser)||void 0===k?void 0:k._redirectEventId,Rn=null==Ce?void 0:Ce._redirectEventId,Bn=yield b.tryRedirectSignIn(_);(!Wt||Wt===Rn)&&null!=Bn&&Bn.user&&(Ce=Bn.user,bt=!0)}if(!Ce)return b.directlySetCurrentUser(null);if(!Ce._redirectEventId){if(bt)try{yield b.beforeStateQueue.runMiddleware(Ce)}catch(Wt){Ce=ne,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(Wt))}return Ce?b.reloadAndSetCurrentUserOrClear(Ce):b.directlySetCurrentUser(null)}return ve(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===Ce._redirectEventId?b.directlySetCurrentUser(Ce):b.reloadAndSetCurrentUserOrClear(Ce)})()}tryRedirectSignIn(_){var b=this;return(0,m.Z)(function*(){let k=null;try{k=yield b._popupRedirectResolver._completeRedirectFn(b,_,!0)}catch{yield b._setRedirectUser(null)}return k})()}reloadAndSetCurrentUserOrClear(_){var b=this;return(0,m.Z)(function*(){try{yield mr(_)}catch(k){if("auth/network-request-failed"!==(null==k?void 0:k.code))return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function At(){if(typeof navigator>"u")return null;const x=navigator;return x.languages&&x.languages[0]||x.language||null}()}_delete(){var _=this;return(0,m.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var b=this;return(0,m.Z)(function*(){const k=_?(0,g.m9)(_):null;return k&&ve(k.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(k&&k._clone(b))})()}_updateCurrentUser(_,b=!1){var k=this;return(0,m.Z)(function*(){if(!k._deleted)return _&&ve(k.tenantId===_.tenantId,k,"tenant-id-mismatch"),b||(yield k.beforeStateQueue.runMiddleware(_)),k.queue((0,m.Z)(function*(){yield k.directlySetCurrentUser(_),k.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,m.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var b=this;return this.queue((0,m.Z)(function*(){yield b.assertedPersistence.setPersistence(Nr(_))}))}initializeRecaptchaConfig(){var _=this;return(0,m.Z)(function*(){const b=yield nn(_,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),k=new Mn(b);null==_.tenantId?_._agentRecaptchaConfig=k:_._tenantRecaptchaConfigs[_.tenantId]=k,k.emailPasswordEnabled&&new ps(_).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new g.LL("auth","Firebase",_())}onAuthStateChanged(_,b,k){return this.registerStateListener(this.authStateSubscription,_,b,k)}beforeAuthStateChanged(_,b){return this.beforeStateQueue.pushCallback(_,b)}onIdTokenChanged(_,b,k){return this.registerStateListener(this.idTokenSubscription,_,b,k)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,b){var k=this;return(0,m.Z)(function*(){const ne=yield k.getOrInitRedirectPersistenceManager(b);return null===_?ne.removeCurrentUser():ne.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var b=this;return(0,m.Z)(function*(){if(!b.redirectPersistenceManager){const k=_&&Nr(_)||b._popupRedirectResolver;ve(k,b,"argument-error"),b.redirectPersistenceManager=yield Qe.create(b,[Nr(k._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(_){var b=this;return(0,m.Z)(function*(){var k,ne;return b._isInitialized&&(yield b.queue((0,m.Z)(function*(){}))),(null===(k=b._currentUser)||void 0===k?void 0:k._redirectEventId)===_?b._currentUser:(null===(ne=b.redirectUser)||void 0===ne?void 0:ne._redirectEventId)===_?b.redirectUser:null})()}_persistUserIfCurrent(_){var b=this;return(0,m.Z)(function*(){if(_===b.currentUser)return b.queue((0,m.Z)(function*(){return b.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const k=null!==(b=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==k&&(this.lastNotifiedUid=k,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,b,k,ne){if(this._deleted)return()=>{};const Ce="function"==typeof b?b:b.next.bind(b),bt=this._isInitialized?Promise.resolve():this._initializationPromise;return ve(bt,this,"internal-error"),bt.then(()=>Ce(this.currentUser)),"function"==typeof b?_.addObserver(b,k,ne):_.addObserver(b)}directlySetCurrentUser(_){var b=this;return(0,m.Z)(function*(){b.currentUser&&b.currentUser!==_&&b._currentUser._stopProactiveRefresh(),_&&b.isProactiveRefreshEnabled&&_._startProactiveRefresh(),b.currentUser=_,_?yield b.assertedPersistence.setCurrentUser(_):yield b.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=kr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,m.Z)(function*(){var b;const k={"X-Client-Version":_.clientVersion};_.app.options.appId&&(k["X-Firebase-gmpid"]=_.app.options.appId);const ne=yield null===(b=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();ne&&(k["X-Firebase-Client"]=ne);const Ce=yield _._getAppCheckToken();return Ce&&(k["X-Firebase-AppCheck"]=Ce),k})()}_getAppCheckToken(){var _=this;return(0,m.Z)(function*(){var b;const k=yield null===(b=_.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getToken();return null!=k&&k.error&&function oe(x,..._){Se.logLevel<=Pe.in.WARN&&Se.warn(`Auth (${Y.SDK_VERSION}): ${x}`,..._)}(`Error while retrieving App Check token: ${k.error}`),null==k?void 0:k.token})()}}function Fr(x){return(0,g.m9)(x)}class Ei{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,g.ne)(b=>this.observer=b)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wr(x,_,b){const k=Fr(x);ve(k._canInitEmulator,k,"emulator-config-failed"),ve(/^https?:\/\//.test(_),k,"invalid-emulator-scheme");const ne=!(null==b||!b.disableWarnings),Ce=ae(_),{host:bt,port:Wt}=function xe(x){const _=ae(x),b=/(\/\/)?([^?#/]+)/.exec(x.substr(_.length));if(!b)return{host:"",port:null};const k=b[2].split("@").pop()||"",ne=/^(\[[^\]]+\])(:|$)/.exec(k);if(ne){const Ce=ne[1];return{host:Ce,port:Ze(k.substr(Ce.length+1))}}{const[Ce,bt]=k.split(":");return{host:Ce,port:Ze(bt)}}}(_);k.config.emulator={url:`${Ce}//${bt}${null===Wt?"":`:${Wt}`}/`},k.settings.appVerificationDisabledForTesting=!0,k.emulatorConfig=Object.freeze({host:bt,port:Wt,protocol:Ce.replace(":",""),options:Object.freeze({disableWarnings:ne})}),ne||function Te(){function x(){const _=document.createElement("p"),b=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",x):x())}()}function ae(x){const _=x.indexOf(":");return _<0?"":x.substr(0,_+1)}function Ze(x){if(!x)return null;const _=Number(x);return isNaN(_)?null:_}class tt{constructor(_,b){this.providerId=_,this.signInMethod=b}toJSON(){return It("not implemented")}_getIdTokenResponse(_){return It("not implemented")}_linkToIdToken(_,b){return It("not implemented")}_getReauthenticationResolver(_){return It("not implemented")}}function nt(x,_){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,m.Z)(function*(x,_){return Dt(x,"POST","/v1/accounts:resetPassword",_t(x,_))})).apply(this,arguments)}function $t(x,_){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,m.Z)(function*(x,_){return Dt(x,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function mn(){return(mn=(0,m.Z)(function*(x,_){return Dt(x,"POST","/v1/accounts:update",_t(x,_))})).apply(this,arguments)}function qn(x,_){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,m.Z)(function*(x,_){return ut(x,"POST","/v1/accounts:signInWithPassword",_t(x,_))})).apply(this,arguments)}function sr(x,_){return ji.apply(this,arguments)}function ji(){return(ji=(0,m.Z)(function*(x,_){return Dt(x,"POST","/v1/accounts:sendOobCode",_t(x,_))})).apply(this,arguments)}function ft(){return(ft=(0,m.Z)(function*(x,_){return sr(x,_)})).apply(this,arguments)}function st(x,_){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,m.Z)(function*(x,_){return sr(x,_)})).apply(this,arguments)}function qt(x,_){return en.apply(this,arguments)}function en(){return(en=(0,m.Z)(function*(x,_){return sr(x,_)})).apply(this,arguments)}function Yn(){return(Yn=(0,m.Z)(function*(x,_){return sr(x,_)})).apply(this,arguments)}function Qr(){return(Qr=(0,m.Z)(function*(x,_){return ut(x,"POST","/v1/accounts:signInWithEmailLink",_t(x,_))})).apply(this,arguments)}function ks(){return(ks=(0,m.Z)(function*(x,_){return ut(x,"POST","/v1/accounts:signInWithEmailLink",_t(x,_))})).apply(this,arguments)}class qr extends tt{constructor(_,b,k,ne=null){super("password",k),this._email=_,this._password=b,this._tenantId=ne}static _fromEmailAndPassword(_,b){return new qr(_,b,"password")}static _fromEmailAndCode(_,b,k=null){return new qr(_,b,"emailLink",k)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const b="string"==typeof _?JSON.parse(_):_;if(null!=b&&b.email&&null!=b&&b.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(_){var b=this;return(0,m.Z)(function*(){var k;switch(b.signInMethod){case"password":const ne={returnSecureToken:!0,email:b._email,password:b._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(k=_._getRecaptchaConfig())&&void 0!==k&&k.emailPasswordEnabled){const Ce=yield Oi(_,ne,"signInWithPassword");return qn(_,Ce)}return qn(_,ne).catch(function(){var Ce=(0,m.Z)(function*(bt){if("auth/missing-recaptcha-token"===bt.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Wt=yield Oi(_,ne,"signInWithPassword");return qn(_,Wt)}return Promise.reject(bt)});return function(bt){return Ce.apply(this,arguments)}}());case"emailLink":return function fr(x,_){return Qr.apply(this,arguments)}(_,{email:b._email,oobCode:b._password});default:Le(_,"internal-error")}})()}_linkToIdToken(_,b){var k=this;return(0,m.Z)(function*(){switch(k.signInMethod){case"password":return $t(_,{idToken:b,returnSecureToken:!0,email:k._email,password:k._password});case"emailLink":return function Cs(x,_){return ks.apply(this,arguments)}(_,{idToken:b,email:k._email,oobCode:k._password});default:Le(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function zr(x,_){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,m.Z)(function*(x,_){return ut(x,"POST","/v1/accounts:signInWithIdp",_t(x,_))})).apply(this,arguments)}class Ki extends tt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const b=new Ki(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(b.idToken=_.idToken),_.accessToken&&(b.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(b.nonce=_.nonce),_.pendingToken&&(b.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(b.accessToken=_.oauthToken,b.secret=_.oauthTokenSecret):Le("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const b="string"==typeof _?JSON.parse(_):_,{providerId:k,signInMethod:ne}=b,Ce=(0,ie._T)(b,["providerId","signInMethod"]);if(!k||!ne)return null;const bt=new Ki(k,ne);return bt.idToken=Ce.idToken||void 0,bt.accessToken=Ce.accessToken||void 0,bt.secret=Ce.secret,bt.nonce=Ce.nonce,bt.pendingToken=Ce.pendingToken||null,bt}_getIdTokenResponse(_){return zr(_,this.buildRequest())}_linkToIdToken(_,b){const k=this.buildRequest();return k.idToken=b,zr(_,k)}_getReauthenticationResolver(_){const b=this.buildRequest();return b.autoCreate=!1,zr(_,b)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),_.postBody=(0,g.xO)(b)}return _}}function Xs(){return(Xs=(0,m.Z)(function*(x,_){return Dt(x,"POST","/v1/accounts:sendVerificationCode",_t(x,_))})).apply(this,arguments)}function Vs(){return(Vs=(0,m.Z)(function*(x,_){return ut(x,"POST","/v1/accounts:signInWithPhoneNumber",_t(x,_))})).apply(this,arguments)}function ci(){return(ci=(0,m.Z)(function*(x,_){const b=yield ut(x,"POST","/v1/accounts:signInWithPhoneNumber",_t(x,_));if(b.temporaryProof)throw zn(x,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const xr={USER_NOT_FOUND:"user-not-found"};function pa(){return(pa=(0,m.Z)(function*(x,_){return ut(x,"POST","/v1/accounts:signInWithPhoneNumber",_t(x,Object.assign(Object.assign({},_),{operation:"REAUTH"})),xr)})).apply(this,arguments)}class xs extends tt{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,b){return new xs({verificationId:_,verificationCode:b})}static _fromTokenResponse(_,b){return new xs({phoneNumber:_,temporaryProof:b})}_getIdTokenResponse(_){return function _o(x,_){return Vs.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,b){return function Oo(x,_){return ci.apply(this,arguments)}(_,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function Ds(x,_){return pa.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:b,verificationId:k,verificationCode:ne}=this.params;return _&&b?{temporaryProof:_,phoneNumber:b}:{sessionInfo:k,code:ne}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:b,verificationCode:k,phoneNumber:ne,temporaryProof:Ce}=_;return k||b||ne||Ce?new xs({verificationId:b,verificationCode:k,phoneNumber:ne,temporaryProof:Ce}):null}}class Ts{constructor(_){var b,k,ne,Ce,bt,Wt;const Rn=(0,g.zd)((0,g.pd)(_)),Bn=null!==(b=Rn.apiKey)&&void 0!==b?b:null,gr=null!==(k=Rn.oobCode)&&void 0!==k?k:null,di=function qi(x){switch(x){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ne=Rn.mode)&&void 0!==ne?ne:null);ve(Bn&&gr&&di,"argument-error"),this.apiKey=Bn,this.operation=di,this.code=gr,this.continueUrl=null!==(Ce=Rn.continueUrl)&&void 0!==Ce?Ce:null,this.languageCode=null!==(bt=Rn.languageCode)&&void 0!==bt?bt:null,this.tenantId=null!==(Wt=Rn.tenantId)&&void 0!==Wt?Wt:null}static parseLink(_){const b=function Ba(x){const _=(0,g.zd)((0,g.pd)(x)).link,b=_?(0,g.zd)((0,g.pd)(_)).deep_link_id:null,k=(0,g.zd)((0,g.pd)(x)).deep_link_id;return(k?(0,g.zd)((0,g.pd)(k)).link:null)||k||b||_||x}(_);try{return new Ts(b)}catch{return null}}}let js=(()=>{class x{constructor(){this.providerId=x.PROVIDER_ID}static credential(b,k){return qr._fromEmailAndPassword(b,k)}static credentialWithLink(b,k){const ne=Ts.parseLink(k);return ve(ne,"argument-error"),qr._fromEmailAndCode(b,ne.code,ne.tenantId)}}return x.PROVIDER_ID="password",x.EMAIL_PASSWORD_SIGN_IN_METHOD="password",x.EMAIL_LINK_SIGN_IN_METHOD="emailLink",x})();class Qi{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class Ss extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class ui extends Ss{static credentialFromJSON(_){const b="string"==typeof _?JSON.parse(_):_;return ve("providerId"in b&&"signInMethod"in b,"argument-error"),Ki._fromParams(b)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return ve(_.idToken||_.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return ui.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return ui.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:k,oauthTokenSecret:ne,pendingToken:Ce,nonce:bt,providerId:Wt}=_;if(!k&&!ne&&!b&&!Ce||!Wt)return null;try{return new ui(Wt)._credential({idToken:b,accessToken:k,nonce:bt,pendingToken:Ce})}catch{return null}}}let Co=(()=>{class x extends Ss{constructor(){super("facebook.com")}static credential(b){return Ki._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return x.credentialFromTaggedObject(b)}static credentialFromError(b){return x.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return x.credential(b.oauthAccessToken)}catch{return null}}}return x.FACEBOOK_SIGN_IN_METHOD="facebook.com",x.PROVIDER_ID="facebook.com",x})(),Js=(()=>{class x extends Ss{constructor(){super("google.com"),this.addScope("profile")}static credential(b,k){return Ki._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:k})}static credentialFromResult(b){return x.credentialFromTaggedObject(b)}static credentialFromError(b){return x.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:k,oauthAccessToken:ne}=b;if(!k&&!ne)return null;try{return x.credential(k,ne)}catch{return null}}}return x.GOOGLE_SIGN_IN_METHOD="google.com",x.PROVIDER_ID="google.com",x})(),Do=(()=>{class x extends Ss{constructor(){super("github.com")}static credential(b){return Ki._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return x.credentialFromTaggedObject(b)}static credentialFromError(b){return x.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return x.credential(b.oauthAccessToken)}catch{return null}}}return x.GITHUB_SIGN_IN_METHOD="github.com",x.PROVIDER_ID="github.com",x})();class No extends tt{constructor(_,b){super(_,_),this.pendingToken=b}_getIdTokenResponse(_){return zr(_,this.buildRequest())}_linkToIdToken(_,b){const k=this.buildRequest();return k.idToken=b,zr(_,k)}_getReauthenticationResolver(_){const b=this.buildRequest();return b.autoCreate=!1,zr(_,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const b="string"==typeof _?JSON.parse(_):_,{providerId:k,signInMethod:ne,pendingToken:Ce}=b;return k&&ne&&Ce&&k===ne?new No(k,Ce):null}static _create(_,b){return new No(_,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class eo extends Qi{constructor(_){ve(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return eo.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return eo.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const b=No.fromJSON(_);return ve(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:b,providerId:k}=_;if(!b||!k)return null;try{return No._create(k,b)}catch{return null}}}let Vr=(()=>{class x extends Ss{constructor(){super("twitter.com")}static credential(b,k){return Ki._fromParams({providerId:x.PROVIDER_ID,signInMethod:x.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:k})}static credentialFromResult(b){return x.credentialFromTaggedObject(b)}static credentialFromError(b){return x.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:k,oauthTokenSecret:ne}=b;if(!k||!ne)return null;try{return x.credential(k,ne)}catch{return null}}}return x.TWITTER_SIGN_IN_METHOD="twitter.com",x.PROVIDER_ID="twitter.com",x})();function gs(x,_){return As.apply(this,arguments)}function As(){return(As=(0,m.Z)(function*(x,_){return ut(x,"POST","/v1/accounts:signUp",_t(x,_))})).apply(this,arguments)}class wi{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,b,k,ne=!1){return(0,m.Z)(function*(){const Ce=yield ei._fromIdTokenResponse(_,k,ne),bt=ws(k);return new wi({user:Ce,providerId:bt,_tokenResponse:k,operationType:b})})()}static _forOperation(_,b,k){return(0,m.Z)(function*(){yield _._updateTokensIfNecessary(k,!0);const ne=ws(k);return new wi({user:_,providerId:ne,_tokenResponse:k,operationType:b})})()}}function ws(x){return x.providerId?x.providerId:"phoneNumber"in x?"phone":null}function is(x){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,m.Z)(function*(x){var _;const b=Fr(x);if(yield b._initializationPromise,null!==(_=b.currentUser)&&void 0!==_&&_.isAnonymous)return new wi({user:b.currentUser,providerId:null,operationType:"signIn"});const k=yield gs(b,{returnSecureToken:!0}),ne=yield wi._fromIdTokenResponse(b,"signIn",k,!0);return yield b._updateCurrentUser(ne.user),ne})).apply(this,arguments)}class _s extends g.ZR{constructor(_,b,k,ne){var Ce;super(b.code,b.message),this.operationType=k,this.user=ne,Object.setPrototypeOf(this,_s.prototype),this.customData={appName:_.name,tenantId:null!==(Ce=_.tenantId)&&void 0!==Ce?Ce:void 0,_serverResponse:b.customData._serverResponse,operationType:k}}static _fromErrorAndOperation(_,b,k,ne){return new _s(_,b,k,ne)}}function ls(x,_,b,k){return("reauthenticate"===_?b._getReauthenticationResolver(x):b._getIdTokenResponse(x)).catch(Ce=>{throw"auth/multi-factor-auth-required"===Ce.code?_s._fromErrorAndOperation(x,Ce,_,k):Ce})}function Ms(x){return new Set(x.map(({providerId:_})=>_).filter(_=>!!_))}function ga(x,_){return oo.apply(this,arguments)}function oo(){return oo=(0,m.Z)(function*(x,_){const b=(0,g.m9)(x);yield A(!0,b,_);const{providerUserInfo:k}=yield function tn(x,_){return ir.apply(this,arguments)}(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[_]}),ne=Ms(k||[]);return b.providerData=b.providerData.filter(Ce=>ne.has(Ce.providerId)),ne.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b}),oo.apply(this,arguments)}function S(x,_){return Z.apply(this,arguments)}function Z(){return(Z=(0,m.Z)(function*(x,_,b=!1){const k=yield Qn(x,_._linkToIdToken(x.auth,yield x.getIdToken()),b);return wi._forOperation(x,"link",k)})).apply(this,arguments)}function A(x,_,b){return q.apply(this,arguments)}function q(){return(q=(0,m.Z)(function*(x,_,b){yield mr(_);const ne=!1===x?"provider-already-linked":"no-such-provider";ve(Ms(_.providerData).has(b)===x,_.auth,ne)})).apply(this,arguments)}function Ie(x,_){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,m.Z)(function*(x,_,b=!1){const{auth:k}=x,ne="reauthenticate";try{const Ce=yield Qn(x,ls(k,ne,_,x),b);ve(Ce.idToken,k,"internal-error");const bt=Ur(Ce.idToken);ve(bt,k,"internal-error");const{sub:Wt}=bt;return ve(x.uid===Wt,k,"user-mismatch"),wi._forOperation(x,ne,Ce)}catch(Ce){throw"auth/user-not-found"===(null==Ce?void 0:Ce.code)&&Le(k,"user-mismatch"),Ce}})).apply(this,arguments)}function $n(x,_){return er.apply(this,arguments)}function er(){return(er=(0,m.Z)(function*(x,_,b=!1){const k="signIn",ne=yield ls(x,k,_),Ce=yield wi._fromIdTokenResponse(x,k,ne);return b||(yield x._updateCurrentUser(Ce.user)),Ce})).apply(this,arguments)}function Tn(x,_){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,m.Z)(function*(x,_){return $n(Fr(x),_)})).apply(this,arguments)}function C(x,_){return I.apply(this,arguments)}function I(){return(I=(0,m.Z)(function*(x,_){const b=(0,g.m9)(x);return yield A(!1,b,_.providerId),S(b,_)})).apply(this,arguments)}function D(x,_){return V.apply(this,arguments)}function V(){return(V=(0,m.Z)(function*(x,_){return Ie((0,g.m9)(x),_)})).apply(this,arguments)}function ct(){return(ct=(0,m.Z)(function*(x,_){return ut(x,"POST","/v1/accounts:signInWithCustomToken",_t(x,_))})).apply(this,arguments)}function Gt(x,_){return pt.apply(this,arguments)}function pt(){return pt=(0,m.Z)(function*(x,_){const b=Fr(x),k=yield function _e(x,_){return ct.apply(this,arguments)}(b,{token:_,returnSecureToken:!0}),ne=yield wi._fromIdTokenResponse(b,"signIn",k);return yield b._updateCurrentUser(ne.user),ne}),pt.apply(this,arguments)}class St{constructor(_,b){this.factorId=_,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(_,b){return"phoneInfo"in b?Dr._fromServerResponse(_,b):"totpInfo"in b?Xr._fromServerResponse(_,b):Le(_,"internal-error")}}class Dr extends St{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,b){return new Dr(b)}}class Xr extends St{constructor(_){super("totp",_)}static _fromServerResponse(_,b){return new Xr(b)}}function ti(x,_,b){var k;ve((null===(k=b.url)||void 0===k?void 0:k.length)>0,x,"invalid-continue-uri"),ve(typeof b.dynamicLinkDomain>"u"||b.dynamicLinkDomain.length>0,x,"invalid-dynamic-link-domain"),_.continueUrl=b.url,_.dynamicLinkDomain=b.dynamicLinkDomain,_.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(ve(b.iOS.bundleId.length>0,x,"missing-ios-bundle-id"),_.iOSBundleId=b.iOS.bundleId),b.android&&(ve(b.android.packageName.length>0,x,"missing-android-pkg-name"),_.androidInstallApp=b.android.installApp,_.androidMinimumVersionCode=b.android.minimumVersion,_.androidPackageName=b.android.packageName)}function $r(x,_,b){return Bi.apply(this,arguments)}function Bi(){return Bi=(0,m.Z)(function*(x,_,b){var k;const ne=Fr(x),Ce={requestType:"PASSWORD_RESET",email:_,clientType:"CLIENT_TYPE_WEB"};if(null!==(k=ne._getRecaptchaConfig())&&void 0!==k&&k.emailPasswordEnabled){const bt=yield Oi(ne,Ce,"getOobCode",!0);b&&ti(ne,bt,b),yield st(ne,bt)}else b&&ti(ne,Ce,b),yield st(ne,Ce).catch(function(){var bt=(0,m.Z)(function*(Wt){if("auth/missing-recaptcha-token"!==Wt.code)return Promise.reject(Wt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Rn=yield Oi(ne,Ce,"getOobCode",!0);b&&ti(ne,Rn,b),yield st(ne,Rn)}});return function(Wt){return bt.apply(this,arguments)}}())}),Bi.apply(this,arguments)}function ki(x,_,b){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,m.Z)(function*(x,_,b){yield nt((0,g.m9)(x),{oobCode:_,newPassword:b})})).apply(this,arguments)}function es(x,_){return Hs.apply(this,arguments)}function Hs(){return Hs=(0,m.Z)(function*(x,_){yield function Jt(x,_){return mn.apply(this,arguments)}((0,g.m9)(x),{oobCode:_})}),Hs.apply(this,arguments)}function Hi(x,_){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,m.Z)(function*(x,_){const b=(0,g.m9)(x),k=yield nt(b,{oobCode:_}),ne=k.requestType;switch(ve(ne,b,"internal-error"),ne){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ve(k.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ve(k.mfaInfo,b,"internal-error");default:ve(k.email,b,"internal-error")}let Ce=null;return k.mfaInfo&&(Ce=St._fromServerResponse(Fr(b),k.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===k.requestType?k.newEmail:k.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===k.requestType?k.email:k.newEmail)||null,multiFactorInfo:Ce},operation:ne}})).apply(this,arguments)}function bi(x,_){return ss.apply(this,arguments)}function ss(){return(ss=(0,m.Z)(function*(x,_){const{data:b}=yield Hi((0,g.m9)(x),_);return b.email})).apply(this,arguments)}function cs(x,_,b){return to.apply(this,arguments)}function to(){return to=(0,m.Z)(function*(x,_,b){var k;const ne=Fr(x),Ce={returnSecureToken:!0,email:_,password:b,clientType:"CLIENT_TYPE_WEB"};let bt;if(null!==(k=ne._getRecaptchaConfig())&&void 0!==k&&k.emailPasswordEnabled){const Bn=yield Oi(ne,Ce,"signUpPassword");bt=gs(ne,Bn)}else bt=gs(ne,Ce).catch(function(){var Bn=(0,m.Z)(function*(gr){if("auth/missing-recaptcha-token"===gr.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const di=yield Oi(ne,Ce,"signUpPassword");return gs(ne,di)}return Promise.reject(gr)});return function(gr){return Bn.apply(this,arguments)}}());const Wt=yield bt.catch(Bn=>Promise.reject(Bn)),Rn=yield wi._fromIdTokenResponse(ne,"signIn",Wt);return yield ne._updateCurrentUser(Rn.user),Rn}),to.apply(this,arguments)}function Rs(x,_,b){return Tn((0,g.m9)(x),js.credential(_,b))}function ma(x,_,b){return Ta.apply(this,arguments)}function Ta(){return Ta=(0,m.Z)(function*(x,_,b){var k;const ne=Fr(x),Ce={requestType:"EMAIL_SIGNIN",email:_,clientType:"CLIENT_TYPE_WEB"};function bt(Wt,Rn){ve(Rn.handleCodeInApp,ne,"argument-error"),Rn&&ti(ne,Wt,Rn)}if(null!==(k=ne._getRecaptchaConfig())&&void 0!==k&&k.emailPasswordEnabled){const Wt=yield Oi(ne,Ce,"getOobCode",!0);bt(Wt,b),yield qt(ne,Wt)}else bt(Ce,b),yield qt(ne,Ce).catch(function(){var Wt=(0,m.Z)(function*(Rn){if("auth/missing-recaptcha-token"!==Rn.code)return Promise.reject(Rn);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Bn=yield Oi(ne,Ce,"getOobCode",!0);bt(Bn,b),yield qt(ne,Bn)}});return function(Rn){return Wt.apply(this,arguments)}}())}),Ta.apply(this,arguments)}function pl(x,_){const b=Ts.parseLink(_);return"EMAIL_SIGNIN"===(null==b?void 0:b.operation)}function gl(x,_,b){return vs.apply(this,arguments)}function vs(){return(vs=(0,m.Z)(function*(x,_,b){const k=(0,g.m9)(x),ne=js.credentialWithLink(_,b||lt());return ve(ne._tenantId===(k.tenantId||null),k,"tenant-id-mismatch"),Tn(k,ne)})).apply(this,arguments)}function ya(){return(ya=(0,m.Z)(function*(x,_){return Dt(x,"POST","/v1/accounts:createAuthUri",_t(x,_))})).apply(this,arguments)}function _a(x,_){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,m.Z)(function*(x,_){const k={identifier:_,continueUri:xt()?lt():"http://localhost"},{signinMethods:ne}=yield function Xo(x,_){return ya.apply(this,arguments)}((0,g.m9)(x),k);return ne||[]}),Sa.apply(this,arguments)}function va(x,_){return Jo.apply(this,arguments)}function Jo(){return Jo=(0,m.Z)(function*(x,_){const b=(0,g.m9)(x),ne={requestType:"VERIFY_EMAIL",idToken:yield x.getIdToken()};_&&ti(b.auth,ne,_);const{email:Ce}=yield function Zi(x,_){return ft.apply(this,arguments)}(b.auth,ne);Ce!==x.email&&(yield x.reload())}),Jo.apply(this,arguments)}function Xa(x,_,b){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,m.Z)(function*(x,_,b){const k=(0,g.m9)(x),Ce={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield x.getIdToken(),newEmail:_};b&&ti(k.auth,Ce,b);const{email:bt}=yield function or(x,_){return Yn.apply(this,arguments)}(k.auth,Ce);bt!==x.email&&(yield x.reload())}),Ea.apply(this,arguments)}function Wo(){return(Wo=(0,m.Z)(function*(x,_){return Dt(x,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function ml(x,_){return yl.apply(this,arguments)}function yl(){return yl=(0,m.Z)(function*(x,{displayName:_,photoURL:b}){if(void 0===_&&void 0===b)return;const k=(0,g.m9)(x),Ce={idToken:yield k.getIdToken(),displayName:_,photoUrl:b,returnSecureToken:!0},bt=yield Qn(k,function wa(x,_){return Wo.apply(this,arguments)}(k.auth,Ce));k.displayName=bt.displayName||null,k.photoURL=bt.photoUrl||null;const Wt=k.providerData.find(({providerId:Rn})=>"password"===Rn);Wt&&(Wt.displayName=k.displayName,Wt.photoURL=k.photoURL),yield k._updateTokensIfNecessary(bt)}),yl.apply(this,arguments)}function Kl(x,_){return Fo((0,g.m9)(x),_,null)}function zs(x,_){return Fo((0,g.m9)(x),null,_)}function Fo(x,_,b){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,m.Z)(function*(x,_,b){const{auth:k}=x,Ce={idToken:yield x.getIdToken(),returnSecureToken:!0};_&&(Ce.email=_),b&&(Ce.password=b);const bt=yield Qn(x,$t(k,Ce));yield x._updateTokensIfNecessary(bt,!0)})).apply(this,arguments)}class Gs{constructor(_,b,k={}){this.isNewUser=_,this.providerId=b,this.profile=k}}class ea extends Gs{constructor(_,b,k,ne){super(_,b,k),this.username=ne}}class ql extends Gs{constructor(_,b){super(_,"facebook.com",b)}}class To extends ea{constructor(_,b){super(_,"github.com",b,"string"==typeof(null==b?void 0:b.login)?null==b?void 0:b.login:null)}}class Ja extends Gs{constructor(_,b){super(_,"google.com",b)}}class Si extends ea{constructor(_,b,k){super(_,"twitter.com",b,k)}}function Aa(x){const{user:_,_tokenResponse:b}=x;return _.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function Ol(x){var _,b;if(!x)return null;const{providerId:k}=x,ne=x.rawUserInfo?JSON.parse(x.rawUserInfo):{},Ce=x.isNewUser||"identitytoolkit#SignupNewUserResponse"===x.kind;if(!k&&null!=x&&x.idToken){const bt=null===(b=null===(_=Ur(x.idToken))||void 0===_?void 0:_.firebase)||void 0===b?void 0:b.sign_in_provider;if(bt)return new Gs(Ce,"anonymous"!==bt&&"custom"!==bt?bt:null)}if(!k)return null;switch(k){case"facebook.com":return new ql(Ce,ne);case"github.com":return new To(Ce,ne);case"google.com":return new Ja(Ce,ne);case"twitter.com":return new Si(Ce,ne,x.screenName||null);case"custom":case"anonymous":return new Gs(Ce,null);default:return new Gs(Ce,k,ne)}}(b)}class jr{constructor(_,b,k){this.type=_,this.credential=b,this.auth=k}static _fromIdtoken(_,b){return new jr("enroll",_,b)}static _fromMfaPendingCredential(_){return new jr("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var b,k;if(null!=_&&_.multiFactorSession){if(null!==(b=_.multiFactorSession)&&void 0!==b&&b.pendingCredential)return jr._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(k=_.multiFactorSession)&&void 0!==k&&k.idToken)return jr._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Pr{constructor(_,b,k){this.session=_,this.hints=b,this.signInResolver=k}static _fromError(_,b){const k=Fr(_),ne=b.customData._serverResponse,Ce=(ne.mfaInfo||[]).map(Wt=>St._fromServerResponse(k,Wt));ve(ne.mfaPendingCredential,k,"internal-error");const bt=jr._fromMfaPendingCredential(ne.mfaPendingCredential);return new Pr(bt,Ce,function(){var Wt=(0,m.Z)(function*(Rn){const Bn=yield Rn._process(k,bt);delete ne.mfaInfo,delete ne.mfaPendingCredential;const gr=Object.assign(Object.assign({},ne),{idToken:Bn.idToken,refreshToken:Bn.refreshToken});switch(b.operationType){case"signIn":const di=yield wi._fromIdTokenResponse(k,b.operationType,gr);return yield k._updateCurrentUser(di.user),di;case"reauthenticate":return ve(b.user,k,"internal-error"),wi._forOperation(b.user,b.operationType,gr);default:Le(k,"internal-error")}});return function(Rn){return Wt.apply(this,arguments)}}())}resolveSignIn(_){var b=this;return(0,m.Z)(function*(){return b.signInResolver(_)})()}}function Mr(x,_){var b;const k=(0,g.m9)(x),ne=_;return ve(_.customData.operationType,k,"argument-error"),ve(null===(b=ne.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,k,"argument-error"),Pr._fromError(k,ne)}class Lo{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(k=>St._fromServerResponse(_.auth,k)))})}static _fromUser(_){return new Lo(_)}getSession(){var _=this;return(0,m.Z)(function*(){return jr._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,b){var k=this;return(0,m.Z)(function*(){const ne=_,Ce=yield k.getSession(),bt=yield Qn(k.user,ne._process(k.user.auth,Ce,b));return yield k.user._updateTokensIfNecessary(bt),k.user.reload()})()}unenroll(_){var b=this;return(0,m.Z)(function*(){const k="string"==typeof _?_:_.uid,ne=yield b.user.getIdToken();try{const Ce=yield Qn(b.user,function ao(x,_){return Dt(x,"POST","/v2/accounts/mfaEnrollment:withdraw",_t(x,_))}(b.user.auth,{idToken:ne,mfaEnrollmentId:k}));b.enrolledFactors=b.enrolledFactors.filter(({uid:bt})=>bt!==k),yield b.user._updateTokensIfNecessary(Ce),yield b.user.reload()}catch(Ce){throw Ce}})()}}const Ks=new WeakMap;function qs(x){const _=(0,g.m9)(x);return Ks.has(_)||Ks.set(_,Lo._fromUser(_)),Ks.get(_)}const Bo="__sak";class no{constructor(_,b){this.storageRetriever=_,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(Bo,"1"),this.storage.removeItem(Bo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,b){return this.storage.setItem(_,JSON.stringify(b)),Promise.resolve()}_get(_){const b=this.storage.getItem(_);return Promise.resolve(b?JSON.parse(b):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nl=(()=>{class x extends no{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,k)=>this.onStorageEvent(b,k),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function el(){const x=(0,g.z$)();return Ee(x)||rt(x)}()&&function Jn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_n(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const k of Object.keys(this.listeners)){const ne=this.storage.getItem(k),Ce=this.localCache[k];ne!==Ce&&b(k,Ce,ne)}}onStorageEvent(b,k=!1){if(!b.key)return void this.forAllChangedKeys((Wt,Rn,Bn)=>{this.notifyListeners(Wt,Bn)});const ne=b.key;if(k?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Wt=this.storage.getItem(ne);if(b.newValue!==Wt)null!==b.newValue?this.storage.setItem(ne,b.newValue):this.storage.removeItem(ne);else if(this.localCache[ne]===b.newValue&&!k)return}const Ce=()=>{const Wt=this.storage.getItem(ne);!k&&this.localCache[ne]===Wt||this.notifyListeners(ne,Wt)},bt=this.storage.getItem(ne);!function Dn(){return(0,g.w1)()&&10===document.documentMode}()||bt===b.newValue||b.newValue===b.oldValue?Ce():setTimeout(Ce,10)}notifyListeners(b,k){this.localCache[b]=k;const ne=this.listeners[b];if(ne)for(const Ce of Array.from(ne))Ce(k&&JSON.parse(k))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,k,ne)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:k,newValue:ne}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,k){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(k)}_removeListener(b,k){this.listeners[b]&&(this.listeners[b].delete(k),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,k){var ne=()=>super._set,Ce=this;return(0,m.Z)(function*(){yield ne().call(Ce,b,k),Ce.localCache[b]=JSON.stringify(k)})()}_get(b){var k=()=>super._get,ne=this;return(0,m.Z)(function*(){const Ce=yield k().call(ne,b);return ne.localCache[b]=JSON.stringify(Ce),Ce})()}_remove(b){var k=()=>super._remove,ne=this;return(0,m.Z)(function*(){yield k().call(ne,b),delete ne.localCache[b]})()}}return x.type="LOCAL",x})(),Eo=(()=>{class x extends no{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,k){}_removeListener(b,k){}}return x.type="SESSION",x})();let Yl=(()=>{class x{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const k=this.receivers.find(Ce=>Ce.isListeningto(b));if(k)return k;const ne=new x(b);return this.receivers.push(ne),ne}isListeningto(b){return this.eventTarget===b}handleEvent(b){var k=this;return(0,m.Z)(function*(){const ne=b,{eventId:Ce,eventType:bt,data:Wt}=ne.data,Rn=k.handlersMap[bt];if(null==Rn||!Rn.size)return;ne.ports[0].postMessage({status:"ack",eventId:Ce,eventType:bt});const Bn=Array.from(Rn).map(function(){var di=(0,m.Z)(function*(zo){return zo(ne.origin,Wt)});return function(zo){return di.apply(this,arguments)}}()),gr=yield function _l(x){return Promise.all(x.map(function(){var _=(0,m.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(k){return{fulfilled:!1,reason:k}}});return function(b){return _.apply(this,arguments)}}()))}(Bn);ne.ports[0].postMessage({status:"done",eventId:Ce,eventType:bt,response:gr})})()}_subscribe(b,k){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(k)}_unsubscribe(b,k){this.handlersMap[b]&&k&&this.handlersMap[b].delete(k),(!k||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return x.receivers=[],x})();function Os(x="",_=10){let b="";for(let k=0;k<_;k++)b+=Math.floor(10*Math.random());return x+b}class yn{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,b,k=50){var ne=this;return(0,m.Z)(function*(){const Ce=typeof MessageChannel<"u"?new MessageChannel:null;if(!Ce)throw new Error("connection_unavailable");let bt,Wt;return new Promise((Rn,Bn)=>{const gr=Os("",20);Ce.port1.start();const di=setTimeout(()=>{Bn(new Error("unsupported_event"))},k);Wt={messageChannel:Ce,onMessage(zo){const Dl=zo;if(Dl.data.eventId===gr)switch(Dl.data.status){case"ack":clearTimeout(di),bt=setTimeout(()=>{Bn(new Error("timeout"))},3e3);break;case"done":clearTimeout(bt),Rn(Dl.data.response);break;default:clearTimeout(di),clearTimeout(bt),Bn(new Error("invalid_response"))}}},ne.handlers.add(Wt),Ce.port1.addEventListener("message",Wt.onMessage),ne.target.postMessage({eventType:_,eventId:gr,data:b},[Ce.port2])}).finally(()=>{Wt&&ne.removeMessageHandler(Wt)})})()}}function ni(){return window}function Zl(){return typeof ni().WorkerGlobalScope<"u"&&"function"==typeof ni().importScripts}function dr(){return(dr=(0,m.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Lt="firebaseLocalStorageDb",an=1,br="firebaseLocalStorage",wc="fbase_key";class $o{constructor(_){this.request=_}toPromise(){return new Promise((_,b)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function Ql(x,_){return x.transaction([br],_?"readwrite":"readonly").objectStore(br)}function ba(){const x=indexedDB.open(Lt,an);return new Promise((_,b)=>{x.addEventListener("error",()=>{b(x.error)}),x.addEventListener("upgradeneeded",()=>{const k=x.result;try{k.createObjectStore(br,{keyPath:wc})}catch(ne){b(ne)}}),x.addEventListener("success",(0,m.Z)(function*(){const k=x.result;k.objectStoreNames.contains(br)?_(k):(k.close(),yield function $a(){const x=indexedDB.deleteDatabase(Lt);return new $o(x).toPromise()}(),_(yield ba()))}))})}function kl(x,_,b){return tl.apply(this,arguments)}function tl(){return(tl=(0,m.Z)(function*(x,_,b){const k=Ql(x,!0).put({[wc]:_,value:b});return new $o(k).toPromise()})).apply(this,arguments)}function Xl(){return(Xl=(0,m.Z)(function*(x,_){const b=Ql(x,!1).get(_),k=yield new $o(b).toPromise();return void 0===k?null:k.value})).apply(this,arguments)}function vl(x,_){const b=Ql(x,!0).delete(_);return new $o(b).toPromise()}const Ic=(()=>{class x{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,m.Z)(function*(){return b.db||(b.db=yield ba()),b.db})()}_withRetries(b){var k=this;return(0,m.Z)(function*(){let ne=0;for(;;)try{const Ce=yield k._openDb();return yield b(Ce)}catch(Ce){if(ne++>3)throw Ce;k.db&&(k.db.close(),k.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,m.Z)(function*(){return Zl()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,m.Z)(function*(){b.receiver=Yl._getInstance(function Un(){return Zl()?self:null}()),b.receiver._subscribe("keyChanged",function(){var k=(0,m.Z)(function*(ne,Ce){return{keyProcessed:(yield b._poll()).includes(Ce.key)}});return function(ne,Ce){return k.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var k=(0,m.Z)(function*(ne,Ce){return["keyChanged"]});return function(ne,Ce){return k.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,m.Z)(function*(){var k,ne;if(b.activeServiceWorker=yield function Zn(){return dr.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new yn(b.activeServiceWorker);const Ce=yield b.sender._send("ping",{},800);Ce&&null!==(k=Ce[0])&&void 0!==k&&k.fulfilled&&null!==(ne=Ce[0])&&void 0!==ne&&ne.value.includes("keyChanged")&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var k=this;return(0,m.Z)(function*(){if(k.sender&&k.activeServiceWorker&&function Ku(){var x;return(null===(x=null==navigator?void 0:navigator.serviceWorker)||void 0===x?void 0:x.controller)||null}()===k.activeServiceWorker)try{yield k.sender._send("keyChanged",{key:b},k.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const b=yield ba();return yield kl(b,Bo,"1"),yield vl(b,Bo),!0}catch{}return!1})()}_withPendingWrite(b){var k=this;return(0,m.Z)(function*(){k.pendingWrites++;try{yield b()}finally{k.pendingWrites--}})()}_set(b,k){var ne=this;return(0,m.Z)(function*(){return ne._withPendingWrite((0,m.Z)(function*(){return yield ne._withRetries(Ce=>kl(Ce,b,k)),ne.localCache[b]=k,ne.notifyServiceWorker(b)}))})()}_get(b){var k=this;return(0,m.Z)(function*(){const ne=yield k._withRetries(Ce=>function kd(x,_){return Xl.apply(this,arguments)}(Ce,b));return k.localCache[b]=ne,ne})()}_remove(b){var k=this;return(0,m.Z)(function*(){return k._withPendingWrite((0,m.Z)(function*(){return yield k._withRetries(ne=>vl(ne,b)),delete k.localCache[b],k.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,m.Z)(function*(){const k=yield b._withRetries(bt=>{const Wt=Ql(bt,!1).getAll();return new $o(Wt).toPromise()});if(!k)return[];if(0!==b.pendingWrites)return[];const ne=[],Ce=new Set;for(const{fbase_key:bt,value:Wt}of k)Ce.add(bt),JSON.stringify(b.localCache[bt])!==JSON.stringify(Wt)&&(b.notifyListeners(bt,Wt),ne.push(bt));for(const bt of Object.keys(b.localCache))b.localCache[bt]&&!Ce.has(bt)&&(b.notifyListeners(bt,null),ne.push(bt));return ne})()}notifyListeners(b,k){this.localCache[b]=k;const ne=this.listeners[b];if(ne)for(const Ce of Array.from(ne))Ce(k)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,k){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(k)}_removeListener(b,k){this.listeners[b]&&(this.listeners[b].delete(k),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return x.type="LOCAL",x})(),Is=1e12;class On{constructor(_){this.auth=_,this.counter=Is,this._widgets=new Map}render(_,b){const k=this.counter;return this._widgets.set(k,new qc(_,this.auth.name,b||{})),this.counter++,k}reset(_){var b;const k=_||Is;null===(b=this._widgets.get(k))||void 0===b||b.delete(),this._widgets.delete(k)}getResponse(_){var b;return(null===(b=this._widgets.get(_||Is))||void 0===b?void 0:b.getResponse())||""}execute(_){var b=this;return(0,m.Z)(function*(){var k;return null===(k=b._widgets.get(_||Is))||void 0===k||k.execute(),""})()}}class qc{constructor(_,b,k){this.params=k,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ne="string"==typeof _?document.getElementById(_):_;ve(ne,"argument-error",{appName:b}),this.container=ne,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jl(x){const _=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let k=0;k<x;k++)_.push(b.charAt(Math.floor(Math.random()*b.length)));return _.join("")}(50);const{callback:_,"expired-callback":b}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rl=lr("rcb"),Fd=new vt(3e4,6e4);class El{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=ni().grecaptcha)||void 0===_||!_.render)}load(_,b=""){return ve(function bc(x){return x.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(x)}(b),_,"argument-error"),this.shouldResolveImmediately(b)&&Kn(ni().grecaptcha)?Promise.resolve(ni().grecaptcha):new Promise((k,ne)=>{const Ce=ni().setTimeout(()=>{ne(Re(_,"network-request-failed"))},Fd.get());ni()[rl]=()=>{ni().clearTimeout(Ce),delete ni()[rl];const Wt=ni().grecaptcha;if(!Wt||!Kn(Wt))return void ne(Re(_,"internal-error"));const Rn=Wt.render;Wt.render=(Bn,gr)=>{const di=Rn(Bn,gr);return this.counter++,di},this.hostLanguage=b,k(Wt)},Er(`https://www.google.com/recaptcha/api.js??${(0,g.xO)({onload:rl,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(Ce),ne(Re(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var b;return!(null===(b=ni().grecaptcha)||void 0===b||!b.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Cc{load(_){return(0,m.Z)(function*(){return new On(_)})()}clearedOneInstance(){}}const Fs="recaptcha",co={theme:"light",type:"image"};class Ua{constructor(_,b=Object.assign({},co),k){this.parameters=b,this.type=Fs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fr(k),this.isInvisible="invisible"===this.parameters.size,ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const ne="string"==typeof _?document.getElementById(_):_;ve(ne,this.auth,"argument-error"),this.container=ne,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Cc:new El,this.validateStartingState()}verify(){var _=this;return(0,m.Z)(function*(){_.assertNotDestroyed();const b=yield _.render(),k=_.getAssertedRecaptcha();return k.getResponse(b)||new Promise(Ce=>{const bt=Wt=>{Wt&&(_.tokenChangeListeners.delete(bt),Ce(Wt))};_.tokenChangeListeners.add(bt),_.isInvisible&&k.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return b=>{if(this.tokenChangeListeners.forEach(k=>k(b)),"function"==typeof _)_(b);else if("string"==typeof _){const k=ni()[_];"function"==typeof k&&k(b)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,m.Z)(function*(){if(yield _.init(),!_.widgetId){let b=_.container;if(!_.isInvisible){const k=document.createElement("div");b.appendChild(k),b=k}_.widgetId=_.getAssertedRecaptcha().render(b,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,m.Z)(function*(){ve(xt()&&!Zl(),_.auth,"internal-error"),yield function Dc(){let x=null;return new Promise(_=>{"complete"!==document.readyState?(x=()=>_(),window.addEventListener("load",x)):_()}).catch(_=>{throw x&&window.removeEventListener("load",x),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const b=yield function kt(x){return Mt.apply(this,arguments)}(_.auth);ve(b,_.auth,"internal-error"),_.parameters.sitekey=b})()}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Uo{constructor(_,b){this.verificationId=_,this.onConfirmation=b}confirm(_){const b=xs._fromVerification(this.verificationId,_);return this.onConfirmation(b)}}function R(x,_,b){return O.apply(this,arguments)}function O(){return(O=(0,m.Z)(function*(x,_,b){const k=Fr(x),ne=yield pe(k,_,(0,g.m9)(b));return new Uo(ne,Ce=>Tn(k,Ce))})).apply(this,arguments)}function w(x,_,b){return B.apply(this,arguments)}function B(){return(B=(0,m.Z)(function*(x,_,b){const k=(0,g.m9)(x);yield A(!1,k,"phone");const ne=yield pe(k.auth,_,(0,g.m9)(b));return new Uo(ne,Ce=>C(k,Ce))})).apply(this,arguments)}function W(x,_,b){return le.apply(this,arguments)}function le(){return(le=(0,m.Z)(function*(x,_,b){const k=(0,g.m9)(x),ne=yield pe(k.auth,_,(0,g.m9)(b));return new Uo(ne,Ce=>D(k,Ce))})).apply(this,arguments)}function pe(x,_,b){return dt.apply(this,arguments)}function dt(){return dt=(0,m.Z)(function*(x,_,b){var k;const ne=yield b.verify();try{let Ce;if(ve("string"==typeof ne,x,"argument-error"),ve(b.type===Fs,x,"argument-error"),Ce="string"==typeof _?{phoneNumber:_}:_,"session"in Ce){const bt=Ce.session;if("phoneNumber"in Ce)return ve("enroll"===bt.type,x,"internal-error"),(yield function os(x,_){return Dt(x,"POST","/v2/accounts/mfaEnrollment:start",_t(x,_))}(x,{idToken:bt.credential,phoneEnrollmentInfo:{phoneNumber:Ce.phoneNumber,recaptchaToken:ne}})).phoneSessionInfo.sessionInfo;{ve("signin"===bt.type,x,"internal-error");const Wt=(null===(k=Ce.multiFactorHint)||void 0===k?void 0:k.uid)||Ce.multiFactorUid;return ve(Wt,x,"missing-multi-factor-info"),(yield function us(x,_){return Dt(x,"POST","/v2/accounts/mfaSignIn:start",_t(x,_))}(x,{mfaPendingCredential:bt.credential,mfaEnrollmentId:Wt,phoneSignInInfo:{recaptchaToken:ne}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:bt}=yield function Ni(x,_){return Xs.apply(this,arguments)}(x,{phoneNumber:Ce.phoneNumber,recaptchaToken:ne});return bt}}finally{b._reset()}}),dt.apply(this,arguments)}function Ut(x,_){return pn.apply(this,arguments)}function pn(){return(pn=(0,m.Z)(function*(x,_){yield S((0,g.m9)(x),_)})).apply(this,arguments)}let Wn=(()=>{class x{constructor(b){this.providerId=x.PROVIDER_ID,this.auth=Fr(b)}verifyPhoneNumber(b,k){return pe(this.auth,b,(0,g.m9)(k))}static credential(b,k){return xs._fromVerification(b,k)}static credentialFromResult(b){return x.credentialFromTaggedObject(b)}static credentialFromError(b){return x.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:k,temporaryProof:ne}=b;return k&&ne?xs._fromTokenResponse(k,ne):null}}return x.PROVIDER_ID="phone",x.PHONE_SIGN_IN_METHOD="phone",x})();function Vn(x,_){return _?Nr(_):(ve(x._popupRedirectResolver,x,"argument-error"),x._popupRedirectResolver)}class zi extends tt{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return zr(_,this._buildIdpRequest())}_linkToIdToken(_,b){return zr(_,this._buildIdpRequest(b))}_getReauthenticationResolver(_){return zr(_,this._buildIdpRequest())}_buildIdpRequest(_){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(b.idToken=_),b}}function Ui(x){return $n(x.auth,new zi(x),x.bypassAuthState)}function Ji(x){const{auth:_,user:b}=x;return ve(b,_,"internal-error"),Ie(b,new zi(x),x.bypassAuthState)}function wo(x){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,m.Z)(function*(x){const{auth:_,user:b}=x;return ve(b,_,"internal-error"),S(b,new zi(x),x.bypassAuthState)})).apply(this,arguments)}class ua{constructor(_,b,k,ne,Ce=!1){this.auth=_,this.resolver=k,this.user=ne,this.bypassAuthState=Ce,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var _=this;return new Promise(function(){var b=(0,m.Z)(function*(k,ne){_.pendingPromise={resolve:k,reject:ne};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(Ce){_.reject(Ce)}});return function(k,ne){return b.apply(this,arguments)}}())}onAuthEvent(_){var b=this;return(0,m.Z)(function*(){const{urlResponse:k,sessionId:ne,postBody:Ce,tenantId:bt,error:Wt,type:Rn}=_;if(Wt)return void b.reject(Wt);const Bn={auth:b.auth,requestUri:k,sessionId:ne,tenantId:bt||void 0,postBody:Ce||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(Rn)(Bn))}catch(gr){b.reject(gr)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return Ui;case"linkViaPopup":case"linkViaRedirect":return wo;case"reauthViaPopup":case"reauthViaRedirect":return Ji;default:Le(this.auth,"internal-error")}}resolve(_){ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ls=new vt(2e3,1e4);function Ko(x,_,b){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,m.Z)(function*(x,_,b){const k=Fr(x);mt(x,_,Qi);const ne=Vn(k,b);return new qu(k,"signInViaPopup",_,ne).executeNotNull()})).apply(this,arguments)}function da(x,_,b){return ta.apply(this,arguments)}function ta(){return(ta=(0,m.Z)(function*(x,_,b){const k=(0,g.m9)(x);mt(k.auth,_,Qi);const ne=Vn(k.auth,b);return new qu(k.auth,"reauthViaPopup",_,ne,k).executeNotNull()})).apply(this,arguments)}function wl(x,_,b){return ec.apply(this,arguments)}function ec(){return(ec=(0,m.Z)(function*(x,_,b){const k=(0,g.m9)(x);mt(k.auth,_,Qi);const ne=Vn(k.auth,b);return new qu(k.auth,"linkViaPopup",_,ne,k).executeNotNull()})).apply(this,arguments)}let qu=(()=>{class x extends ua{constructor(b,k,ne,Ce,bt){super(b,k,Ce,bt),this.provider=ne,this.authWindow=null,this.pollId=null,x.currentPopupAction&&x.currentPopupAction.cancel(),x.currentPopupAction=this}executeNotNull(){var b=this;return(0,m.Z)(function*(){const k=yield b.execute();return ve(k,b.auth,"internal-error"),k})()}onExecution(){var b=this;return(0,m.Z)(function*(){ze(1===b.filter.length,"Popup operations only handle one event");const k=Os();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],k),b.authWindow.associatedEvent=k,b.resolver._originValidation(b.auth).catch(ne=>{b.reject(ne)}),b.resolver._isIframeWebStorageSupported(b.auth,ne=>{ne||b.reject(Re(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,x.currentPopupAction=null}pollUserCancellation(){const b=()=>{var k,ne;this.pollId=null!==(ne=null===(k=this.authWindow)||void 0===k?void 0:k.window)&&void 0!==ne&&ne.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(b,Ls.get())};b()}}return x.currentPopupAction=null,x})();const Ld="pendingRedirect",ha=new Map;class fu extends ua{constructor(_,b,k=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,k),this.eventId=null}execute(){var _=()=>super.execute,b=this;return(0,m.Z)(function*(){let k=ha.get(b.auth._key());if(!k){try{const Ce=(yield function bh(x,_){return tc.apply(this,arguments)}(b.resolver,b.auth))?yield _().call(b):null;k=()=>Promise.resolve(Ce)}catch(ne){k=()=>Promise.reject(ne)}ha.set(b.auth._key(),k)}return b.bypassAuthState||ha.set(b.auth._key(),()=>Promise.resolve(null)),k()})()}onAuthEvent(_){var b=()=>super.onAuthEvent,k=this;return(0,m.Z)(function*(){if("signInViaRedirect"===_.type)return b().call(k,_);if("unknown"!==_.type){if(_.eventId){const ne=yield k.auth._redirectUserForId(_.eventId);if(ne)return k.user=ne,b().call(k,_);k.resolve(null)}}else k.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function tc(){return(tc=(0,m.Z)(function*(x,_){const b=Yu(_),k=$d(x);if(!(yield k._isAvailable()))return!1;const ne="true"===(yield k._get(b));return yield k._remove(b),ne})).apply(this,arguments)}function Zc(x,_){return nc.apply(this,arguments)}function nc(){return(nc=(0,m.Z)(function*(x,_){return $d(x)._set(Yu(_),"true")})).apply(this,arguments)}function Il(){ha.clear()}function Bd(x,_){ha.set(x._key(),_)}function $d(x){return Nr(x._redirectPersistence)}function Yu(x){return Kr(Ld,x.config.apiKey,x.name)}function Tc(x,_,b){return function pu(x,_,b){return Qc.apply(this,arguments)}(x,_,b)}function Qc(){return(Qc=(0,m.Z)(function*(x,_,b){const k=Fr(x);mt(x,_,Qi),yield k._initializationPromise;const ne=Vn(k,b);return yield Zc(ne,k),ne._openRedirect(k,_,"signInViaRedirect")})).apply(this,arguments)}function gu(x,_,b){return function Zu(x,_,b){return rc.apply(this,arguments)}(x,_,b)}function rc(){return(rc=(0,m.Z)(function*(x,_,b){const k=(0,g.m9)(x);mt(k.auth,_,Qi),yield k.auth._initializationPromise;const ne=Vn(k.auth,b);yield Zc(ne,k.auth);const Ce=yield ms(k);return ne._openRedirect(k.auth,_,"reauthViaRedirect",Ce)})).apply(this,arguments)}function ic(x,_,b){return function Ch(x,_,b){return Xc.apply(this,arguments)}(x,_,b)}function Xc(){return(Xc=(0,m.Z)(function*(x,_,b){const k=(0,g.m9)(x);mt(k.auth,_,Qi),yield k.auth._initializationPromise;const ne=Vn(k.auth,b);yield A(!1,k,_.providerId),yield Zc(ne,k.auth);const Ce=yield ms(k);return ne._openRedirect(k.auth,_,"linkViaRedirect",Ce)})).apply(this,arguments)}function Vo(x,_){return sc.apply(this,arguments)}function sc(){return(sc=(0,m.Z)(function*(x,_){return yield Fr(x)._initializationPromise,Ra(x,_,!1)})).apply(this,arguments)}function Ra(x,_){return mu.apply(this,arguments)}function mu(){return(mu=(0,m.Z)(function*(x,_,b=!1){const k=Fr(x),ne=Vn(k,_),bt=yield new fu(k,ne,b).execute();return bt&&!b&&(delete bt.user._redirectEventId,yield k._persistUserIfCurrent(bt.user),yield k._setRedirectUser(null,_)),bt})).apply(this,arguments)}function ms(x){return il.apply(this,arguments)}function il(){return(il=(0,m.Z)(function*(x){const _=Os(`${x.uid}:::`);return x._redirectEventId=_,yield x.auth._setRedirectUser(x),yield x.auth._persistUserIfCurrent(x),_})).apply(this,arguments)}class ys{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let b=!1;return this.consumers.forEach(k=>{this.isEventForConsumer(_,k)&&(b=!0,this.sendToConsumer(_,k),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function jo(x){switch(x.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sl(x);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=_,b=!0)),b}sendToConsumer(_,b){var k;if(_.error&&!sl(_)){const ne=(null===(k=_.error.code)||void 0===k?void 0:k.split("auth/")[1])||"internal-error";b.onError(Re(this.auth,ne))}else b.onAuthEvent(_)}isEventForConsumer(_,b){const k=null===b.eventId||!!_.eventId&&_.eventId===b.eventId;return b.filter.includes(_.type)&&k}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bl(_))}saveEventToCache(_){this.cachedEventUids.add(bl(_)),this.lastProcessedEventTime=Date.now()}}function bl(x){return[x.type,x.eventId,x.sessionId,x.tenantId].filter(_=>_).join("-")}function sl({type:x,error:_}){return"unknown"===x&&"auth/no-auth-event"===(null==_?void 0:_.code)}function oc(x){return ac.apply(this,arguments)}function ac(){return(ac=(0,m.Z)(function*(x,_={}){return Dt(x,"GET","/v1/projects",_)})).apply(this,arguments)}const Io=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dh=/^https?/;function hs(){return(hs=(0,m.Z)(function*(x){if(x.config.emulator)return;const{authorizedDomains:_}=yield oc(x);for(const b of _)try{if(qo(b))return}catch{}Le(x,"unauthorized-domain")})).apply(this,arguments)}function qo(x){const _=lt(),{protocol:b,hostname:k}=new URL(_);if(x.startsWith("chrome-extension://")){const bt=new URL(x);return""===bt.hostname&&""===k?"chrome-extension:"===b&&x.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===b&&bt.hostname===k}if(!Dh.test(b))return!1;if(Io.test(x))return k===x;const ne=x.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ne+"|"+ne+")$","i").test(k)}const Sc=new vt(3e4,6e4);function ol(){const x=ni().___jsl;if(null!=x&&x.H)for(const _ of Object.keys(x.H))if(x.H[_].r=x.H[_].r||[],x.H[_].L=x.H[_].L||[],x.H[_].r=[...x.H[_].L],x.CP)for(let b=0;b<x.CP.length;b++)x.CP[b]=null}let al=null;const fa=new vt(5e3,15e3),lc="__/auth/iframe",xa="emulator/auth/iframe",Pa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oa(x){const _=x.config;ve(_.authDomain,x,"auth-domain-config-required");const b=_.emulator?Ke(_,xa):`https://${x.config.authDomain}/${lc}`,k={apiKey:_.apiKey,appName:x.name,v:Y.SDK_VERSION},ne=Jc.get(x.config.apiHost);ne&&(k.eid=ne);const Ce=x._getFrameworks();return Ce.length&&(k.fw=Ce.join(",")),`${b}?${(0,g.xO)(k).slice(1)}`}function P(){return P=(0,m.Z)(function*(x){const _=yield function Ll(x){return al=al||function Yo(x){return new Promise((_,b)=>{var k,ne,Ce;function bt(){ol(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{ol(),b(Re(x,"network-request-failed"))},timeout:Sc.get()})}if(null!==(ne=null===(k=ni().gapi)||void 0===k?void 0:k.iframes)&&void 0!==ne&&ne.Iframe)_(gapi.iframes.getContext());else{if(null===(Ce=ni().gapi)||void 0===Ce||!Ce.load){const Wt=lr("iframefcb");return ni()[Wt]=()=>{gapi.load?bt():b(Re(x,"network-request-failed"))},Er(`https://apis.google.com/js/api.js?onload=${Wt}`).catch(Rn=>b(Rn))}bt()}}).catch(_=>{throw al=null,_})}(x),al}(x),b=ni().gapi;return ve(b,x,"internal-error"),_.open({where:document.body,url:Oa(x),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pa,dontclear:!0},k=>new Promise(function(){var ne=(0,m.Z)(function*(Ce,bt){yield k.restyle({setHideOnLeave:!1});const Wt=Re(x,"network-request-failed"),Rn=ni().setTimeout(()=>{bt(Wt)},fa.get());function Bn(){ni().clearTimeout(Rn),Ce(k)}k.ping(Bn).then(Bn,()=>{bt(Wt)})});return function(Ce,bt){return ne.apply(this,arguments)}}()))}),P.apply(this,arguments)}const j={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J=500,ke=600,ht="_blank",Ct="http://localhost";class jt{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ar="__/auth/handler",Wr="emulator/auth/handler",ri=encodeURIComponent("fac");function bs(x,_,b,k,ne,Ce){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,m.Z)(function*(x,_,b,k,ne,Ce){ve(x.config.authDomain,x,"auth-domain-config-required"),ve(x.config.apiKey,x,"invalid-api-key");const bt={apiKey:x.config.apiKey,appName:x.name,authType:b,redirectUrl:k,v:Y.SDK_VERSION,eventId:ne};if(_ instanceof Qi){_.setDefaultLanguage(x.languageCode),bt.providerId=_.providerId||"",(0,g.xb)(_.getCustomParameters())||(bt.customParameters=JSON.stringify(_.getCustomParameters()));for(const[gr,di]of Object.entries(Ce||{}))bt[gr]=di}if(_ instanceof Ss){const gr=_.getScopes().filter(di=>""!==di);gr.length>0&&(bt.scopes=gr.join(","))}x.tenantId&&(bt.tid=x.tenantId);const Wt=bt;for(const gr of Object.keys(Wt))void 0===Wt[gr]&&delete Wt[gr];const Rn=yield x._getAppCheckToken(),Bn=Rn?`#${ri}=${encodeURIComponent(Rn)}`:"";return`${function eu({config:x}){return x.emulator?Ke(x,Wr):`https://${x.authDomain}/${ar}`}(x)}?${(0,g.xO)(Wt).slice(1)}${Bn}`})).apply(this,arguments)}const $s="webStorageSupport",Vi=class Ac{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Eo,this._completeRedirectFn=Ra,this._overrideRedirectResult=Bd}_openPopup(_,b,k,ne){var Ce=this;return(0,m.Z)(function*(){var bt;ze(null===(bt=Ce.eventManagers[_._key()])||void 0===bt?void 0:bt.manager,"_initialize() not called before _openPopup()");const Wt=yield bs(_,b,k,lt(),ne);return function In(x,_,b,k=J,ne=ke){const Ce=Math.max((window.screen.availHeight-ne)/2,0).toString(),bt=Math.max((window.screen.availWidth-k)/2,0).toString();let Wt="";const Rn=Object.assign(Object.assign({},j),{width:k.toString(),height:ne.toString(),top:Ce,left:bt}),Bn=(0,g.z$)().toLowerCase();b&&(Wt=ue(Bn)?ht:b),ce(Bn)&&(_=_||Ct,Rn.scrollbars="yes");const gr=Object.entries(Rn).reduce((zo,[Dl,Rc])=>`${zo}${Dl}=${Rc},`,"");if(function Yt(x=(0,g.z$)()){var _;return rt(x)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(Bn)&&"_self"!==Wt)return function Nn(x,_){const b=document.createElement("a");b.href=x,b.target=_;const k=document.createEvent("MouseEvent");k.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(k)}(_||"",Wt),new jt(null);const di=window.open(_||"",Wt,gr);ve(di,x,"popup-blocked");try{di.focus()}catch{}return new jt(di)}(_,Wt,Os())})()}_openRedirect(_,b,k,ne){var Ce=this;return(0,m.Z)(function*(){return yield Ce._originValidation(_),function lo(x){ni().location.href=x}(yield bs(_,b,k,lt(),ne)),new Promise(()=>{})})()}_initialize(_){const b=_._key();if(this.eventManagers[b]){const{manager:ne,promise:Ce}=this.eventManagers[b];return ne?Promise.resolve(ne):(ze(Ce,"If manager is not set, promise should be"),Ce)}const k=this.initAndGetManager(_);return this.eventManagers[b]={promise:k},k.catch(()=>{delete this.eventManagers[b]}),k}initAndGetManager(_){var b=this;return(0,m.Z)(function*(){const k=yield function Va(x){return P.apply(this,arguments)}(_),ne=new ys(_);return k.register("authEvent",Ce=>(ve(null==Ce?void 0:Ce.authEvent,_,"invalid-auth-event"),{status:ne.onEvent(Ce.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[_._key()]={manager:ne},b.iframes[_._key()]=k,ne})()}_isIframeWebStorageSupported(_,b){this.iframes[_._key()].send($s,{type:$s},ne=>{var Ce;const bt=null===(Ce=null==ne?void 0:ne[0])||void 0===Ce?void 0:Ce[$s];void 0!==bt&&b(!!bt),Le(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const b=_._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function Cl(x){return hs.apply(this,arguments)}(_)),this.originValidationPromises[b]}get _shouldInitProactively(){return _n()||Ee()||rt()}};class Ho{constructor(_){this.factorId=_}_process(_,b,k){switch(b.type){case"enroll":return this._finalizeEnroll(_,b.credential,k);case"signin":return this._finalizeSignIn(_,b.credential);default:return It("unexpected MultiFactorSessionType")}}}class Bl extends Ho{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new Bl(_)}_finalizeEnroll(_,b,k){return function yr(x,_){return Dt(x,"POST","/v2/accounts/mfaEnrollment:finalize",_t(x,_))}(_,{idToken:b,displayName:k,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,b){return function tr(x,_){return Dt(x,"POST","/v2/accounts/mfaSignIn:finalize",_t(x,_))}(_,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yu=(()=>{class x{constructor(){}static assertion(b){return Bl._fromCredential(b)}}return x.FACTOR_ID="phone",x})();var Yi="@firebase/auth";class Ul{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var b=this;return(0,m.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const b=this.auth.onIdTokenChanged(k=>{_((null==k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,b),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const b=this.internalListeners.get(_);b&&(this.internalListeners.delete(_),b(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,g.Pz)("authIdTokenMaxAge"),function Sh(x){(0,Y._registerComponent)(new Ae.wA("auth",(_,{options:b})=>{const k=_.getProvider("app").getImmediate(),ne=_.getProvider("heartbeat"),Ce=_.getProvider("app-check-internal"),{apiKey:bt,authDomain:Wt}=k.options;ve(bt&&!bt.includes(":"),"invalid-api-key",{appName:k.name}),ve(!(null!=Wt&&Wt.includes(":")),"argument-error",{appName:k.name});const Rn={apiKey:bt,authDomain:Wt,clientPlatform:x,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kr(x)},Bn=new gi(k,ne,Ce,Rn);return function Wi(x,_){const b=(null==_?void 0:_.persistence)||[],k=(Array.isArray(b)?b:[b]).map(Nr);null!=_&&_.errorMap&&x._updateErrorMap(_.errorMap),x._initializeWithPersistence(k,null==_?void 0:_.popupRedirectResolver)}(Bn,b),Bn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,b,k)=>{_.getProvider("auth-internal").initialize()})),(0,Y._registerComponent)(new Ae.wA("auth-internal",_=>{const b=Fr(_.getProvider("auth").getImmediate());return new Ul(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Y.registerVersion)(Yi,"0.23.1",function Qu(x){switch(x){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(x)),(0,Y.registerVersion)(Yi,"0.23.1","esm2017")}("Browser")},2090:(cn,at,$)=>{"use strict";$.d(at,{$s:()=>Nr,BH:()=>Je,DV:()=>ir,Dv:()=>mr,G6:()=>Ke,GJ:()=>wn,L:()=>Fe,LL:()=>zt,Pz:()=>Re,Sg:()=>mt,UG:()=>It,UI:()=>jn,US:()=>Ae,Wj:()=>ii,Wl:()=>Ot,Yr:()=>vt,ZB:()=>be,ZR:()=>Dt,aH:()=>Le,b$:()=>xt,cI:()=>ut,dS:()=>vi,eu:()=>We,g5:()=>Y,gK:()=>_i,gQ:()=>Tr,h$:()=>de,hl:()=>qe,hu:()=>g,jU:()=>ze,lb:()=>Gn,m9:()=>Kr,ne:()=>Qn,p$:()=>he,pd:()=>Ur,r3:()=>tn,ru:()=>lt,tV:()=>De,uI:()=>ve,ug:()=>rr,vZ:()=>fn,w1:()=>Be,w9:()=>hn,xO:()=>Cr,xb:()=>Qt,z$:()=>Ye,zI:()=>Q,zd:()=>Hr});const m={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},g=function(Qe,He){if(!Qe)throw Y(He)},Y=function(Qe){return new Error("Firebase Database ("+m.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Qe)},ie=function(Qe){const He=[];let ce=0;for(let Ee=0;Ee<Qe.length;Ee++){let ue=Qe.charCodeAt(Ee);ue<128?He[ce++]=ue:ue<2048?(He[ce++]=ue>>6|192,He[ce++]=63&ue|128):55296==(64512&ue)&&Ee+1<Qe.length&&56320==(64512&Qe.charCodeAt(Ee+1))?(ue=65536+((1023&ue)<<10)+(1023&Qe.charCodeAt(++Ee)),He[ce++]=ue>>18|240,He[ce++]=ue>>12&63|128,He[ce++]=ue>>6&63|128,He[ce++]=63&ue|128):(He[ce++]=ue>>12|224,He[ce++]=ue>>6&63|128,He[ce++]=63&ue|128)}return He},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Qe,He){if(!Array.isArray(Qe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ce=He?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let ue=0;ue<Qe.length;ue+=3){const ot=Qe[ue],Oe=ue+1<Qe.length,Ve=Oe?Qe[ue+1]:0,we=ue+2<Qe.length,rt=we?Qe[ue+2]:0;let Dn=(15&Ve)<<2|rt>>6,_n=63&rt;we||(_n=64,Oe||(Dn=64)),Ee.push(ce[ot>>2],ce[(3&ot)<<4|Ve>>4],ce[Dn],ce[_n])}return Ee.join("")},encodeString(Qe,He){return this.HAS_NATIVE_SUPPORT&&!He?btoa(Qe):this.encodeByteArray(ie(Qe),He)},decodeString(Qe,He){return this.HAS_NATIVE_SUPPORT&&!He?atob(Qe):function(Qe){const He=[];let ce=0,Ee=0;for(;ce<Qe.length;){const ue=Qe[ce++];if(ue<128)He[Ee++]=String.fromCharCode(ue);else if(ue>191&&ue<224){const ot=Qe[ce++];He[Ee++]=String.fromCharCode((31&ue)<<6|63&ot)}else if(ue>239&&ue<365){const we=((7&ue)<<18|(63&Qe[ce++])<<12|(63&Qe[ce++])<<6|63&Qe[ce++])-65536;He[Ee++]=String.fromCharCode(55296+(we>>10)),He[Ee++]=String.fromCharCode(56320+(1023&we))}else{const ot=Qe[ce++],Oe=Qe[ce++];He[Ee++]=String.fromCharCode((15&ue)<<12|(63&ot)<<6|63&Oe)}}return He.join("")}(this.decodeStringToByteArray(Qe,He))},decodeStringToByteArray(Qe,He){this.init_();const ce=He?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let ue=0;ue<Qe.length;){const ot=ce[Qe.charAt(ue++)],Ve=ue<Qe.length?ce[Qe.charAt(ue)]:0;++ue;const rt=ue<Qe.length?ce[Qe.charAt(ue)]:64;++ue;const Yt=ue<Qe.length?ce[Qe.charAt(ue)]:64;if(++ue,null==ot||null==Ve||null==rt||null==Yt)throw new fe;Ee.push(ot<<2|Ve>>4),64!==rt&&(Ee.push(Ve<<4&240|rt>>2),64!==Yt&&Ee.push(rt<<6&192|Yt))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Qe=0;Qe<this.ENCODED_VALS.length;Qe++)this.byteToCharMap_[Qe]=this.ENCODED_VALS.charAt(Qe),this.charToByteMap_[this.byteToCharMap_[Qe]]=Qe,this.byteToCharMapWebSafe_[Qe]=this.ENCODED_VALS_WEBSAFE.charAt(Qe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Qe]]=Qe,Qe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Qe)]=Qe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Qe)]=Qe)}}};class fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const de=function(Qe){const He=ie(Qe);return Ae.encodeByteArray(He,!0)},Fe=function(Qe){return de(Qe).replace(/\./g,"")},De=function(Qe){try{return Ae.decodeString(Qe,!0)}catch(He){console.error("base64Decode failed: ",He)}return null};function he(Qe){return be(void 0,Qe)}function be(Qe,He){if(!(He instanceof Object))return He;switch(He.constructor){case Date:return new Date(He.getTime());case Object:void 0===Qe&&(Qe={});break;case Array:Qe=[];break;default:return He}for(const ce in He)!He.hasOwnProperty(ce)||!Ne(ce)||(Qe[ce]=be(Qe[ce],He[ce]));return Qe}function Ne(Qe){return"__proto__"!==Qe}const Se=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Qe=process.env.__FIREBASE_DEFAULTS__;return Qe?JSON.parse(Qe):void 0})()||(()=>{if(typeof document>"u")return;let Qe;try{Qe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const He=Qe&&De(Qe[1]);return He&&JSON.parse(He)})()}catch(Qe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Qe}`)}},Le=()=>{var Qe;return null===(Qe=Se())||void 0===Qe?void 0:Qe.config},Re=Qe=>{var He;return null===(He=Se())||void 0===He?void 0:He[`_${Qe}`]};class Je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((He,ce)=>{this.resolve=He,this.reject=ce})}wrapCallback(He){return(ce,Ee)=>{ce?this.reject(ce):this.resolve(Ee),"function"==typeof He&&(this.promise.catch(()=>{}),1===He.length?He(ce):He(ce,Ee))}}}function mt(Qe,He){if(Qe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=He||"demo-project",ue=Qe.iat||0,ot=Qe.sub||Qe.user_id;if(!ot)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Oe=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:ue,exp:ue+3600,auth_time:ue,sub:ot,user_id:ot,firebase:{sign_in_provider:"custom",identities:{}}},Qe);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(Oe)),""].join(".")}function Ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ve(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function It(){var Qe;const He=null===(Qe=Se())||void 0===Qe?void 0:Qe.forceEnvironment;if("node"===He)return!0;if("browser"===He)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ze(){return"object"==typeof self&&self.self===self}function lt(){const Qe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Qe&&void 0!==Qe.id}function xt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Be(){const Qe=Ye();return Qe.indexOf("MSIE ")>=0||Qe.indexOf("Trident/")>=0}function vt(){return!0===m.NODE_CLIENT||!0===m.NODE_ADMIN}function Ke(){return!It()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){try{return"object"==typeof indexedDB}catch{return!1}}function We(){return new Promise((Qe,He)=>{try{let ce=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",ue=self.indexedDB.open(Ee);ue.onsuccess=()=>{ue.result.close(),ce||self.indexedDB.deleteDatabase(Ee),Qe(!0)},ue.onupgradeneeded=()=>{ce=!1},ue.onerror=()=>{var ot;He((null===(ot=ue.error)||void 0===ot?void 0:ot.message)||"")}}catch(ce){He(ce)}})}function Q(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Dt extends Error{constructor(He,ce,Ee){super(ce),this.code=He,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}}class zt{constructor(He,ce,Ee){this.service=He,this.serviceName=ce,this.errors=Ee}create(He,...ce){const Ee=ce[0]||{},ue=`${this.service}/${He}`,ot=this.errors[He],Oe=ot?function un(Qe,He){return Qe.replace(Et,(ce,Ee)=>{const ue=He[Ee];return null!=ue?String(ue):`<${Ee}?>`})}(ot,Ee):"Error";return new Dt(ue,`${this.serviceName}: ${Oe} (${ue}).`,Ee)}}const Et=/\{\$([^}]+)}/g;function ut(Qe){return JSON.parse(Qe)}function Ot(Qe){return JSON.stringify(Qe)}const sn=function(Qe){let He={},ce={},Ee={},ue="";try{const ot=Qe.split(".");He=ut(De(ot[0])||""),ce=ut(De(ot[1])||""),ue=ot[2],Ee=ce.d||{},delete ce.d}catch{}return{header:He,claims:ce,data:Ee,signature:ue}},hn=function(Qe){const ce=sn(Qe).claims;return!!ce&&"object"==typeof ce&&ce.hasOwnProperty("iat")},wn=function(Qe){const He=sn(Qe).claims;return"object"==typeof He&&!0===He.admin};function tn(Qe,He){return Object.prototype.hasOwnProperty.call(Qe,He)}function ir(Qe,He){if(Object.prototype.hasOwnProperty.call(Qe,He))return Qe[He]}function Qt(Qe){for(const He in Qe)if(Object.prototype.hasOwnProperty.call(Qe,He))return!1;return!0}function jn(Qe,He,ce){const Ee={};for(const ue in Qe)Object.prototype.hasOwnProperty.call(Qe,ue)&&(Ee[ue]=He.call(ce,Qe[ue],ue,Qe));return Ee}function fn(Qe,He){if(Qe===He)return!0;const ce=Object.keys(Qe),Ee=Object.keys(He);for(const ue of ce){if(!Ee.includes(ue))return!1;const ot=Qe[ue],Oe=He[ue];if(xn(ot)&&xn(Oe)){if(!fn(ot,Oe))return!1}else if(ot!==Oe)return!1}for(const ue of Ee)if(!ce.includes(ue))return!1;return!0}function xn(Qe){return null!==Qe&&"object"==typeof Qe}function Cr(Qe){const He=[];for(const[ce,Ee]of Object.entries(Qe))Array.isArray(Ee)?Ee.forEach(ue=>{He.push(encodeURIComponent(ce)+"="+encodeURIComponent(ue))}):He.push(encodeURIComponent(ce)+"="+encodeURIComponent(Ee));return He.length?"&"+He.join("&"):""}function Hr(Qe){const He={};return Qe.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[ue,ot]=Ee.split("=");He[decodeURIComponent(ue)]=decodeURIComponent(ot)}}),He}function Ur(Qe){const He=Qe.indexOf("?");if(!He)return"";const ce=Qe.indexOf("#",He);return Qe.substring(He,ce>0?ce:void 0)}class Tr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let He=1;He<this.blockSize;++He)this.pad_[He]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(He,ce){ce||(ce=0);const Ee=this.W_;if("string"==typeof He)for(let Yt=0;Yt<16;Yt++)Ee[Yt]=He.charCodeAt(ce)<<24|He.charCodeAt(ce+1)<<16|He.charCodeAt(ce+2)<<8|He.charCodeAt(ce+3),ce+=4;else for(let Yt=0;Yt<16;Yt++)Ee[Yt]=He[ce]<<24|He[ce+1]<<16|He[ce+2]<<8|He[ce+3],ce+=4;for(let Yt=16;Yt<80;Yt++){const Dn=Ee[Yt-3]^Ee[Yt-8]^Ee[Yt-14]^Ee[Yt-16];Ee[Yt]=4294967295&(Dn<<1|Dn>>>31)}let rt,Rt,ue=this.chain_[0],ot=this.chain_[1],Oe=this.chain_[2],Ve=this.chain_[3],we=this.chain_[4];for(let Yt=0;Yt<80;Yt++){Yt<40?Yt<20?(rt=Ve^ot&(Oe^Ve),Rt=1518500249):(rt=ot^Oe^Ve,Rt=1859775393):Yt<60?(rt=ot&Oe|Ve&(ot|Oe),Rt=2400959708):(rt=ot^Oe^Ve,Rt=3395469782);const Dn=(ue<<5|ue>>>27)+rt+we+Rt+Ee[Yt]&4294967295;we=Ve,Ve=Oe,Oe=4294967295&(ot<<30|ot>>>2),ot=ue,ue=Dn}this.chain_[0]=this.chain_[0]+ue&4294967295,this.chain_[1]=this.chain_[1]+ot&4294967295,this.chain_[2]=this.chain_[2]+Oe&4294967295,this.chain_[3]=this.chain_[3]+Ve&4294967295,this.chain_[4]=this.chain_[4]+we&4294967295}update(He,ce){if(null==He)return;void 0===ce&&(ce=He.length);const Ee=ce-this.blockSize;let ue=0;const ot=this.buf_;let Oe=this.inbuf_;for(;ue<ce;){if(0===Oe)for(;ue<=Ee;)this.compress_(He,ue),ue+=this.blockSize;if("string"==typeof He){for(;ue<ce;)if(ot[Oe]=He.charCodeAt(ue),++Oe,++ue,Oe===this.blockSize){this.compress_(ot),Oe=0;break}}else for(;ue<ce;)if(ot[Oe]=He[ue],++Oe,++ue,Oe===this.blockSize){this.compress_(ot),Oe=0;break}}this.inbuf_=Oe,this.total_+=ce}digest(){const He=[];let ce=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ue=this.blockSize-1;ue>=56;ue--)this.buf_[ue]=255&ce,ce/=256;this.compress_(this.buf_);let Ee=0;for(let ue=0;ue<5;ue++)for(let ot=24;ot>=0;ot-=8)He[Ee]=this.chain_[ue]>>ot&255,++Ee;return He}}function Qn(Qe,He){const ce=new bn(Qe,He);return ce.subscribe.bind(ce)}class bn{constructor(He,ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ce,this.task.then(()=>{He(this)}).catch(Ee=>{this.error(Ee)})}next(He){this.forEachObserver(ce=>{ce.next(He)})}error(He){this.forEachObserver(ce=>{ce.error(He)}),this.close(He)}complete(){this.forEachObserver(He=>{He.complete()}),this.close()}subscribe(He,ce,Ee){let ue;if(void 0===He&&void 0===ce&&void 0===Ee)throw new Error("Missing Observer.");ue=function vr(Qe,He){if("object"!=typeof Qe||null===Qe)return!1;for(const ce of He)if(ce in Qe&&"function"==typeof Qe[ce])return!0;return!1}(He,["next","error","complete"])?He:{next:He,error:ce,complete:Ee},void 0===ue.next&&(ue.next=oi),void 0===ue.error&&(ue.error=oi),void 0===ue.complete&&(ue.complete=oi);const ot=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ue.error(this.finalError):ue.complete()}catch{}}),this.observers.push(ue),ot}unsubscribeOne(He){void 0===this.observers||void 0===this.observers[He]||(delete this.observers[He],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(He){if(!this.finalized)for(let ce=0;ce<this.observers.length;ce++)this.sendOne(ce,He)}sendOne(He,ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[He])try{ce(this.observers[He])}catch(Ee){typeof console<"u"&&console.error&&console.error(Ee)}})}close(He){this.finalized||(this.finalized=!0,void 0!==He&&(this.finalError=He),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oi(){}const mr=function(Qe,He,ce,Ee){let ue;if(Ee<He?ue="at least "+He:Ee>ce&&(ue=0===ce?"none":"no more than "+ce),ue)throw new Error(Qe+" failed: Was called with "+Ee+(1===Ee?" argument.":" arguments.")+" Expects "+ue+".")};function _i(Qe,He){return`${Qe} failed: ${He} argument `}function ii(Qe,He,ce,Ee){if((!Ee||ce)&&"function"!=typeof ce)throw new Error(_i(Qe,He)+"must be a valid function.")}function Gn(Qe,He,ce,Ee){if((!Ee||ce)&&("object"!=typeof ce||null===ce))throw new Error(_i(Qe,He)+"must be a valid context object.")}const vi=function(Qe){const He=[];let ce=0;for(let Ee=0;Ee<Qe.length;Ee++){let ue=Qe.charCodeAt(Ee);if(ue>=55296&&ue<=56319){const ot=ue-55296;Ee++,g(Ee<Qe.length,"Surrogate pair missing trail surrogate."),ue=65536+(ot<<10)+(Qe.charCodeAt(Ee)-56320)}ue<128?He[ce++]=ue:ue<2048?(He[ce++]=ue>>6|192,He[ce++]=63&ue|128):ue<65536?(He[ce++]=ue>>12|224,He[ce++]=ue>>6&63|128,He[ce++]=63&ue|128):(He[ce++]=ue>>18|240,He[ce++]=ue>>12&63|128,He[ce++]=ue>>6&63|128,He[ce++]=63&ue|128)}return He},rr=function(Qe){let He=0;for(let ce=0;ce<Qe.length;ce++){const Ee=Qe.charCodeAt(ce);Ee<128?He++:Ee<2048?He+=2:Ee>=55296&&Ee<=56319?(He+=4,ce++):He+=3}return He},Xn=1e3,ai=2,ei=144e5,li=.5;function Nr(Qe,He=Xn,ce=ai){const Ee=He*Math.pow(ce,Qe),ue=Math.round(li*Ee*(Math.random()-.5)*2);return Math.min(ei,Ee+ue)}function Kr(Qe){return Qe&&Qe._delegate?Qe._delegate:Qe}},9613:(cn,at,$)=>{"use strict";$.d(at,{c:()=>Xe});var m=$(3577),g=$(3457);let Y;const Pe=Me=>Me.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ae=Me=>(void 0===Y&&(Y=void 0===Me.style.animationName&&void 0!==Me.style.webkitAnimationName?"-webkit-":""),Y),fe=(Me,Se,oe)=>{const et=Se.startsWith("animation")?Ae(Me):"";Me.style.setProperty(et+Se,oe)},de=(Me,Se)=>{const oe=Se.startsWith("animation")?Ae(Me):"";Me.style.removeProperty(oe+Se)},he=[],Ue=(Me=[],Se)=>{if(void 0!==Se){const oe=Array.isArray(Se)?Se:[Se];return[...Me,...oe]}return Me},Xe=Me=>{let Se,oe,et,Le,Re,Je,ze,qe,We,Q,_t,Et,ut,mt=[],Ye=[],ve=[],It=!1,lt={},xt=[],Pt=[],Be={},At=0,vt=!1,Ke=!1,Dt=!0,zt=!1,un=!0,Ot=!1;const sn=Me,Cn=[],zn=[],hn=[],wn=[],tn=[],ir=[],Qt=[],jn=[],fn=[],xn=[],Di="function"==typeof AnimationEffect||void 0!==g.w&&"function"==typeof g.w.AnimationEffect,Cr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Di,Ur=()=>xn,vr=(Te,tt)=>((null!=tt&&tt.oneTimeCallback?zn:Cn).push({c:Te,o:tt}),ut),mr=()=>{if(Cr)xn.forEach(Te=>{Te.cancel()}),xn.length=0;else{const Te=hn.slice();(0,m.r)(()=>{Te.forEach(tt=>{de(tt,"animation-name"),de(tt,"animation-duration"),de(tt,"animation-timing-function"),de(tt,"animation-iteration-count"),de(tt,"animation-delay"),de(tt,"animation-play-state"),de(tt,"animation-fill-mode"),de(tt,"animation-direction")})})}},_i=()=>{tn.forEach(Te=>{null!=Te&&Te.parentNode&&Te.parentNode.removeChild(Te)}),tn.length=0},Zr=()=>void 0!==Re?Re:ze?ze.getFill():"both",Kr=()=>void 0!==We?We:void 0!==Je?Je:ze?ze.getDirection():"normal",Qe=()=>vt?"linear":void 0!==et?et:ze?ze.getEasing():"linear",He=()=>Ke?0:void 0!==Q?Q:void 0!==oe?oe:ze?ze.getDuration():0,ce=()=>void 0!==Le?Le:ze?ze.getIterations():1,Ee=()=>void 0!==_t?_t:void 0!==Se?Se:ze?ze.getDelay():0,nn=()=>{0!==At&&(At--,0===At&&((()=>{hr(),jn.forEach($t=>$t()),fn.forEach($t=>$t());const Te=Dt?1:0,tt=xt,nt=Pt,Nt=Be;hn.forEach($t=>{const Kt=$t.classList;tt.forEach(Jt=>Kt.add(Jt)),nt.forEach(Jt=>Kt.remove(Jt));for(const Jt in Nt)Nt.hasOwnProperty(Jt)&&fe($t,Jt,Nt[Jt])}),Cn.forEach($t=>$t.c(Te,ut)),zn.forEach($t=>$t.c(Te,ut)),zn.length=0,un=!0,Dt&&(zt=!0),Dt=!0})(),ze&&ze.animationFinish()))},Pn=(Te=!0)=>{_i();const tt=(Me=>(Me.forEach(Se=>{for(const oe in Se)if(Se.hasOwnProperty(oe)){const et=Se[oe];if("easing"===oe)Se["animation-timing-function"]=et,delete Se[oe];else{const Le=Pe(oe);Le!==oe&&(Se[Le]=et,delete Se[oe])}}}),Me))(mt);hn.forEach(nt=>{if(tt.length>0){const Nt=((Me=[])=>Me.map(Se=>{const oe=Se.offset,et=[];for(const Le in Se)Se.hasOwnProperty(Le)&&"offset"!==Le&&et.push(`${Le}: ${Se[Le]};`);return`${100*oe}% { ${et.join(" ")} }`}).join(" "))(tt);Et=void 0!==Me?Me:(Me=>{let Se=he.indexOf(Me);return Se<0&&(Se=he.push(Me)-1),`ion-animation-${Se}`})(Nt);const $t=((Me,Se,oe)=>{var et;const Le=(Me=>{const Se=void 0!==Me.getRootNode?Me.getRootNode():Me;return Se.head||Se})(oe),Re=Ae(oe),Je=Le.querySelector("#"+Me);if(Je)return Je;const mt=(null!==(et=oe.ownerDocument)&&void 0!==et?et:document).createElement("style");return mt.id=Me,mt.textContent=`@${Re}keyframes ${Me} { ${Se} } @${Re}keyframes ${Me}-alt { ${Se} }`,Le.appendChild(mt),mt})(Et,Nt,nt);tn.push($t),fe(nt,"animation-duration",`${He()}ms`),fe(nt,"animation-timing-function",Qe()),fe(nt,"animation-delay",`${Ee()}ms`),fe(nt,"animation-fill-mode",Zr()),fe(nt,"animation-direction",Kr());const Kt=ce()===1/0?"infinite":ce().toString();fe(nt,"animation-iteration-count",Kt),fe(nt,"animation-play-state","paused"),Te&&fe(nt,"animation-name",`${$t.id}-alt`),(0,m.r)(()=>{fe(nt,"animation-name",$t.id||null)})}})},cr=(Te=!0)=>{(()=>{ir.forEach(Nt=>Nt()),Qt.forEach(Nt=>Nt());const Te=Ye,tt=ve,nt=lt;hn.forEach(Nt=>{const $t=Nt.classList;Te.forEach(Kt=>$t.add(Kt)),tt.forEach(Kt=>$t.remove(Kt));for(const Kt in nt)nt.hasOwnProperty(Kt)&&fe(Nt,Kt,nt[Kt])})})(),mt.length>0&&(Cr?(hn.forEach(Te=>{const tt=Te.animate(mt,{id:sn,delay:Ee(),duration:He(),easing:Qe(),iterations:ce(),fill:Zr(),direction:Kr()});tt.pause(),xn.push(tt)}),xn.length>0&&(xn[0].onfinish=()=>{nn()})):Pn(Te)),It=!0},Mn=Te=>{if(Te=Math.min(Math.max(Te,0),.9999),Cr)xn.forEach(tt=>{tt.currentTime=tt.effect.getComputedTiming().delay+He()*Te,tt.pause()});else{const tt=`-${He()*Te}ms`;hn.forEach(nt=>{mt.length>0&&(fe(nt,"animation-delay",tt),fe(nt,"animation-play-state","paused"))})}},Lr=Te=>{xn.forEach(tt=>{tt.effect.updateTiming({delay:Ee(),duration:He(),easing:Qe(),iterations:ce(),fill:Zr(),direction:Kr()})}),void 0!==Te&&Mn(Te)},Er=(Te=!0,tt)=>{(0,m.r)(()=>{hn.forEach(nt=>{fe(nt,"animation-name",Et||null),fe(nt,"animation-duration",`${He()}ms`),fe(nt,"animation-timing-function",Qe()),fe(nt,"animation-delay",void 0!==tt?`-${tt*He()}ms`:`${Ee()}ms`),fe(nt,"animation-fill-mode",Zr()||null),fe(nt,"animation-direction",Kr()||null);const Nt=ce()===1/0?"infinite":ce().toString();fe(nt,"animation-iteration-count",Nt),Te&&fe(nt,"animation-name",`${Et}-alt`),(0,m.r)(()=>{fe(nt,"animation-name",Et||null)})})})},lr=(Te=!1,tt=!0,nt)=>(Te&&wn.forEach(Nt=>{Nt.update(Te,tt,nt)}),Cr?Lr(nt):Er(tt,nt),ut),ps=()=>{It&&(Cr?xn.forEach(Te=>{Te.pause()}):hn.forEach(Te=>{fe(Te,"animation-play-state","paused")}),Ot=!0)},vn=()=>{qe=void 0,nn()},hr=()=>{qe&&clearTimeout(qe)},Wi=Te=>new Promise(tt=>{null!=Te&&Te.sync&&(Ke=!0,vr(()=>Ke=!1,{oneTimeCallback:!0})),It||cr(),zt&&(Cr?(Mn(0),Lr()):Er(),zt=!1),un&&(At=wn.length+1,un=!1),vr(()=>tt(),{oneTimeCallback:!0}),wn.forEach(nt=>{nt.play()}),Cr?(xn.forEach(Te=>{Te.play()}),(0===mt.length||0===hn.length)&&nn()):(()=>{if(hr(),(0,m.r)(()=>{hn.forEach(Te=>{mt.length>0&&fe(Te,"animation-play-state","running")})}),0===mt.length||0===hn.length)nn();else{const Te=Ee()||0,tt=He()||0,nt=ce()||1;isFinite(nt)&&(qe=setTimeout(vn,Te+tt*nt+100)),((Me,Se)=>{let oe;const et={passive:!0},Re=Je=>{Me===Je.target&&(oe&&oe(),hr(),(0,m.r)(()=>{hn.forEach(Te=>{de(Te,"animation-duration"),de(Te,"animation-delay"),de(Te,"animation-play-state")}),(0,m.r)(nn)}))};Me&&(Me.addEventListener("webkitAnimationEnd",Re,et),Me.addEventListener("animationend",Re,et),oe=()=>{Me.removeEventListener("webkitAnimationEnd",Re,et),Me.removeEventListener("animationend",Re,et)})})(hn[0])}})(),Ot=!1}),ae=(Te,tt)=>{const nt=mt[0];return void 0===nt||void 0!==nt.offset&&0!==nt.offset?mt=[{offset:0,[Te]:tt},...mt]:nt[Te]=tt,ut};return ut={parentAnimation:ze,elements:hn,childAnimations:wn,id:sn,animationFinish:nn,from:ae,to:(Te,tt)=>{const nt=mt[mt.length-1];return void 0===nt||void 0!==nt.offset&&1!==nt.offset?mt=[...mt,{offset:1,[Te]:tt}]:nt[Te]=tt,ut},fromTo:(Te,tt,nt)=>ae(Te,tt).to(Te,nt),parent:Te=>(ze=Te,ut),play:Wi,pause:()=>(wn.forEach(Te=>{Te.pause()}),ps(),ut),stop:()=>{wn.forEach(Te=>{Te.stop()}),It&&(mr(),It=!1),vt=!1,Ke=!1,un=!0,We=void 0,Q=void 0,_t=void 0,At=0,zt=!1,Dt=!0,Ot=!1},destroy:Te=>(wn.forEach(tt=>{tt.destroy(Te)}),(Te=>{mr(),Te&&_i()})(Te),hn.length=0,wn.length=0,mt.length=0,Cn.length=0,zn.length=0,It=!1,un=!0,ut),keyframes:Te=>{const tt=mt!==Te;return mt=Te,tt&&(Te=>{Cr?Ur().forEach(tt=>{if(tt.effect.setKeyframes)tt.effect.setKeyframes(Te);else{const nt=new KeyframeEffect(tt.effect.target,Te,tt.effect.getTiming());tt.effect=nt}}):Pn()})(mt),ut},addAnimation:Te=>{if(null!=Te)if(Array.isArray(Te))for(const tt of Te)tt.parent(ut),wn.push(tt);else Te.parent(ut),wn.push(Te);return ut},addElement:Te=>{if(null!=Te)if(1===Te.nodeType)hn.push(Te);else if(Te.length>=0)for(let tt=0;tt<Te.length;tt++)hn.push(Te[tt]);else console.error("Invalid addElement value");return ut},update:lr,fill:Te=>(Re=Te,lr(!0),ut),direction:Te=>(Je=Te,lr(!0),ut),iterations:Te=>(Le=Te,lr(!0),ut),duration:Te=>(!Cr&&0===Te&&(Te=1),oe=Te,lr(!0),ut),easing:Te=>(et=Te,lr(!0),ut),delay:Te=>(Se=Te,lr(!0),ut),getWebAnimations:Ur,getKeyframes:()=>mt,getFill:Zr,getDirection:Kr,getDelay:Ee,getIterations:ce,getEasing:Qe,getDuration:He,afterAddRead:Te=>(jn.push(Te),ut),afterAddWrite:Te=>(fn.push(Te),ut),afterClearStyles:(Te=[])=>{for(const tt of Te)Be[tt]="";return ut},afterStyles:(Te={})=>(Be=Te,ut),afterRemoveClass:Te=>(Pt=Ue(Pt,Te),ut),afterAddClass:Te=>(xt=Ue(xt,Te),ut),beforeAddRead:Te=>(ir.push(Te),ut),beforeAddWrite:Te=>(Qt.push(Te),ut),beforeClearStyles:(Te=[])=>{for(const tt of Te)lt[tt]="";return ut},beforeStyles:(Te={})=>(lt=Te,ut),beforeRemoveClass:Te=>(ve=Ue(ve,Te),ut),beforeAddClass:Te=>(Ye=Ue(Ye,Te),ut),onFinish:vr,isRunning:()=>0!==At&&!Ot,progressStart:(Te=!1,tt)=>(wn.forEach(nt=>{nt.progressStart(Te,tt)}),ps(),vt=Te,It||cr(),lr(!1,!0,tt),ut),progressStep:Te=>(wn.forEach(tt=>{tt.progressStep(Te)}),Mn(Te),ut),progressEnd:(Te,tt,nt)=>(vt=!1,wn.forEach(Nt=>{Nt.progressEnd(Te,tt,nt)}),void 0!==nt&&(Q=nt),zt=!1,Dt=!0,0===Te?(We="reverse"===Kr()?"normal":"reverse","reverse"===We&&(Dt=!1),Cr?(lr(),Mn(1-tt)):(_t=(1-tt)*He()*-1,lr(!1,!1))):1===Te&&(Cr?(lr(),Mn(tt)):(_t=tt*He()*-1,lr(!1,!1))),void 0!==Te&&(vr(()=>{Q=void 0,We=void 0,_t=void 0},{oneTimeCallback:!0}),ze||Wi()),ut)}}},3982:(cn,at,$)=>{"use strict";$.d(at,{E:()=>De,a:()=>m,s:()=>de});const m=he=>{try{if(he instanceof fe)return he.value;if(!ie()||"string"!=typeof he||""===he)return he;if(he.includes("onload="))return"";const be=document.createDocumentFragment(),Ne=document.createElement("div");be.appendChild(Ne),Ne.innerHTML=he,Ae.forEach(Me=>{const Se=be.querySelectorAll(Me);for(let oe=Se.length-1;oe>=0;oe--){const et=Se[oe];et.parentNode?et.parentNode.removeChild(et):be.removeChild(et);const Le=Y(et);for(let Re=0;Re<Le.length;Re++)g(Le[Re])}});const je=Y(be);for(let Me=0;Me<je.length;Me++)g(je[Me]);const Ue=document.createElement("div");Ue.appendChild(be);const Xe=Ue.querySelector("div");return null!==Xe?Xe.innerHTML:Ue.innerHTML}catch(be){return console.error(be),""}},g=he=>{if(he.nodeType&&1!==he.nodeType)return;if(typeof NamedNodeMap<"u"&&!(he.attributes instanceof NamedNodeMap))return void he.remove();for(let Ne=he.attributes.length-1;Ne>=0;Ne--){const je=he.attributes.item(Ne),Ue=je.name;if(!Pe.includes(Ue.toLowerCase())){he.removeAttribute(Ue);continue}const Xe=je.value,Me=he[Ue];(null!=Xe&&Xe.toLowerCase().includes("javascript:")||null!=Me&&Me.toLowerCase().includes("javascript:"))&&he.removeAttribute(Ue)}const be=Y(he);for(let Ne=0;Ne<be.length;Ne++)g(be[Ne])},Y=he=>null!=he.children?he.children:he.childNodes,ie=()=>{var he;const be=window,Ne=null===(he=null==be?void 0:be.Ionic)||void 0===he?void 0:he.config;return!Ne||(Ne.get?Ne.get("sanitizerEnabled",!0):!0===Ne.sanitizerEnabled||void 0===Ne.sanitizerEnabled)},Pe=["class","id","href","src","name","slot"],Ae=["script","style","iframe","meta","link","object","embed"];class fe{constructor(be){this.value=be}}const de=he=>{const be=window,Ne=be.Ionic;if(!Ne||!Ne.config||"Object"===Ne.config.constructor.name)return be.Ionic=be.Ionic||{},be.Ionic.config=Object.assign(Object.assign({},be.Ionic.config),he),be.Ionic.config},De=!1},2225:(cn,at,$)=>{"use strict";$.d(at,{g:()=>m});const m=(Ae,fe,de,Fe,De)=>Y(Ae[1],fe[1],de[1],Fe[1],De).map(he=>g(Ae[0],fe[0],de[0],Fe[0],he)),g=(Ae,fe,de,Fe,De)=>De*(3*fe*Math.pow(De-1,2)+De*(-3*de*De+3*de+Fe*De))-Ae*Math.pow(De-1,3),Y=(Ae,fe,de,Fe,De)=>Pe((Fe-=De)-3*(de-=De)+3*(fe-=De)-(Ae-=De),3*de-6*fe+3*Ae,3*fe-3*Ae,Ae).filter(be=>be>=0&&be<=1),Pe=(Ae,fe,de,Fe)=>{if(0===Ae)return((Ae,fe,de)=>{const Fe=fe*fe-4*Ae*de;return Fe<0?[]:[(-fe+Math.sqrt(Fe))/(2*Ae),(-fe-Math.sqrt(Fe))/(2*Ae)]})(fe,de,Fe);const De=(3*(de/=Ae)-(fe/=Ae)*fe)/3,he=(2*fe*fe*fe-9*fe*de+27*(Fe/=Ae))/27;if(0===De)return[Math.pow(-he,1/3)];if(0===he)return[Math.sqrt(-De),-Math.sqrt(-De)];const be=Math.pow(he/2,2)+Math.pow(De/3,3);if(0===be)return[Math.pow(he/2,.5)-fe/3];if(be>0)return[Math.pow(-he/2+Math.sqrt(be),1/3)-Math.pow(he/2+Math.sqrt(be),1/3)-fe/3];const Ne=Math.sqrt(Math.pow(-De/3,3)),je=Math.acos(-he/(2*Math.sqrt(Math.pow(-De/3,3)))),Ue=2*Math.pow(Ne,1/3);return[Ue*Math.cos(je/3)-fe/3,Ue*Math.cos((je+2*Math.PI)/3)-fe/3,Ue*Math.cos((je+4*Math.PI)/3)-fe/3]}},6782:(cn,at,$)=>{"use strict";$.d(at,{C:()=>Pe,a:()=>Y,d:()=>ie});var m=$(5861),g=$(3577);const Y=function(){var Ae=(0,m.Z)(function*(fe,de,Fe,De,he,be){var Ne;if(fe)return fe.attachViewToDom(de,Fe,he,De);if(!(be||"string"==typeof Fe||Fe instanceof HTMLElement))throw new Error("framework delegate is missing");const je="string"==typeof Fe?null===(Ne=de.ownerDocument)||void 0===Ne?void 0:Ne.createElement(Fe):Fe;return De&&De.forEach(Ue=>je.classList.add(Ue)),he&&Object.assign(je,he),de.appendChild(je),yield new Promise(Ue=>(0,g.c)(je,Ue)),je});return function(de,Fe,De,he,be,Ne){return Ae.apply(this,arguments)}}(),ie=(Ae,fe)=>{if(fe){if(Ae)return Ae.removeViewFromDom(fe.parentElement,fe);fe.remove()}return Promise.resolve()},Pe=()=>{let Ae,fe;return{attachViewToDom:function(){var De=(0,m.Z)(function*(he,be,Ne={},je=[]){var Ue,Xe;if(Ae=he,be){const Se="string"==typeof be?null===(Ue=Ae.ownerDocument)||void 0===Ue?void 0:Ue.createElement(be):be;je.forEach(oe=>Se.classList.add(oe)),Object.assign(Se,Ne),Ae.appendChild(Se),yield new Promise(oe=>(0,g.c)(Se,oe))}else if(Ae.children.length>0&&("ION-MODAL"===Ae.tagName||"ION-POPOVER"===Ae.tagName)&&!Ae.children[0].classList.contains("ion-delegate-host")){const oe=null===(Xe=Ae.ownerDocument)||void 0===Xe?void 0:Xe.createElement("div");oe.classList.add("ion-delegate-host"),je.forEach(et=>oe.classList.add(et)),oe.append(...Ae.children),Ae.appendChild(oe)}const Me=document.querySelector("ion-app")||document.body;return fe=document.createComment("ionic teleport"),Ae.parentNode.insertBefore(fe,Ae),Me.appendChild(Ae),Ae});return function(be,Ne){return De.apply(this,arguments)}}(),removeViewFromDom:()=>(Ae&&fe&&(fe.parentNode.insertBefore(Ae,fe),fe.remove()),Promise.resolve())}}},4349:(cn,at,$)=>{"use strict";$.d(at,{G:()=>Pe});class g{constructor(fe,de,Fe,De,he){this.id=de,this.name=Fe,this.disableScroll=he,this.priority=1e6*De+de,this.ctrl=fe}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const fe=this.ctrl.capture(this.name,this.id,this.priority);return fe&&this.disableScroll&&this.ctrl.disableScroll(this.id),fe}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Y{constructor(fe,de,Fe,De){this.id=de,this.disable=Fe,this.disableScroll=De,this.ctrl=fe}block(){if(this.ctrl){if(this.disable)for(const fe of this.disable)this.ctrl.disableGesture(fe,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const fe of this.disable)this.ctrl.enableGesture(fe,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const ie="backdrop-no-scroll",Pe=new class m{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(fe){var de;return new g(this,this.newID(),fe.name,null!==(de=fe.priority)&&void 0!==de?de:0,!!fe.disableScroll)}createBlocker(fe={}){return new Y(this,this.newID(),fe.disable,!!fe.disableScroll)}start(fe,de,Fe){return this.canStart(fe)?(this.requestedStart.set(de,Fe),!0):(this.requestedStart.delete(de),!1)}capture(fe,de,Fe){if(!this.start(fe,de,Fe))return!1;const De=this.requestedStart;let he=-1e4;if(De.forEach(be=>{he=Math.max(he,be)}),he===Fe){this.capturedId=de,De.clear();const be=new CustomEvent("ionGestureCaptured",{detail:{gestureName:fe}});return document.dispatchEvent(be),!0}return De.delete(de),!1}release(fe){this.requestedStart.delete(fe),this.capturedId===fe&&(this.capturedId=void 0)}disableGesture(fe,de){let Fe=this.disabledGestures.get(fe);void 0===Fe&&(Fe=new Set,this.disabledGestures.set(fe,Fe)),Fe.add(de)}enableGesture(fe,de){const Fe=this.disabledGestures.get(fe);void 0!==Fe&&Fe.delete(de)}disableScroll(fe){this.disabledScroll.add(fe),1===this.disabledScroll.size&&document.body.classList.add(ie)}enableScroll(fe){this.disabledScroll.delete(fe),0===this.disabledScroll.size&&document.body.classList.remove(ie)}canStart(fe){return!(void 0!==this.capturedId||this.isDisabled(fe))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(fe){const de=this.disabledGestures.get(fe);return!!(de&&de.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(cn,at,$)=>{"use strict";$.r(at),$.d(at,{MENU_BACK_BUTTON_PRIORITY:()=>Pe,OVERLAY_BACK_BUTTON_PRIORITY:()=>ie,blockHardwareBackButton:()=>g,startHardwareBackButton:()=>Y});var m=$(5861);const g=()=>{document.addEventListener("backbutton",()=>{})},Y=()=>{const Ae=document;let fe=!1;Ae.addEventListener("backbutton",()=>{if(fe)return;let de=0,Fe=[];const De=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Ne,je){Fe.push({priority:Ne,handler:je,id:de++})}}});Ae.dispatchEvent(De);const he=function(){var Ne=(0,m.Z)(function*(je){try{if(null!=je&&je.handler){const Ue=je.handler(be);null!=Ue&&(yield Ue)}}catch(Ue){console.error(Ue)}});return function(Ue){return Ne.apply(this,arguments)}}(),be=()=>{if(Fe.length>0){let Ne={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Fe.forEach(je=>{je.priority>=Ne.priority&&(Ne=je)}),fe=!0,Fe=Fe.filter(je=>je.id!==Ne.id),he(Ne).then(()=>fe=!1)}};be()})},ie=100,Pe=99},3577:(cn,at,$)=>{"use strict";$.d(at,{a:()=>de,b:()=>Fe,c:()=>Y,d:()=>Xe,e:()=>Ue,f:()=>je,g:()=>De,h:()=>Ne,i:()=>fe,j:()=>Re,k:()=>Pe,l:()=>Me,m:()=>ie,n:()=>be,o:()=>Se,p:()=>et,q:()=>Le,r:()=>he,s:()=>mt,t:()=>m,u:()=>Je,v:()=>oe});const m=(Ye,ve=0)=>new Promise(It=>{g(Ye,ve,It)}),g=(Ye,ve=0,It)=>{let ze,lt;const xt={passive:!0},Be=()=>{ze&&ze()},At=vt=>{(void 0===vt||Ye===vt.target)&&(Be(),It(vt))};return Ye&&(Ye.addEventListener("webkitTransitionEnd",At,xt),Ye.addEventListener("transitionend",At,xt),lt=setTimeout(At,ve+500),ze=()=>{lt&&(clearTimeout(lt),lt=void 0),Ye.removeEventListener("webkitTransitionEnd",At,xt),Ye.removeEventListener("transitionend",At,xt)}),Be},Y=(Ye,ve)=>{Ye.componentOnReady?Ye.componentOnReady().then(It=>ve(It)):he(()=>ve(Ye))},ie=Ye=>void 0!==Ye.componentOnReady,Pe=(Ye,ve=[])=>{const It={};return ve.forEach(ze=>{Ye.hasAttribute(ze)&&(null!==Ye.getAttribute(ze)&&(It[ze]=Ye.getAttribute(ze)),Ye.removeAttribute(ze))}),It},Ae=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],fe=(Ye,ve)=>{let It=Ae;return ve&&ve.length>0&&(It=It.filter(ze=>!ve.includes(ze))),Pe(Ye,It)},de=(Ye,ve,It,ze)=>{var lt;if(typeof window<"u"){const xt=window,Pt=null===(lt=null==xt?void 0:xt.Ionic)||void 0===lt?void 0:lt.config;if(Pt){const Be=Pt.get("_ael");if(Be)return Be(Ye,ve,It,ze);if(Pt._ael)return Pt._ael(Ye,ve,It,ze)}}return Ye.addEventListener(ve,It,ze)},Fe=(Ye,ve,It,ze)=>{var lt;if(typeof window<"u"){const xt=window,Pt=null===(lt=null==xt?void 0:xt.Ionic)||void 0===lt?void 0:lt.config;if(Pt){const Be=Pt.get("_rel");if(Be)return Be(Ye,ve,It,ze);if(Pt._rel)return Pt._rel(Ye,ve,It,ze)}}return Ye.removeEventListener(ve,It,ze)},De=(Ye,ve=Ye)=>Ye.shadowRoot||ve,he=Ye=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ye):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ye):setTimeout(Ye),be=Ye=>!!Ye.shadowRoot&&!!Ye.attachShadow,Ne=Ye=>{const ve=Ye.closest("ion-item");return ve?ve.querySelector("ion-label"):null},je=Ye=>{if(Ye.focus(),Ye.classList.contains("ion-focusable")){const ve=Ye.closest("ion-app");ve&&ve.setFocus([Ye])}},Ue=(Ye,ve)=>{let It;const ze=Ye.getAttribute("aria-labelledby"),lt=Ye.id;let xt=null!==ze&&""!==ze.trim()?ze:ve+"-lbl",Pt=null!==ze&&""!==ze.trim()?document.getElementById(ze):Ne(Ye);return Pt?(null===ze&&(Pt.id=xt),It=Pt.textContent,Pt.setAttribute("aria-hidden","true")):""!==lt.trim()&&(Pt=document.querySelector(`label[for="${lt}"]`),Pt&&(""!==Pt.id?xt=Pt.id:Pt.id=xt=`${lt}-lbl`,It=Pt.textContent)),{label:Pt,labelId:xt,labelText:It}},Xe=(Ye,ve,It,ze,lt)=>{if(Ye||be(ve)){let xt=ve.querySelector("input.aux-input");xt||(xt=ve.ownerDocument.createElement("input"),xt.type="hidden",xt.classList.add("aux-input"),ve.appendChild(xt)),xt.disabled=lt,xt.name=It,xt.value=ze||""}},Me=(Ye,ve,It)=>Math.max(Ye,Math.min(ve,It)),Se=(Ye,ve)=>{if(!Ye){const It="ASSERT: "+ve;throw console.error(It),new Error(It)}},oe=Ye=>Ye.timeStamp||Date.now(),et=Ye=>{if(Ye){const ve=Ye.changedTouches;if(ve&&ve.length>0){const It=ve[0];return{x:It.clientX,y:It.clientY}}if(void 0!==Ye.pageX)return{x:Ye.pageX,y:Ye.pageY}}return{x:0,y:0}},Le=Ye=>{const ve="rtl"===document.dir;switch(Ye){case"start":return ve;case"end":return!ve;default:throw new Error(`"${Ye}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Re=(Ye,ve)=>{const It=Ye._original||Ye;return{_original:Ye,emit:Je(It.emit.bind(It),ve)}},Je=(Ye,ve=0)=>{let It;return(...ze)=>{clearTimeout(It),It=setTimeout(Ye,ve,...ze)}},mt=(Ye,ve)=>{if(null!=Ye||(Ye={}),null!=ve||(ve={}),Ye===ve)return!0;const It=Object.keys(Ye);if(It.length!==Object.keys(ve).length)return!1;for(const ze of It)if(!(ze in ve)||Ye[ze]!==ve[ze])return!1;return!0}},3457:(cn,at,$)=>{"use strict";$.d(at,{w:()=>m});const m=typeof window<"u"?window:void 0},1898:(cn,at,$)=>{"use strict";$.r(at),$.d(at,{GESTURE_CONTROLLER:()=>m.G,createGesture:()=>Fe});var m=$(4349);const g=(Ne,je,Ue,Xe)=>{const Me=Y(Ne)?{capture:!!Xe.capture,passive:!!Xe.passive}:!!Xe.capture;let Se,oe;return Ne.__zone_symbol__addEventListener?(Se="__zone_symbol__addEventListener",oe="__zone_symbol__removeEventListener"):(Se="addEventListener",oe="removeEventListener"),Ne[Se](je,Ue,Me),()=>{Ne[oe](je,Ue,Me)}},Y=Ne=>{if(void 0===ie)try{const je=Object.defineProperty({},"passive",{get:()=>{ie=!0}});Ne.addEventListener("optsTest",()=>{},je)}catch{ie=!1}return!!ie};let ie;const fe=Ne=>Ne instanceof Document?Ne:Ne.ownerDocument,Fe=Ne=>{let je=!1,Ue=!1,Xe=!0,Me=!1;const Se=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ne),oe=Se.canStart,et=Se.onWillStart,Le=Se.onStart,Re=Se.onEnd,Je=Se.notCaptured,mt=Se.onMove,Ye=Se.threshold,ve=Se.passive,It=Se.blurOnStart,ze={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},lt=((Ne,je,Ue)=>{const Xe=Ue*(Math.PI/180),Me="x"===Ne,Se=Math.cos(Xe),oe=je*je;let et=0,Le=0,Re=!1,Je=0;return{start(mt,Ye){et=mt,Le=Ye,Je=0,Re=!0},detect(mt,Ye){if(!Re)return!1;const ve=mt-et,It=Ye-Le,ze=ve*ve+It*It;if(ze<oe)return!1;const lt=Math.sqrt(ze),xt=(Me?ve:It)/lt;return Je=xt>Se?1:xt<-Se?-1:0,Re=!1,!0},isGesture:()=>0!==Je,getDirection:()=>Je}})(Se.direction,Se.threshold,Se.maxAngle),xt=m.G.createGesture({name:Ne.gestureName,priority:Ne.gesturePriority,disableScroll:Ne.disableScroll}),At=()=>{je&&(Me=!1,mt&&mt(ze))},vt=()=>!!xt.capture()&&(je=!0,Xe=!1,ze.startX=ze.currentX,ze.startY=ze.currentY,ze.startTime=ze.currentTime,et?et(ze).then(qe):qe(),!0),qe=()=>{It&&(()=>{if(typeof document<"u"){const zt=document.activeElement;null!=zt&&zt.blur&&zt.blur()}})(),Le&&Le(ze),Xe=!0},We=()=>{je=!1,Ue=!1,Me=!1,Xe=!0,xt.release()},Q=zt=>{const un=je,Et=Xe;if(We(),Et){if(De(ze,zt),un)return void(Re&&Re(ze));Je&&Je(ze)}},_t=((Ne,je,Ue,Xe,Me)=>{let Se,oe,et,Le,Re,Je,mt,Ye=0;const ve=Ke=>{Ye=Date.now()+2e3,je(Ke)&&(!oe&&Ue&&(oe=g(Ne,"touchmove",Ue,Me)),et||(et=g(Ke.target,"touchend",ze,Me)),Le||(Le=g(Ke.target,"touchcancel",ze,Me)))},It=Ke=>{Ye>Date.now()||je(Ke)&&(!Je&&Ue&&(Je=g(fe(Ne),"mousemove",Ue,Me)),mt||(mt=g(fe(Ne),"mouseup",lt,Me)))},ze=Ke=>{xt(),Xe&&Xe(Ke)},lt=Ke=>{Pt(),Xe&&Xe(Ke)},xt=()=>{oe&&oe(),et&&et(),Le&&Le(),oe=et=Le=void 0},Pt=()=>{Je&&Je(),mt&&mt(),Je=mt=void 0},Be=()=>{xt(),Pt()},At=(Ke=!0)=>{Ke?(Se||(Se=g(Ne,"touchstart",ve,Me)),Re||(Re=g(Ne,"mousedown",It,Me))):(Se&&Se(),Re&&Re(),Se=Re=void 0,Be())};return{enable:At,stop:Be,destroy:()=>{At(!1),Xe=Ue=je=void 0}}})(Se.el,zt=>{const un=be(zt);return!(Ue||!Xe||(he(zt,ze),ze.startX=ze.currentX,ze.startY=ze.currentY,ze.startTime=ze.currentTime=un,ze.velocityX=ze.velocityY=ze.deltaX=ze.deltaY=0,ze.event=zt,oe&&!1===oe(ze))||(xt.release(),!xt.start()))&&(Ue=!0,0===Ye?vt():(lt.start(ze.startX,ze.startY),!0))},zt=>{je?!Me&&Xe&&(Me=!0,De(ze,zt),requestAnimationFrame(At)):(De(ze,zt),lt.detect(ze.currentX,ze.currentY)&&(!lt.isGesture()||!vt())&&Dt())},Q,{capture:!1,passive:ve}),Dt=()=>{We(),_t.stop(),Je&&Je(ze)};return{enable(zt=!0){zt||(je&&Q(void 0),We()),_t.enable(zt)},destroy(){xt.destroy(),_t.destroy()}}},De=(Ne,je)=>{if(!je)return;const Ue=Ne.currentX,Xe=Ne.currentY,Me=Ne.currentTime;he(je,Ne);const Se=Ne.currentX,oe=Ne.currentY,Le=(Ne.currentTime=be(je))-Me;if(Le>0&&Le<100){const Je=(oe-Xe)/Le;Ne.velocityX=(Se-Ue)/Le*.7+.3*Ne.velocityX,Ne.velocityY=.7*Je+.3*Ne.velocityY}Ne.deltaX=Se-Ne.startX,Ne.deltaY=oe-Ne.startY,Ne.event=je},he=(Ne,je)=>{let Ue=0,Xe=0;if(Ne){const Me=Ne.changedTouches;if(Me&&Me.length>0){const Se=Me[0];Ue=Se.clientX,Xe=Se.clientY}else void 0!==Ne.pageX&&(Ue=Ne.pageX,Xe=Ne.pageY)}je.currentX=Ue,je.currentY=Xe},be=Ne=>Ne.timeStamp||Date.now()},4083:(cn,at,$)=>{"use strict";$.d(at,{B:()=>he,H:()=>Be,a:()=>Qs,b:()=>we,c:()=>zt,d:()=>Ot,e:()=>Wi,f:()=>ut,g:()=>un,h:()=>xt,i:()=>Nr,j:()=>be,p:()=>ps,r:()=>kt,w:()=>wr});var m=$(5861);let Y,ie,Pe,Ae=!1,fe=!1,de=!1,Fe=!1,De=!1;const he={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},be=ae=>{const xe=new URL(ae,ur.$resourcesUrl$);return xe.origin!==Er.location.origin?xe.href:xe.pathname},oe="s-id",et="sty-id",Je="http://www.w3.org/1999/xlink",mt={},ze=ae=>"object"==(ae=typeof ae)||"function"===ae;function lt(ae){var xe,Ze,Te;return null!==(Te=null===(Ze=null===(xe=ae.head)||void 0===xe?void 0:xe.querySelector('meta[name="csp-nonce"]'))||void 0===Ze?void 0:Ze.getAttribute("content"))&&void 0!==Te?Te:void 0}const xt=(ae,xe,...Ze)=>{let Te=null,tt=null,nt=null,Nt=!1,$t=!1;const Kt=[],Jt=qn=>{for(let Ln=0;Ln<qn.length;Ln++)Te=qn[Ln],Array.isArray(Te)?Jt(Te):null!=Te&&"boolean"!=typeof Te&&((Nt="function"!=typeof ae&&!ze(Te))&&(Te=String(Te)),Nt&&$t?Kt[Kt.length-1].$text$+=Te:Kt.push(Nt?Pt(null,Te):Te),$t=Nt)};if(Jt(Ze),xe){xe.key&&(tt=xe.key),xe.name&&(nt=xe.name);{const qn=xe.className||xe.class;qn&&(xe.class="object"!=typeof qn?qn:Object.keys(qn).filter(Ln=>qn[Ln]).join(" "))}}if("function"==typeof ae)return ae(null===xe?{}:xe,Kt,vt);const mn=Pt(ae,null);return mn.$attrs$=xe,Kt.length>0&&(mn.$children$=Kt),mn.$key$=tt,mn.$name$=nt,mn},Pt=(ae,xe)=>({$flags$:0,$tag$:ae,$text$:xe,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Be={},vt={forEach:(ae,xe)=>ae.map(Ke).forEach(xe),map:(ae,xe)=>ae.map(Ke).map(xe).map(qe)},Ke=ae=>({vattrs:ae.$attrs$,vchildren:ae.$children$,vkey:ae.$key$,vname:ae.$name$,vtag:ae.$tag$,vtext:ae.$text$}),qe=ae=>{if("function"==typeof ae.vtag){const Ze=Object.assign({},ae.vattrs);return ae.vkey&&(Ze.key=ae.vkey),ae.vname&&(Ze.name=ae.vname),xt(ae.vtag,Ze,...ae.vchildren||[])}const xe=Pt(ae.vtag,ae.vtext);return xe.$attrs$=ae.vattrs,xe.$children$=ae.vchildren,xe.$key$=ae.vkey,xe.$name$=ae.vname,xe},Q=(ae,xe,Ze,Te,tt,nt,Nt)=>{let $t,Kt,Jt,mn;if(1===nt.nodeType){for($t=nt.getAttribute("c-id"),$t&&(Kt=$t.split("."),(Kt[0]===Nt||"0"===Kt[0])&&(Jt={$flags$:0,$hostId$:Kt[0],$nodeId$:Kt[1],$depth$:Kt[2],$index$:Kt[3],$tag$:nt.tagName.toLowerCase(),$elm$:nt,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},xe.push(Jt),nt.removeAttribute("c-id"),ae.$children$||(ae.$children$=[]),ae.$children$[Jt.$index$]=Jt,ae=Jt,Te&&"0"===Jt.$depth$&&(Te[Jt.$index$]=Jt.$elm$))),mn=nt.childNodes.length-1;mn>=0;mn--)Q(ae,xe,Ze,Te,tt,nt.childNodes[mn],Nt);if(nt.shadowRoot)for(mn=nt.shadowRoot.childNodes.length-1;mn>=0;mn--)Q(ae,xe,Ze,Te,tt,nt.shadowRoot.childNodes[mn],Nt)}else if(8===nt.nodeType)Kt=nt.nodeValue.split("."),(Kt[1]===Nt||"0"===Kt[1])&&($t=Kt[0],Jt={$flags$:0,$hostId$:Kt[1],$nodeId$:Kt[2],$depth$:Kt[3],$index$:Kt[4],$elm$:nt,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===$t?(Jt.$elm$=nt.nextSibling,Jt.$elm$&&3===Jt.$elm$.nodeType&&(Jt.$text$=Jt.$elm$.textContent,xe.push(Jt),nt.remove(),ae.$children$||(ae.$children$=[]),ae.$children$[Jt.$index$]=Jt,Te&&"0"===Jt.$depth$&&(Te[Jt.$index$]=Jt.$elm$))):Jt.$hostId$===Nt&&("s"===$t?(Jt.$tag$="slot",nt["s-sn"]=Kt[5]?Jt.$name$=Kt[5]:"",nt["s-sr"]=!0,Te&&(Jt.$elm$=lr.createElement(Jt.$tag$),Jt.$name$&&Jt.$elm$.setAttribute("name",Jt.$name$),nt.parentNode.insertBefore(Jt.$elm$,nt),nt.remove(),"0"===Jt.$depth$&&(Te[Jt.$index$]=Jt.$elm$)),Ze.push(Jt),ae.$children$||(ae.$children$=[]),ae.$children$[Jt.$index$]=Jt):"r"===$t&&(Te?nt.remove():(tt["s-cr"]=nt,nt["s-cn"]=!0))));else if(ae&&"style"===ae.$tag$){const qn=Pt(null,nt.textContent);qn.$elm$=nt,qn.$index$="0",ae.$children$=[qn]}},_t=(ae,xe)=>{if(1===ae.nodeType){let Ze=0;for(;Ze<ae.childNodes.length;Ze++)_t(ae.childNodes[Ze],xe);if(ae.shadowRoot)for(Ze=0;Ze<ae.shadowRoot.childNodes.length;Ze++)_t(ae.shadowRoot.childNodes[Ze],xe)}else if(8===ae.nodeType){const Ze=ae.nodeValue.split(".");"o"===Ze[0]&&(xe.set(Ze[1]+"."+Ze[2],ae),ae.nodeValue="",ae["s-en"]=Ze[3])}},zt=ae=>Lr.push(ae),un=ae=>kr(ae).$modeName$,ut=ae=>kr(ae).$hostElement$,Ot=(ae,xe,Ze)=>{const Te=ut(ae);return{emit:tt=>sn(Te,xe,{bubbles:!!(4&Ze),composed:!!(2&Ze),cancelable:!!(1&Ze),detail:tt})}},sn=(ae,xe,Ze)=>{const Te=ur.ce(xe,Ze);return ae.dispatchEvent(Te),Te},Cn=new WeakMap,zn=(ae,xe,Ze)=>{let Te=Mn.get(ae);Oi&&Ze?(Te=Te||new CSSStyleSheet,"string"==typeof Te?Te=xe:Te.replaceSync(xe)):Te=xe,Mn.set(ae,Te)},hn=(ae,xe,Ze,Te)=>{var tt;let nt=tn(xe,Ze);const Nt=Mn.get(nt);if(ae=11===ae.nodeType?ae:lr,Nt)if("string"==typeof Nt){let Kt,$t=Cn.get(ae=ae.head||ae);if($t||Cn.set(ae,$t=new Set),!$t.has(nt)){if(ae.host&&(Kt=ae.querySelector(`[${et}="${nt}"]`)))Kt.innerHTML=Nt;else{Kt=lr.createElement("style"),Kt.innerHTML=Nt;const Jt=null!==(tt=ur.$nonce$)&&void 0!==tt?tt:lt(lr);null!=Jt&&Kt.setAttribute("nonce",Jt),ae.insertBefore(Kt,ae.querySelector("link"))}$t&&$t.add(nt)}}else ae.adoptedStyleSheets.includes(Nt)||(ae.adoptedStyleSheets=[...ae.adoptedStyleSheets,Nt]);return nt},tn=(ae,xe)=>"sc-"+(xe&&32&ae.$flags$?ae.$tagName$+"-"+xe:ae.$tagName$),ir=ae=>ae.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Qt=(ae,xe,Ze,Te,tt,nt)=>{if(Ze!==Te){let Nt=nn(ae,xe),$t=xe.toLowerCase();if("class"===xe){const Kt=ae.classList,Jt=fn(Ze),mn=fn(Te);Kt.remove(...Jt.filter(qn=>qn&&!mn.includes(qn))),Kt.add(...mn.filter(qn=>qn&&!Jt.includes(qn)))}else if("style"===xe){for(const Kt in Ze)(!Te||null==Te[Kt])&&(Kt.includes("-")?ae.style.removeProperty(Kt):ae.style[Kt]="");for(const Kt in Te)(!Ze||Te[Kt]!==Ze[Kt])&&(Kt.includes("-")?ae.style.setProperty(Kt,Te[Kt]):ae.style[Kt]=Te[Kt])}else if("key"!==xe)if("ref"===xe)Te&&Te(ae);else if(Nt||"o"!==xe[0]||"n"!==xe[1]){const Kt=ze(Te);if((Nt||Kt&&null!==Te)&&!tt)try{if(ae.tagName.includes("-"))ae[xe]=Te;else{const mn=null==Te?"":Te;"list"===xe?Nt=!1:(null==Ze||ae[xe]!=mn)&&(ae[xe]=mn)}}catch{}let Jt=!1;$t!==($t=$t.replace(/^xlink\:?/,""))&&(xe=$t,Jt=!0),null==Te||!1===Te?(!1!==Te||""===ae.getAttribute(xe))&&(Jt?ae.removeAttributeNS(Je,xe):ae.removeAttribute(xe)):(!Nt||4&nt||tt)&&!Kt&&(Te=!0===Te?"":Te,Jt?ae.setAttributeNS(Je,xe,Te):ae.setAttribute(xe,Te))}else xe="-"===xe[2]?xe.slice(3):nn(Er,$t)?$t.slice(2):$t[2]+xe.slice(3),Ze&&ur.rel(ae,xe,Ze,!1),Te&&ur.ael(ae,xe,Te,!1)}},jn=/\s/,fn=ae=>ae?ae.split(jn):[],xn=(ae,xe,Ze,Te)=>{const tt=11===xe.$elm$.nodeType&&xe.$elm$.host?xe.$elm$.host:xe.$elm$,nt=ae&&ae.$attrs$||mt,Nt=xe.$attrs$||mt;for(Te in nt)Te in Nt||Qt(tt,Te,nt[Te],void 0,Ze,xe.$flags$);for(Te in Nt)Qt(tt,Te,nt[Te],Nt[Te],Ze,xe.$flags$)},Di=(ae,xe,Ze,Te)=>{const tt=xe.$children$[Ze];let Nt,$t,Kt,nt=0;if(Ae||(de=!0,"slot"===tt.$tag$&&(Y&&Te.classList.add(Y+"-s"),tt.$flags$|=tt.$children$?2:1)),null!==tt.$text$)Nt=tt.$elm$=lr.createTextNode(tt.$text$);else if(1&tt.$flags$)Nt=tt.$elm$=lr.createTextNode("");else{if(Fe||(Fe="svg"===tt.$tag$),Nt=tt.$elm$=lr.createElementNS(Fe?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&tt.$flags$?"slot-fb":tt.$tag$),Fe&&"foreignObject"===tt.$tag$&&(Fe=!1),xn(null,tt,Fe),(ae=>null!=ae)(Y)&&Nt["s-si"]!==Y&&Nt.classList.add(Nt["s-si"]=Y),tt.$children$)for(nt=0;nt<tt.$children$.length;++nt)$t=Di(ae,tt,nt,Nt),$t&&Nt.appendChild($t);"svg"===tt.$tag$?Fe=!1:"foreignObject"===Nt.tagName&&(Fe=!0)}return Nt["s-hn"]=Pe,3&tt.$flags$&&(Nt["s-sr"]=!0,Nt["s-cr"]=ie,Nt["s-sn"]=tt.$name$||"",Kt=ae&&ae.$children$&&ae.$children$[Ze],Kt&&Kt.$tag$===tt.$tag$&&ae.$elm$&&Cr(ae.$elm$,!1)),Nt},Cr=(ae,xe)=>{ur.$flags$|=1;const Ze=ae.childNodes;for(let Te=Ze.length-1;Te>=0;Te--){const tt=Ze[Te];tt["s-hn"]!==Pe&&tt["s-ol"]&&(on(tt).insertBefore(tt,bn(tt)),tt["s-ol"].remove(),tt["s-ol"]=void 0,de=!0),xe&&Cr(tt,xe)}ur.$flags$&=-2},Hr=(ae,xe,Ze,Te,tt,nt)=>{let $t,Nt=ae["s-cr"]&&ae["s-cr"].parentNode||ae;for(Nt.shadowRoot&&Nt.tagName===Pe&&(Nt=Nt.shadowRoot);tt<=nt;++tt)Te[tt]&&($t=Di(null,Ze,tt,ae),$t&&(Te[tt].$elm$=$t,Nt.insertBefore($t,bn(xe))))},Ur=(ae,xe,Ze)=>{for(let Te=xe;Te<=Ze;++Te){const tt=ae[Te];if(tt){const nt=tt.$elm$;ii(tt),nt&&(fe=!0,nt["s-ol"]?nt["s-ol"].remove():Cr(nt,!0),nt.remove())}}},Qn=(ae,xe)=>ae.$tag$===xe.$tag$&&("slot"===ae.$tag$?ae.$name$===xe.$name$:ae.$key$===xe.$key$),bn=ae=>ae&&ae["s-ol"]||ae,on=ae=>(ae["s-ol"]?ae["s-ol"]:ae).parentNode,vr=(ae,xe)=>{const Ze=xe.$elm$=ae.$elm$,Te=ae.$children$,tt=xe.$children$,nt=xe.$tag$,Nt=xe.$text$;let $t;null===Nt?(Fe="svg"===nt||"foreignObject"!==nt&&Fe,"slot"===nt||xn(ae,xe,Fe),null!==Te&&null!==tt?((ae,xe,Ze,Te)=>{let ji,Zi,tt=0,nt=0,Nt=0,$t=0,Kt=xe.length-1,Jt=xe[0],mn=xe[Kt],qn=Te.length-1,Ln=Te[0],sr=Te[qn];for(;tt<=Kt&&nt<=qn;)if(null==Jt)Jt=xe[++tt];else if(null==mn)mn=xe[--Kt];else if(null==Ln)Ln=Te[++nt];else if(null==sr)sr=Te[--qn];else if(Qn(Jt,Ln))vr(Jt,Ln),Jt=xe[++tt],Ln=Te[++nt];else if(Qn(mn,sr))vr(mn,sr),mn=xe[--Kt],sr=Te[--qn];else if(Qn(Jt,sr))("slot"===Jt.$tag$||"slot"===sr.$tag$)&&Cr(Jt.$elm$.parentNode,!1),vr(Jt,sr),ae.insertBefore(Jt.$elm$,mn.$elm$.nextSibling),Jt=xe[++tt],sr=Te[--qn];else if(Qn(mn,Ln))("slot"===Jt.$tag$||"slot"===sr.$tag$)&&Cr(mn.$elm$.parentNode,!1),vr(mn,Ln),ae.insertBefore(mn.$elm$,Jt.$elm$),mn=xe[--Kt],Ln=Te[++nt];else{for(Nt=-1,$t=tt;$t<=Kt;++$t)if(xe[$t]&&null!==xe[$t].$key$&&xe[$t].$key$===Ln.$key$){Nt=$t;break}Nt>=0?(Zi=xe[Nt],Zi.$tag$!==Ln.$tag$?ji=Di(xe&&xe[nt],Ze,Nt,ae):(vr(Zi,Ln),xe[Nt]=void 0,ji=Zi.$elm$),Ln=Te[++nt]):(ji=Di(xe&&xe[nt],Ze,nt,ae),Ln=Te[++nt]),ji&&on(Jt.$elm$).insertBefore(ji,bn(Jt.$elm$))}tt>Kt?Hr(ae,null==Te[qn+1]?null:Te[qn+1].$elm$,Ze,Te,nt,qn):nt>qn&&Ur(xe,tt,Kt)})(Ze,Te,xe,tt):null!==tt?(null!==ae.$text$&&(Ze.textContent=""),Hr(Ze,null,xe,tt,0,tt.length-1)):null!==Te&&Ur(Te,0,Te.length-1),Fe&&"svg"===nt&&(Fe=!1)):($t=Ze["s-cr"])?$t.parentNode.textContent=Nt:ae.$text$!==Nt&&(Ze.data=Nt)},oi=ae=>{const xe=ae.childNodes;let Ze,Te,tt,nt,Nt,$t;for(Te=0,tt=xe.length;Te<tt;Te++)if(Ze=xe[Te],1===Ze.nodeType){if(Ze["s-sr"])for(Nt=Ze["s-sn"],Ze.hidden=!1,nt=0;nt<tt;nt++)if($t=xe[nt].nodeType,xe[nt]["s-hn"]!==Ze["s-hn"]||""!==Nt){if(1===$t&&Nt===xe[nt].getAttribute("slot")){Ze.hidden=!0;break}}else if(1===$t||3===$t&&""!==xe[nt].textContent.trim()){Ze.hidden=!0;break}oi(Ze)}},mr=[],_i=ae=>{let xe,Ze,Te,tt,nt,Nt,$t=0;const Kt=ae.childNodes,Jt=Kt.length;for(;$t<Jt;$t++){if(xe=Kt[$t],xe["s-sr"]&&(Ze=xe["s-cr"])&&Ze.parentNode)for(Te=Ze.parentNode.childNodes,tt=xe["s-sn"],Nt=Te.length-1;Nt>=0;Nt--)Ze=Te[Nt],!Ze["s-cn"]&&!Ze["s-nr"]&&Ze["s-hn"]!==xe["s-hn"]&&(pr(Ze,tt)?(nt=mr.find(mn=>mn.$nodeToRelocate$===Ze),fe=!0,Ze["s-sn"]=Ze["s-sn"]||tt,nt?nt.$slotRefNode$=xe:mr.push({$slotRefNode$:xe,$nodeToRelocate$:Ze}),Ze["s-sr"]&&mr.map(mn=>{pr(mn.$nodeToRelocate$,Ze["s-sn"])&&(nt=mr.find(qn=>qn.$nodeToRelocate$===Ze),nt&&!mn.$slotRefNode$&&(mn.$slotRefNode$=nt.$slotRefNode$))})):mr.some(mn=>mn.$nodeToRelocate$===Ze)||mr.push({$nodeToRelocate$:Ze}));1===xe.nodeType&&_i(xe)}},pr=(ae,xe)=>1===ae.nodeType?null===ae.getAttribute("slot")&&""===xe||ae.getAttribute("slot")===xe:ae["s-sn"]===xe||""===xe,ii=ae=>{ae.$attrs$&&ae.$attrs$.ref&&ae.$attrs$.ref(null),ae.$children$&&ae.$children$.map(ii)},vi=(ae,xe)=>{xe&&!ae.$onRenderResolve$&&xe["s-p"]&&xe["s-p"].push(new Promise(Ze=>ae.$onRenderResolve$=Ze))},rr=(ae,xe)=>{if(ae.$flags$|=16,!(4&ae.$flags$))return vi(ae,ae.$ancestorComponent$),wr(()=>Pi(ae,xe));ae.$flags$|=512},Pi=(ae,xe)=>{const Te=ae.$lazyInstance$;let tt;return xe&&(ae.$flags$|=256,ae.$queuedListeners$&&(ae.$queuedListeners$.map(([nt,Nt])=>Zr(Te,nt,Nt)),ae.$queuedListeners$=null),tt=Zr(Te,"componentWillLoad")),tt=Xn(tt,()=>Zr(Te,"componentWillRender")),Xn(tt,()=>ai(ae,Te,xe))},Xn=(ae,xe)=>ae instanceof Promise?ae.then(xe):xe(),ai=function(){var ae=(0,m.Z)(function*(xe,Ze,Te){const tt=xe.$hostElement$,Nt=tt["s-rc"];Te&&(ae=>{const xe=ae.$cmpMeta$,Ze=ae.$hostElement$,Te=xe.$flags$,nt=hn(Ze.shadowRoot?Ze.shadowRoot:Ze.getRootNode(),xe,ae.$modeName$);10&Te&&(Ze["s-sc"]=nt,Ze.classList.add(nt+"-h"),2&Te&&Ze.classList.add(nt+"-s"))})(xe);ei(xe,Ze),Nt&&(Nt.map(Kt=>Kt()),tt["s-rc"]=void 0);{const Kt=tt["s-p"],Jt=()=>li(xe);0===Kt.length?Jt():(Promise.all(Kt).then(Jt),xe.$flags$|=4,Kt.length=0)}});return function(Ze,Te,tt){return ae.apply(this,arguments)}}(),ei=(ae,xe,Ze)=>{try{xe=xe.render&&xe.render(),ae.$flags$&=-17,ae.$flags$|=2,((ae,xe)=>{const Ze=ae.$hostElement$,Te=ae.$cmpMeta$,tt=ae.$vnode$||Pt(null,null),nt=(ae=>ae&&ae.$tag$===Be)(xe)?xe:xt(null,null,xe);if(Pe=Ze.tagName,Te.$attrsToReflect$&&(nt.$attrs$=nt.$attrs$||{},Te.$attrsToReflect$.map(([Nt,$t])=>nt.$attrs$[$t]=Ze[Nt])),nt.$tag$=null,nt.$flags$|=4,ae.$vnode$=nt,nt.$elm$=tt.$elm$=Ze.shadowRoot||Ze,Y=Ze["s-sc"],ie=Ze["s-cr"],Ae=0!=(1&Te.$flags$),fe=!1,vr(tt,nt),ur.$flags$|=1,de){_i(nt.$elm$);let Nt,$t,Kt,Jt,mn,qn,Ln=0;for(;Ln<mr.length;Ln++)Nt=mr[Ln],$t=Nt.$nodeToRelocate$,$t["s-ol"]||(Kt=lr.createTextNode(""),Kt["s-nr"]=$t,$t.parentNode.insertBefore($t["s-ol"]=Kt,$t));for(Ln=0;Ln<mr.length;Ln++)if(Nt=mr[Ln],$t=Nt.$nodeToRelocate$,Nt.$slotRefNode$){for(Jt=Nt.$slotRefNode$.parentNode,mn=Nt.$slotRefNode$.nextSibling,Kt=$t["s-ol"];Kt=Kt.previousSibling;)if(qn=Kt["s-nr"],qn&&qn["s-sn"]===$t["s-sn"]&&Jt===qn.parentNode&&(qn=qn.nextSibling,!qn||!qn["s-nr"])){mn=qn;break}(!mn&&Jt!==$t.parentNode||$t.nextSibling!==mn)&&$t!==mn&&(!$t["s-hn"]&&$t["s-ol"]&&($t["s-hn"]=$t["s-ol"].parentNode.nodeName),Jt.insertBefore($t,mn))}else 1===$t.nodeType&&($t.hidden=!0)}fe&&oi(nt.$elm$),ur.$flags$&=-2,mr.length=0})(ae,xe)}catch(Te){Pn(Te,ae.$hostElement$)}return null},li=ae=>{const Ze=ae.$hostElement$,tt=ae.$lazyInstance$,nt=ae.$ancestorComponent$;Zr(tt,"componentDidRender"),64&ae.$flags$?Zr(tt,"componentDidUpdate"):(ae.$flags$|=64,Kr(Ze),Zr(tt,"componentDidLoad"),ae.$onReadyResolve$(Ze),nt||si()),ae.$onInstanceResolve$(Ze),ae.$onRenderResolve$&&(ae.$onRenderResolve$(),ae.$onRenderResolve$=void 0),512&ae.$flags$&&mi(()=>rr(ae,!1)),ae.$flags$&=-517},Nr=ae=>{{const xe=kr(ae),Ze=xe.$hostElement$.isConnected;return Ze&&2==(18&xe.$flags$)&&rr(xe,!1),Ze}},si=ae=>{Kr(lr.documentElement),mi(()=>sn(Er,"appload",{detail:{namespace:"ionic"}}))},Zr=(ae,xe,Ze)=>{if(ae&&ae[xe])try{return ae[xe](Ze)}catch(Te){Pn(Te)}},Kr=ae=>ae.classList.add("hydrated"),ce=(ae,xe,Ze)=>{if(xe.$members$){ae.watchers&&(xe.$watchers$=ae.watchers);const Te=Object.entries(xe.$members$),tt=ae.prototype;if(Te.map(([nt,[Nt]])=>{31&Nt||2&Ze&&32&Nt?Object.defineProperty(tt,nt,{get(){return((ae,xe)=>kr(this).$instanceValues$.get(xe))(0,nt)},set($t){((ae,xe,Ze,Te)=>{const tt=kr(ae),nt=tt.$hostElement$,Nt=tt.$instanceValues$.get(xe),$t=tt.$flags$,Kt=tt.$lazyInstance$;Ze=((ae,xe)=>null==ae||ze(ae)?ae:4&xe?"false"!==ae&&(""===ae||!!ae):2&xe?parseFloat(ae):1&xe?String(ae):ae)(Ze,Te.$members$[xe][0]);const Jt=Number.isNaN(Nt)&&Number.isNaN(Ze);if((!(8&$t)||void 0===Nt)&&Ze!==Nt&&!Jt&&(tt.$instanceValues$.set(xe,Ze),Kt)){if(Te.$watchers$&&128&$t){const qn=Te.$watchers$[xe];qn&&qn.map(Ln=>{try{Kt[Ln](Ze,Nt,xe)}catch(sr){Pn(sr,nt)}})}2==(18&$t)&&rr(tt,!1)}})(this,nt,$t,xe)},configurable:!0,enumerable:!0}):1&Ze&&64&Nt&&Object.defineProperty(tt,nt,{value(...$t){const Kt=kr(this);return Kt.$onInstancePromise$.then(()=>Kt.$lazyInstance$[nt](...$t))}})}),1&Ze){const nt=new Map;tt.attributeChangedCallback=function(Nt,$t,Kt){ur.jmp(()=>{const Jt=nt.get(Nt);if(this.hasOwnProperty(Jt))Kt=this[Jt],delete this[Jt];else if(tt.hasOwnProperty(Jt)&&"number"==typeof this[Jt]&&this[Jt]==Kt)return;this[Jt]=(null!==Kt||"boolean"!=typeof this[Jt])&&Kt})},ae.observedAttributes=Te.filter(([Nt,$t])=>15&$t[0]).map(([Nt,$t])=>{const Kt=$t[1]||Nt;return nt.set(Kt,Nt),512&$t[0]&&xe.$attrsToReflect$.push([Nt,Kt]),Kt})}}return ae},Ee=function(){var ae=(0,m.Z)(function*(xe,Ze,Te,tt,nt){if(!(32&Ze.$flags$)){Ze.$flags$|=32;{if((nt=cr(Te)).then){const Jt=()=>{};nt=yield nt,Jt()}nt.isProxied||(Te.$watchers$=nt.watchers,ce(nt,Te,2),nt.isProxied=!0);const Kt=()=>{};Ze.$flags$|=8;try{new nt(Ze)}catch(Jt){Pn(Jt)}Ze.$flags$&=-9,Ze.$flags$|=128,Kt(),ue(Ze.$lazyInstance$)}if(nt.style){let Kt=nt.style;"string"!=typeof Kt&&(Kt=Kt[Ze.$modeName$=(ae=>Lr.map(xe=>xe(ae)).find(xe=>!!xe))(xe)]);const Jt=tn(Te,Ze.$modeName$);if(!Mn.has(Jt)){const mn=()=>{};zn(Jt,Kt,!!(1&Te.$flags$)),mn()}}}const Nt=Ze.$ancestorComponent$,$t=()=>rr(Ze,!0);Nt&&Nt["s-rc"]?Nt["s-rc"].push($t):$t()});return function(Ze,Te,tt,nt,Nt){return ae.apply(this,arguments)}}(),ue=ae=>{Zr(ae,"connectedCallback")},Oe=ae=>{const xe=ae["s-cr"]=lr.createComment("");xe["s-cn"]=!0,ae.insertBefore(xe,ae.firstChild)},we=(ae,xe={})=>{var Ze;const tt=[],nt=xe.exclude||[],Nt=Er.customElements,$t=lr.head,Kt=$t.querySelector("meta[charset]"),Jt=lr.createElement("style"),mn=[],qn=lr.querySelectorAll(`[${et}]`);let Ln,sr=!0,ji=0;for(Object.assign(ur,xe),ur.$resourcesUrl$=new URL(xe.resourcesUrl||"./",lr.baseURI).href,ur.$flags$|=2;ji<qn.length;ji++)zn(qn[ji].getAttribute(et),ir(qn[ji].innerHTML),!0);ae.map(Zi=>{Zi[1].map(ft=>{const st={$flags$:ft[0],$tagName$:ft[1],$members$:ft[2],$listeners$:ft[3]};st.$members$=ft[2],st.$listeners$=ft[3],st.$attrsToReflect$=[],st.$watchers$={};const Tt=st.$tagName$,qt=class extends HTMLElement{constructor(en){super(en),Mt(en=this,st),1&st.$flags$&&en.attachShadow({mode:"open",delegatesFocus:!!(16&st.$flags$)})}connectedCallback(){Ln&&(clearTimeout(Ln),Ln=null),sr?mn.push(this):ur.jmp(()=>(ae=>{if(!(1&ur.$flags$)){const xe=kr(ae),Ze=xe.$cmpMeta$,Te=()=>{};if(1&xe.$flags$)rt(ae,xe,Ze.$listeners$),ue(xe.$lazyInstance$);else{let tt;if(xe.$flags$|=1,tt=ae.getAttribute(oe),tt){if(1&Ze.$flags$){const nt=hn(ae.shadowRoot,Ze,ae.getAttribute("s-mode"));ae.classList.remove(nt+"-h",nt+"-s")}((ae,xe,Ze,Te)=>{const nt=ae.shadowRoot,Nt=[],Kt=nt?[]:null,Jt=Te.$vnode$=Pt(xe,null);ur.$orgLocNodes$||_t(lr.body,ur.$orgLocNodes$=new Map),ae[oe]=Ze,ae.removeAttribute(oe),Q(Jt,Nt,[],Kt,ae,ae,Ze),Nt.map(mn=>{const qn=mn.$hostId$+"."+mn.$nodeId$,Ln=ur.$orgLocNodes$.get(qn),sr=mn.$elm$;Ln&&fs&&""===Ln["s-en"]&&Ln.parentNode.insertBefore(sr,Ln.nextSibling),nt||(sr["s-hn"]=xe,Ln&&(sr["s-ol"]=Ln,sr["s-ol"]["s-nr"]=sr)),ur.$orgLocNodes$.delete(qn)}),nt&&Kt.map(mn=>{mn&&nt.appendChild(mn)})})(ae,Ze.$tagName$,tt,xe)}tt||12&Ze.$flags$&&Oe(ae);{let nt=ae;for(;nt=nt.parentNode||nt.host;)if(1===nt.nodeType&&nt.hasAttribute("s-id")&&nt["s-p"]||nt["s-p"]){vi(xe,xe.$ancestorComponent$=nt);break}}Ze.$members$&&Object.entries(Ze.$members$).map(([nt,[Nt]])=>{if(31&Nt&&ae.hasOwnProperty(nt)){const $t=ae[nt];delete ae[nt],ae[nt]=$t}}),Ee(ae,xe,Ze)}Te()}})(this))}disconnectedCallback(){ur.jmp(()=>(ae=>{if(!(1&ur.$flags$)){const xe=kr(this),Ze=xe.$lazyInstance$;xe.$rmListeners$&&(xe.$rmListeners$.map(Te=>Te()),xe.$rmListeners$=void 0),Zr(Ze,"disconnectedCallback")}})())}componentOnReady(){return kr(this).$onReadyPromise$}};st.$lazyBundleId$=Zi[0],!nt.includes(Tt)&&!Nt.get(Tt)&&(tt.push(Tt),Nt.define(Tt,ce(qt,st,1)))})});{Jt.innerHTML=tt+"{visibility:hidden}.hydrated{visibility:inherit}",Jt.setAttribute("data-styles","");const Zi=null!==(Ze=ur.$nonce$)&&void 0!==Ze?Ze:lt(lr);null!=Zi&&Jt.setAttribute("nonce",Zi),$t.insertBefore(Jt,Kt?Kt.nextSibling:$t.firstChild)}sr=!1,mn.length?mn.map(Zi=>Zi.connectedCallback()):ur.jmp(()=>Ln=setTimeout(si,30))},rt=(ae,xe,Ze,Te)=>{Ze&&Ze.map(([tt,nt,Nt])=>{const $t=Yt(ae,tt),Kt=Rt(xe,Nt),Jt=Dn(tt);ur.ael($t,nt,Kt,Jt),(xe.$rmListeners$=xe.$rmListeners$||[]).push(()=>ur.rel($t,nt,Kt,Jt))})},Rt=(ae,xe)=>Ze=>{try{256&ae.$flags$?ae.$lazyInstance$[xe](Ze):(ae.$queuedListeners$=ae.$queuedListeners$||[]).push([xe,Ze])}catch(Te){Pn(Te)}},Yt=(ae,xe)=>4&xe?lr:8&xe?Er:16&xe?lr.body:ae,Dn=ae=>0!=(2&ae),Jn=new WeakMap,kr=ae=>Jn.get(ae),kt=(ae,xe)=>Jn.set(xe.$lazyInstance$=ae,xe),Mt=(ae,xe)=>{const Ze={$flags$:0,$hostElement$:ae,$cmpMeta$:xe,$instanceValues$:new Map};return Ze.$onInstancePromise$=new Promise(Te=>Ze.$onInstanceResolve$=Te),Ze.$onReadyPromise$=new Promise(Te=>Ze.$onReadyResolve$=Te),ae["s-p"]=[],ae["s-rc"]=[],rt(ae,Ze,xe.$listeners$),Jn.set(ae,Ze)},nn=(ae,xe)=>xe in ae,Pn=(ae,xe)=>(0,console.error)(ae,xe),Kn=new Map,cr=(ae,xe,Ze)=>{const Te=ae.$tagName$.replace(/-/g,"_"),tt=ae.$lazyBundleId$,nt=Kn.get(tt);return nt?nt[Te]:$(863)(`./${tt}.entry.js`).then(Nt=>(Kn.set(tt,Nt),Nt[Te]),Pn)},Mn=new Map,Lr=[],Er=typeof window<"u"?window:{},lr=Er.document||{head:{}},ur={$flags$:0,$resourcesUrl$:"",jmp:ae=>ae(),raf:ae=>requestAnimationFrame(ae),ael:(ae,xe,Ze,Te)=>ae.addEventListener(xe,Ze,Te),rel:(ae,xe,Ze,Te)=>ae.removeEventListener(xe,Ze,Te),ce:(ae,xe)=>new CustomEvent(ae,xe)},Qs=ae=>{Object.assign(ur,ae)},fs=!0,ps=ae=>Promise.resolve(ae),Oi=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),vn=[],hr=[],gi=(ae,xe)=>Ze=>{ae.push(Ze),De||(De=!0,xe&&4&ur.$flags$?mi(Ei):ur.raf(Ei))},Fr=ae=>{for(let xe=0;xe<ae.length;xe++)try{ae[xe](performance.now())}catch(Ze){Pn(Ze)}ae.length=0},Ei=()=>{Fr(vn),Fr(hr),(De=vn.length>0)&&ur.raf(Ei)},mi=ae=>ps().then(ae),Wi=gi(vn,!1),wr=gi(hr,!0)},8126:(cn,at,$)=>{"use strict";$.d(at,{m:()=>he});var m=$(5861),g=$(7593),Y=$(3577),ie=$(5273),Pe=$(9613);const Ae=be=>(0,Pe.c)().duration(be?400:300),fe=be=>{let Ne,je;const Ue=be.width+8,Xe=(0,Pe.c)(),Me=(0,Pe.c)();be.isEndSide?(Ne=Ue+"px",je="0px"):(Ne=-Ue+"px",je="0px"),Xe.addElement(be.menuInnerEl).fromTo("transform",`translateX(${Ne})`,`translateX(${je})`);const oe="ios"===(0,ie.b)(be),et=oe?.2:.25;return Me.addElement(be.backdropEl).fromTo("opacity",.01,et),Ae(oe).addAnimation([Xe,Me])},de=be=>{let Ne,je;const Ue=(0,ie.b)(be),Xe=be.width;be.isEndSide?(Ne=-Xe+"px",je=Xe+"px"):(Ne=Xe+"px",je=-Xe+"px");const Me=(0,Pe.c)().addElement(be.menuInnerEl).fromTo("transform",`translateX(${je})`,"translateX(0px)"),Se=(0,Pe.c)().addElement(be.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ne})`),oe=(0,Pe.c)().addElement(be.backdropEl).fromTo("opacity",.01,.32);return Ae("ios"===Ue).addAnimation([Me,Se,oe])},Fe=be=>{const Ne=(0,ie.b)(be),je=be.width*(be.isEndSide?-1:1)+"px",Ue=(0,Pe.c)().addElement(be.contentEl).fromTo("transform","translateX(0px)",`translateX(${je})`);return Ae("ios"===Ne).addAnimation(Ue)},he=(()=>{const be=new Map,Ne=[],je=function(){var qe=(0,m.Z)(function*(We){const Q=yield Le(We);return!!Q&&Q.open()});return function(Q){return qe.apply(this,arguments)}}(),Ue=function(){var qe=(0,m.Z)(function*(We){const Q=yield void 0!==We?Le(We):Re();return void 0!==Q&&Q.close()});return function(Q){return qe.apply(this,arguments)}}(),Xe=function(){var qe=(0,m.Z)(function*(We){const Q=yield Le(We);return!!Q&&Q.toggle()});return function(Q){return qe.apply(this,arguments)}}(),Me=function(){var qe=(0,m.Z)(function*(We,Q){const _t=yield Le(Q);return _t&&(_t.disabled=!We),_t});return function(Q,_t){return qe.apply(this,arguments)}}(),Se=function(){var qe=(0,m.Z)(function*(We,Q){const _t=yield Le(Q);return _t&&(_t.swipeGesture=We),_t});return function(Q,_t){return qe.apply(this,arguments)}}(),oe=function(){var qe=(0,m.Z)(function*(We){if(null!=We){const Q=yield Le(We);return void 0!==Q&&Q.isOpen()}return void 0!==(yield Re())});return function(Q){return qe.apply(this,arguments)}}(),et=function(){var qe=(0,m.Z)(function*(We){const Q=yield Le(We);return!!Q&&!Q.disabled});return function(Q){return qe.apply(this,arguments)}}(),Le=function(){var qe=(0,m.Z)(function*(We){return yield Ke(),"start"===We||"end"===We?vt(Dt=>Dt.side===We&&!Dt.disabled)||vt(Dt=>Dt.side===We):null!=We?vt(_t=>_t.menuId===We):vt(_t=>!_t.disabled)||(Ne.length>0?Ne[0].el:void 0)});return function(Q){return qe.apply(this,arguments)}}(),Re=function(){var qe=(0,m.Z)(function*(){return yield Ke(),Pt()});return function(){return qe.apply(this,arguments)}}(),Je=function(){var qe=(0,m.Z)(function*(){return yield Ke(),Be()});return function(){return qe.apply(this,arguments)}}(),mt=function(){var qe=(0,m.Z)(function*(){return yield Ke(),At()});return function(){return qe.apply(this,arguments)}}(),Ye=(qe,We)=>{be.set(qe,We)},ze=qe=>{const We=qe.side;Ne.filter(Q=>Q.side===We&&Q!==qe).forEach(Q=>Q.disabled=!0)},lt=function(){var qe=(0,m.Z)(function*(We,Q,_t){if(At())return!1;if(Q){const Dt=yield Re();Dt&&We.el!==Dt&&(yield Dt.setOpen(!1,!1))}return We._setOpen(Q,_t)});return function(Q,_t,Dt){return qe.apply(this,arguments)}}(),Pt=()=>vt(qe=>qe._isOpen),Be=()=>Ne.map(qe=>qe.el),At=()=>Ne.some(qe=>qe.isAnimating),vt=qe=>{const We=Ne.find(qe);if(void 0!==We)return We.el},Ke=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(qe=>new Promise(We=>(0,Y.c)(qe,We))));return Ye("reveal",Fe),Ye("push",de),Ye("overlay",fe),typeof document<"u"&&document.addEventListener("ionBackButton",qe=>{const We=Pt();We&&qe.detail.register(g.MENU_BACK_BUTTON_PRIORITY,()=>We.close())}),{registerAnimation:Ye,get:Le,getMenus:Je,getOpen:Re,isEnabled:et,swipeGesture:Se,isAnimating:mt,isOpen:oe,enable:Me,toggle:Xe,close:Ue,open:je,_getOpenSync:Pt,_createAnimation:(qe,We)=>{const Q=be.get(qe);if(!Q)throw new Error("animation not registered");return Q(We)},_register:qe=>{Ne.indexOf(qe)<0&&(qe.disabled||ze(qe),Ne.push(qe))},_unregister:qe=>{const We=Ne.indexOf(qe);We>-1&&Ne.splice(We,1)},_setOpen:lt,_setActiveMenu:ze}})()},1178:(cn,at,$)=>{"use strict";$.d(at,{a:()=>g,b:()=>Y,p:()=>m});const m=(ie,...Pe)=>console.warn(`[Ionic Warning]: ${ie}`,...Pe),g=(ie,...Pe)=>console.error(`[Ionic Error]: ${ie}`,...Pe),Y=(ie,...Pe)=>console.error(`<${ie.tagName.toLowerCase()}> must be used inside ${Pe.join(" or ")}.`)},9866:(cn,at,$)=>{"use strict";$.d(at,{L:()=>ie,a:()=>Pe,b:()=>Ae,c:()=>fe,d:()=>de,e:()=>mt,g:()=>It,l:()=>Je,s:()=>Ye,t:()=>he});var m=$(5861),g=$(4083),Y=$(3577);const ie="ionViewWillEnter",Pe="ionViewDidEnter",Ae="ionViewWillLeave",fe="ionViewDidLeave",de="ionViewWillUnload",he=ze=>new Promise((lt,xt)=>{(0,g.w)(()=>{be(ze),Ne(ze).then(Pt=>{Pt.animation&&Pt.animation.destroy(),je(ze),lt(Pt)},Pt=>{je(ze),xt(Pt)})})}),be=ze=>{const lt=ze.enteringEl,xt=ze.leavingEl;ve(lt,xt,ze.direction),ze.showGoBack?lt.classList.add("can-go-back"):lt.classList.remove("can-go-back"),Ye(lt,!1),lt.style.setProperty("pointer-events","none"),xt&&(Ye(xt,!1),xt.style.setProperty("pointer-events","none"))},Ne=function(){var ze=(0,m.Z)(function*(lt){const xt=yield Ue(lt);return xt&&g.B.isBrowser?Xe(xt,lt):Me(lt)});return function(xt){return ze.apply(this,arguments)}}(),je=ze=>{const lt=ze.enteringEl,xt=ze.leavingEl;lt.classList.remove("ion-page-invisible"),lt.style.removeProperty("pointer-events"),void 0!==xt&&(xt.classList.remove("ion-page-invisible"),xt.style.removeProperty("pointer-events"))},Ue=function(){var ze=(0,m.Z)(function*(lt){return lt.leavingEl&&lt.animated&&0!==lt.duration?lt.animationBuilder?lt.animationBuilder:"ios"===lt.mode?(yield Promise.resolve().then($.bind($,3551))).iosTransitionAnimation:(yield Promise.resolve().then($.bind($,1138))).mdTransitionAnimation:void 0});return function(xt){return ze.apply(this,arguments)}}(),Xe=function(){var ze=(0,m.Z)(function*(lt,xt){yield Se(xt,!0);const Pt=lt(xt.baseEl,xt);Le(xt.enteringEl,xt.leavingEl);const Be=yield et(Pt,xt);return xt.progressCallback&&xt.progressCallback(void 0),Be&&Re(xt.enteringEl,xt.leavingEl),{hasCompleted:Be,animation:Pt}});return function(xt,Pt){return ze.apply(this,arguments)}}(),Me=function(){var ze=(0,m.Z)(function*(lt){const xt=lt.enteringEl,Pt=lt.leavingEl;return yield Se(lt,!1),Le(xt,Pt),Re(xt,Pt),{hasCompleted:!0}});return function(xt){return ze.apply(this,arguments)}}(),Se=function(){var ze=(0,m.Z)(function*(lt,xt){(void 0!==lt.deepWait?lt.deepWait:xt)&&(yield Promise.all([mt(lt.enteringEl),mt(lt.leavingEl)])),yield oe(lt.viewIsReady,lt.enteringEl)});return function(xt,Pt){return ze.apply(this,arguments)}}(),oe=function(){var ze=(0,m.Z)(function*(lt,xt){lt&&(yield lt(xt))});return function(xt,Pt){return ze.apply(this,arguments)}}(),et=(ze,lt)=>{const xt=lt.progressCallback,Pt=new Promise(Be=>{ze.onFinish(At=>Be(1===At))});return xt?(ze.progressStart(!0),xt(ze)):ze.play(),Pt},Le=(ze,lt)=>{Je(lt,Ae),Je(ze,ie)},Re=(ze,lt)=>{Je(ze,Pe),Je(lt,fe)},Je=(ze,lt)=>{if(ze){const xt=new CustomEvent(lt,{bubbles:!1,cancelable:!1});ze.dispatchEvent(xt)}},mt=function(){var ze=(0,m.Z)(function*(lt){const xt=lt;if(xt){if(null!=xt.componentOnReady){if(null!=(yield xt.componentOnReady()))return}else if(null!=xt.__registerHost)return void(yield new Promise(Be=>(0,Y.r)(Be)));yield Promise.all(Array.from(xt.children).map(mt))}});return function(xt){return ze.apply(this,arguments)}}(),Ye=(ze,lt)=>{lt?(ze.setAttribute("aria-hidden","true"),ze.classList.add("ion-page-hidden")):(ze.hidden=!1,ze.removeAttribute("aria-hidden"),ze.classList.remove("ion-page-hidden"))},ve=(ze,lt,xt)=>{void 0!==ze&&(ze.style.zIndex="back"===xt?"99":"101"),void 0!==lt&&(lt.style.zIndex="100")},It=ze=>ze.classList.contains("ion-page")?ze:ze.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ze},5273:(cn,at,$)=>{"use strict";$.d(at,{a:()=>he,b:()=>At,c:()=>Y,g:()=>De,i:()=>vt});var m=$(4083);class g{constructor(){this.m=new Map}reset(qe){this.m=new Map(Object.entries(qe))}get(qe,We){const Q=this.m.get(qe);return void 0!==Q?Q:We}getBoolean(qe,We=!1){const Q=this.m.get(qe);return void 0===Q?We:"string"==typeof Q?"true"===Q:!!Q}getNumber(qe,We){const Q=parseFloat(this.m.get(qe));return isNaN(Q)?void 0!==We?We:NaN:Q}set(qe,We){this.m.set(qe,We)}}const Y=new g,Fe="ionic-persist-config",De=Ke=>be(Ke),he=(Ke,qe)=>("string"==typeof Ke&&(qe=Ke,Ke=void 0),De(Ke).includes(qe)),be=(Ke=window)=>{if(typeof Ke>"u")return[];Ke.Ionic=Ke.Ionic||{};let qe=Ke.Ionic.platforms;return null==qe&&(qe=Ke.Ionic.platforms=Ne(Ke),qe.forEach(We=>Ke.document.documentElement.classList.add(`plt-${We}`))),qe},Ne=Ke=>{const qe=Y.get("platform");return Object.keys(Pt).filter(We=>{const Q=null==qe?void 0:qe[We];return"function"==typeof Q?Q(Ke):Pt[We](Ke)})},Ue=Ke=>!!(lt(Ke,/iPad/i)||lt(Ke,/Macintosh/i)&&Re(Ke)),Se=Ke=>lt(Ke,/android|sink/i),Re=Ke=>xt(Ke,"(any-pointer:coarse)"),mt=Ke=>Ye(Ke)||ve(Ke),Ye=Ke=>!!(Ke.cordova||Ke.phonegap||Ke.PhoneGap),ve=Ke=>{const qe=Ke.Capacitor;return!(null==qe||!qe.isNative)},lt=(Ke,qe)=>qe.test(Ke.navigator.userAgent),xt=(Ke,qe)=>{var We;return null===(We=Ke.matchMedia)||void 0===We?void 0:We.call(Ke,qe).matches},Pt={ipad:Ue,iphone:Ke=>lt(Ke,/iPhone/i),ios:Ke=>lt(Ke,/iPhone|iPod/i)||Ue(Ke),android:Se,phablet:Ke=>{const qe=Ke.innerWidth,We=Ke.innerHeight,Q=Math.min(qe,We),_t=Math.max(qe,We);return Q>390&&Q<520&&_t>620&&_t<800},tablet:Ke=>{const qe=Ke.innerWidth,We=Ke.innerHeight,Q=Math.min(qe,We),_t=Math.max(qe,We);return Ue(Ke)||(Ke=>Se(Ke)&&!lt(Ke,/mobile/i))(Ke)||Q>460&&Q<820&&_t>780&&_t<1400},cordova:Ye,capacitor:ve,electron:Ke=>lt(Ke,/electron/i),pwa:Ke=>{var qe;return!!(null!==(qe=Ke.matchMedia)&&void 0!==qe&&qe.call(Ke,"(display-mode: standalone)").matches||Ke.navigator.standalone)},mobile:Re,mobileweb:Ke=>Re(Ke)&&!mt(Ke),desktop:Ke=>!Re(Ke),hybrid:mt};let Be;const At=Ke=>Ke&&(0,m.g)(Ke)||Be,vt=(Ke={})=>{if(typeof window>"u")return;const qe=window.document,We=window,Q=We.Ionic=We.Ionic||{},_t={};Ke._ael&&(_t.ael=Ke._ael),Ke._rel&&(_t.rel=Ke._rel),Ke._ce&&(_t.ce=Ke._ce),(0,m.a)(_t);const Dt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ke=>{try{const qe=Ke.sessionStorage.getItem(Fe);return null!==qe?JSON.parse(qe):{}}catch{return{}}})(We)),{persistConfig:!1}),Q.config),(Ke=>{const qe={};return Ke.location.search.slice(1).split("&").map(We=>We.split("=")).map(([We,Q])=>[decodeURIComponent(We),decodeURIComponent(Q)]).filter(([We])=>((Ke,qe)=>Ke.substr(0,qe.length)===qe)(We,"ionic:")).map(([We,Q])=>[We.slice("ionic:".length),Q]).forEach(([We,Q])=>{qe[We]=Q}),qe})(We)),Ke);Y.reset(Dt),Y.getBoolean("persistConfig")&&((Ke,qe)=>{try{Ke.sessionStorage.setItem(Fe,JSON.stringify(qe))}catch{return}})(We,Dt),be(We),Q.config=Y,Q.mode=Be=Y.get("mode",qe.documentElement.getAttribute("mode")||(he(We,"ios")?"ios":"md")),Y.set("mode",Be),qe.documentElement.setAttribute("mode",Be),qe.documentElement.classList.add(Be),Y.getBoolean("_testing")&&Y.set("animated",!1);const zt=Et=>{var ut;return null===(ut=Et.tagName)||void 0===ut?void 0:ut.startsWith("ION-")},un=Et=>["ios","md"].includes(Et);(0,m.c)(Et=>{for(;Et;){const ut=Et.mode||Et.getAttribute("mode");if(ut){if(un(ut))return ut;zt(Et)&&console.warn('Invalid ionic mode: "'+ut+'", expected: "ios" or "md"')}Et=Et.parentElement}return Be})}},3551:(cn,at,$)=>{"use strict";$.r(at),$.d(at,{iosTransitionAnimation:()=>Ne,shadow:()=>fe});var m=$(9613),g=$(9866);$(3457),$(4083);const Ae=je=>document.querySelector(`${je}.ion-cloned-element`),fe=je=>je.shadowRoot||je,de=je=>{const Ue="ION-TABS"===je.tagName?je:je.querySelector("ion-tabs"),Xe="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Ue){const Me=Ue.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Me?Me.querySelector(Xe):null}return je.querySelector(Xe)},Fe=(je,Ue)=>{const Xe="ION-TABS"===je.tagName?je:je.querySelector("ion-tabs");let Me=[];if(null!=Xe){const Se=Xe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Se&&(Me=Se.querySelectorAll("ion-buttons"))}else Me=je.querySelectorAll("ion-buttons");for(const Se of Me){const oe=Se.closest("ion-header"),et=oe&&!oe.classList.contains("header-collapse-condense-inactive"),Le=Se.querySelector("ion-back-button"),Re=Se.classList.contains("buttons-collapse");if(null!==Le&&("start"===Se.slot||""===Se.slot)&&(Re&&et&&Ue||!Re))return Le}return null},he=(je,Ue,Xe,Me,Se,oe)=>{const et=Ue?`calc(100% - ${oe.right+4}px)`:oe.left-4+"px",Le=Ue?"7px":"-7px",Re=Ue?"-4px":"4px",Je=Ue?"-4px":"4px",mt=Ue?"right":"left",Ye=Ue?"left":"right",ze=Xe?[{offset:0,opacity:1,transform:`translate3d(${Re}, ${oe.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Le}, ${Se.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Le}, ${Se.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Re}, ${oe.top-46}px, 0) scale(1)`}],Pt=Xe?[{offset:0,opacity:1,transform:`translate3d(${Je}, ${oe.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Je}, ${oe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Je}, ${oe.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Je}, ${oe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Je}, ${oe.top-46}px, 0) scale(1)`}],Be=(0,m.c)(),At=(0,m.c)(),vt=Ae("ion-back-button"),Ke=fe(vt).querySelector(".button-text"),qe=fe(vt).querySelector("ion-icon");vt.text=Me.text,vt.mode=Me.mode,vt.icon=Me.icon,vt.color=Me.color,vt.disabled=Me.disabled,vt.style.setProperty("display","block"),vt.style.setProperty("position","fixed"),At.addElement(qe),Be.addElement(Ke),Be.beforeStyles({"transform-origin":`${mt} center`}).beforeAddWrite(()=>{Me.style.setProperty("display","none"),vt.style.setProperty(mt,et)}).afterAddWrite(()=>{Me.style.setProperty("display",""),vt.style.setProperty("display","none"),vt.style.removeProperty(mt)}).keyframes(ze),At.beforeStyles({"transform-origin":`${Ye} center`}).keyframes(Pt),je.addAnimation([Be,At])},be=(je,Ue,Xe,Me,Se,oe)=>{const et=Ue?`calc(100% - ${Se.right}px)`:`${Se.left}px`,Le=Ue?"-18px":"18px",Re=Ue?"right":"left",Ye=Xe?[{offset:0,opacity:0,transform:`translate3d(${Le}, ${oe.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Se.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Se.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Le}, ${oe.top-4}px, 0) scale(0.5)`}],ve=Ae("ion-title"),It=(0,m.c)();ve.innerText=Me.innerText,ve.size=Me.size,ve.color=Me.color,It.addElement(ve),It.beforeStyles({"transform-origin":`${Re} center`,height:"46px",display:"",position:"relative",[Re]:et}).beforeAddWrite(()=>{Me.style.setProperty("display","none")}).afterAddWrite(()=>{Me.style.setProperty("display",""),ve.style.setProperty("display","none")}).keyframes(Ye),je.addAnimation(It)},Ne=(je,Ue)=>{var Xe;try{const Me="cubic-bezier(0.32,0.72,0,1)",Se="opacity",oe="transform",et="0%",Re="rtl"===je.ownerDocument.dir,Je=Re?"-99.5%":"99.5%",mt=Re?"33%":"-33%",Ye=Ue.enteringEl,ve=Ue.leavingEl,It="back"===Ue.direction,ze=Ye.querySelector(":scope > ion-content"),lt=Ye.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),xt=Ye.querySelectorAll(":scope > ion-header > ion-toolbar"),Pt=(0,m.c)(),Be=(0,m.c)();if(Pt.addElement(Ye).duration((null!==(Xe=Ue.duration)&&void 0!==Xe?Xe:0)||540).easing(Ue.easing||Me).fill("both").beforeRemoveClass("ion-page-invisible"),ve&&null!=je){const qe=(0,m.c)();qe.addElement(je),Pt.addAnimation(qe)}if(ze||0!==xt.length||0!==lt.length?(Be.addElement(ze),Be.addElement(lt)):Be.addElement(Ye.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Pt.addAnimation(Be),It?Be.beforeClearStyles([Se]).fromTo("transform",`translateX(${mt})`,`translateX(${et})`).fromTo(Se,.8,1):Be.beforeClearStyles([Se]).fromTo("transform",`translateX(${Je})`,`translateX(${et})`),ze){const qe=fe(ze).querySelector(".transition-effect");if(qe){const We=qe.querySelector(".transition-cover"),Q=qe.querySelector(".transition-shadow"),_t=(0,m.c)(),Dt=(0,m.c)(),zt=(0,m.c)();_t.addElement(qe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Dt.addElement(We).beforeClearStyles([Se]).fromTo(Se,0,.1),zt.addElement(Q).beforeClearStyles([Se]).fromTo(Se,.03,.7),_t.addAnimation([Dt,zt]),Be.addAnimation([_t])}}const At=Ye.querySelector("ion-header.header-collapse-condense"),{forward:vt,backward:Ke}=((je,Ue,Xe,Me,Se)=>{const oe=Fe(Me,Xe),et=de(Se),Le=de(Me),Re=Fe(Se,Xe),Je=null!==oe&&null!==et&&!Xe,mt=null!==Le&&null!==Re&&Xe;if(Je){const Ye=et.getBoundingClientRect(),ve=oe.getBoundingClientRect();be(je,Ue,Xe,et,Ye,ve),he(je,Ue,Xe,oe,Ye,ve)}else if(mt){const Ye=Le.getBoundingClientRect(),ve=Re.getBoundingClientRect();be(je,Ue,Xe,Le,Ye,ve),he(je,Ue,Xe,Re,Ye,ve)}return{forward:Je,backward:mt}})(Pt,Re,It,Ye,ve);if(xt.forEach(qe=>{const We=(0,m.c)();We.addElement(qe),Pt.addAnimation(We);const Q=(0,m.c)();Q.addElement(qe.querySelector("ion-title"));const _t=(0,m.c)(),Dt=Array.from(qe.querySelectorAll("ion-buttons,[menuToggle]")),zt=qe.closest("ion-header"),un=null==zt?void 0:zt.classList.contains("header-collapse-condense-inactive");let Et;Et=Dt.filter(It?zn=>{const hn=zn.classList.contains("buttons-collapse");return hn&&!un||!hn}:zn=>!zn.classList.contains("buttons-collapse")),_t.addElement(Et);const ut=(0,m.c)();ut.addElement(qe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Ot=(0,m.c)();Ot.addElement(fe(qe).querySelector(".toolbar-background"));const sn=(0,m.c)(),Cn=qe.querySelector("ion-back-button");if(Cn&&sn.addElement(Cn),We.addAnimation([Q,_t,ut,Ot,sn]),_t.fromTo(Se,.01,1),ut.fromTo(Se,.01,1),It)un||Q.fromTo("transform",`translateX(${mt})`,`translateX(${et})`).fromTo(Se,.01,1),ut.fromTo("transform",`translateX(${mt})`,`translateX(${et})`),sn.fromTo(Se,.01,1);else if(At||Q.fromTo("transform",`translateX(${Je})`,`translateX(${et})`).fromTo(Se,.01,1),ut.fromTo("transform",`translateX(${Je})`,`translateX(${et})`),Ot.beforeClearStyles([Se,"transform"]),(null==zt?void 0:zt.translucent)?Ot.fromTo("transform",Re?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Ot.fromTo(Se,.01,"var(--opacity)"),vt||sn.fromTo(Se,.01,1),Cn&&!vt){const hn=(0,m.c)();hn.addElement(fe(Cn).querySelector(".button-text")).fromTo("transform",Re?"translateX(-100px)":"translateX(100px)","translateX(0px)"),We.addAnimation(hn)}}),ve){const qe=(0,m.c)(),We=ve.querySelector(":scope > ion-content"),Q=ve.querySelectorAll(":scope > ion-header > ion-toolbar"),_t=ve.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(We||0!==Q.length||0!==_t.length?(qe.addElement(We),qe.addElement(_t)):qe.addElement(ve.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Pt.addAnimation(qe),It){qe.beforeClearStyles([Se]).fromTo("transform",`translateX(${et})`,Re?"translateX(-100%)":"translateX(100%)");const Dt=(0,g.g)(ve);Pt.afterAddWrite(()=>{"normal"===Pt.getDirection()&&Dt.style.setProperty("display","none")})}else qe.fromTo("transform",`translateX(${et})`,`translateX(${mt})`).fromTo(Se,1,.8);if(We){const Dt=fe(We).querySelector(".transition-effect");if(Dt){const zt=Dt.querySelector(".transition-cover"),un=Dt.querySelector(".transition-shadow"),Et=(0,m.c)(),ut=(0,m.c)(),Ot=(0,m.c)();Et.addElement(Dt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),ut.addElement(zt).beforeClearStyles([Se]).fromTo(Se,.1,0),Ot.addElement(un).beforeClearStyles([Se]).fromTo(Se,.7,.03),Et.addAnimation([ut,Ot]),qe.addAnimation([Et])}}Q.forEach(Dt=>{const zt=(0,m.c)();zt.addElement(Dt);const un=(0,m.c)();un.addElement(Dt.querySelector("ion-title"));const Et=(0,m.c)(),ut=Dt.querySelectorAll("ion-buttons,[menuToggle]"),Ot=Dt.closest("ion-header"),sn=null==Ot?void 0:Ot.classList.contains("header-collapse-condense-inactive"),Cn=Array.from(ut).filter(Qt=>{const jn=Qt.classList.contains("buttons-collapse");return jn&&!sn||!jn});Et.addElement(Cn);const zn=(0,m.c)(),hn=Dt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");hn.length>0&&zn.addElement(hn);const wn=(0,m.c)();wn.addElement(fe(Dt).querySelector(".toolbar-background"));const tn=(0,m.c)(),ir=Dt.querySelector("ion-back-button");if(ir&&tn.addElement(ir),zt.addAnimation([un,Et,zn,tn,wn]),Pt.addAnimation(zt),tn.fromTo(Se,.99,0),Et.fromTo(Se,.99,0),zn.fromTo(Se,.99,0),It){if(sn||un.fromTo("transform",`translateX(${et})`,Re?"translateX(-100%)":"translateX(100%)").fromTo(Se,.99,0),zn.fromTo("transform",`translateX(${et})`,Re?"translateX(-100%)":"translateX(100%)"),wn.beforeClearStyles([Se,"transform"]),(null==Ot?void 0:Ot.translucent)?wn.fromTo("transform","translateX(0px)",Re?"translateX(-100%)":"translateX(100%)"):wn.fromTo(Se,"var(--opacity)",0),ir&&!Ke){const jn=(0,m.c)();jn.addElement(fe(ir).querySelector(".button-text")).fromTo("transform",`translateX(${et})`,`translateX(${(Re?-124:124)+"px"})`),zt.addAnimation(jn)}}else sn||un.fromTo("transform",`translateX(${et})`,`translateX(${mt})`).fromTo(Se,.99,0).afterClearStyles([oe,Se]),zn.fromTo("transform",`translateX(${et})`,`translateX(${mt})`).afterClearStyles([oe,Se]),tn.afterClearStyles([Se]),un.afterClearStyles([Se]),Et.afterClearStyles([Se])})}return Pt}catch(Me){throw Me}}},1138:(cn,at,$)=>{"use strict";$.r(at),$.d(at,{mdTransitionAnimation:()=>Pe});var m=$(9613),g=$(9866);$(3457),$(4083);const Pe=(Ae,fe)=>{var de,Fe,De;const Ne="back"===fe.direction,Ue=fe.leavingEl,Xe=(0,g.g)(fe.enteringEl),Me=Xe.querySelector("ion-toolbar"),Se=(0,m.c)();if(Se.addElement(Xe).fill("both").beforeRemoveClass("ion-page-invisible"),Ne?Se.duration((null!==(de=fe.duration)&&void 0!==de?de:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Se.duration((null!==(Fe=fe.duration)&&void 0!==Fe?Fe:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Me){const oe=(0,m.c)();oe.addElement(Me),Se.addAnimation(oe)}if(Ue&&Ne){Se.duration((null!==(De=fe.duration)&&void 0!==De?De:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const oe=(0,m.c)();oe.addElement((0,g.g)(Ue)).onFinish(et=>{1===et&&oe.elements.length>0&&oe.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Se.addAnimation(oe)}return Se}},2583:(cn,at,$)=>{"use strict";$.d(at,{B:()=>_t,G:()=>Dt,a:()=>De,b:()=>he,c:()=>Ue,d:()=>zt,e:()=>un,f:()=>lt,g:()=>Pt,h:()=>vt,i:()=>qe,j:()=>Me,k:()=>de,m:()=>Ne,n:()=>et,o:()=>It,s:()=>Q,t:()=>Xe});var m=$(5861),g=$(5273),Y=$(6782),ie=$(7593),Pe=$(3577),Ae=$(1178);let fe=0;const de=new WeakMap,Fe=Et=>({create:ut=>Se(Et,ut),dismiss:(ut,Ot,sn)=>Ye(document,ut,Ot,Et,sn),getTop:()=>(0,m.Z)(function*(){return It(document,Et)})()}),De=Fe("ion-alert"),he=Fe("ion-action-sheet"),Ne=Fe("ion-modal"),Ue=Fe("ion-popover"),Xe=Fe("ion-toast"),Me=Et=>{typeof document<"u"&&mt(document);const ut=fe++;Et.overlayIndex=ut,Et.hasAttribute("id")||(Et.id=`ion-overlay-${ut}`)},Se=(Et,ut)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Et).then(()=>{const Ot=document.createElement(Et);return Ot.classList.add("overlay-hidden"),Object.assign(Ot,Object.assign(Object.assign({},ut),{hasController:!0})),Be(document).appendChild(Ot),new Promise(sn=>(0,Pe.c)(Ot,sn))}):Promise.resolve(),oe='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',et=(Et,ut)=>{let Ot=Et.querySelector(oe);const sn=null==Ot?void 0:Ot.shadowRoot;sn&&(Ot=sn.querySelector(oe)||Ot),Ot?(0,Pe.f)(Ot):ut.focus()},Re=(Et,ut)=>{const Ot=Array.from(Et.querySelectorAll(oe));let sn=Ot.length>0?Ot[Ot.length-1]:null;const Cn=null==sn?void 0:sn.shadowRoot;Cn&&(sn=Cn.querySelector(oe)||sn),sn?sn.focus():ut.focus()},mt=Et=>{0===fe&&(fe=1,Et.addEventListener("focus",ut=>{((Et,ut)=>{const Ot=It(ut,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),sn=Et.target;Ot&&sn&&!Ot.classList.contains("ion-disable-focus-trap")&&(Ot.shadowRoot?(()=>{if(Ot.contains(sn))Ot.lastFocus=sn;else{const hn=Ot.lastFocus;et(Ot,Ot),hn===ut.activeElement&&Re(Ot,Ot),Ot.lastFocus=ut.activeElement}})():(()=>{if(Ot===sn)Ot.lastFocus=void 0;else{const hn=(0,Pe.g)(Ot);if(!hn.contains(sn))return;const wn=hn.querySelector(".ion-overlay-wrapper");if(!wn)return;if(wn.contains(sn))Ot.lastFocus=sn;else{const tn=Ot.lastFocus;et(wn,Ot),tn===ut.activeElement&&Re(wn,Ot),Ot.lastFocus=ut.activeElement}}})())})(ut,Et)},!0),Et.addEventListener("ionBackButton",ut=>{const Ot=It(Et);null!=Ot&&Ot.backdropDismiss&&ut.detail.register(ie.OVERLAY_BACK_BUTTON_PRIORITY,()=>Ot.dismiss(void 0,_t))}),Et.addEventListener("keydown",ut=>{if("Escape"===ut.key){const Ot=It(Et);null!=Ot&&Ot.backdropDismiss&&Ot.dismiss(void 0,_t)}}))},Ye=(Et,ut,Ot,sn,Cn)=>{const zn=It(Et,sn,Cn);return zn?zn.dismiss(ut,Ot):Promise.reject("overlay does not exist")},It=(Et,ut,Ot)=>{const sn=((Et,ut)=>(void 0===ut&&(ut="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Et.querySelectorAll(ut)).filter(Ot=>Ot.overlayIndex>0)))(Et,ut).filter(Cn=>!(Et=>Et.classList.contains("overlay-hidden"))(Cn));return void 0===Ot?sn[sn.length-1]:sn.find(Cn=>Cn.id===Ot)},ze=(Et=!1)=>{const Ot=Be(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Ot&&(Et?Ot.setAttribute("aria-hidden","true"):Ot.removeAttribute("aria-hidden"))},lt=function(){var Et=(0,m.Z)(function*(ut,Ot,sn,Cn,zn){var hn,wn;if(ut.presented)return;ze(!0),ut.presented=!0,ut.willPresent.emit(),null===(hn=ut.willPresentShorthand)||void 0===hn||hn.emit();const tn=(0,g.b)(ut),ir=ut.enterAnimation?ut.enterAnimation:g.c.get(Ot,"ios"===tn?sn:Cn);(yield At(ut,ir,ut.el,zn))&&(ut.didPresent.emit(),null===(wn=ut.didPresentShorthand)||void 0===wn||wn.emit()),"ION-TOAST"!==ut.el.tagName&&xt(ut.el),ut.keyboardClose&&(null===document.activeElement||!ut.el.contains(document.activeElement))&&ut.el.focus()});return function(Ot,sn,Cn,zn,hn){return Et.apply(this,arguments)}}(),xt=function(){var Et=(0,m.Z)(function*(ut){let Ot=document.activeElement;if(!Ot)return;const sn=null==Ot?void 0:Ot.shadowRoot;sn&&(Ot=sn.querySelector(oe)||Ot),yield ut.onDidDismiss(),Ot.focus()});return function(Ot){return Et.apply(this,arguments)}}(),Pt=function(){var Et=(0,m.Z)(function*(ut,Ot,sn,Cn,zn,hn,wn){var tn,ir;if(!ut.presented)return!1;ze(!1),ut.presented=!1;try{ut.el.style.setProperty("pointer-events","none"),ut.willDismiss.emit({data:Ot,role:sn}),null===(tn=ut.willDismissShorthand)||void 0===tn||tn.emit({data:Ot,role:sn});const Qt=(0,g.b)(ut),jn=ut.leaveAnimation?ut.leaveAnimation:g.c.get(Cn,"ios"===Qt?zn:hn);sn!==Dt&&(yield At(ut,jn,ut.el,wn)),ut.didDismiss.emit({data:Ot,role:sn}),null===(ir=ut.didDismissShorthand)||void 0===ir||ir.emit({data:Ot,role:sn}),de.delete(ut),ut.el.classList.add("overlay-hidden"),ut.el.style.removeProperty("pointer-events"),void 0!==ut.el.lastFocus&&(ut.el.lastFocus=void 0)}catch(Qt){console.error(Qt)}return ut.el.remove(),!0});return function(Ot,sn,Cn,zn,hn,wn,tn){return Et.apply(this,arguments)}}(),Be=Et=>Et.querySelector("ion-app")||Et.body,At=function(){var Et=(0,m.Z)(function*(ut,Ot,sn,Cn){sn.classList.remove("overlay-hidden");const hn=Ot(ut.el,Cn);(!ut.animated||!g.c.getBoolean("animated",!0))&&hn.duration(0),ut.keyboardClose&&hn.beforeAddWrite(()=>{const tn=sn.ownerDocument.activeElement;null!=tn&&tn.matches("input,ion-input, ion-textarea")&&tn.blur()});const wn=de.get(ut)||[];return de.set(ut,[...wn,hn]),yield hn.play(),!0});return function(Ot,sn,Cn,zn){return Et.apply(this,arguments)}}(),vt=(Et,ut)=>{let Ot;const sn=new Promise(Cn=>Ot=Cn);return Ke(Et,ut,Cn=>{Ot(Cn.detail)}),sn},Ke=(Et,ut,Ot)=>{const sn=Cn=>{(0,Pe.b)(Et,ut,sn),Ot(Cn)};(0,Pe.a)(Et,ut,sn)},qe=Et=>"cancel"===Et||Et===_t,We=Et=>Et(),Q=(Et,ut)=>{if("function"==typeof Et)return g.c.get("_zoneGate",We)(()=>{try{return Et(ut)}catch(sn){throw sn}})},_t="backdrop",Dt="gesture",zt=Et=>{let Ot,ut=!1;const sn=(0,Y.C)(),Cn=(wn=!1)=>{if(Ot&&!wn)return{delegate:Ot,inline:ut};const{el:tn,hasController:ir,delegate:Qt}=Et;return ut=null!==tn.parentNode&&!ir,Ot=ut?Qt||sn:Qt,{inline:ut,delegate:Ot}};return{attachViewToDom:function(){var wn=(0,m.Z)(function*(tn){const{delegate:ir}=Cn(!0);if(ir)return yield ir.attachViewToDom(Et.el,tn);const{hasController:Qt}=Et;if(Qt&&void 0!==tn)throw new Error("framework delegate is missing");return null});return function(ir){return wn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:wn}=Cn();wn&&void 0!==Et.el&&wn.removeViewFromDom(Et.el.parentElement,Et.el)}}},un=()=>{let Et;const ut=()=>{Et&&(Et(),Et=void 0)};return{addClickListener:(sn,Cn)=>{ut();const zn=void 0!==Cn?document.getElementById(Cn):null;zn?Et=((wn,tn)=>{const ir=()=>{tn.present()};return wn.addEventListener("click",ir),()=>{wn.removeEventListener("click",ir)}})(zn,sn):(0,Ae.p)(`A trigger element with the ID "${Cn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,sn)},removeClickListener:ut}}},3726:(cn,at,$)=>{"use strict";$.d(at,{n:()=>m});class m{constructor(Y,ie,Pe,Ae,fe,de,Fe=!1,De,he="User",be=[]){this.uid=De,this.email=Y,this.nombre=ie,this.apellido=Pe,this.edad=Ae,this.dni=fe,this.imagenes=de,this.isAdmin=Fe,this.typename=he,this.credits=be}static filterPrivate(Y){return Object.fromEntries(Object.entries(Y).filter(([ie])=>!["uid"].includes(ie)))}cargarCredito(Y){let ie=!1,Pe=!1;if(this.credits){let Ae=this.credits.find(fe=>fe.credito.id===Y.id);if(Ae&&(Pe=!0,Ae.veces<1&&!this.isAdmin||Ae.veces<2&&this.isAdmin)){ie=!0;let fe=this.credits.findIndex(de=>de.credito.id===Y.id);this.credits[fe].veces++}}return Pe||(this.credits.push({credito:Y,veces:1}),ie=!0),ie}}},3651:(cn,at,$)=>{"use strict";$.d(at,{e:()=>be});var m=$(5861),g=$(3726),Y=$(8502),de=($(2090),$(6881),$(1877),$(4859),$(4650)),Fe=$(1762),De=$(1205),he=$(6159);let be=(()=>{class Ne{constructor(Ue,Xe,Me,Se,oe){this.afs=Ue,this.afAuth=Xe,this.router=Me,this.ngZone=Se,this._db=oe,this.afAuth.authState.subscribe(et=>{var Le;et?(this.userData=et,localStorage.setItem("auth",JSON.stringify(this.userData)),this.sub=this._db.collection("users").doc(et.uid).get().subscribe(Re=>{localStorage.setItem("user",JSON.stringify(Re.data())),console.log("sign in")})):(null===(Le=this.sub)||void 0===Le||Le.unsubscribe(),localStorage.setItem("auth","null"),localStorage.setItem("user","null"),console.log("sign out"))})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("auth"))}get isVerified(){const Ue=JSON.parse(localStorage.getItem("auth"));return null!==Ue&&Ue.emailVerified}get isAdmin(){const Ue=JSON.parse(localStorage.getItem("user"));return null!==Ue&&Ue.isAdmin}SignIn(Ue,Xe){return this.afAuth.signInWithEmailAndPassword(Ue,Xe)}SignUp(Ue,Xe){var Me=this;return(0,m.Z)(function*(){try{let Se=yield Me.afAuth.createUserWithEmailAndPassword(Ue.email,Xe);return Me.SendVerificationMail(),yield Se.user.updateProfile({displayName:Ue.nombre,photoURL:Ue.imagenes[0]}),Me.SetUserData(Se.user.uid,Ue),Me.router.navigate(["home"]),new Promise((oe,et)=>{oe("success")})}catch(Se){return new Promise((oe,et)=>{oe(JSON.parse(JSON.stringify(Se)))})}})()}GoogleAuth(){return this.AuthLogin(new Y.V)}AuthLogin(Ue){return this.afAuth.signInWithPopup(Ue).then(Xe=>{var Me,Se;let oe=Xe.user;this.SetUserData(oe.uid,new g.n(oe.email,null!==(Me=oe.displayName)&&void 0!==Me?Me:"","",0,"",[null!==(Se=oe.photoURL)&&void 0!==Se?Se:""])),console.log(Xe.user),this.router.navigate(["/home"])}).catch(Xe=>{})}SetUserData(Ue,Xe){const Me=this.afs.doc(`users/${Ue}`);return Xe.uid=Ue,console.log("user updated in db"),Me.set(JSON.parse(JSON.stringify(Xe)),{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),localStorage.removeItem("auth")})}SendVerificationMail(){return this.afAuth.currentUser.then(Ue=>Ue.sendEmailVerification()).then(()=>{console.log("correo de verificacion enviado")})}ForgotPassword(Ue){return this.afAuth.sendPasswordResetEmail(Ue).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(Xe=>{window.alert(Xe)})}checkPassword(Ue){var Xe=this;return(0,m.Z)(function*(){const Me=yield Xe.afAuth.currentUser,Se=Y.Q.credential(Me.email,Ue);let oe=!0;try{yield(0,Y.a1)(Me,Se),console.log("password looks good")}catch{console.log("incorrect password"),oe=!1}finally{return oe}})()}}return Ne.\u0275fac=function(Ue){return new(Ue||Ne)(de.LFG(Fe.ST),de.LFG(De.zQ),de.LFG(he.F0),de.LFG(de.R0b),de.LFG(Fe.ST))},Ne.\u0275prov=de.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})()},875:(cn,at,$)=>{"use strict";var m=$(4650),g=$(1481),Y=$(6159),ie=$(9972),Pe=$(3651);const de=[{path:"home",loadComponent:()=>$.e(3879).then($.bind($,3879)).then(u=>u.HomePage),canActivate:[(u=!1)=>{const o=(0,m.f3M)(Pe.e);return(0,m.f3M)(Y.F0),o.isLoggedIn}],canDeactivate:[()=>!(0,m.f3M)(Pe.e).isLoggedIn]},{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>Promise.all([$.e(728),$.e(1453)]).then($.bind($,1453)).then(u=>u.LogniPage)},{path:"register",loadComponent:()=>Promise.all([$.e(728),$.e(7009)]).then($.bind($,7009)).then(u=>u.RegisterPage)},{path:"splash",loadComponent:()=>$.e(4399).then($.bind($,4399)).then(u=>u.SplashPage)}];let Fe=(()=>{class u{constructor(a,h,y){this._router=a,this._auth=h,this.contexts=y}ngOnInit(){this._auth.SignOut(),setTimeout(()=>{this._router.navigateByUrl("splash")},1600)}}return u.\u0275fac=function(a){return new(a||u)(m.Y36(Y.F0),m.Y36(Pe.e),m.Y36(Y.y6))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-root"]],standalone:!0,features:[m.jDz],decls:189,vars:0,consts:[[1,"signin"]],template:function(a,h){1&a&&(m.TgZ(0,"ion-app")(1,"section"),m._UZ(2,"span")(3,"span")(4,"span")(5,"span")(6,"span")(7,"span")(8,"span")(9,"span")(10,"span")(11,"span")(12,"span")(13,"span")(14,"span")(15,"span")(16,"span")(17,"span")(18,"span")(19,"span")(20,"span")(21,"span")(22,"span")(23,"span")(24,"span")(25,"span")(26,"span")(27,"span")(28,"span")(29,"span")(30,"span")(31,"span")(32,"span")(33,"span")(34,"span")(35,"span")(36,"span")(37,"span")(38,"span")(39,"span")(40,"span")(41,"span")(42,"span")(43,"span")(44,"span")(45,"span")(46,"span")(47,"span")(48,"span")(49,"span")(50,"span")(51,"span")(52,"span")(53,"span")(54,"span")(55,"span")(56,"span")(57,"span")(58,"span")(59,"span")(60,"span")(61,"span")(62,"span")(63,"span")(64,"span")(65,"span")(66,"span")(67,"span")(68,"span")(69,"span")(70,"span")(71,"span")(72,"span")(73,"span")(74,"span")(75,"span")(76,"span")(77,"span")(78,"span")(79,"span")(80,"span")(81,"span")(82,"span")(83,"span")(84,"span")(85,"span")(86,"span")(87,"span")(88,"span")(89,"span")(90,"span")(91,"span")(92,"span")(93,"span")(94,"span")(95,"span")(96,"span")(97,"span")(98,"span")(99,"span")(100,"span")(101,"span")(102,"span")(103,"span")(104,"span")(105,"span")(106,"span")(107,"span")(108,"span")(109,"span")(110,"span")(111,"span")(112,"span")(113,"span")(114,"span")(115,"span")(116,"span")(117,"span")(118,"span")(119,"span")(120,"span")(121,"span")(122,"span")(123,"span")(124,"span")(125,"span")(126,"span")(127,"span")(128,"span")(129,"span")(130,"span")(131,"span")(132,"span")(133,"span")(134,"span")(135,"span")(136,"span")(137,"span")(138,"span")(139,"span")(140,"span")(141,"span")(142,"span")(143,"span")(144,"span")(145,"span")(146,"span")(147,"span")(148,"span")(149,"span")(150,"span")(151,"span")(152,"span")(153,"span")(154,"span")(155,"span")(156,"span")(157,"span")(158,"span")(159,"span")(160,"span")(161,"span")(162,"span")(163,"span")(164,"span")(165,"span")(166,"span")(167,"span")(168,"span")(169,"span")(170,"span")(171,"span")(172,"span")(173,"span")(174,"span")(175,"span")(176,"span")(177,"span")(178,"span")(179,"span")(180,"span")(181,"span")(182,"span")(183,"span")(184,"span")(185,"span")(186,"span")(187,"span")(188,"ion-router-outlet",0),m.qZA()())},dependencies:[ie.Pc,ie.dr,ie.jP],styles:['ion-app[_ngcontent-%COMP%]{background:black}section[_ngcontent-%COMP%]{position:absolute;width:100vw;height:100vh;display:flex;justify-content:center;gap:2px;flex-wrap:wrap;overflow:hidden}section[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background:linear-gradient(#000,#0f0,#000);animation:_ngcontent-%COMP%_animate 4s linear infinite}@keyframes _ngcontent-%COMP%_animate{0%{transform:translateY(-100%)}to{transform:translateY(100%)}}section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;display:block;width:calc(6.25vw - 2px);height:calc(6.25vw - 2px);background:#181818;z-index:2;transition:1.5s}section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background:#0f0;transition:0s}@media (max-width: 900px){section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:calc(10vw - 2px);height:calc(10vw - 2px)}}@media (max-width: 600px){section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:calc(20vw - 2px);height:calc(20vw - 2px)}}.signin[_ngcontent-%COMP%]{position:absolute;width:100vw;max-width:100vw;z-index:1000;display:flex;flex-direction:column;justify-content:center;align-items:center}']}),u})();var he=$(2011),be=$(1205),Ne=$(8445),je=$(1762),Ue=$(4986),Xe=$(9751),Me=$(9646),Se=$(6451),oe=$(4004),et=$(3099),Le=$(3900),Re=$(5026),Je=$(1884),mt=$(4482),Ye=$(5403),ve=$(8421),It=$(4671),ze=$(5032),lt=$(3269),Be=$(4976),vt=($(9568),$(3942)),Ke=$(4859),qe=$(5861),We=$(6881),Q=$(2090),_t=$(1877);const Dt="@firebase/database";let un="";function Et(u){un=u}class ut{constructor(o){this.domStorage_=o,this.prefix_="firebase:"}set(o,a){null==a?this.domStorage_.removeItem(this.prefixedName_(o)):this.domStorage_.setItem(this.prefixedName_(o),(0,Q.Wl)(a))}get(o){const a=this.domStorage_.getItem(this.prefixedName_(o));return null==a?null:(0,Q.cI)(a)}remove(o){this.domStorage_.removeItem(this.prefixedName_(o))}prefixedName_(o){return this.prefix_+o}toString(){return this.domStorage_.toString()}}class Ot{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(o,a){null==a?delete this.cache_[o]:this.cache_[o]=a}get(o){return(0,Q.r3)(this.cache_,o)?this.cache_[o]:null}remove(o){delete this.cache_[o]}}const sn=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const o=window[u];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new ut(o)}}catch{}return new Ot},Cn=sn("localStorage"),zn=sn("sessionStorage"),hn=new _t.Yd("@firebase/database"),wn=function(){let u=1;return function(){return u++}}(),tn=function(u){const o=(0,Q.dS)(u),a=new Q.gQ;a.update(o);const h=a.digest();return Q.US.encodeByteArray(h)},ir=function(...u){let o="";for(let a=0;a<u.length;a++){const h=u[a];Array.isArray(h)||h&&"object"==typeof h&&"number"==typeof h.length?o+=ir.apply(null,h):o+="object"==typeof h?(0,Q.Wl)(h):h,o+=" "}return o};let Qt=null,jn=!0;const fn=function(u,o){(0,Q.hu)(!o||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(hn.logLevel=_t.in.VERBOSE,Qt=hn.log.bind(hn),o&&zn.set("logging_enabled",!0)):"function"==typeof u?Qt=u:(Qt=null,zn.remove("logging_enabled"))},xn=function(...u){if(!0===jn&&(jn=!1,null===Qt&&!0===zn.get("logging_enabled")&&fn(!0)),Qt){const o=ir.apply(null,u);Qt(o)}},Di=function(u){return function(...o){xn(u,...o)}},Cr=function(...u){const o="FIREBASE INTERNAL ERROR: "+ir(...u);hn.error(o)},Hr=function(...u){const o=`FIREBASE FATAL ERROR: ${ir(...u)}`;throw hn.error(o),new Error(o)},Ur=function(...u){const o="FIREBASE WARNING: "+ir(...u);hn.warn(o)},Qn=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},on="[MIN_NAME]",vr="[MAX_NAME]",oi=function(u,o){if(u===o)return 0;if(u===on||o===vr)return-1;if(o===on||u===vr)return 1;{const a=Nr(u),h=Nr(o);return null!==a?null!==h?a-h==0?u.length-o.length:a-h:-1:null!==h?1:u<o?-1:1}},mr=function(u,o){return u===o?0:u<o?-1:1},_i=function(u,o){if(o&&u in o)return o[u];throw new Error("Missing required key ("+u+") in object: "+(0,Q.Wl)(o))},pr=function(u){if("object"!=typeof u||null===u)return(0,Q.Wl)(u);const o=[];for(const h in u)o.push(h);o.sort();let a="{";for(let h=0;h<o.length;h++)0!==h&&(a+=","),a+=(0,Q.Wl)(o[h]),a+=":",a+=pr(u[o[h]]);return a+="}",a},ii=function(u,o){const a=u.length;if(a<=o)return[u];const h=[];for(let y=0;y<a;y+=o)h.push(u.substring(y,y+o>a?a:y+o));return h};function Gn(u,o){for(const a in u)u.hasOwnProperty(a)&&o(a,u[a])}const vi=function(u){(0,Q.hu)(!Qn(u),"Invalid JSON number");const h=1023;let y,T,N,G,re;0===u?(T=0,N=0,y=1/u==-1/0?1:0):(y=u<0,(u=Math.abs(u))>=Math.pow(2,1-h)?(G=Math.min(Math.floor(Math.log(u)/Math.LN2),h),T=G+h,N=Math.round(u*Math.pow(2,52-G)-Math.pow(2,52))):(T=0,N=Math.round(u/Math.pow(2,-1074))));const ge=[];for(re=52;re;re-=1)ge.push(N%2?1:0),N=Math.floor(N/2);for(re=11;re;re-=1)ge.push(T%2?1:0),T=Math.floor(T/2);ge.push(y?1:0),ge.reverse();const gt=ge.join("");let wt="";for(re=0;re<64;re+=8){let Vt=parseInt(gt.substr(re,8),2).toString(16);1===Vt.length&&(Vt="0"+Vt),wt+=Vt}return wt.toLowerCase()},ai=new RegExp("^-?(0*)\\d{1,10}$"),Nr=function(u){if(ai.test(u)){const o=Number(u);if(o>=-2147483648&&o<=2147483647)return o}return null},si=function(u){try{u()}catch(o){setTimeout(()=>{throw Ur("Exception was thrown by user callback.",o.stack||""),o},Math.floor(0))}},Zr=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Kr=function(u,o){const a=setTimeout(u,o);return"number"==typeof a&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(a):"object"==typeof a&&a.unref&&a.unref(),a};class Qe{constructor(o,a){this.appName_=o,this.appCheckProvider=a,this.appCheck=null==a?void 0:a.getImmediate({optional:!0}),this.appCheck||null==a||a.get().then(h=>this.appCheck=h)}getToken(o){return this.appCheck?this.appCheck.getToken(o):new Promise((a,h)=>{setTimeout(()=>{this.appCheck?this.getToken(o).then(a,h):a(null)},0)})}addTokenChangeListener(o){var a;null===(a=this.appCheckProvider)||void 0===a||a.get().then(h=>h.addTokenListener(o))}notifyForInvalidToken(){Ur(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class He{constructor(o,a,h){this.appName_=o,this.firebaseOptions_=a,this.authProvider_=h,this.auth_=null,this.auth_=h.getImmediate({optional:!0}),this.auth_||h.onInit(y=>this.auth_=y)}getToken(o){return this.auth_?this.auth_.getToken(o).catch(a=>a&&"auth/token-not-initialized"===a.code?(xn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)):new Promise((a,h)=>{setTimeout(()=>{this.auth_?this.getToken(o).then(a,h):a(null)},0)})}addTokenChangeListener(o){this.auth_?this.auth_.addAuthTokenListener(o):this.authProvider_.get().then(a=>a.addAuthTokenListener(o))}removeTokenChangeListener(o){this.authProvider_.get().then(a=>a.removeAuthTokenListener(o))}notifyForInvalidToken(){let o='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';o+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ur(o)}}let ce=(()=>{class u{constructor(a){this.accessToken=a}getToken(a){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(a){a(this.accessToken)}removeTokenChangeListener(a){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const we=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Dn="websocket",_n="long_polling";class Jn{constructor(o,a,h,y,T=!1,N="",G=!1,re=!1){this.secure=a,this.namespace=h,this.webSocketOnly=y,this.nodeAdmin=T,this.persistenceKey=N,this.includeNamespaceInQueryParams=G,this.isUsingEmulator=re,this._host=o.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Cn.get("host:"+o)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(o){o!==this.internalHost&&(this.internalHost=o,this.isCacheableHost()&&Cn.set("host:"+this._host,this.internalHost))}toString(){let o=this.toURLString();return this.persistenceKey&&(o+="<"+this.persistenceKey+">"),o}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function kt(u,o,a){let h;if((0,Q.hu)("string"==typeof o,"typeof type must == string"),(0,Q.hu)("object"==typeof a,"typeof params must == object"),o===Dn)h=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(o!==_n)throw new Error("Unknown connection type: "+o);h=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function kr(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(a.ns=u.namespace);const y=[];return Gn(a,(T,N)=>{y.push(T+"="+N)}),h+y.join("&")}class Mt{constructor(){this.counters_={}}incrementCounter(o,a=1){(0,Q.r3)(this.counters_,o)||(this.counters_[o]=0),this.counters_[o]+=a}get(){return(0,Q.p$)(this.counters_)}}const nn={},Pn={};function Kn(u){const o=u.toString();return nn[o]||(nn[o]=new Mt),nn[o]}class Mn{constructor(o){this.onMessage_=o,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(o,a){this.closeAfterResponse=o,this.onClose=a,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(o,a){for(this.pendingResponses[o]=a;this.pendingResponses[this.currentResponseNum];){const h=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let y=0;y<h.length;++y)h[y]&&si(()=>{this.onMessage_(h[y])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class xe{constructor(o,a,h,y,T,N,G){this.connId=o,this.repoInfo=a,this.applicationId=h,this.appCheckToken=y,this.authToken=T,this.transportSessionId=N,this.lastSessionId=G,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Di(o),this.stats_=Kn(a),this.urlFn=re=>(this.appCheckToken&&(re.ac=this.appCheckToken),kt(a,_n,re))}open(o,a){this.curSegmentNum=0,this.onDisconnect_=a,this.myPacketOrderer=new Mn(o),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,Q.Yr)()||"complete"===document.readyState)u();else{let o=!1;const a=function(){document.body?o||(o=!0,u()):setTimeout(a,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&a()}),window.attachEvent("onload",a))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ze((...T)=>{const[N,G,re,ge,gt]=T;if(this.incrementIncomingBytes_(T),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===N)this.id=G,this.password=re;else{if("close"!==N)throw new Error("Unrecognized command received: "+N);G?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(G,()=>{this.onClosed_()})):this.onClosed_()}},(...T)=>{const[N,G]=T;this.incrementIncomingBytes_(T),this.myPacketOrderer.handleResponse(N,G)},()=>{this.onClosed_()},this.urlFn);const h={start:"t"};h.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(h.cb=this.scriptTagHolder.uniqueCallbackIdentifier),h.v="5",this.transportSessionId&&(h.s=this.transportSessionId),this.lastSessionId&&(h.ls=this.lastSessionId),this.applicationId&&(h.p=this.applicationId),this.appCheckToken&&(h.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&we.test(location.hostname)&&(h.r="f");const y=this.urlFn(h);this.log_("Connecting via long-poll to "+y),this.scriptTagHolder.addTag(y,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xe.forceAllow_=!0}static forceDisallow(){xe.forceDisallow_=!0}static isAvailable(){return!((0,Q.Yr)()||!xe.forceAllow_&&(xe.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(o){const a=(0,Q.Wl)(o);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const h=(0,Q.h$)(a),y=ii(h,1840);for(let T=0;T<y.length;T++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,y.length,y[T]),this.curSegmentNum++}addDisconnectPingFrame(o,a){if((0,Q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const h={dframe:"t"};h.id=o,h.pw=a,this.myDisconnFrame.src=this.urlFn(h),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(o){const a=(0,Q.Wl)(o).length;this.bytesReceived+=a,this.stats_.incrementCounter("bytes_received",a)}}class Ze{constructor(o,a,h,y){if(this.onDisconnect=h,this.urlFn=y,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Q.Yr)())this.commandCB=o,this.onMessageCB=a;else{this.uniqueCallbackIdentifier=wn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=o,window["pRTLPCB"+this.uniqueCallbackIdentifier]=a,this.myIFrame=Ze.createIFrame_();let T="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(T='<script>document.domain="'+document.domain+'";<\/script>');const N="<html><body>"+T+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(N),this.myIFrame.doc.close()}catch(G){xn("frame writing exception"),G.stack&&xn(G.stack),xn(G)}}}static createIFrame_(){const o=document.createElement("iframe");if(o.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(o);try{o.contentWindow.document||xn("No IE domain setting required")}catch{const h=document.domain;o.src="javascript:void((function(){document.open();document.domain='"+h+"';document.close();})())"}return o.contentDocument?o.doc=o.contentDocument:o.contentWindow?o.doc=o.contentWindow.document:o.document&&(o.doc=o.document),o}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const o=this.onDisconnect;o&&(this.onDisconnect=null,o())}startLongPoll(o,a){for(this.myID=o,this.myPW=a,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const o={};o.id=this.myID,o.pw=this.myPW,o.ser=this.currentSerial;let a=this.urlFn(o),h="",y=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+h.length<=1870;){const N=this.pendingSegs.shift();h=h+"&seg"+y+"="+N.seg+"&ts"+y+"="+N.ts+"&d"+y+"="+N.d,y++}return a+=h,this.addLongPollTag_(a,this.currentSerial),!0}return!1}enqueueSegment(o,a,h){this.pendingSegs.push({seg:o,ts:a,d:h}),this.alive&&this.newRequest_()}addLongPollTag_(o,a){this.outstandingRequests.add(a);const h=()=>{this.outstandingRequests.delete(a),this.newRequest_()},y=setTimeout(h,Math.floor(25e3));this.addTag(o,()=>{clearTimeout(y),h()})}addTag(o,a){(0,Q.Yr)()?this.doNodeLongPoll(o,a):setTimeout(()=>{try{if(!this.sendNewPolls)return;const h=this.myIFrame.doc.createElement("script");h.type="text/javascript",h.async=!0,h.src=o,h.onload=h.onreadystatechange=function(){const y=h.readyState;(!y||"loaded"===y||"complete"===y)&&(h.onload=h.onreadystatechange=null,h.parentNode&&h.parentNode.removeChild(h),a())},h.onerror=()=>{xn("Long-poll script failed to load: "+o),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(h)}catch{}},Math.floor(1))}}let nt=null;typeof MozWebSocket<"u"?nt=MozWebSocket:typeof WebSocket<"u"&&(nt=WebSocket);let Nt=(()=>{class u{constructor(a,h,y,T,N,G,re){this.connId=a,this.applicationId=y,this.appCheckToken=T,this.authToken=N,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Di(this.connId),this.stats_=Kn(h),this.connURL=u.connectionURL_(h,G,re,T,y),this.nodeAdmin=h.nodeAdmin}static connectionURL_(a,h,y,T,N){const G={v:"5"};return!(0,Q.Yr)()&&typeof location<"u"&&location.hostname&&we.test(location.hostname)&&(G.r="f"),h&&(G.s=h),y&&(G.ls=y),T&&(G.ac=T),N&&(G.p=N),kt(a,Dn,G)}open(a,h){this.onDisconnect=h,this.onMessage=a,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Cn.set("previous_websocket_failure",!0);try{let y;if((0,Q.Yr)()){y={headers:{"User-Agent":`Firebase/5/${un}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(y.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(y.headers["X-Firebase-AppCheck"]=this.appCheckToken);const N=process.env,G=0===this.connURL.indexOf("wss://")?N.HTTPS_PROXY||N.https_proxy:N.HTTP_PROXY||N.http_proxy;G&&(y.proxy={origin:G})}this.mySock=new nt(this.connURL,[],y)}catch(y){this.log_("Error instantiating WebSocket.");const T=y.message||y.data;return T&&this.log_(T),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=y=>{this.handleIncomingFrame(y)},this.mySock.onerror=y=>{this.log_("WebSocket error.  Closing connection.");const T=y.message||y.data;T&&this.log_(T),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let a=!1;if(typeof navigator<"u"&&navigator.userAgent){const y=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);y&&y.length>1&&parseFloat(y[1])<4.4&&(a=!0)}return!a&&null!==nt&&!u.forceDisallow_}static previouslyFailed(){return Cn.isInMemoryStorage||!0===Cn.get("previous_websocket_failure")}markConnectionHealthy(){Cn.remove("previous_websocket_failure")}appendFrame_(a){if(this.frames.push(a),this.frames.length===this.totalFrames){const h=this.frames.join("");this.frames=null;const y=(0,Q.cI)(h);this.onMessage(y)}}handleNewFrameCount_(a){this.totalFrames=a,this.frames=[]}extractFrameCount_(a){if((0,Q.hu)(null===this.frames,"We already have a frame buffer"),a.length<=6){const h=Number(a);if(!isNaN(h))return this.handleNewFrameCount_(h),null}return this.handleNewFrameCount_(1),a}handleIncomingFrame(a){if(null===this.mySock)return;const h=a.data;if(this.bytesReceived+=h.length,this.stats_.incrementCounter("bytes_received",h.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(h);else{const y=this.extractFrameCount_(h);null!==y&&this.appendFrame_(y)}}send(a){this.resetKeepAlive();const h=(0,Q.Wl)(a);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);const y=ii(h,16384);y.length>1&&this.sendString_(String(y.length));for(let T=0;T<y.length;T++)this.sendString_(y[T])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(a){try{this.mySock.send(a)}catch(h){this.log_("Exception thrown from WebSocket.send():",h.message||h.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),$t=(()=>{class u{constructor(a){this.initTransports_(a)}static get ALL_TRANSPORTS(){return[xe,Nt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(a){const h=Nt&&Nt.isAvailable();let y=h&&!Nt.previouslyFailed();if(a.webSocketOnly&&(h||Ur("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),y=!0),y)this.transports_=[Nt];else{const T=this.transports_=[];for(const N of u.ALL_TRANSPORTS)N&&N.isAvailable()&&T.push(N);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class Yn{constructor(o,a,h,y,T,N,G,re,ge,gt){this.id=o,this.repoInfo_=a,this.applicationId_=h,this.appCheckToken_=y,this.authToken_=T,this.onMessage_=N,this.onReady_=G,this.onDisconnect_=re,this.onKill_=ge,this.lastSessionId=gt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Di("c:"+this.id+":"),this.transportManager_=new $t(a),this.log_("Connection created"),this.start_()}start_(){const o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.conn_),h=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(a,h)},Math.floor(0));const y=o.healthyTimeout||0;y>0&&(this.healthyTimeout_=Kr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(y)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(o){return a=>{o===this.conn_?this.onConnectionLost_(a):o===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(o){return a=>{2!==this.state_&&(o===this.rx_?this.onPrimaryMessageReceived_(a):o===this.secondaryConn_?this.onSecondaryMessageReceived_(a):this.log_("message on old connection"))}}sendRequest(o){this.sendData_({t:"d",d:o})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(o){if("t"in o){const a=o.t;"a"===a?this.upgradeIfSecondaryHealthy_():"r"===a?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===a&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(o){const a=_i("t",o),h=_i("d",o);if("c"===a)this.onSecondaryControl_(h);else{if("d"!==a)throw new Error("Unknown protocol layer: "+a);this.pendingDataMessages.push(h)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(o){const a=_i("t",o),h=_i("d",o);"c"===a?this.onControl_(h):"d"===a&&this.onDataMessage_(h)}onDataMessage_(o){this.onPrimaryResponse_(),this.onMessage_(o)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(o){const a=_i("t",o);if("d"in o){const h=o.d;if("h"===a){const y=Object.assign({},h);this.repoInfo_.isUsingEmulator&&(y.h=this.repoInfo_.host),this.onHandshake_(y)}else if("n"===a){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let y=0;y<this.pendingDataMessages.length;++y)this.onDataMessage_(this.pendingDataMessages[y]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===a?this.onConnectionShutdown_(h):"r"===a?this.onReset_(h):"e"===a?Cr("Server Error: "+h):"o"===a?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Cr("Unknown control packet command: "+a)}}onHandshake_(o){const a=o.ts,h=o.v,y=o.h;this.sessionId=o.s,this.repoInfo_.host=y,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,a),"5"!==h&&Ur("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const o=this.transportManager_.upgradeTransport();o&&this.startUpgrade_(o)}startUpgrade_(o){this.secondaryConn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.secondaryConn_),h=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(a,h),Kr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(o){this.log_("Reset packet received.  New host: "+o),this.repoInfo_.host=o,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(o,a){this.log_("Realtime connection established."),this.conn_=o,this.state_=1,this.onReady_&&(this.onReady_(a,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Kr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const o=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===o||this.rx_===o)&&this.close()}onConnectionLost_(o){this.conn_=null,o||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Cn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(o){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(o),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(o){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(o)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class fr{put(o,a,h,y){}merge(o,a,h,y){}refreshAuthToken(o){}refreshAppCheckToken(o){}onDisconnectPut(o,a,h){}onDisconnectMerge(o,a,h){}onDisconnectCancel(o,a){}reportStats(o){}}class Qr{constructor(o){this.allowedEvents_=o,this.listeners_={},(0,Q.hu)(Array.isArray(o)&&o.length>0,"Requires a non-empty array")}trigger(o,...a){if(Array.isArray(this.listeners_[o])){const h=[...this.listeners_[o]];for(let y=0;y<h.length;y++)h[y].callback.apply(h[y].context,a)}}on(o,a,h){this.validateEventType_(o),this.listeners_[o]=this.listeners_[o]||[],this.listeners_[o].push({callback:a,context:h});const y=this.getInitialEvent(o);y&&a.apply(h,y)}off(o,a,h){this.validateEventType_(o);const y=this.listeners_[o]||[];for(let T=0;T<y.length;T++)if(y[T].callback===a&&(!h||h===y[T].context))return void y.splice(T,1)}validateEventType_(o){(0,Q.hu)(this.allowedEvents_.find(a=>a===o),"Unknown event: "+o)}}class Cs extends Qr{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Cs}getInitialEvent(o){return(0,Q.hu)("online"===o,"Unknown event type: "+o),[this.online_]}currentlyOnline(){return this.online_}}const ks=32,qr=768;class zr{constructor(o,a){if(void 0===a){this.pieces_=o.split("/");let h=0;for(let y=0;y<this.pieces_.length;y++)this.pieces_[y].length>0&&(this.pieces_[h]=this.pieces_[y],h++);this.pieces_.length=h,this.pieceNum_=0}else this.pieces_=o,this.pieceNum_=a}toString(){let o="";for(let a=this.pieceNum_;a<this.pieces_.length;a++)""!==this.pieces_[a]&&(o+="/"+this.pieces_[a]);return o||"/"}}function Gr(){return new zr("")}function Br(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function Ki(u){return u.pieces_.length-u.pieceNum_}function Ni(u){let o=u.pieceNum_;return o<u.pieces_.length&&o++,new zr(u.pieces_,o)}function Xs(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function Vs(u,o=0){return u.pieces_.slice(u.pieceNum_+o)}function Oo(u){if(u.pieceNum_>=u.pieces_.length)return null;const o=[];for(let a=u.pieceNum_;a<u.pieces_.length-1;a++)o.push(u.pieces_[a]);return new zr(o,0)}function ci(u,o){const a=[];for(let h=u.pieceNum_;h<u.pieces_.length;h++)a.push(u.pieces_[h]);if(o instanceof zr)for(let h=o.pieceNum_;h<o.pieces_.length;h++)a.push(o.pieces_[h]);else{const h=o.split("/");for(let y=0;y<h.length;y++)h[y].length>0&&a.push(h[y])}return new zr(a,0)}function xr(u){return u.pieceNum_>=u.pieces_.length}function Ds(u,o){const a=Br(u),h=Br(o);if(null===a)return o;if(a===h)return Ds(Ni(u),Ni(o));throw new Error("INTERNAL ERROR: innerPath ("+o+") is not within outerPath ("+u+")")}function pa(u,o){const a=Vs(u,0),h=Vs(o,0);for(let y=0;y<a.length&&y<h.length;y++){const T=oi(a[y],h[y]);if(0!==T)return T}return a.length===h.length?0:a.length<h.length?-1:1}function xs(u,o){if(Ki(u)!==Ki(o))return!1;for(let a=u.pieceNum_,h=o.pieceNum_;a<=u.pieces_.length;a++,h++)if(u.pieces_[a]!==o.pieces_[h])return!1;return!0}function qi(u,o){let a=u.pieceNum_,h=o.pieceNum_;if(Ki(u)>Ki(o))return!1;for(;a<u.pieces_.length;){if(u.pieces_[a]!==o.pieces_[h])return!1;++a,++h}return!0}class Ba{constructor(o,a){this.errorPrefix_=a,this.parts_=Vs(o,0),this.byteLength_=Math.max(1,this.parts_.length);for(let h=0;h<this.parts_.length;h++)this.byteLength_+=(0,Q.ug)(this.parts_[h]);js(this)}}function js(u){if(u.byteLength_>qr)throw new Error(u.errorPrefix_+"has a key path longer than "+qr+" bytes ("+u.byteLength_+").");if(u.parts_.length>ks)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ks+") or object contains a cycle "+Qi(u))}function Qi(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class Ss extends Qr{constructor(){let o,a;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(a="visibilitychange",o="hidden"):typeof document.mozHidden<"u"?(a="mozvisibilitychange",o="mozHidden"):typeof document.msHidden<"u"?(a="msvisibilitychange",o="msHidden"):typeof document.webkitHidden<"u"&&(a="webkitvisibilitychange",o="webkitHidden")),this.visible_=!0,a&&document.addEventListener(a,()=>{const h=!document[o];h!==this.visible_&&(this.visible_=h,this.trigger("visible",h))},!1)}static getInstance(){return new Ss}getInitialEvent(o){return(0,Q.hu)("visible"===o,"Unknown event type: "+o),[this.visible_]}}const ui=1e3;let As,eo=(()=>{class u extends fr{constructor(a,h,y,T,N,G,re,ge){if(super(),this.repoInfo_=a,this.applicationId_=h,this.onDataUpdate_=y,this.onConnectStatus_=T,this.onServerInfoUpdate_=N,this.authTokenProvider_=G,this.appCheckTokenProvider_=re,this.authOverride_=ge,this.id=u.nextPersistentConnectionId_++,this.log_=Di("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ui,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ge&&!(0,Q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ss.getInstance().on("visible",this.onVisible_,this),-1===a.host.indexOf("fblocal")&&Cs.getInstance().on("online",this.onOnline_,this)}sendRequest(a,h,y){const T=++this.requestNumber_,N={r:T,a,b:h};this.log_((0,Q.Wl)(N)),(0,Q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(N),y&&(this.requestCBHash_[T]=y)}get(a){this.initConnection_();const h=new Q.BH,T={action:"g",request:{p:a._path.toString(),q:a._queryObject},onComplete:G=>{const re=G.d;"ok"===G.s?h.resolve(re):h.reject(re)}};return this.outstandingGets_.push(T),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),h.promise}listen(a,h,y,T){this.initConnection_();const N=a._queryIdentifier,G=a._path.toString();this.log_("Listen called for "+G+" "+N),this.listens.has(G)||this.listens.set(G,new Map),(0,Q.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Q.hu)(!this.listens.get(G).has(N),"listen() called twice for same path/queryId.");const re={onComplete:T,hashFn:h,query:a,tag:y};this.listens.get(G).set(N,re),this.connected_&&this.sendListen_(re)}sendGet_(a){const h=this.outstandingGets_[a];this.sendRequest("g",h.request,y=>{delete this.outstandingGets_[a],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),h.onComplete&&h.onComplete(y)})}sendListen_(a){const h=a.query,y=h._path.toString(),T=h._queryIdentifier;this.log_("Listen on "+y+" for "+T);const N={p:y};a.tag&&(N.q=h._queryObject,N.t=a.tag),N.h=a.hashFn(),this.sendRequest("q",N,re=>{const ge=re.d,gt=re.s;u.warnOnListenWarnings_(ge,h),(this.listens.get(y)&&this.listens.get(y).get(T))===a&&(this.log_("listen response",re),"ok"!==gt&&this.removeListen_(y,T),a.onComplete&&a.onComplete(gt,ge))})}static warnOnListenWarnings_(a,h){if(a&&"object"==typeof a&&(0,Q.r3)(a,"w")){const y=(0,Q.DV)(a,"w");if(Array.isArray(y)&&~y.indexOf("no_index")){const T='".indexOn": "'+h._queryParams.getIndex().toString()+'"',N=h._path.toString();Ur(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${T} at ${N} to your security rules for better performance.`)}}}refreshAuthToken(a){this.authToken_=a,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(a)}reduceReconnectDelayIfAdminCredential_(a){(a&&40===a.length||(0,Q.GJ)(a))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(a){this.appCheckToken_=a,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const a=this.authToken_,h=(0,Q.w9)(a)?"auth":"gauth",y={cred:a};null===this.authOverride_?y.noauth=!0:"object"==typeof this.authOverride_&&(y.authvar=this.authOverride_),this.sendRequest(h,y,T=>{const N=T.s,G=T.d||"error";this.authToken_===a&&("ok"===N?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(N,G))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},a=>{const h=a.s,y=a.d||"error";"ok"===h?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(h,y)})}unlisten(a,h){const y=a._path.toString(),T=a._queryIdentifier;this.log_("Unlisten called for "+y+" "+T),(0,Q.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(y,T)&&this.connected_&&this.sendUnlisten_(y,T,a._queryObject,h)}sendUnlisten_(a,h,y,T){this.log_("Unlisten on "+a+" for "+h);const N={p:a};T&&(N.q=y,N.t=T),this.sendRequest("n",N)}onDisconnectPut(a,h,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",a,h,y):this.onDisconnectRequestQueue_.push({pathString:a,action:"o",data:h,onComplete:y})}onDisconnectMerge(a,h,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",a,h,y):this.onDisconnectRequestQueue_.push({pathString:a,action:"om",data:h,onComplete:y})}onDisconnectCancel(a,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",a,null,h):this.onDisconnectRequestQueue_.push({pathString:a,action:"oc",data:null,onComplete:h})}sendOnDisconnect_(a,h,y,T){const N={p:h,d:y};this.log_("onDisconnect "+a,N),this.sendRequest(a,N,G=>{T&&setTimeout(()=>{T(G.s,G.d)},Math.floor(0))})}put(a,h,y,T){this.putInternal("p",a,h,y,T)}merge(a,h,y,T){this.putInternal("m",a,h,y,T)}putInternal(a,h,y,T,N){this.initConnection_();const G={p:h,d:y};void 0!==N&&(G.h=N),this.outstandingPuts_.push({action:a,request:G,onComplete:T}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+h)}sendPut_(a){const h=this.outstandingPuts_[a].action,y=this.outstandingPuts_[a].request,T=this.outstandingPuts_[a].onComplete;this.outstandingPuts_[a].queued=this.connected_,this.sendRequest(h,y,N=>{this.log_(h+" response",N),delete this.outstandingPuts_[a],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),T&&T(N.s,N.d)})}reportStats(a){if(this.connected_){const h={c:a};this.log_("reportStats",h),this.sendRequest("s",h,y=>{"ok"!==y.s&&this.log_("reportStats","Error sending stats: "+y.d)})}}onDataMessage_(a){if("r"in a){this.log_("from server: "+(0,Q.Wl)(a));const h=a.r,y=this.requestCBHash_[h];y&&(delete this.requestCBHash_[h],y(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&this.onDataPush_(a.a,a.b)}}onDataPush_(a,h){this.log_("handleServerMessage",a,h),"d"===a?this.onDataUpdate_(h.p,h.d,!1,h.t):"m"===a?this.onDataUpdate_(h.p,h.d,!0,h.t):"c"===a?this.onListenRevoked_(h.p,h.q):"ac"===a?this.onAuthRevoked_(h.s,h.d):"apc"===a?this.onAppCheckRevoked_(h.s,h.d):"sd"===a?this.onSecurityDebugPacket_(h):Cr("Unrecognized action received from server: "+(0,Q.Wl)(a)+"\nAre you using the latest client?")}onReady_(a,h){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(a),this.lastSessionId=h,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(a){(0,Q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(a))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(a){a&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ui,this.realtime_||this.scheduleConnect_(0)),this.visible_=a}onOnline_(a){a?(this.log_("Browser went online."),this.reconnectDelay_=ui,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ui),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const a=(new Date).getTime()-this.lastConnectionAttemptTime_;let h=Math.max(0,this.reconnectDelay_-a);h=Math.random()*h,this.log_("Trying to reconnect in "+h+"ms"),this.scheduleConnect_(h),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var a=this;return(0,qe.Z)(function*(){if(a.shouldReconnect_()){a.log_("Making a connection attempt"),a.lastConnectionAttemptTime_=(new Date).getTime(),a.lastConnectionEstablishedTime_=null;const h=a.onDataMessage_.bind(a),y=a.onReady_.bind(a),T=a.onRealtimeDisconnect_.bind(a),N=a.id+":"+u.nextConnectionId_++,G=a.lastSessionId;let re=!1,ge=null;const gt=function(){ge?ge.close():(re=!0,T())};a.realtime_={close:gt,sendRequest:function(dn){(0,Q.hu)(ge,"sendRequest call when we're not connected not allowed."),ge.sendRequest(dn)}};const Vt=a.forceTokenRefresh_;a.forceTokenRefresh_=!1;try{const[dn,gn]=yield Promise.all([a.authTokenProvider_.getToken(Vt),a.appCheckTokenProvider_.getToken(Vt)]);re?xn("getToken() completed but was canceled"):(xn("getToken() completed. Creating connection."),a.authToken_=dn&&dn.accessToken,a.appCheckToken_=gn&&gn.token,ge=new Yn(N,a.repoInfo_,a.applicationId_,a.appCheckToken_,a.authToken_,h,y,T,Hn=>{Ur(Hn+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},G))}catch(dn){a.log_("Failed to get token: "+dn),re||(a.repoInfo_.nodeAdmin&&Ur(dn),gt())}}})()}interrupt(a){xn("Interrupting connection for reason: "+a),this.interruptReasons_[a]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(a){xn("Resuming connection for reason: "+a),delete this.interruptReasons_[a],(0,Q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ui,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(a){const h=a-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:h})}cancelSentTransactions_(){for(let a=0;a<this.outstandingPuts_.length;a++){const h=this.outstandingPuts_[a];h&&"h"in h.request&&h.queued&&(h.onComplete&&h.onComplete("disconnect"),delete this.outstandingPuts_[a],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(a,h){let y;y=h?h.map(N=>pr(N)).join("$"):"default";const T=this.removeListen_(a,y);T&&T.onComplete&&T.onComplete("permission_denied")}removeListen_(a,h){const y=new zr(a).toString();let T;if(this.listens.has(y)){const N=this.listens.get(y);T=N.get(h),N.delete(h),0===N.size&&this.listens.delete(y)}else T=void 0;return T}onAuthRevoked_(a,h){xn("Auth token revoked: "+a+"/"+h),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===a||"permission_denied"===a)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(a,h){xn("App check token revoked: "+a+"/"+h),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===a||"permission_denied"===a)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(a){this.securityDebugCallback_?this.securityDebugCallback_(a):"msg"in a&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const a of this.listens.values())for(const h of a.values())this.sendListen_(h);for(let a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){const a=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(a.action,a.pathString,a.data,a.onComplete)}for(let a=0;a<this.outstandingGets_.length;a++)this.outstandingGets_[a]&&this.sendGet_(a)}sendConnectStats_(){const a={};let h="js";(0,Q.Yr)()&&(h=this.repoInfo_.nodeAdmin?"admin_node":"node"),a["sdk."+h+"."+un.replace(/\./g,"-")]=1,(0,Q.uI)()?a["framework.cordova"]=1:(0,Q.b$)()&&(a["framework.reactnative"]=1),this.reportStats(a)}shouldReconnect_(){const a=Cs.getInstance().currentlyOnline();return(0,Q.xb)(this.interruptReasons_)&&a}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class Vr{constructor(o,a){this.name=o,this.node=a}static Wrap(o,a){return new Vr(o,a)}}class gs{getCompare(){return this.compare.bind(this)}indexedValueChanged(o,a){const h=new Vr(on,o),y=new Vr(on,a);return 0!==this.compare(h,y)}minPost(){return Vr.MIN}}class wi extends gs{static get __EMPTY_NODE(){return As}static set __EMPTY_NODE(o){As=o}compare(o,a){return oi(o.name,a.name)}isDefinedOn(o){throw(0,Q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(o,a){return!1}minPost(){return Vr.MIN}maxPost(){return new Vr(vr,As)}makePost(o,a){return(0,Q.hu)("string"==typeof o,"KeyIndex indexValue must always be a string."),new Vr(o,As)}toString(){return".key"}}const ws=new wi;class is{constructor(o,a,h,y,T=null){this.isReverse_=y,this.resultGenerator_=T,this.nodeStack_=[];let N=1;for(;!o.isEmpty();)if(N=a?h(o.key,a):1,y&&(N*=-1),N<0)o=this.isReverse_?o.left:o.right;else{if(0===N){this.nodeStack_.push(o);break}this.nodeStack_.push(o),o=this.isReverse_?o.right:o.left}}getNext(){if(0===this.nodeStack_.length)return null;let a,o=this.nodeStack_.pop();if(a=this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value},this.isReverse_)for(o=o.left;!o.isEmpty();)this.nodeStack_.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack_.push(o),o=o.left;return a}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const o=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value}}}let oo,Ti=(()=>{class u{constructor(a,h,y,T,N){this.key=a,this.value=h,this.color=null!=y?y:u.RED,this.left=null!=T?T:ls.EMPTY_NODE,this.right=null!=N?N:ls.EMPTY_NODE}copy(a,h,y,T,N){return new u(null!=a?a:this.key,null!=h?h:this.value,null!=y?y:this.color,null!=T?T:this.left,null!=N?N:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(a){return this.left.inorderTraversal(a)||!!a(this.key,this.value)||this.right.inorderTraversal(a)}reverseTraversal(a){return this.right.reverseTraversal(a)||a(this.key,this.value)||this.left.reverseTraversal(a)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(a,h,y){let T=this;const N=y(a,T.key);return T=N<0?T.copy(null,null,null,T.left.insert(a,h,y),null):0===N?T.copy(null,h,null,null,null):T.copy(null,null,null,null,T.right.insert(a,h,y)),T.fixUp_()}removeMin_(){if(this.left.isEmpty())return ls.EMPTY_NODE;let a=this;return!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.removeMin_(),null),a.fixUp_()}remove(a,h){let y,T;if(y=this,h(a,y.key)<0)!y.left.isEmpty()&&!y.left.isRed_()&&!y.left.left.isRed_()&&(y=y.moveRedLeft_()),y=y.copy(null,null,null,y.left.remove(a,h),null);else{if(y.left.isRed_()&&(y=y.rotateRight_()),!y.right.isEmpty()&&!y.right.isRed_()&&!y.right.left.isRed_()&&(y=y.moveRedRight_()),0===h(a,y.key)){if(y.right.isEmpty())return ls.EMPTY_NODE;T=y.right.min_(),y=y.copy(T.key,T.value,null,null,y.right.removeMin_())}y=y.copy(null,null,null,null,y.right.remove(a,h))}return y.fixUp_()}isRed_(){return this.color}fixUp_(){let a=this;return a.right.isRed_()&&!a.left.isRed_()&&(a=a.rotateLeft_()),a.left.isRed_()&&a.left.left.isRed_()&&(a=a.rotateRight_()),a.left.isRed_()&&a.right.isRed_()&&(a=a.colorFlip_()),a}moveRedLeft_(){let a=this.colorFlip_();return a.right.left.isRed_()&&(a=a.copy(null,null,null,null,a.right.rotateRight_()),a=a.rotateLeft_(),a=a.colorFlip_()),a}moveRedRight_(){let a=this.colorFlip_();return a.left.left.isRed_()&&(a=a.rotateRight_(),a=a.colorFlip_()),a}rotateLeft_(){const a=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,a,null)}rotateRight_(){const a=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,a)}colorFlip_(){const a=this.left.copy(null,null,!this.left.color,null,null),h=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,a,h)}checkMaxDepth_(){const a=this.check_();return Math.pow(2,a)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const a=this.left.check_();if(a!==this.right.check_())throw new Error("Black depths differ");return a+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class ls{constructor(o,a=ls.EMPTY_NODE){this.comparator_=o,this.root_=a}insert(o,a){return new ls(this.comparator_,this.root_.insert(o,a,this.comparator_).copy(null,null,Ti.BLACK,null,null))}remove(o){return new ls(this.comparator_,this.root_.remove(o,this.comparator_).copy(null,null,Ti.BLACK,null,null))}get(o){let a,h=this.root_;for(;!h.isEmpty();){if(a=this.comparator_(o,h.key),0===a)return h.value;a<0?h=h.left:a>0&&(h=h.right)}return null}getPredecessorKey(o){let a,h=this.root_,y=null;for(;!h.isEmpty();){if(a=this.comparator_(o,h.key),0===a){if(h.left.isEmpty())return y?y.key:null;for(h=h.left;!h.right.isEmpty();)h=h.right;return h.key}a<0?h=h.left:a>0&&(y=h,h=h.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(o){return this.root_.inorderTraversal(o)}reverseTraversal(o){return this.root_.reverseTraversal(o)}getIterator(o){return new is(this.root_,null,this.comparator_,!1,o)}getIteratorFrom(o,a){return new is(this.root_,o,this.comparator_,!1,a)}getReverseIteratorFrom(o,a){return new is(this.root_,o,this.comparator_,!0,a)}getReverseIterator(o){return new is(this.root_,null,this.comparator_,!0,o)}}function Ms(u,o){return oi(u.name,o.name)}function ga(u,o){return oi(u,o)}ls.EMPTY_NODE=new class _s{copy(o,a,h,y,T){return this}insert(o,a,h){return new Ti(o,a,null)}remove(o,a){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Z=function(u){return"number"==typeof u?"number:"+vi(u):"string:"+u},A=function(u){if(u.isLeafNode()){const o=u.val();(0,Q.hu)("string"==typeof o||"number"==typeof o||"object"==typeof o&&(0,Q.r3)(o,".sv"),"Priority must be a string or number.")}else(0,Q.hu)(u===oo||u.isEmpty(),"priority of unexpected type.");(0,Q.hu)(u===oo||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let q,Xt,$n,Ie=(()=>{class u{constructor(a,h=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=a,this.priorityNode_=h,this.lazyHash_=null,(0,Q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),A(this.priorityNode_)}static set __childrenNodeConstructor(a){q=a}static get __childrenNodeConstructor(){return q}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(a){return new u(this.value_,a)}getImmediateChild(a){return".priority"===a?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(a){return xr(a)?this:".priority"===Br(a)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(a,h){return null}updateImmediateChild(a,h){return".priority"===a?this.updatePriority(h):h.isEmpty()&&".priority"!==a?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(a,h).updatePriority(this.priorityNode_)}updateChild(a,h){const y=Br(a);return null===y?h:h.isEmpty()&&".priority"!==y?this:((0,Q.hu)(".priority"!==y||1===Ki(a),".priority must be the last token in a path"),this.updateImmediateChild(y,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ni(a),h)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(a,h){return!1}val(a){return a&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let a="";this.priorityNode_.isEmpty()||(a+="priority:"+Z(this.priorityNode_.val())+":");const h=typeof this.value_;a+=h+":",a+="number"===h?vi(this.value_):this.value_,this.lazyHash_=tn(a)}return this.lazyHash_}getValue(){return this.value_}compareTo(a){return a===u.__childrenNodeConstructor.EMPTY_NODE?1:a instanceof u.__childrenNodeConstructor?-1:((0,Q.hu)(a.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(a))}compareToLeafNode_(a){const h=typeof a.value_,y=typeof this.value_,T=u.VALUE_TYPE_ORDER.indexOf(h),N=u.VALUE_TYPE_ORDER.indexOf(y);return(0,Q.hu)(T>=0,"Unknown leaf type: "+h),(0,Q.hu)(N>=0,"Unknown leaf type: "+y),T===N?"object"===y?0:this.value_<a.value_?-1:this.value_===a.value_?0:1:N-T}withIndex(){return this}isIndexed(){return!0}equals(a){return a===this||!!a.isLeafNode()&&(this.value_===a.value_&&this.priorityNode_.equals(a.priorityNode_))}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const C=new class Ii extends gs{compare(o,a){const h=o.node.getPriority(),y=a.node.getPriority(),T=h.compareTo(y);return 0===T?oi(o.name,a.name):T}isDefinedOn(o){return!o.getPriority().isEmpty()}indexedValueChanged(o,a){return!o.getPriority().equals(a.getPriority())}minPost(){return Vr.MIN}maxPost(){return new Vr(vr,new Ie("[PRIORITY-POST]",$n))}makePost(o,a){const h=Xt(o);return new Vr(a,new Ie("[PRIORITY-POST]",h))}toString(){return".priority"}},I=Math.log(2);class D{constructor(o){this.count=parseInt(Math.log(o+1)/I,10),this.current_=this.count-1;const y=(T=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=o+1&y}nextBitIsOne(){const o=!(this.bits_&1<<this.current_);return this.current_--,o}}const V=function(u,o,a,h){u.sort(o);const y=function(re,ge){const gt=ge-re;let wt,Vt;if(0===gt)return null;if(1===gt)return wt=u[re],Vt=a?a(wt):wt,new Ti(Vt,wt.node,Ti.BLACK,null,null);{const dn=parseInt(gt/2,10)+re,gn=y(re,dn),Hn=y(dn+1,ge);return wt=u[dn],Vt=a?a(wt):wt,new Ti(Vt,wt.node,Ti.BLACK,gn,Hn)}},G=function(re){let ge=null,gt=null,wt=u.length;const Vt=function(gn,Hn){const fi=wt-gn,Fi=wt;wt-=gn;const ns=y(fi+1,Fi),io=u[fi],Po=a?a(io):io;dn(new Ti(Po,io.node,Hn,null,ns))},dn=function(gn){ge?(ge.left=gn,ge=gn):(gt=gn,ge=gn)};for(let gn=0;gn<re.count;++gn){const Hn=re.nextBitIsOne(),fi=Math.pow(2,re.count-(gn+1));Hn?Vt(fi,Ti.BLACK):(Vt(fi,Ti.BLACK),Vt(fi,Ti.RED))}return gt}(new D(u.length));return new ls(h||o,G)};let _e;const ct={};class Gt{constructor(o,a){this.indexes_=o,this.indexSet_=a}static get Default(){return(0,Q.hu)(ct&&C,"ChildrenNode.ts has not been loaded"),_e=_e||new Gt({".priority":ct},{".priority":C}),_e}get(o){const a=(0,Q.DV)(this.indexes_,o);if(!a)throw new Error("No index defined for "+o);return a instanceof ls?a:null}hasIndex(o){return(0,Q.r3)(this.indexSet_,o.toString())}addIndex(o,a){(0,Q.hu)(o!==ws,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const h=[];let y=!1;const T=a.getIterator(Vr.Wrap);let G,N=T.getNext();for(;N;)y=y||o.isDefinedOn(N.node),h.push(N),N=T.getNext();G=y?V(h,o.getCompare()):ct;const re=o.toString(),ge=Object.assign({},this.indexSet_);ge[re]=o;const gt=Object.assign({},this.indexes_);return gt[re]=G,new Gt(gt,ge)}addToIndexes(o,a){const h=(0,Q.UI)(this.indexes_,(y,T)=>{const N=(0,Q.DV)(this.indexSet_,T);if((0,Q.hu)(N,"Missing index implementation for "+T),y===ct){if(N.isDefinedOn(o.node)){const G=[],re=a.getIterator(Vr.Wrap);let ge=re.getNext();for(;ge;)ge.name!==o.name&&G.push(ge),ge=re.getNext();return G.push(o),V(G,N.getCompare())}return ct}{const G=a.get(o.name);let re=y;return G&&(re=re.remove(new Vr(o.name,G))),re.insert(o,o.node)}});return new Gt(h,this.indexSet_)}removeFromIndexes(o,a){const h=(0,Q.UI)(this.indexes_,y=>{if(y===ct)return y;{const T=a.get(o.name);return T?y.remove(new Vr(o.name,T)):y}});return new Gt(h,this.indexSet_)}}let pt,St=(()=>{class u{constructor(a,h,y){this.children_=a,this.priorityNode_=h,this.indexMap_=y,this.lazyHash_=null,this.priorityNode_&&A(this.priorityNode_),this.children_.isEmpty()&&(0,Q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pt||(pt=new u(new ls(ga),null,Gt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pt}updatePriority(a){return this.children_.isEmpty()?this:new u(this.children_,a,this.indexMap_)}getImmediateChild(a){if(".priority"===a)return this.getPriority();{const h=this.children_.get(a);return null===h?pt:h}}getChild(a){const h=Br(a);return null===h?this:this.getImmediateChild(h).getChild(Ni(a))}hasChild(a){return null!==this.children_.get(a)}updateImmediateChild(a,h){if((0,Q.hu)(h,"We should always be passing snapshot nodes"),".priority"===a)return this.updatePriority(h);{const y=new Vr(a,h);let T,N;h.isEmpty()?(T=this.children_.remove(a),N=this.indexMap_.removeFromIndexes(y,this.children_)):(T=this.children_.insert(a,h),N=this.indexMap_.addToIndexes(y,this.children_));const G=T.isEmpty()?pt:this.priorityNode_;return new u(T,G,N)}}updateChild(a,h){const y=Br(a);if(null===y)return h;{(0,Q.hu)(".priority"!==Br(a)||1===Ki(a),".priority must be the last token in a path");const T=this.getImmediateChild(y).updateChild(Ni(a),h);return this.updateImmediateChild(y,T)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(a){if(this.isEmpty())return null;const h={};let y=0,T=0,N=!0;if(this.forEachChild(C,(G,re)=>{h[G]=re.val(a),y++,N&&u.INTEGER_REGEXP_.test(G)?T=Math.max(T,Number(G)):N=!1}),!a&&N&&T<2*y){const G=[];for(const re in h)G[re]=h[re];return G}return a&&!this.getPriority().isEmpty()&&(h[".priority"]=this.getPriority().val()),h}hash(){if(null===this.lazyHash_){let a="";this.getPriority().isEmpty()||(a+="priority:"+Z(this.getPriority().val())+":"),this.forEachChild(C,(h,y)=>{const T=y.hash();""!==T&&(a+=":"+h+":"+T)}),this.lazyHash_=""===a?"":tn(a)}return this.lazyHash_}getPredecessorChildName(a,h,y){const T=this.resolveIndex_(y);if(T){const N=T.getPredecessorKey(new Vr(a,h));return N?N.name:null}return this.children_.getPredecessorKey(a)}getFirstChildName(a){const h=this.resolveIndex_(a);if(h){const y=h.minKey();return y&&y.name}return this.children_.minKey()}getFirstChild(a){const h=this.getFirstChildName(a);return h?new Vr(h,this.children_.get(h)):null}getLastChildName(a){const h=this.resolveIndex_(a);if(h){const y=h.maxKey();return y&&y.name}return this.children_.maxKey()}getLastChild(a){const h=this.getLastChildName(a);return h?new Vr(h,this.children_.get(h)):null}forEachChild(a,h){const y=this.resolveIndex_(a);return y?y.inorderTraversal(T=>h(T.name,T.node)):this.children_.inorderTraversal(h)}getIterator(a){return this.getIteratorFrom(a.minPost(),a)}getIteratorFrom(a,h){const y=this.resolveIndex_(h);if(y)return y.getIteratorFrom(a,T=>T);{const T=this.children_.getIteratorFrom(a.name,Vr.Wrap);let N=T.peek();for(;null!=N&&h.compare(N,a)<0;)T.getNext(),N=T.peek();return T}}getReverseIterator(a){return this.getReverseIteratorFrom(a.maxPost(),a)}getReverseIteratorFrom(a,h){const y=this.resolveIndex_(h);if(y)return y.getReverseIteratorFrom(a,T=>T);{const T=this.children_.getReverseIteratorFrom(a.name,Vr.Wrap);let N=T.peek();for(;null!=N&&h.compare(N,a)>0;)T.getNext(),N=T.peek();return T}}compareTo(a){return this.isEmpty()?a.isEmpty()?0:-1:a.isLeafNode()||a.isEmpty()?1:a===Xr?-1:0}withIndex(a){if(a===ws||this.indexMap_.hasIndex(a))return this;{const h=this.indexMap_.addIndex(a,this.children_);return new u(this.children_,this.priorityNode_,h)}}isIndexed(a){return a===ws||this.indexMap_.hasIndex(a)}equals(a){if(a===this)return!0;if(a.isLeafNode())return!1;{const h=a;if(this.getPriority().equals(h.getPriority())){if(this.children_.count()===h.children_.count()){const y=this.getIterator(C),T=h.getIterator(C);let N=y.getNext(),G=T.getNext();for(;N&&G;){if(N.name!==G.name||!N.node.equals(G.node))return!1;N=y.getNext(),G=T.getNext()}return null===N&&null===G}return!1}return!1}}resolveIndex_(a){return a===ws?null:this.indexMap_.get(a.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const Xr=new class Dr extends St{constructor(){super(new ls(ga),St.EMPTY_NODE,Gt.Default)}compareTo(o){return o===this?0:1}equals(o){return o===this}getPriority(){return this}getImmediateChild(o){return St.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Vr,{MIN:{value:new Vr(on,St.EMPTY_NODE)},MAX:{value:new Vr(vr,Xr)}}),wi.__EMPTY_NODE=St.EMPTY_NODE,Ie.__childrenNodeConstructor=St,function S(u){oo=u}(Xr),function Tn(u){$n=u}(Xr);const ti=!0;function $r(u,o=null){if(null===u)return St.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(o=u[".priority"]),(0,Q.hu)(null===o||"string"==typeof o||"number"==typeof o||"object"==typeof o&&".sv"in o,"Invalid priority type found: "+typeof o),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new Ie(u,$r(o));if(u instanceof Array||!ti){let a=St.EMPTY_NODE;return Gn(u,(h,y)=>{if((0,Q.r3)(u,h)&&"."!==h.substring(0,1)){const T=$r(y);(T.isLeafNode()||!T.isEmpty())&&(a=a.updateImmediateChild(h,T))}}),a.updatePriority($r(o))}{const a=[];let h=!1;if(Gn(u,(N,G)=>{if("."!==N.substring(0,1)){const re=$r(G);re.isEmpty()||(h=h||!re.getPriority().isEmpty(),a.push(new Vr(N,re)))}}),0===a.length)return St.EMPTY_NODE;const T=V(a,Ms,N=>N.name,ga);if(h){const N=V(a,C.getCompare());return new St(T,$r(o),new Gt({".priority":N},{".priority":C}))}return new St(T,$r(o),Gt.Default)}}!function er(u){Xt=u}($r);class Bi extends gs{constructor(o){super(),this.indexPath_=o,(0,Q.hu)(!xr(o)&&".priority"!==Br(o),"Can't create PathIndex with empty path or .priority key")}extractChild(o){return o.getChild(this.indexPath_)}isDefinedOn(o){return!o.getChild(this.indexPath_).isEmpty()}compare(o,a){const h=this.extractChild(o.node),y=this.extractChild(a.node),T=h.compareTo(y);return 0===T?oi(o.name,a.name):T}makePost(o,a){const h=$r(o),y=St.EMPTY_NODE.updateChild(this.indexPath_,h);return new Vr(a,y)}maxPost(){const o=St.EMPTY_NODE.updateChild(this.indexPath_,Xr);return new Vr(vr,o)}toString(){return Vs(this.indexPath_,0).join("/")}}const Ps=new class ki extends gs{compare(o,a){const h=o.node.compareTo(a.node);return 0===h?oi(o.name,a.name):h}isDefinedOn(o){return!0}indexedValueChanged(o,a){return!o.equals(a)}minPost(){return Vr.MIN}maxPost(){return Vr.MAX}makePost(o,a){const h=$r(o);return new Vr(a,h)}toString(){return".value"}};function es(u){return{type:"value",snapshotNode:u}}function Hs(u,o){return{type:"child_added",snapshotNode:o,childName:u}}function Hi(u,o){return{type:"child_removed",snapshotNode:o,childName:u}}function Xi(u,o,a){return{type:"child_changed",snapshotNode:o,childName:u,oldSnap:a}}class ss{constructor(o){this.index_=o}updateChild(o,a,h,y,T,N){(0,Q.hu)(o.isIndexed(this.index_),"A node must be indexed if only a child is updated");const G=o.getImmediateChild(a);return G.getChild(y).equals(h.getChild(y))&&G.isEmpty()===h.isEmpty()||(null!=N&&(h.isEmpty()?o.hasChild(a)?N.trackChildChange(Hi(a,G)):(0,Q.hu)(o.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):G.isEmpty()?N.trackChildChange(Hs(a,h)):N.trackChildChange(Xi(a,h,G))),o.isLeafNode()&&h.isEmpty())?o:o.updateImmediateChild(a,h).withIndex(this.index_)}updateFullNode(o,a,h){return null!=h&&(o.isLeafNode()||o.forEachChild(C,(y,T)=>{a.hasChild(y)||h.trackChildChange(Hi(y,T))}),a.isLeafNode()||a.forEachChild(C,(y,T)=>{if(o.hasChild(y)){const N=o.getImmediateChild(y);N.equals(T)||h.trackChildChange(Xi(y,T,N))}else h.trackChildChange(Hs(y,T))})),a.withIndex(this.index_)}updatePriority(o,a){return o.isEmpty()?St.EMPTY_NODE:o.updatePriority(a)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class cs{constructor(o){this.indexedFilter_=new ss(o.getIndex()),this.index_=o.getIndex(),this.startPost_=cs.getStartPost_(o),this.endPost_=cs.getEndPost_(o),this.startIsInclusive_=!o.startAfterSet_,this.endIsInclusive_=!o.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(o){const a=this.startIsInclusive_?this.index_.compare(this.getStartPost(),o)<=0:this.index_.compare(this.getStartPost(),o)<0,h=this.endIsInclusive_?this.index_.compare(o,this.getEndPost())<=0:this.index_.compare(o,this.getEndPost())<0;return a&&h}updateChild(o,a,h,y,T,N){return this.matches(new Vr(a,h))||(h=St.EMPTY_NODE),this.indexedFilter_.updateChild(o,a,h,y,T,N)}updateFullNode(o,a,h){a.isLeafNode()&&(a=St.EMPTY_NODE);let y=a.withIndex(this.index_);y=y.updatePriority(St.EMPTY_NODE);const T=this;return a.forEachChild(C,(N,G)=>{T.matches(new Vr(N,G))||(y=y.updateImmediateChild(N,St.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(o,y,h)}updatePriority(o,a){return o}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(o){if(o.hasStart()){const a=o.getIndexStartName();return o.getIndex().makePost(o.getIndexStartValue(),a)}return o.getIndex().minPost()}static getEndPost_(o){if(o.hasEnd()){const a=o.getIndexEndName();return o.getIndex().makePost(o.getIndexEndValue(),a)}return o.getIndex().maxPost()}}class to{constructor(o){this.withinDirectionalStart=a=>this.reverse_?this.withinEndPost(a):this.withinStartPost(a),this.withinDirectionalEnd=a=>this.reverse_?this.withinStartPost(a):this.withinEndPost(a),this.withinStartPost=a=>{const h=this.index_.compare(this.rangedFilter_.getStartPost(),a);return this.startIsInclusive_?h<=0:h<0},this.withinEndPost=a=>{const h=this.index_.compare(a,this.rangedFilter_.getEndPost());return this.endIsInclusive_?h<=0:h<0},this.rangedFilter_=new cs(o),this.index_=o.getIndex(),this.limit_=o.getLimit(),this.reverse_=!o.isViewFromLeft(),this.startIsInclusive_=!o.startAfterSet_,this.endIsInclusive_=!o.endBeforeSet_}updateChild(o,a,h,y,T,N){return this.rangedFilter_.matches(new Vr(a,h))||(h=St.EMPTY_NODE),o.getImmediateChild(a).equals(h)?o:o.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(o,a,h,y,T,N):this.fullLimitUpdateChild_(o,a,h,T,N)}updateFullNode(o,a,h){let y;if(a.isLeafNode()||a.isEmpty())y=St.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<a.numChildren()&&a.isIndexed(this.index_)){let T;y=St.EMPTY_NODE.withIndex(this.index_),T=this.reverse_?a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let N=0;for(;T.hasNext()&&N<this.limit_;){const G=T.getNext();if(this.withinDirectionalStart(G)){if(!this.withinDirectionalEnd(G))break;y=y.updateImmediateChild(G.name,G.node),N++}}}else{let T;y=a.withIndex(this.index_),y=y.updatePriority(St.EMPTY_NODE),T=this.reverse_?y.getReverseIterator(this.index_):y.getIterator(this.index_);let N=0;for(;T.hasNext();){const G=T.getNext();N<this.limit_&&this.withinDirectionalStart(G)&&this.withinDirectionalEnd(G)?N++:y=y.updateImmediateChild(G.name,St.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(o,y,h)}updatePriority(o,a){return o}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(o,a,h,y,T){let N;if(this.reverse_){const wt=this.index_.getCompare();N=(Vt,dn)=>wt(dn,Vt)}else N=this.index_.getCompare();const G=o;(0,Q.hu)(G.numChildren()===this.limit_,"");const re=new Vr(a,h),ge=this.reverse_?G.getFirstChild(this.index_):G.getLastChild(this.index_),gt=this.rangedFilter_.matches(re);if(G.hasChild(a)){const wt=G.getImmediateChild(a);let Vt=y.getChildAfterChild(this.index_,ge,this.reverse_);for(;null!=Vt&&(Vt.name===a||G.hasChild(Vt.name));)Vt=y.getChildAfterChild(this.index_,Vt,this.reverse_);const dn=null==Vt?1:N(Vt,re);if(gt&&!h.isEmpty()&&dn>=0)return null!=T&&T.trackChildChange(Xi(a,h,wt)),G.updateImmediateChild(a,h);{null!=T&&T.trackChildChange(Hi(a,wt));const Hn=G.updateImmediateChild(a,St.EMPTY_NODE);return null!=Vt&&this.rangedFilter_.matches(Vt)?(null!=T&&T.trackChildChange(Hs(Vt.name,Vt.node)),Hn.updateImmediateChild(Vt.name,Vt.node)):Hn}}return h.isEmpty()?o:gt&&N(ge,re)>=0?(null!=T&&(T.trackChildChange(Hi(ge.name,ge.node)),T.trackChildChange(Hs(a,h))),G.updateImmediateChild(a,h).updateImmediateChild(ge.name,St.EMPTY_NODE)):o}}class Rs{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=C}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:on}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===C}copy(){const o=new Rs;return o.limitSet_=this.limitSet_,o.limit_=this.limit_,o.startSet_=this.startSet_,o.startAfterSet_=this.startAfterSet_,o.indexStartValue_=this.indexStartValue_,o.startNameSet_=this.startNameSet_,o.indexStartName_=this.indexStartName_,o.endSet_=this.endSet_,o.endBeforeSet_=this.endBeforeSet_,o.indexEndValue_=this.indexEndValue_,o.endNameSet_=this.endNameSet_,o.indexEndName_=this.indexEndName_,o.index_=this.index_,o.viewFrom_=this.viewFrom_,o}}function gl(u,o,a){const h=u.copy();return h.startSet_=!0,void 0===o&&(o=null),h.indexStartValue_=o,null!=a?(h.startNameSet_=!0,h.indexStartName_=a):(h.startNameSet_=!1,h.indexStartName_=""),h}function Xo(u,o,a){const h=u.copy();return h.endSet_=!0,void 0===o&&(o=null),h.indexEndValue_=o,void 0!==a?(h.endNameSet_=!0,h.indexEndName_=a):(h.endNameSet_=!1,h.indexEndName_=""),h}function _a(u,o){const a=u.copy();return a.index_=o,a}function Sa(u){const o={};if(u.isDefault())return o;let a;if(u.index_===C?a="$priority":u.index_===Ps?a="$value":u.index_===ws?a="$key":((0,Q.hu)(u.index_ instanceof Bi,"Unrecognized index type!"),a=u.index_.toString()),o.orderBy=(0,Q.Wl)(a),u.startSet_){const h=u.startAfterSet_?"startAfter":"startAt";o[h]=(0,Q.Wl)(u.indexStartValue_),u.startNameSet_&&(o[h]+=","+(0,Q.Wl)(u.indexStartName_))}if(u.endSet_){const h=u.endBeforeSet_?"endBefore":"endAt";o[h]=(0,Q.Wl)(u.indexEndValue_),u.endNameSet_&&(o[h]+=","+(0,Q.Wl)(u.indexEndName_))}return u.limitSet_&&(u.isViewFromLeft()?o.limitToFirst=u.limit_:o.limitToLast=u.limit_),o}function va(u){const o={};if(u.startSet_&&(o.sp=u.indexStartValue_,u.startNameSet_&&(o.sn=u.indexStartName_),o.sin=!u.startAfterSet_),u.endSet_&&(o.ep=u.indexEndValue_,u.endNameSet_&&(o.en=u.indexEndName_),o.ein=!u.endBeforeSet_),u.limitSet_){o.l=u.limit_;let a=u.viewFrom_;""===a&&(a=u.isViewFromLeft()?"l":"r"),o.vf=a}return u.index_!==C&&(o.i=u.index_.toString()),o}class Jo extends fr{constructor(o,a,h,y){super(),this.repoInfo_=o,this.onDataUpdate_=a,this.authTokenProvider_=h,this.appCheckTokenProvider_=y,this.log_=Di("p:rest:"),this.listens_={}}reportStats(o){throw new Error("Method not implemented.")}static getListenId_(o,a){return void 0!==a?"tag$"+a:((0,Q.hu)(o._queryParams.isDefault(),"should have a tag if it's not a default query."),o._path.toString())}listen(o,a,h,y){const T=o._path.toString();this.log_("Listen called for "+T+" "+o._queryIdentifier);const N=Jo.getListenId_(o,h),G={};this.listens_[N]=G;const re=Sa(o._queryParams);this.restRequest_(T+".json",re,(ge,gt)=>{let wt=gt;if(404===ge&&(wt=null,ge=null),null===ge&&this.onDataUpdate_(T,wt,!1,h),(0,Q.DV)(this.listens_,N)===G){let Vt;Vt=ge?401===ge?"permission_denied":"rest_error:"+ge:"ok",y(Vt,null)}})}unlisten(o,a){const h=Jo.getListenId_(o,a);delete this.listens_[h]}get(o){const a=Sa(o._queryParams),h=o._path.toString(),y=new Q.BH;return this.restRequest_(h+".json",a,(T,N)=>{let G=N;404===T&&(G=null,T=null),null===T?(this.onDataUpdate_(h,G,!1,null),y.resolve(G)):y.reject(new Error(G))}),y.promise}refreshAuthToken(o){}restRequest_(o,a={},h){return a.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([y,T])=>{y&&y.accessToken&&(a.auth=y.accessToken),T&&T.token&&(a.ac=T.token);const N=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+o+"?ns="+this.repoInfo_.namespace+(0,Q.xO)(a);this.log_("Sending REST request for "+N);const G=new XMLHttpRequest;G.onreadystatechange=()=>{if(h&&4===G.readyState){this.log_("REST Response for "+N+" received. status:",G.status,"response:",G.responseText);let re=null;if(G.status>=200&&G.status<300){try{re=(0,Q.cI)(G.responseText)}catch{Ur("Failed to parse JSON response for "+N+": "+G.responseText)}h(null,re)}else 401!==G.status&&404!==G.status&&Ur("Got unsuccessful REST response for "+N+" Status: "+G.status),h(G.status);h=null}},G.open("GET",N,!0),G.send()})}}class Xa{constructor(){this.rootNode_=St.EMPTY_NODE}getNode(o){return this.rootNode_.getChild(o)}updateSnapshot(o,a){this.rootNode_=this.rootNode_.updateChild(o,a)}}function Ea(){return{value:null,children:new Map}}function wa(u,o,a){if(xr(o))u.value=a,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(o,a);else{const h=Br(o);u.children.has(h)||u.children.set(h,Ea()),wa(u.children.get(h),o=Ni(o),a)}}function Wo(u,o){if(xr(o))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const a=u.value;return u.value=null,a.forEachChild(C,(h,y)=>{wa(u,new zr(h),y)}),Wo(u,o)}}if(u.children.size>0){const a=Br(o);return o=Ni(o),u.children.has(a)&&Wo(u.children.get(a),o)&&u.children.delete(a),0===u.children.size}return!0}function ml(u,o,a){null!==u.value?a(o,u.value):function yl(u,o){u.children.forEach((a,h)=>{o(h,a)})}(u,(h,y)=>{ml(y,new zr(o.toString()+"/"+h),a)})}class Kl{constructor(o){this.collection_=o,this.last_=null}get(){const o=this.collection_.get(),a=Object.assign({},o);return this.last_&&Gn(this.last_,(h,y)=>{a[h]=a[h]-y}),this.last_=o,a}}class Ol{constructor(o,a){this.server_=a,this.statsToReport_={},this.statsListener_=new Kl(o);const h=1e4+2e4*Math.random();Kr(this.reportStats_.bind(this),Math.floor(h))}reportStats_(){const o=this.statsListener_.get(),a={};let h=!1;Gn(o,(y,T)=>{T>0&&(0,Q.r3)(this.statsToReport_,y)&&(a[y]=T,h=!0)}),h&&this.server_.reportStats(a),Kr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Gs=(()=>{return(u=Gs||(Gs={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Gs;var u})();function To(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class Ja{constructor(o,a,h){this.path=o,this.affectedTree=a,this.revert=h,this.type=Gs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(o){if(xr(this.path)){if(null!=this.affectedTree.value)return(0,Q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const a=this.affectedTree.subtree(new zr(o));return new Ja(Gr(),a,this.revert)}}return(0,Q.hu)(Br(this.path)===o,"operationForChild called for unrelated child."),new Ja(Ni(this.path),this.affectedTree,this.revert)}}class Si{constructor(o,a){this.source=o,this.path=a,this.type=Gs.LISTEN_COMPLETE}operationForChild(o){return xr(this.path)?new Si(this.source,Gr()):new Si(this.source,Ni(this.path))}}class Aa{constructor(o,a,h){this.source=o,this.path=a,this.snap=h,this.type=Gs.OVERWRITE}operationForChild(o){return xr(this.path)?new Aa(this.source,Gr(),this.snap.getImmediateChild(o)):new Aa(this.source,Ni(this.path),this.snap)}}class la{constructor(o,a,h){this.source=o,this.path=a,this.children=h,this.type=Gs.MERGE}operationForChild(o){if(xr(this.path)){const a=this.children.subtree(new zr(o));return a.isEmpty()?null:a.value?new Aa(this.source,Gr(),a.value):new la(this.source,Gr(),a)}return(0,Q.hu)(Br(this.path)===o,"Can't get a merge for a child not on the path of the operation"),new la(this.source,Ni(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class U{constructor(o,a,h){this.node_=o,this.fullyInitialized_=a,this.filtered_=h}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(o){if(xr(o))return this.isFullyInitialized()&&!this.filtered_;const a=Br(o);return this.isCompleteForChild(a)}isCompleteForChild(o){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(o)}getNode(){return this.node_}}class ee{constructor(o){this.query_=o,this.index_=this.query_._queryParams.getIndex()}}function se(u,o,a,h,y,T){const N=h.filter(G=>G.type===a);N.sort((G,re)=>function Ht(u,o,a){if(null==o.childName||null==a.childName)throw(0,Q.g5)("Should only compare child_ events.");const h=new Vr(o.childName,o.snapshotNode),y=new Vr(a.childName,a.snapshotNode);return u.index_.compare(h,y)}(u,G,re)),N.forEach(G=>{const re=function Ge(u,o,a){return"value"===o.type||"child_removed"===o.type||(o.prevName=a.getPredecessorChildName(o.childName,o.snapshotNode,u.index_)),o}(u,G,T);y.forEach(ge=>{ge.respondsTo(G.type)&&o.push(ge.createEvent(re,u.query_))})})}function Zt(u,o){return{eventCache:u,serverCache:o}}function Fn(u,o,a,h){return Zt(new U(o,a,h),u.serverCache)}function Sr(u,o,a,h){return Zt(u.eventCache,new U(o,a,h))}function jr(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function Pr(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let Mr;class yr{constructor(o,a=(()=>(Mr||(Mr=new ls(mr)),Mr))()){this.value=o,this.children=a}static fromObject(o){let a=new yr(null);return Gn(o,(h,y)=>{a=a.set(new zr(h),y)}),a}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(o,a){if(null!=this.value&&a(this.value))return{path:Gr(),value:this.value};if(xr(o))return null;{const h=Br(o),y=this.children.get(h);if(null!==y){const T=y.findRootMostMatchingPathAndValue(Ni(o),a);return null!=T?{path:ci(new zr(h),T.path),value:T.value}:null}return null}}findRootMostValueAndPath(o){return this.findRootMostMatchingPathAndValue(o,()=>!0)}subtree(o){if(xr(o))return this;{const a=Br(o),h=this.children.get(a);return null!==h?h.subtree(Ni(o)):new yr(null)}}set(o,a){if(xr(o))return new yr(a,this.children);{const h=Br(o),T=(this.children.get(h)||new yr(null)).set(Ni(o),a),N=this.children.insert(h,T);return new yr(this.value,N)}}remove(o){if(xr(o))return this.children.isEmpty()?new yr(null):new yr(null,this.children);{const a=Br(o),h=this.children.get(a);if(h){const y=h.remove(Ni(o));let T;return T=y.isEmpty()?this.children.remove(a):this.children.insert(a,y),null===this.value&&T.isEmpty()?new yr(null):new yr(this.value,T)}return this}}get(o){if(xr(o))return this.value;{const a=Br(o),h=this.children.get(a);return h?h.get(Ni(o)):null}}setTree(o,a){if(xr(o))return a;{const h=Br(o),T=(this.children.get(h)||new yr(null)).setTree(Ni(o),a);let N;return N=T.isEmpty()?this.children.remove(h):this.children.insert(h,T),new yr(this.value,N)}}fold(o){return this.fold_(Gr(),o)}fold_(o,a){const h={};return this.children.inorderTraversal((y,T)=>{h[y]=T.fold_(ci(o,y),a)}),a(o,this.value,h)}findOnPath(o,a){return this.findOnPath_(o,Gr(),a)}findOnPath_(o,a,h){const y=!!this.value&&h(a,this.value);if(y)return y;if(xr(o))return null;{const T=Br(o),N=this.children.get(T);return N?N.findOnPath_(Ni(o),ci(a,T),h):null}}foreachOnPath(o,a){return this.foreachOnPath_(o,Gr(),a)}foreachOnPath_(o,a,h){if(xr(o))return this;{this.value&&h(a,this.value);const y=Br(o),T=this.children.get(y);return T?T.foreachOnPath_(Ni(o),ci(a,y),h):new yr(null)}}foreach(o){this.foreach_(Gr(),o)}foreach_(o,a){this.children.inorderTraversal((h,y)=>{y.foreach_(ci(o,h),a)}),this.value&&a(o,this.value)}foreachChild(o){this.children.inorderTraversal((a,h)=>{h.value&&o(a,h.value)})}}class xi{constructor(o){this.writeTree_=o}static empty(){return new xi(new yr(null))}}function Ws(u,o,a){if(xr(o))return new xi(new yr(a));{const h=u.writeTree_.findRootMostValueAndPath(o);if(null!=h){const y=h.path;let T=h.value;const N=Ds(y,o);return T=T.updateChild(N,a),new xi(u.writeTree_.set(y,T))}{const y=new yr(a),T=u.writeTree_.setTree(o,y);return new xi(T)}}}function ao(u,o,a){let h=u;return Gn(a,(y,T)=>{h=Ws(h,ci(o,y),T)}),h}function Lo(u,o){if(xr(o))return xi.empty();{const a=u.writeTree_.setTree(o,new yr(null));return new xi(a)}}function Ks(u,o){return null!=qs(u,o)}function qs(u,o){const a=u.writeTree_.findRootMostValueAndPath(o);return null!=a?u.writeTree_.get(a.path).getChild(Ds(a.path,o)):null}function Bo(u){const o=[],a=u.writeTree_.value;return null!=a?a.isLeafNode()||a.forEachChild(C,(h,y)=>{o.push(new Vr(h,y))}):u.writeTree_.children.inorderTraversal((h,y)=>{null!=y.value&&o.push(new Vr(h,y.value))}),o}function no(u,o){if(xr(o))return u;{const a=qs(u,o);return new xi(null!=a?new yr(a):u.writeTree_.subtree(o))}}function el(u){return u.writeTree_.isEmpty()}function ca(u,o){return hu(Gr(),u.writeTree_,o)}function hu(u,o,a){if(null!=o.value)return a.updateChild(u,o.value);{let h=null;return o.children.inorderTraversal((y,T)=>{".priority"===y?((0,Q.hu)(null!==T.value,"Priority writes must always be leaf nodes"),h=T.value):a=hu(ci(u,y),T,a)}),!a.getChild(u).isEmpty()&&null!==h&&(a=a.updateChild(ci(u,".priority"),h)),a}}function Ia(u,o){return kl(o,u)}function Yl(u,o){if(u.snap)return qi(u.path,o);for(const a in u.children)if(u.children.hasOwnProperty(a)&&qi(ci(u.path,a),o))return!0;return!1}function yn(u){return u.visible}function ni(u,o,a){let h=xi.empty();for(let y=0;y<u.length;++y){const T=u[y];if(o(T)){const N=T.path;let G;if(T.snap)qi(a,N)?(G=Ds(a,N),h=Ws(h,G,T.snap)):qi(N,a)&&(G=Ds(N,a),h=Ws(h,Gr(),T.snap.getChild(G)));else{if(!T.children)throw(0,Q.g5)("WriteRecord should have .snap or .children");if(qi(a,N))G=Ds(a,N),h=ao(h,G,T.children);else if(qi(N,a))if(G=Ds(N,a),xr(G))h=ao(h,Gr(),T.children);else{const re=(0,Q.DV)(T.children,Br(G));if(re){const ge=re.getChild(Ni(G));h=Ws(h,Gr(),ge)}}}}}return h}function lo(u,o,a,h,y){if(h||y){const T=no(u.visibleWrites,o);return!y&&el(T)?a:y||null!=a||Ks(T,Gr())?ca(ni(u.allWrites,function(ge){return(ge.visible||y)&&(!h||!~h.indexOf(ge.writeId))&&(qi(ge.path,o)||qi(o,ge.path))},o),a||St.EMPTY_NODE):null}{const T=qs(u.visibleWrites,o);if(null!=T)return T;{const N=no(u.visibleWrites,o);return el(N)?a:null!=a||Ks(N,Gr())?ca(N,a||St.EMPTY_NODE):null}}}function an(u,o,a,h){return lo(u.writeTree,u.treePath,o,a,h)}function br(u,o){return function Zl(u,o,a){let h=St.EMPTY_NODE;const y=qs(u.visibleWrites,o);if(y)return y.isLeafNode()||y.forEachChild(C,(T,N)=>{h=h.updateImmediateChild(T,N)}),h;if(a){const T=no(u.visibleWrites,o);return a.forEachChild(C,(N,G)=>{const re=ca(no(T,new zr(N)),G);h=h.updateImmediateChild(N,re)}),Bo(T).forEach(N=>{h=h.updateImmediateChild(N.name,N.node)}),h}return Bo(no(u.visibleWrites,o)).forEach(N=>{h=h.updateImmediateChild(N.name,N.node)}),h}(u.writeTree,u.treePath,o)}function wc(u,o,a,h){return function Zn(u,o,a,h,y){(0,Q.hu)(h||y,"Either existingEventSnap or existingServerSnap must exist");const T=ci(o,a);if(Ks(u.visibleWrites,T))return null;{const N=no(u.visibleWrites,T);return el(N)?y.getChild(a):ca(N,y.getChild(a))}}(u.writeTree,u.treePath,o,a,h)}function $o(u,o){return function Ku(u,o){return qs(u.visibleWrites,o)}(u.writeTree,ci(u.treePath,o))}function $a(u,o,a){return function dr(u,o,a,h){const y=ci(o,a),T=qs(u.visibleWrites,y);return null!=T?T:h.isCompleteForChild(a)?ca(no(u.visibleWrites,y),h.getNode().getImmediateChild(a)):null}(u.writeTree,u.treePath,o,a)}function ba(u,o){return kl(ci(u.treePath,o),u.writeTree)}function kl(u,o){return{treePath:u,writeTree:o}}class tl{constructor(){this.changeMap=new Map}trackChildChange(o){const a=o.type,h=o.childName;(0,Q.hu)("child_added"===a||"child_changed"===a||"child_removed"===a,"Only child changes supported for tracking"),(0,Q.hu)(".priority"!==h,"Only non-priority child changes can be tracked.");const y=this.changeMap.get(h);if(y){const T=y.type;if("child_added"===a&&"child_removed"===T)this.changeMap.set(h,Xi(h,o.snapshotNode,y.snapshotNode));else if("child_removed"===a&&"child_added"===T)this.changeMap.delete(h);else if("child_removed"===a&&"child_changed"===T)this.changeMap.set(h,Hi(h,y.oldSnap));else if("child_changed"===a&&"child_added"===T)this.changeMap.set(h,Hs(h,o.snapshotNode));else{if("child_changed"!==a||"child_changed"!==T)throw(0,Q.g5)("Illegal combination of changes: "+o+" occurred after "+y);this.changeMap.set(h,Xi(h,o.snapshotNode,y.oldSnap))}}else this.changeMap.set(h,o)}getChanges(){return Array.from(this.changeMap.values())}}const Xl=new class kd{getCompleteChild(o){return null}getChildAfterChild(o,a,h){return null}};class vl{constructor(o,a,h=null){this.writes_=o,this.viewCache_=a,this.optCompleteServerCache_=h}getCompleteChild(o){const a=this.viewCache_.eventCache;if(a.isCompleteForChild(o))return a.getNode().getImmediateChild(o);{const h=null!=this.optCompleteServerCache_?new U(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $a(this.writes_,o,h)}}getChildAfterChild(o,a,h){const y=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Pr(this.viewCache_),T=function Ql(u,o,a,h,y,T){return function Un(u,o,a,h,y,T,N){let G;const re=no(u.visibleWrites,o),ge=qs(re,Gr());if(null!=ge)G=ge;else{if(null==a)return[];G=ca(re,a)}if(G=G.withIndex(N),G.isEmpty()||G.isLeafNode())return[];{const gt=[],wt=N.getCompare(),Vt=T?G.getReverseIteratorFrom(h,N):G.getIteratorFrom(h,N);let dn=Vt.getNext();for(;dn&&gt.length<y;)0!==wt(dn,h)&&gt.push(dn),dn=Vt.getNext();return gt}}(u.writeTree,u.treePath,o,a,h,y,T)}(this.writes_,y,a,1,h,o);return 0===T.length?null:T[0]}}function us(u,o,a,h,y,T){const N=o.eventCache;if(null!=$o(h,a))return o;{let G,re;if(xr(a))if((0,Q.hu)(o.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),o.serverCache.isFiltered()){const ge=Pr(o),wt=br(h,ge instanceof St?ge:St.EMPTY_NODE);G=u.filter.updateFullNode(o.eventCache.getNode(),wt,T)}else{const ge=an(h,Pr(o));G=u.filter.updateFullNode(o.eventCache.getNode(),ge,T)}else{const ge=Br(a);if(".priority"===ge){(0,Q.hu)(1===Ki(a),"Can't have a priority with additional path components");const gt=N.getNode();re=o.serverCache.getNode();const wt=wc(h,a,gt,re);G=null!=wt?u.filter.updatePriority(gt,wt):N.getNode()}else{const gt=Ni(a);let wt;if(N.isCompleteForChild(ge)){re=o.serverCache.getNode();const Vt=wc(h,a,N.getNode(),re);wt=null!=Vt?N.getNode().getImmediateChild(ge).updateChild(gt,Vt):N.getNode().getImmediateChild(ge)}else wt=$a(h,ge,o.serverCache);G=null!=wt?u.filter.updateChild(N.getNode(),ge,wt,gt,y,T):N.getNode()}}return Fn(o,G,N.isFullyInitialized()||xr(a),u.filter.filtersNodes())}}function tr(u,o,a,h,y,T,N,G){const re=o.serverCache;let ge;const gt=N?u.filter:u.filter.getIndexedFilter();if(xr(a))ge=gt.updateFullNode(re.getNode(),h,null);else if(gt.filtersNodes()&&!re.isFiltered()){const dn=re.getNode().updateChild(a,h);ge=gt.updateFullNode(re.getNode(),dn,null)}else{const dn=Br(a);if(!re.isCompleteForPath(a)&&Ki(a)>1)return o;const gn=Ni(a),fi=re.getNode().getImmediateChild(dn).updateChild(gn,h);ge=".priority"===dn?gt.updatePriority(re.getNode(),fi):gt.updateChild(re.getNode(),dn,fi,gn,Xl,null)}const wt=Sr(o,ge,re.isFullyInitialized()||xr(a),gt.filtersNodes());return us(u,wt,a,y,new vl(y,wt,T),G)}function Fl(u,o,a,h,y,T,N){const G=o.eventCache;let re,ge;const gt=new vl(y,o,T);if(xr(a))ge=u.filter.updateFullNode(o.eventCache.getNode(),h,N),re=Fn(o,ge,!0,u.filter.filtersNodes());else{const wt=Br(a);if(".priority"===wt)ge=u.filter.updatePriority(o.eventCache.getNode(),h),re=Fn(o,ge,G.isFullyInitialized(),G.isFiltered());else{const Vt=Ni(a),dn=G.getNode().getImmediateChild(wt);let gn;if(xr(Vt))gn=h;else{const Hn=gt.getCompleteChild(wt);gn=null!=Hn?".priority"===Xs(Vt)&&Hn.getChild(Oo(Vt)).isEmpty()?Hn:Hn.updateChild(Vt,h):St.EMPTY_NODE}re=dn.equals(gn)?o:Fn(o,u.filter.updateChild(G.getNode(),wt,gn,Vt,gt,N),G.isFullyInitialized(),u.filter.filtersNodes())}}return re}function $i(u,o){return u.eventCache.isCompleteForChild(o)}function Is(u,o,a){return a.foreach((h,y)=>{o=o.updateChild(h,y)}),o}function On(u,o,a,h,y,T,N,G){if(o.serverCache.getNode().isEmpty()&&!o.serverCache.isFullyInitialized())return o;let ge,re=o;ge=xr(a)?h:new yr(null).setTree(a,h);const gt=o.serverCache.getNode();return ge.children.inorderTraversal((wt,Vt)=>{if(gt.hasChild(wt)){const gn=Is(0,o.serverCache.getNode().getImmediateChild(wt),Vt);re=tr(u,re,new zr(wt),gn,y,T,N,G)}}),ge.children.inorderTraversal((wt,Vt)=>{const dn=!o.serverCache.isCompleteForChild(wt)&&null===Vt.value;if(!gt.hasChild(wt)&&!dn){const Hn=Is(0,o.serverCache.getNode().getImmediateChild(wt),Vt);re=tr(u,re,new zr(wt),Hn,y,T,N,G)}}),re}class Fd{constructor(o,a){this.query_=o,this.eventRegistrations_=[];const h=this.query_._queryParams,y=new ss(h.getIndex()),T=function ma(u){return u.loadsAllData()?new ss(u.getIndex()):u.hasLimit()?new to(u):new cs(u)}(h);this.processor_=function nl(u){return{filter:u}}(T);const N=a.serverCache,G=a.eventCache,re=y.updateFullNode(St.EMPTY_NODE,N.getNode(),null),ge=T.updateFullNode(St.EMPTY_NODE,G.getNode(),null),gt=new U(re,N.isFullyInitialized(),y.filtersNodes()),wt=new U(ge,G.isFullyInitialized(),T.filtersNodes());this.viewCache_=Zt(wt,gt),this.eventGenerator_=new ee(this.query_)}get query(){return this.query_}}function bc(u,o){const a=Pr(u.viewCache_);return a&&(u.query._queryParams.loadsAllData()||!xr(o)&&!a.getImmediateChild(Br(o)).isEmpty())?a.getChild(o):null}function Cc(u){return 0===u.eventRegistrations_.length}function co(u,o,a){const h=[];if(a){(0,Q.hu)(null==o,"A cancel should cancel all event registrations.");const y=u.query._path;u.eventRegistrations_.forEach(T=>{const N=T.createCancelEvent(a,y);N&&h.push(N)})}if(o){let y=[];for(let T=0;T<u.eventRegistrations_.length;++T){const N=u.eventRegistrations_[T];if(N.matches(o)){if(o.hasAnyCallback()){y=y.concat(u.eventRegistrations_.slice(T+1));break}}else y.push(N)}u.eventRegistrations_=y}else u.eventRegistrations_=[];return h}function Ua(u,o,a,h){o.type===Gs.MERGE&&null!==o.source.queryId&&((0,Q.hu)(Pr(u.viewCache_),"We should always have a full cache before handling merges"),(0,Q.hu)(jr(u.viewCache_),"Missing event cache, even though we have a server cache"));const y=u.viewCache_,T=function Ma(u,o,a,h,y){const T=new tl;let N,G;if(a.type===Gs.OVERWRITE){const ge=a;ge.source.fromUser?N=Fl(u,o,ge.path,ge.snap,h,y,T):((0,Q.hu)(ge.source.fromServer,"Unknown source."),G=ge.source.tagged||o.serverCache.isFiltered()&&!xr(ge.path),N=tr(u,o,ge.path,ge.snap,h,y,G,T))}else if(a.type===Gs.MERGE){const ge=a;ge.source.fromUser?N=function ds(u,o,a,h,y,T,N){let G=o;return h.foreach((re,ge)=>{const gt=ci(a,re);$i(o,Br(gt))&&(G=Fl(u,G,gt,ge,y,T,N))}),h.foreach((re,ge)=>{const gt=ci(a,re);$i(o,Br(gt))||(G=Fl(u,G,gt,ge,y,T,N))}),G}(u,o,ge.path,ge.children,h,y,T):((0,Q.hu)(ge.source.fromServer,"Unknown source."),G=ge.source.tagged||o.serverCache.isFiltered(),N=On(u,o,ge.path,ge.children,h,y,G,T))}else if(a.type===Gs.ACK_USER_WRITE){const ge=a;N=ge.revert?function rl(u,o,a,h,y,T){let N;if(null!=$o(h,a))return o;{const G=new vl(h,o,y),re=o.eventCache.getNode();let ge;if(xr(a)||".priority"===Br(a)){let gt;if(o.serverCache.isFullyInitialized())gt=an(h,Pr(o));else{const wt=o.serverCache.getNode();(0,Q.hu)(wt instanceof St,"serverChildren would be complete if leaf node"),gt=br(h,wt)}ge=u.filter.updateFullNode(re,gt,T)}else{const gt=Br(a);let wt=$a(h,gt,o.serverCache);null==wt&&o.serverCache.isCompleteForChild(gt)&&(wt=re.getImmediateChild(gt)),ge=null!=wt?u.filter.updateChild(re,gt,wt,Ni(a),G,T):o.eventCache.getNode().hasChild(gt)?u.filter.updateChild(re,gt,St.EMPTY_NODE,Ni(a),G,T):re,ge.isEmpty()&&o.serverCache.isFullyInitialized()&&(N=an(h,Pr(o)),N.isLeafNode()&&(ge=u.filter.updateFullNode(ge,N,T)))}return N=o.serverCache.isFullyInitialized()||null!=$o(h,Gr()),Fn(o,ge,N,u.filter.filtersNodes())}}(u,o,ge.path,h,y,T):function qc(u,o,a,h,y,T,N){if(null!=$o(y,a))return o;const G=o.serverCache.isFiltered(),re=o.serverCache;if(null!=h.value){if(xr(a)&&re.isFullyInitialized()||re.isCompleteForPath(a))return tr(u,o,a,re.getNode().getChild(a),y,T,G,N);if(xr(a)){let ge=new yr(null);return re.getNode().forEachChild(ws,(gt,wt)=>{ge=ge.set(new zr(gt),wt)}),On(u,o,a,ge,y,T,G,N)}return o}{let ge=new yr(null);return h.foreach((gt,wt)=>{const Vt=ci(a,gt);re.isCompleteForPath(Vt)&&(ge=ge.set(gt,re.getNode().getChild(Vt)))}),On(u,o,a,ge,y,T,G,N)}}(u,o,ge.path,ge.affectedTree,h,y,T)}else{if(a.type!==Gs.LISTEN_COMPLETE)throw(0,Q.g5)("Unknown operation type: "+a.type);N=function Jl(u,o,a,h,y){const T=o.serverCache;return us(u,Sr(o,T.getNode(),T.isFullyInitialized()||xr(a),T.isFiltered()),a,h,Xl,y)}(u,o,a.path,h,T)}const re=T.getChanges();return function Ic(u,o,a){const h=o.eventCache;if(h.isFullyInitialized()){const y=h.getNode().isLeafNode()||h.getNode().isEmpty(),T=jr(u);(a.length>0||!u.eventCache.isFullyInitialized()||y&&!h.getNode().equals(T)||!h.getNode().getPriority().equals(T.getPriority()))&&a.push(es(jr(o)))}}(o,N,re),{viewCache:N,changes:re}}(u.processor_,y,o,a,h);return function Rr(u,o){(0,Q.hu)(o.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,Q.hu)(o.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,T.viewCache),(0,Q.hu)(T.viewCache.serverCache.isFullyInitialized()||!y.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=T.viewCache,Uo(u,T.changes,T.viewCache.eventCache.getNode(),null)}function Uo(u,o,a,h){return function z(u,o,a,h){const y=[],T=[];return o.forEach(N=>{"child_changed"===N.type&&u.index_.indexedValueChanged(N.oldSnap,N.snapshotNode)&&T.push(function bi(u,o){return{type:"child_moved",snapshotNode:o,childName:u}}(N.childName,N.snapshotNode))}),se(u,y,"child_removed",o,h,a),se(u,y,"child_added",o,h,a),se(u,y,"child_moved",T,h,a),se(u,y,"child_changed",o,h,a),se(u,y,"value",o,h,a),y}(u.eventGenerator_,o,a,h?[h]:u.eventRegistrations_)}let R,wo;class O{constructor(){this.views=new Map}}function le(u,o,a,h){const y=o.source.queryId;if(null!==y){const T=u.views.get(y);return(0,Q.hu)(null!=T,"SyncTree gave us an op for an invalid query."),Ua(T,o,a,h)}{let T=[];for(const N of u.views.values())T=T.concat(Ua(N,o,a,h));return T}}function pe(u,o,a,h,y){const N=u.views.get(o._queryIdentifier);if(!N){let G=an(a,y?h:null),re=!1;G?re=!0:h instanceof St?(G=br(a,h),re=!1):(G=St.EMPTY_NODE,re=!1);const ge=Zt(new U(G,re,!1),new U(h,y,!1));return new Fd(o,ge)}return N}function pn(u){const o=[];for(const a of u.views.values())a.query._queryParams.loadsAllData()||o.push(a);return o}function Wn(u,o){let a=null;for(const h of u.views.values())a=a||bc(h,o);return a}function Vn(u,o){return o._queryParams.loadsAllData()?Ji(u):u.views.get(o._queryIdentifier)}function zi(u,o){return null!=Vn(u,o)}function Ui(u){return null!=Ji(u)}function Ji(u){for(const o of u.views.values())if(o.query._queryParams.loadsAllData())return o;return null}let Ls=1;class Ko{constructor(o){this.listenProvider_=o,this.syncPointTree_=new yr(null),this.pendingWriteTree_=function Lt(){return{visibleWrites:xi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bs(u,o,a,h,y){return function Nl(u,o,a,h,y){(0,Q.hu)(h>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===y&&(y=!0),u.allWrites.push({path:o,snap:a,writeId:h,visible:y}),y&&(u.visibleWrites=Ws(u.visibleWrites,o,a)),u.lastWriteId=h}(u.pendingWriteTree_,o,a,h,y),y?Il(u,new Aa({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,a)):[]}function ta(u,o,a=!1){const h=function Eo(u,o){for(let a=0;a<u.allWrites.length;a++){const h=u.allWrites[a];if(h.writeId===o)return h}return null}(u.pendingWriteTree_,o);if(function _l(u,o){const a=u.allWrites.findIndex(G=>G.writeId===o);(0,Q.hu)(a>=0,"removeWrite called with nonexistent writeId.");const h=u.allWrites[a];u.allWrites.splice(a,1);let y=h.visible,T=!1,N=u.allWrites.length-1;for(;y&&N>=0;){const G=u.allWrites[N];G.visible&&(N>=a&&Yl(G,h.path)?y=!1:qi(h.path,G.path)&&(T=!0)),N--}return!!y&&(T?(function Os(u){u.visibleWrites=ni(u.allWrites,yn,Gr()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(h.snap?u.visibleWrites=Lo(u.visibleWrites,h.path):Gn(h.children,re=>{u.visibleWrites=Lo(u.visibleWrites,ci(h.path,re))}),!0))}(u.pendingWriteTree_,o)){let T=new yr(null);return null!=h.snap?T=T.set(Gr(),!0):Gn(h.children,N=>{T=T.set(new zr(N),!0)}),Il(u,new Ja(h.path,T,a))}return[]}function wl(u,o,a){return Il(u,new Aa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,a))}function ha(u,o,a,h,y=!1){const T=o._path,N=u.syncPointTree_.get(T);let G=[];if(N&&("default"===o._queryIdentifier||zi(N,o))){const re=function Ut(u,o,a,h){const y=o._queryIdentifier,T=[];let N=[];const G=Ui(u);if("default"===y)for(const[re,ge]of u.views.entries())N=N.concat(co(ge,a,h)),Cc(ge)&&(u.views.delete(re),ge.query._queryParams.loadsAllData()||T.push(ge.query));else{const re=u.views.get(y);re&&(N=N.concat(co(re,a,h)),Cc(re)&&(u.views.delete(y),re.query._queryParams.loadsAllData()||T.push(re.query)))}return G&&!Ui(u)&&T.push(new(function B(){return(0,Q.hu)(R,"Reference.ts has not been loaded"),R}())(o._repo,o._path)),{removed:T,events:N}}(N,o,a,h);(function W(u){return 0===u.views.size})(N)&&(u.syncPointTree_=u.syncPointTree_.remove(T));const ge=re.removed;if(G=re.events,!y){const gt=-1!==ge.findIndex(Vt=>Vt._queryParams.loadsAllData()),wt=u.syncPointTree_.findOnPath(T,(Vt,dn)=>Ui(dn));if(gt&&!wt){const Vt=u.syncPointTree_.subtree(T);if(!Vt.isEmpty()){const dn=function rc(u){return u.fold((o,a,h)=>{if(a&&Ui(a))return[Ji(a)];{let y=[];return a&&(y=pn(a)),Gn(h,(T,N)=>{y=y.concat(N)}),y}})}(Vt);for(let gn=0;gn<dn.length;++gn){const Hn=dn[gn],fi=Hn.query,Fi=Yu(u,Hn);u.listenProvider_.startListening(ic(fi),Tc(u,fi),Fi.hashFn,Fi.onComplete)}}}!wt&&ge.length>0&&!h&&(gt?u.listenProvider_.stopListening(ic(o),null):ge.forEach(Vt=>{const dn=u.queryToTagMap.get(pu(Vt));u.listenProvider_.stopListening(ic(Vt),dn)}))}!function Ch(u,o){for(let a=0;a<o.length;++a){const h=o[a];if(!h._queryParams.loadsAllData()){const y=pu(h),T=u.queryToTagMap.get(y);u.queryToTagMap.delete(y),u.tagToQueryMap.delete(T)}}}(u,ge)}return G}function fu(u,o,a,h){const y=Qc(u,h);if(null!=y){const T=gu(y),N=T.path,G=T.queryId,re=Ds(N,o);return Zu(u,N,new Aa(To(G),re,a))}return[]}function tc(u,o,a,h=!1){const y=o._path;let T=null,N=!1;u.syncPointTree_.foreachOnPath(y,(Vt,dn)=>{const gn=Ds(Vt,y);T=T||Wn(dn,gn),N=N||Ui(dn)});let re,G=u.syncPointTree_.get(y);G?(N=N||Ui(G),T=T||Wn(G,Gr())):(G=new O,u.syncPointTree_=u.syncPointTree_.set(y,G)),null!=T?re=!0:(re=!1,T=St.EMPTY_NODE,u.syncPointTree_.subtree(y).foreachChild((dn,gn)=>{const Hn=Wn(gn,Gr());Hn&&(T=T.updateImmediateChild(dn,Hn))}));const ge=zi(G,o);if(!ge&&!o._queryParams.loadsAllData()){const Vt=pu(o);(0,Q.hu)(!u.queryToTagMap.has(Vt),"View does not exist, but we have a tag");const dn=function Xc(){return Ls++}();u.queryToTagMap.set(Vt,dn),u.tagToQueryMap.set(dn,Vt)}let wt=function dt(u,o,a,h,y,T){const N=pe(u,o,h,y,T);return u.views.has(o._queryIdentifier)||u.views.set(o._queryIdentifier,N),function Fs(u,o){u.eventRegistrations_.push(o)}(N,a),function Dc(u,o){const a=u.viewCache_.eventCache,h=[];return a.getNode().isLeafNode()||a.getNode().forEachChild(C,(T,N)=>{h.push(Hs(T,N))}),a.isFullyInitialized()&&h.push(es(a.getNode())),Uo(u,h,a.getNode(),o)}(N,a)}(G,o,a,Ia(u.pendingWriteTree_,y),T,re);if(!ge&&!N&&!h){const Vt=Vn(G,o);wt=wt.concat(function Vo(u,o,a){const h=o._path,y=Tc(u,o),T=Yu(u,a),N=u.listenProvider_.startListening(ic(o),y,T.hashFn,T.onComplete),G=u.syncPointTree_.subtree(h);if(y)(0,Q.hu)(!Ui(G.value),"If we're adding a query, it shouldn't be shadowed");else{const re=G.fold((ge,gt,wt)=>{if(!xr(ge)&&gt&&Ui(gt))return[Ji(gt).query];{let Vt=[];return gt&&(Vt=Vt.concat(pn(gt).map(dn=>dn.query))),Gn(wt,(dn,gn)=>{Vt=Vt.concat(gn)}),Vt}});for(let ge=0;ge<re.length;++ge){const gt=re[ge];u.listenProvider_.stopListening(ic(gt),Tc(u,gt))}}return N}(u,o,Vt))}return wt}function Zc(u,o,a){const y=u.pendingWriteTree_,T=u.syncPointTree_.findOnPath(o,(N,G)=>{const ge=Wn(G,Ds(N,o));if(ge)return ge});return lo(y,o,T,a,!0)}function Il(u,o){return Bd(o,u.syncPointTree_,null,Ia(u.pendingWriteTree_,Gr()))}function Bd(u,o,a,h){if(xr(u.path))return $d(u,o,a,h);{const y=o.get(Gr());null==a&&null!=y&&(a=Wn(y,Gr()));let T=[];const N=Br(u.path),G=u.operationForChild(N),re=o.children.get(N);if(re&&G){const ge=a?a.getImmediateChild(N):null,gt=ba(h,N);T=T.concat(Bd(G,re,ge,gt))}return y&&(T=T.concat(le(y,u,h,a))),T}}function $d(u,o,a,h){const y=o.get(Gr());null==a&&null!=y&&(a=Wn(y,Gr()));let T=[];return o.children.inorderTraversal((N,G)=>{const re=a?a.getImmediateChild(N):null,ge=ba(h,N),gt=u.operationForChild(N);gt&&(T=T.concat($d(gt,G,re,ge)))}),y&&(T=T.concat(le(y,u,h,a))),T}function Yu(u,o){const a=o.query,h=Tc(u,a);return{hashFn:()=>(function Yc(u){return u.viewCache_.serverCache.getNode()}(o)||St.EMPTY_NODE).hash(),onComplete:y=>{if("ok"===y)return h?function Ld(u,o,a){const h=Qc(u,a);if(h){const y=gu(h),T=y.path,N=y.queryId,G=Ds(T,o);return Zu(u,T,new Si(To(N),G))}return[]}(u,a._path,h):function qu(u,o){return Il(u,new Si({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o))}(u,a._path);{const T=function Xn(u,o){let a="Unknown Error";"too_big"===u?a="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?a="Client doesn't have permission to access the desired data.":"unavailable"===u&&(a="The service is unavailable");const h=new Error(u+" at "+o._path.toString()+": "+a);return h.code=u.toUpperCase(),h}(y,a);return ha(u,a,null,T)}}}}function Tc(u,o){const a=pu(o);return u.queryToTagMap.get(a)}function pu(u){return u._path.toString()+"$"+u._queryIdentifier}function Qc(u,o){return u.tagToQueryMap.get(o)}function gu(u){const o=u.indexOf("$");return(0,Q.hu)(-1!==o&&o<u.length-1,"Bad queryKey."),{queryId:u.substr(o+1),path:new zr(u.substr(0,o))}}function Zu(u,o,a){const h=u.syncPointTree_.get(o);return(0,Q.hu)(h,"Missing sync point for query tag that we're tracking"),le(h,a,Ia(u.pendingWriteTree_,o),null)}function ic(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function ua(){return(0,Q.hu)(wo,"Reference.ts has not been loaded"),wo}())(u._repo,u._path):u}class sc{constructor(o){this.node_=o}getImmediateChild(o){const a=this.node_.getImmediateChild(o);return new sc(a)}node(){return this.node_}}class Ra{constructor(o,a){this.syncTree_=o,this.path_=a}getImmediateChild(o){const a=ci(this.path_,o);return new Ra(this.syncTree_,a)}node(){return Zc(this.syncTree_,this.path_)}}const mu=function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u},ms=function(u,o,a){return u&&"object"==typeof u?((0,Q.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?il(u[".sv"],o,a):"object"==typeof u[".sv"]?So(u[".sv"],o):void(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},il=function(u,o,a){if("timestamp"===u)return a.timestamp;(0,Q.hu)(!1,"Unexpected server value: "+u)},So=function(u,o,a){u.hasOwnProperty("increment")||(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const h=u.increment;"number"!=typeof h&&(0,Q.hu)(!1,"Unexpected increment value: "+h);const y=o.node();if((0,Q.hu)(null!==y&&typeof y<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!y.isLeafNode())return h;const N=y.getValue();return"number"!=typeof N?h:N+h},ys=function(u,o,a,h){return sl(o,new Ra(a,u),h)},bl=function(u,o,a){return sl(u,new sc(o),a)};function sl(u,o,a){const h=u.getPriority().val(),y=ms(h,o.getImmediateChild(".priority"),a);let T;if(u.isLeafNode()){const N=u,G=ms(N.getValue(),o,a);return G!==N.getValue()||y!==N.getPriority().val()?new Ie(G,$r(y)):u}{const N=u;return T=N,y!==N.getPriority().val()&&(T=T.updatePriority(new Ie(y))),N.forEachChild(C,(G,re)=>{const ge=sl(re,o.getImmediateChild(G),a);ge!==re&&(T=T.updateImmediateChild(G,ge))}),T}}class jo{constructor(o="",a=null,h={children:{},childCount:0}){this.name=o,this.parent=a,this.node=h}}function oc(u,o){let a=o instanceof zr?o:new zr(o),h=u,y=Br(a);for(;null!==y;){const T=(0,Q.DV)(h.node.children,y)||{children:{},childCount:0};h=new jo(y,h,T),a=Ni(a),y=Br(a)}return h}function ac(u){return u.node.value}function Io(u,o){u.node.value=o,Yo(u)}function Dh(u){return u.node.childCount>0}function hs(u,o){Gn(u.node.children,(a,h)=>{o(new jo(a,u,h))})}function qo(u,o,a,h){a&&!h&&o(u),hs(u,y=>{qo(y,o,!0,h)}),a&&h&&o(u)}function ol(u){return new zr(null===u.parent?u.name:ol(u.parent)+"/"+u.name)}function Yo(u){null!==u.parent&&function al(u,o,a){const h=function Cl(u){return void 0===ac(u)&&!Dh(u)}(a),y=(0,Q.r3)(u.node.children,o);h&&y?(delete u.node.children[o],u.node.childCount--,Yo(u)):!h&&!y&&(u.node.children[o]=a.node,u.node.childCount++,Yo(u))}(u.parent,u.name,u)}const Ll=/[\[\].#$\/\u0000-\u001F\u007F]/,fa=/[\[\].#$\u0000-\u001F\u007F]/,lc=10485760,xa=function(u){return"string"==typeof u&&0!==u.length&&!Ll.test(u)},Pa=function(u){return"string"==typeof u&&0!==u.length&&!fa.test(u)},Oa=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!Qn(u)||u&&"object"==typeof u&&(0,Q.r3)(u,".sv")},Va=function(u,o,a,h){h&&void 0===o||P((0,Q.gK)(u,"value"),o,a)},P=function(u,o,a){const h=a instanceof zr?new Ba(a,u):a;if(void 0===o)throw new Error(u+"contains undefined "+Qi(h));if("function"==typeof o)throw new Error(u+"contains a function "+Qi(h)+" with contents = "+o.toString());if(Qn(o))throw new Error(u+"contains "+o.toString()+" "+Qi(h));if("string"==typeof o&&o.length>lc/3&&(0,Q.ug)(o)>lc)throw new Error(u+"contains a string greater than "+lc+" utf8 bytes "+Qi(h)+" ('"+o.substring(0,50)+"...')");if(o&&"object"==typeof o){let y=!1,T=!1;if(Gn(o,(N,G)=>{if(".value"===N)y=!0;else if(".priority"!==N&&".sv"!==N&&(T=!0,!xa(N)))throw new Error(u+" contains an invalid key ("+N+") "+Qi(h)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ts(u,o){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(o),u.byteLength_+=(0,Q.ug)(o),js(u)})(h,N),P(u,G,h),function vo(u){const o=u.parts_.pop();u.byteLength_-=(0,Q.ug)(o),u.parts_.length>0&&(u.byteLength_-=1)}(h)}),y&&T)throw new Error(u+' contains ".value" child '+Qi(h)+" in addition to actual children.")}},J=function(u,o,a,h){if(h&&void 0===o)return;const y=(0,Q.gK)(u,"values");if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(y+" must be an object containing the children to replace.");const T=[];Gn(o,(N,G)=>{const re=new zr(N);if(P(y,G,ci(a,re)),".priority"===Xs(re)&&!Oa(G))throw new Error(y+"contains an invalid value for '"+re.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");T.push(re)}),function(u,o){let a,h;for(a=0;a<o.length;a++){h=o[a];const T=Vs(h);for(let N=0;N<T.length;N++)if((".priority"!==T[N]||N!==T.length-1)&&!xa(T[N]))throw new Error(u+"contains an invalid key ("+T[N]+") in path "+h.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}o.sort(pa);let y=null;for(a=0;a<o.length;a++){if(h=o[a],null!==y&&qi(y,h))throw new Error(u+"contains a path "+y.toString()+" that is ancestor of another path "+h.toString());y=h}}(y,T)},ke=function(u,o,a){if(!a||void 0!==o){if(Qn(o))throw new Error((0,Q.gK)(u,"priority")+"is "+o.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Oa(o))throw new Error((0,Q.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ht=function(u,o,a,h){if(!(h&&void 0===a||xa(a)))throw new Error((0,Q.gK)(u,o)+'was an invalid key = "'+a+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ct=function(u,o,a,h){if(!(h&&void 0===a||Pa(a)))throw new Error((0,Q.gK)(u,o)+'was an invalid path = "'+a+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},jt=function(u,o,a,h){a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),Ct(u,o,a,h)},In=function(u,o){if(".info"===Br(o))throw new Error(u+" failed = Can't modify data under /.info/")},Nn=function(u,o){const a=o.path.toString();if("string"!=typeof o.repoInfo.host||0===o.repoInfo.host.length||!xa(o.repoInfo.namespace)&&"localhost"!==o.repoInfo.host.split(":")[0]||0!==a.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),Pa(u)}(a))throw new Error((0,Q.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ar{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wr(u,o){let a=null;for(let h=0;h<o.length;h++){const y=o[h],T=y.getPath();null!==a&&!xs(T,a.path)&&(u.eventLists_.push(a),a=null),null===a&&(a={events:[],path:T}),a.events.push(y)}a&&u.eventLists_.push(a)}function ri(u,o,a){Wr(u,a),Zs(u,h=>xs(h,o))}function bs(u,o,a){Wr(u,a),Zs(u,h=>qi(h,o)||qi(o,h))}function Zs(u,o){u.recursionDepth_++;let a=!0;for(let h=0;h<u.eventLists_.length;h++){const y=u.eventLists_[h];y&&(o(y.path)?(eu(u.eventLists_[h]),u.eventLists_[h]=null):a=!1)}a&&(u.eventLists_=[]),u.recursionDepth_--}function eu(u){for(let o=0;o<u.events.length;o++){const a=u.events[o];if(null!==a){u.events[o]=null;const h=a.getEventRunner();Qt&&xn("event: "+a.toString()),si(h)}}}const $s="repo_interrupt",Ac=25;class Vi{constructor(o,a,h,y){this.repoInfo_=o,this.forceRestClient_=a,this.authTokenProvider_=h,this.appCheckProvider_=y,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ar,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ea(),this.transactionQueueTree_=new jo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Bl(u){const a=u.infoData_.getNode(new zr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+a}function yu(u){return mu({timestamp:Bl(u)})}function $l(u,o,a,h,y){u.dataUpdateCount++;const T=new zr(o);a=u.interceptServerDataCallback_?u.interceptServerDataCallback_(o,a):a;let N=[];if(y)if(h){const re=(0,Q.UI)(a,ge=>$r(ge));N=function bh(u,o,a,h){const y=Qc(u,h);if(y){const T=gu(y),N=T.path,G=T.queryId,re=Ds(N,o),ge=yr.fromObject(a);return Zu(u,N,new la(To(G),re,ge))}return[]}(u.serverSyncTree_,T,re,y)}else{const re=$r(a);N=fu(u.serverSyncTree_,T,re,y)}else if(h){const re=(0,Q.UI)(a,ge=>$r(ge));N=function ec(u,o,a){const h=yr.fromObject(a);return Il(u,new la({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,h))}(u.serverSyncTree_,T,re)}else{const re=$r(a);N=wl(u.serverSyncTree_,T,re)}let G=T;N.length>0&&(G=Bn(u,T)),bs(u.eventQueue_,G,N)}function Ud(u,o){Ai(u,"connected",o),!1===o&&function Sh(u){k(u,"onDisconnectEvents");const o=yu(u),a=Ea();ml(u.onDisconnect_,Gr(),(y,T)=>{const N=ys(y,T,u.serverSyncTree_,o);wa(a,y,N)});let h=[];ml(a,Gr(),(y,T)=>{h=h.concat(wl(u.serverSyncTree_,y,T));const N=Tl(u,y);Bn(u,N)}),u.onDisconnect_=Ea(),bs(u.eventQueue_,Gr(),h)}(u)}function Ai(u,o,a){const h=new zr("/.info/"+o),y=$r(a);u.infoData_.updateSnapshot(h,y);const T=wl(u.infoSyncTree_,h,y);bs(u.eventQueue_,h,T)}function Yi(u){return u.nextWriteId_++}function Ul(u,o,a,h,y){k(u,"set",{path:o.toString(),value:a,priority:h});const T=yu(u),N=$r(a,h),G=Zc(u.serverSyncTree_,o),re=bl(N,G,T),ge=Yi(u),gt=Bs(u.serverSyncTree_,o,re,ge,!0);Wr(u.eventQueue_,gt),u.server_.put(o.toString(),N.val(!0),(Vt,dn)=>{const gn="ok"===Vt;gn||Ur("set at "+o+" failed: "+Vt);const Hn=ta(u.serverSyncTree_,ge,!gn);bs(u.eventQueue_,o,Hn),ne(0,y,Vt,dn)});const wt=Tl(u,o);Bn(u,wt),bs(u.eventQueue_,wt,[])}function Ah(u,o,a){u.server_.onDisconnectCancel(o.toString(),(h,y)=>{"ok"===h&&Wo(u.onDisconnect_,o),ne(0,a,h,y)})}function Xu(u,o,a,h){const y=$r(a);u.server_.onDisconnectPut(o.toString(),y.val(!0),(T,N)=>{"ok"===T&&wa(u.onDisconnect_,o,y),ne(0,h,T,N)})}function x(u,o,a){let h;h=".info"===Br(o._path)?ha(u.infoSyncTree_,o,a):ha(u.serverSyncTree_,o,a),ri(u.eventQueue_,o._path,h)}function _(u){u.persistentConnection_&&u.persistentConnection_.interrupt($s)}function k(u,...o){let a="";u.persistentConnection_&&(a=u.persistentConnection_.id+":"),xn(a,...o)}function ne(u,o,a,h){o&&si(()=>{if("ok"===a)o(null);else{const y=(a||"error").toUpperCase();let T=y;h&&(T+=": "+h);const N=new Error(T);N.code=y,o(N)}})}function bt(u,o,a){return Zc(u.serverSyncTree_,o,a)||St.EMPTY_NODE}function Wt(u,o=u.transactionQueueTree_){if(o||Rc(u,o),ac(o)){const a=zo(u,o);(0,Q.hu)(a.length>0,"Sending zero length transaction queue"),a.every(y=>0===y.status)&&function Rn(u,o,a){const h=a.map(ge=>ge.currentWriteId),y=bt(u,o,h);let T=y;const N=y.hash();for(let ge=0;ge<a.length;ge++){const gt=a[ge];(0,Q.hu)(0===gt.status,"tryToSendTransactionQueue_: items in queue should all be run."),gt.status=1,gt.retryCount++;const wt=Ds(o,gt.path);T=T.updateChild(wt,gt.currentOutputSnapshotRaw)}const G=T.val(!0),re=o;u.server_.put(re.toString(),G,ge=>{k(u,"transaction put response",{path:re.toString(),status:ge});let gt=[];if("ok"===ge){const wt=[];for(let Vt=0;Vt<a.length;Vt++)a[Vt].status=2,gt=gt.concat(ta(u.serverSyncTree_,a[Vt].currentWriteId)),a[Vt].onComplete&&wt.push(()=>a[Vt].onComplete(null,!0,a[Vt].currentOutputSnapshotResolved)),a[Vt].unwatcher();Rc(u,oc(u.transactionQueueTree_,o)),Wt(u,u.transactionQueueTree_),bs(u.eventQueue_,o,gt);for(let Vt=0;Vt<wt.length;Vt++)si(wt[Vt])}else{if("datastale"===ge)for(let wt=0;wt<a.length;wt++)a[wt].status=3===a[wt].status?4:0;else{Ur("transaction at "+re.toString()+" failed: "+ge);for(let wt=0;wt<a.length;wt++)a[wt].status=4,a[wt].abortReason=ge}Bn(u,o)}},N)}(u,ol(o),a)}else Dh(o)&&hs(o,a=>{Wt(u,a)})}function Bn(u,o){const a=di(u,o),h=ol(a);return function gr(u,o,a){if(0===o.length)return;const h=[];let y=[];const N=o.filter(G=>0===G.status).map(G=>G.currentWriteId);for(let G=0;G<o.length;G++){const re=o[G],ge=Ds(a,re.path);let wt,gt=!1;if((0,Q.hu)(null!==ge,"rerunTransactionsUnderNode_: relativePath should not be null."),4===re.status)gt=!0,wt=re.abortReason,y=y.concat(ta(u.serverSyncTree_,re.currentWriteId,!0));else if(0===re.status)if(re.retryCount>=Ac)gt=!0,wt="maxretry",y=y.concat(ta(u.serverSyncTree_,re.currentWriteId,!0));else{const Vt=bt(u,re.path,N);re.currentInputSnapshot=Vt;const dn=o[G].update(Vt.val());if(void 0!==dn){P("transaction failed: Data returned ",dn,re.path);let gn=$r(dn);"object"==typeof dn&&null!=dn&&(0,Q.r3)(dn,".priority")||(gn=gn.updatePriority(Vt.getPriority()));const fi=re.currentWriteId,Fi=yu(u),ns=bl(gn,Vt,Fi);re.currentOutputSnapshotRaw=gn,re.currentOutputSnapshotResolved=ns,re.currentWriteId=Yi(u),N.splice(N.indexOf(fi),1),y=y.concat(Bs(u.serverSyncTree_,re.path,ns,re.currentWriteId,re.applyLocally)),y=y.concat(ta(u.serverSyncTree_,fi,!0))}else gt=!0,wt="nodata",y=y.concat(ta(u.serverSyncTree_,re.currentWriteId,!0))}bs(u.eventQueue_,a,y),y=[],gt&&(o[G].status=2,setTimeout(o[G].unwatcher,Math.floor(0)),o[G].onComplete&&h.push("nodata"===wt?()=>o[G].onComplete(null,!1,o[G].currentInputSnapshot):()=>o[G].onComplete(new Error(wt),!1,null)))}Rc(u,u.transactionQueueTree_);for(let G=0;G<h.length;G++)si(h[G]);Wt(u,u.transactionQueueTree_)}(u,zo(u,a),h),h}function di(u,o){let a,h=u.transactionQueueTree_;for(a=Br(o);null!==a&&void 0===ac(h);)h=oc(h,a),a=Br(o=Ni(o));return h}function zo(u,o){const a=[];return Dl(u,o,a),a.sort((h,y)=>h.order-y.order),a}function Dl(u,o,a){const h=ac(o);if(h)for(let y=0;y<h.length;y++)a.push(h[y]);hs(o,y=>{Dl(u,y,a)})}function Rc(u,o){const a=ac(o);if(a){let h=0;for(let y=0;y<a.length;y++)2!==a[y].status&&(a[h]=a[y],h++);a.length=h,Io(o,a.length>0?a:void 0)}hs(o,h=>{Rc(u,h)})}function Tl(u,o){const a=ol(di(u,o)),h=oc(u.transactionQueueTree_,o);return function Sc(u,o,a){let h=a?u:u.parent;for(;null!==h;){if(o(h))return!0;h=h.parent}}(h,y=>{cc(u,y)}),cc(u,h),qo(h,y=>{cc(u,y)}),a}function cc(u,o){const a=ac(o);if(a){const h=[];let y=[],T=-1;for(let N=0;N<a.length;N++)3===a[N].status||(1===a[N].status?((0,Q.hu)(T===N-1,"All SENT items should be at beginning of queue."),T=N,a[N].status=3,a[N].abortReason="set"):((0,Q.hu)(0===a[N].status,"Unexpected transaction status in abort"),a[N].unwatcher(),y=y.concat(ta(u.serverSyncTree_,a[N].currentWriteId,!0)),a[N].onComplete&&h.push(a[N].onComplete.bind(null,new Error("set"),!1,null))));-1===T?Io(o,void 0):a.length=T+1,bs(u.eventQueue_,ol(o),y);for(let N=0;N<h.length;N++)si(h[N])}}const xc=function(u,o){const a=_u(u),h=a.namespace;return"firebase.com"===a.domain&&Hr(a.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!h||"undefined"===h)&&"localhost"!==a.domain&&Hr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),a.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ur("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Jn(a.host,a.secure,h,"ws"===a.scheme||"wss"===a.scheme,o,"",h!==a.subdomain),path:new zr(a.pathString)}},_u=function(u){let o="",a="",h="",y="",T="",N=!0,G="https",re=443;if("string"==typeof u){let ge=u.indexOf("//");ge>=0&&(G=u.substring(0,ge-1),u=u.substring(ge+2));let gt=u.indexOf("/");-1===gt&&(gt=u.length);let wt=u.indexOf("?");-1===wt&&(wt=u.length),o=u.substring(0,Math.min(gt,wt)),gt<wt&&(y=function tu(u){let o="";const a=u.split("/");for(let h=0;h<a.length;h++)if(a[h].length>0){let y=a[h];try{y=decodeURIComponent(y.replace(/\+/g," "))}catch{}o+="/"+y}return o}(u.substring(gt,wt)));const Vt=function Vd(u){const o={};"?"===u.charAt(0)&&(u=u.substring(1));for(const a of u.split("&")){if(0===a.length)continue;const h=a.split("=");2===h.length?o[decodeURIComponent(h[0])]=decodeURIComponent(h[1]):Ur(`Invalid query segment '${a}' in query '${u}'`)}return o}(u.substring(Math.min(u.length,wt)));ge=o.indexOf(":"),ge>=0?(N="https"===G||"wss"===G,re=parseInt(o.substring(ge+1),10)):ge=o.length;const dn=o.slice(0,ge);if("localhost"===dn.toLowerCase())a="localhost";else if(dn.split(".").length<=2)a=dn;else{const gn=o.indexOf(".");h=o.substring(0,gn).toLowerCase(),a=o.substring(gn+1),T=h}"ns"in Vt&&(T=Vt.ns)}return{host:o,port:re,domain:a,subdomain:h,secure:N,scheme:G,pathString:y,namespace:T}},nu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Vl=function(){let u=0;const o=[];return function(a){const h=a===u;let y;u=a;const T=new Array(8);for(y=7;y>=0;y--)T[y]=nu.charAt(a%64),a=Math.floor(a/64);(0,Q.hu)(0===a,"Cannot push at time == 0");let N=T.join("");if(h){for(y=11;y>=0&&63===o[y];y--)o[y]=0;o[y]++}else for(y=0;y<12;y++)o[y]=Math.floor(64*Math.random());for(y=0;y<12;y++)N+=nu.charAt(o[y]);return(0,Q.hu)(20===N.length,"nextPushId: Length should be 20."),N}}();class Ao{constructor(o,a,h,y){this.eventType=o,this.eventRegistration=a,this.snapshot=h,this.prevName=y}getPath(){const o=this.snapshot.ref;return"value"===this.eventType?o._path:o.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Q.Wl)(this.snapshot.exportVal())}}class ru{constructor(o,a,h){this.eventRegistration=o,this.error=a,this.path=h}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class uc{constructor(o,a){this.snapshotCallback=o,this.cancelCallback=a}onValue(o,a){this.snapshotCallback.call(null,o,a)}onCancel(o){return(0,Q.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,o)}get hasCancelCallback(){return!!this.cancelCallback}matches(o){return this.snapshotCallback===o.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===o.snapshotCallback.userCallback&&this.snapshotCallback.context===o.snapshotCallback.context}}class Pc{constructor(o,a){this._repo=o,this._path=a}cancel(){const o=new Q.BH;return Ah(this._repo,this._path,o.wrapCallback(()=>{})),o.promise}remove(){In("OnDisconnect.remove",this._path);const o=new Q.BH;return Xu(this._repo,this._path,null,o.wrapCallback(()=>{})),o.promise}set(o){In("OnDisconnect.set",this._path),Va("OnDisconnect.set",o,this._path,!1);const a=new Q.BH;return Xu(this._repo,this._path,o,a.wrapCallback(()=>{})),a.promise}setWithPriority(o,a){In("OnDisconnect.setWithPriority",this._path),Va("OnDisconnect.setWithPriority",o,this._path,!1),ke("OnDisconnect.setWithPriority",a,!1);const h=new Q.BH;return function Mh(u,o,a,h,y){const T=$r(a,h);u.server_.onDisconnectPut(o.toString(),T.val(!0),(N,G)=>{"ok"===N&&wa(u.onDisconnect_,o,T),ne(0,y,N,G)})}(this._repo,this._path,o,a,h.wrapCallback(()=>{})),h.promise}update(o){In("OnDisconnect.update",this._path),J("OnDisconnect.update",o,this._path,!1);const a=new Q.BH;return function Mf(u,o,a,h){if((0,Q.xb)(a))return xn("onDisconnect().update() called with empty data.  Don't do anything."),void ne(0,h,"ok",void 0);u.server_.onDisconnectMerge(o.toString(),a,(y,T)=>{"ok"===y&&Gn(a,(N,G)=>{const re=$r(G);wa(u.onDisconnect_,ci(o,N),re)}),ne(0,h,y,T)})}(this._repo,this._path,o,a.wrapCallback(()=>{})),a.promise}}class Ca{constructor(o,a,h,y){this._repo=o,this._path=a,this._queryParams=h,this._orderByCalled=y}get key(){return xr(this._path)?null:Xs(this._path)}get ref(){return new ll(this._repo,this._path)}get _queryIdentifier(){const o=va(this._queryParams),a=pr(o);return"{}"===a?"default":a}get _queryObject(){return va(this._queryParams)}isEqual(o){if(!((o=(0,Q.m9)(o))instanceof Ca))return!1;const a=this._repo===o._repo,h=xs(this._path,o._path);return a&&h&&this._queryIdentifier===o._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function _o(u){let o="";for(let a=u.pieceNum_;a<u.pieces_.length;a++)""!==u.pieces_[a]&&(o+="/"+encodeURIComponent(String(u.pieces_[a])));return o||"/"}(this._path)}}function vu(u,o){if(!0===u._orderByCalled)throw new Error(o+": You can't combine multiple orderBy calls.")}function Na(u){let o=null,a=null;if(u.hasStart()&&(o=u.getIndexStartValue()),u.hasEnd()&&(a=u.getIndexEndValue()),u.getIndex()===ws){const h="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",y="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==on)throw new Error(h);if("string"!=typeof o)throw new Error(y)}if(u.hasEnd()){if(u.getIndexEndName()!==vr)throw new Error(h);if("string"!=typeof a)throw new Error(y)}}else if(u.getIndex()===C){if(null!=o&&!Oa(o)||null!=a&&!Oa(a))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Q.hu)(u.getIndex()instanceof Bi||u.getIndex()===Ps,"unknown index type."),null!=o&&"object"==typeof o||null!=a&&"object"==typeof a)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Rh(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ll extends Ca{constructor(o,a){super(o,a,new Rs,!1)}get parent(){const o=Oo(this._path);return null===o?null:new ll(this._repo,o)}get root(){let o=this;for(;null!==o.parent;)o=o.parent;return o}}class Ju{constructor(o,a,h){this._node=o,this.ref=a,this._index=h}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(o){const a=new zr(o),h=Go(this.ref,o);return new Ju(this._node.getChild(a),h,C)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(o){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(h,y)=>o(new Ju(y,Go(this.ref,h),C)))}hasChild(o){const a=new zr(o);return!this._node.getChild(a).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Oc(u,o){return(u=(0,Q.m9)(u))._checkNotDeleted("ref"),void 0!==o?Go(u._root,o):u._root}function xg(u,o){(u=(0,Q.m9)(u))._checkNotDeleted("refFromURL");const a=xc(o,u._repo.repoInfo_.nodeAdmin);Nn("refFromURL",a);const h=a.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&h.host!==u._repo.repoInfo_.host&&Hr("refFromURL: Host name does not match the current database: (found "+h.host+" but expected "+u._repo.repoInfo_.host+")"),Oc(u,a.path.toString())}function Go(u,o){return null===Br((u=(0,Q.m9)(u))._path)?jt("child","path",o,!1):Ct("child","path",o,!1),new ll(u._repo,ci(u._path,o))}function Da(u,o){u=(0,Q.m9)(u),In("set",u._path),Va("set",o,u._path,!1);const a=new Q.BH;return Ul(u._repo,u._path,o,null,a.wrapCallback(()=>{})),a.promise}function p_(u,o){J("update",o,u._path,!1);const a=new Q.BH;return function Qu(u,o,a,h){k(u,"update",{path:o.toString(),value:a});let y=!0;const T=yu(u),N={};if(Gn(a,(G,re)=>{y=!1,N[G]=ys(ci(o,G),$r(re),u.serverSyncTree_,T)}),y)xn("update() called with empty data.  Don't do anything."),ne(0,h,"ok",void 0);else{const G=Yi(u),re=function da(u,o,a,h){!function ro(u,o,a,h){(0,Q.hu)(h>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:o,children:a,writeId:h,visible:!0}),u.visibleWrites=ao(u.visibleWrites,o,a),u.lastWriteId=h}(u.pendingWriteTree_,o,a,h);const y=yr.fromObject(a);return Il(u,new la({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,y))}(u.serverSyncTree_,o,N,G);Wr(u.eventQueue_,re),u.server_.merge(o.toString(),a,(ge,gt)=>{const wt="ok"===ge;wt||Ur("update at "+o+" failed: "+ge);const Vt=ta(u.serverSyncTree_,G,!wt),dn=Vt.length>0?Bn(u,o):o;bs(u.eventQueue_,dn,Vt),ne(0,h,ge,gt)}),Gn(a,ge=>{const gt=Tl(u,ci(o,ge));Bn(u,gt)}),bs(u.eventQueue_,o,[])}}(u._repo,u._path,o,a.wrapCallback(()=>{})),a.promise}function iy(u){u=(0,Q.m9)(u);const o=new uc(()=>{}),a=new yi(o);return function Mc(u,o,a){const h=function nc(u,o){const a=o._path;let h=null;u.syncPointTree_.foreachOnPath(a,(ge,gt)=>{const wt=Ds(ge,a);h=h||Wn(gt,wt)});let y=u.syncPointTree_.get(a);y?h=h||Wn(y,Gr()):(y=new O,u.syncPointTree_=u.syncPointTree_.set(a,y));const T=null!=h,N=T?new U(h,!0,!1):null;return function El(u){return jr(u.viewCache_)}(pe(y,o,Ia(u.pendingWriteTree_,o._path),T?N.getNode():St.EMPTY_NODE,T))}(u.serverSyncTree_,o);return null!=h?Promise.resolve(h):u.server_.get(o).then(y=>{const T=$r(y).withIndex(o._queryParams.getIndex());let N;if(tc(u.serverSyncTree_,o,a,!0),o._queryParams.loadsAllData())N=wl(u.serverSyncTree_,o._path,T);else{const G=Tc(u.serverSyncTree_,o);N=fu(u.serverSyncTree_,o._path,T,G)}return bs(u.eventQueue_,o._path,N),ha(u.serverSyncTree_,o,a,null,!0),T},y=>(k(u,"get for query "+(0,Q.Wl)(o)+" failed: "+y),Promise.reject(new Error(y))))}(u._repo,u,a).then(h=>new Ju(h,new ll(u._repo,u._path),u._queryParams.getIndex()))}class yi{constructor(o){this.callbackContext=o}respondsTo(o){return"value"===o}createEvent(o,a){const h=a._queryParams.getIndex();return new Ao("value",this,new Ju(o.snapshotNode,new ll(a._repo,a._path),h))}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,null)}createCancelEvent(o,a){return this.callbackContext.hasCancelCallback?new ru(this,o,a):null}matches(o){return o instanceof yi&&(!o.callbackContext||!this.callbackContext||o.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class xf{constructor(o,a){this.eventType=o,this.callbackContext=a}respondsTo(o){let a="children_added"===o?"child_added":o;return a="children_removed"===a?"child_removed":a,this.eventType===a}createCancelEvent(o,a){return this.callbackContext.hasCancelCallback?new ru(this,o,a):null}createEvent(o,a){(0,Q.hu)(null!=o.childName,"Child events should have a childName.");const h=Go(new ll(a._repo,a._path),o.childName),y=a._queryParams.getIndex();return new Ao(o.type,this,new Ju(o.snapshotNode,h,y),o.prevName)}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,o.prevName)}matches(o){return o instanceof xf&&this.eventType===o.eventType&&(!this.callbackContext||!o.callbackContext||this.callbackContext.matches(o.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function wu(u,o,a,h,y){let T;if("object"==typeof h&&(T=void 0,y=h),"function"==typeof h&&(T=h),y&&y.onlyOnce){const re=a,ge=(gt,wt)=>{x(u._repo,u,G),re(gt,wt)};ge.userCallback=a.userCallback,ge.context=a.context,a=ge}const N=new uc(a,T||void 0),G="value"===o?new yi(N):new xf(o,N);return function Rg(u,o,a){let h;h=".info"===Br(o._path)?tc(u.infoSyncTree_,o,a):tc(u.serverSyncTree_,o,a),ri(u.eventQueue_,o._path,h)}(u._repo,u,G),()=>x(u._repo,u,G)}function ed(u,o,a,h){return wu(u,"value",o,a,h)}function Ph(u,o,a,h){return wu(u,"child_added",o,a,h)}function Pf(u,o,a,h){return wu(u,"child_changed",o,a,h)}function jd(u,o,a,h){return wu(u,"child_moved",o,a,h)}function Mp(u,o,a,h){return wu(u,"child_removed",o,a,h)}function Iu(u,o,a){let h=null;const y=a?new uc(a):null;"value"===o?h=new yi(y):o&&(h=new xf(o,y)),x(u._repo,u,h)}class jl{}class td extends jl{constructor(o,a){super(),this._value=o,this._key=a}_apply(o){Va("endAt",this._value,o._path,!0);const a=Xo(o._queryParams,this._value,this._key);if(Rh(a),Na(a),o._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ca(o._repo,o._path,a,o._orderByCalled)}}class Ng extends jl{constructor(o,a){super(),this._value=o,this._key=a}_apply(o){Va("endBefore",this._value,o._path,!1);const a=function ya(u,o,a){let h;return h=Xo(u,o,u.index_===ws||a?a:on),h.endBeforeSet_=!0,h}(o._queryParams,this._value,this._key);if(Rh(a),Na(a),o._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ca(o._repo,o._path,a,o._orderByCalled)}}class dc extends jl{constructor(o,a){super(),this._value=o,this._key=a}_apply(o){Va("startAt",this._value,o._path,!0);const a=gl(o._queryParams,this._value,this._key);if(Rh(a),Na(a),o._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ca(o._repo,o._path,a,o._orderByCalled)}}class kg extends jl{constructor(o,a){super(),this._value=o,this._key=a}_apply(o){Va("startAfter",this._value,o._path,!1);const a=function vs(u,o,a){let h;return h=gl(u,o,u.index_===ws||a?a:vr),h.startAfterSet_=!0,h}(o._queryParams,this._value,this._key);if(Rh(a),Na(a),o._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ca(o._repo,o._path,a,o._orderByCalled)}}class Oh extends jl{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ca(o._repo,o._path,function Ta(u,o){const a=u.copy();return a.limitSet_=!0,a.limit_=o,a.viewFrom_="l",a}(o._queryParams,this._limit),o._orderByCalled)}}class oy extends jl{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ca(o._repo,o._path,function pl(u,o){const a=u.copy();return a.limitSet_=!0,a.limit_=o,a.viewFrom_="r",a}(o._queryParams,this._limit),o._orderByCalled)}}class Nh extends jl{constructor(o){super(),this._path=o}_apply(o){vu(o,"orderByChild");const a=new zr(this._path);if(xr(a))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const h=new Bi(a),y=_a(o._queryParams,h);return Na(y),new Ca(o._repo,o._path,y,!0)}}class Lg extends jl{_apply(o){vu(o,"orderByKey");const a=_a(o._queryParams,ws);return Na(a),new Ca(o._repo,o._path,a,!0)}}class kh extends jl{_apply(o){vu(o,"orderByPriority");const a=_a(o._queryParams,C);return Na(a),new Ca(o._repo,o._path,a,!0)}}class Nc extends jl{_apply(o){vu(o,"orderByValue");const a=_a(o._queryParams,Ps);return Na(a),new Ca(o._repo,o._path,a,!0)}}class Fc extends jl{constructor(o,a){super(),this._value=o,this._key=a}_apply(o){if(Va("equalTo",this._value,o._path,!1),o._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(o._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new td(this._value,this._key)._apply(new dc(this._value,this._key)._apply(o))}}function Sl(u,...o){let a=(0,Q.m9)(u);for(const h of o)a=h._apply(a);return a}(function w(u){(0,Q.hu)(!R,"__referenceConstructor has already been defined"),R=u})(ll),function Ys(u){(0,Q.hu)(!wo,"__referenceConstructor has already been defined"),wo=u}(ll);const ly="FIREBASE_DATABASE_EMULATOR_HOST",id={};let xp=!1;function Hd(u,o,a,h,y){let T=h||u.options.databaseURL;void 0===T&&(u.options.projectId||Hr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xn("Using default host for project ",u.options.projectId),T=`${u.options.projectId}-default-rtdb.firebaseio.com`);let re,ge,N=xc(T,y),G=N.repoInfo;typeof process<"u"&&process.env&&(ge=process.env[ly]),ge?(re=!0,T=`http://${ge}?ns=${G.namespace}`,N=xc(T,y),G=N.repoInfo):re=!N.repoInfo.secure;const gt=y&&re?new ce(ce.OWNER):new He(u.name,u.options,o);Nn("Invalid Firebase Database URL",N),xr(N.path)||Hr("Database URL must point to the root of a Firebase Database (not including a child path).");const wt=function g_(u,o,a,h){let y=id[o.name];y||(y={},id[o.name]=y);let T=y[u.toURLString()];return T&&Hr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),T=new Vi(u,xp,a,h),y[u.toURLString()]=T,T}(G,u,gt,new Qe(u.name,a));return new Zo(wt,u)}class Zo{constructor(o,a){this._repoInternal=o,this.app=a,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ho(u,o,a){if(u.stats_=Kn(u.repoInfo_),u.forceRestClient_||Zr())u.server_=new Jo(u.repoInfo_,(h,y,T,N)=>{$l(u,h,y,T,N)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>Ud(u,!0),0);else{if(typeof a<"u"&&null!==a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Q.Wl)(a)}catch(h){throw new Error("Invalid authOverride provided: "+h)}}u.persistentConnection_=new eo(u.repoInfo_,o,(h,y,T,N)=>{$l(u,h,y,T,N)},h=>{Ud(u,h)},h=>{!function Th(u,o){Gn(o,(a,h)=>{Ai(u,a,h)})}(u,h)},u.authTokenProvider_,u.appCheckProvider_,a),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(h=>{u.server_.refreshAuthToken(h)}),u.appCheckProvider_.addTokenChangeListener(h=>{u.server_.refreshAppCheckToken(h.token)}),u.statsReporter_=function cr(u,o){const a=u.toString();return Pn[a]||(Pn[a]=o()),Pn[a]}(u.repoInfo_,()=>new Ol(u.stats_,u.server_)),u.infoData_=new Xa,u.infoSyncTree_=new Ko({startListening:(h,y,T,N)=>{let G=[];const re=u.infoData_.getNode(h._path);return re.isEmpty()||(G=wl(u.infoSyncTree_,h._path,re),setTimeout(()=>{N("ok")},0)),G},stopListening:()=>{}}),Ai(u,"connected",!1),u.serverSyncTree_=new Ko({startListening:(h,y,T,N)=>(u.server_.listen(h,T,y,(G,re)=>{const ge=N(G,re);bs(u.eventQueue_,h._path,ge)}),[]),stopListening:(h,y)=>{u.server_.unlisten(h,y)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ll(this._repo,Gr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Bg(u,o){const a=id[o];(!a||a[u.key]!==u)&&Hr(`Database ${o}(${u.repoInfo_}) has already been deleted.`),_(u),delete a[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(o){null===this._rootInternal&&Hr("Cannot call "+o+" on a deleted database.")}}function ts(){$t.IS_TRANSPORT_INITIALIZED&&Ur("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Ug(){ts(),xe.forceDisallow()}function Vg(){ts(),Nt.forceDisallow(),xe.forceAllow()}function jg(u,o){fn(u,o)}const kp={".sv":"timestamp"};class zd{constructor(o,a){this.committed=o,this.snapshot=a}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}eo.prototype.simpleListen=function(u,o){this.sendRequest("q",{p:u},o)},eo.prototype.echo=function(u,o){this.sendRequest("echo",{d:u},o)},function Mo(u){Et(We.SDK_VERSION),(0,We._registerComponent)(new Ke.wA("database",(o,{instanceIdentifier:a})=>Hd(o.getProvider("app").getImmediate(),o.getProvider("auth-internal"),o.getProvider("app-check-internal"),a),"PUBLIC").setMultipleInstances(!0)),(0,We.registerVersion)(Dt,"0.14.4",u),(0,We.registerVersion)(Dt,"0.14.4","esm2017")}();const dy=new _t.Yd("@firebase/database-compat"),Gg=function(u){dy.warn("FIREBASE WARNING: "+u)};class Wg{constructor(o){this._delegate=o}cancel(o){(0,Q.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Q.Wj)("OnDisconnect.cancel","onComplete",o,!0);const a=this._delegate.cancel();return o&&a.then(()=>o(null),h=>o(h)),a}remove(o){(0,Q.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Q.Wj)("OnDisconnect.remove","onComplete",o,!0);const a=this._delegate.remove();return o&&a.then(()=>o(null),h=>o(h)),a}set(o,a){(0,Q.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Q.Wj)("OnDisconnect.set","onComplete",a,!0);const h=this._delegate.set(o);return a&&h.then(()=>a(null),y=>a(y)),h}setWithPriority(o,a,h){(0,Q.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Q.Wj)("OnDisconnect.setWithPriority","onComplete",h,!0);const y=this._delegate.setWithPriority(o,a);return h&&y.then(()=>h(null),T=>h(T)),y}update(o,a){if((0,Q.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(o)){const y={};for(let T=0;T<o.length;++T)y[""+T]=o[T];o=y,Gg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Q.Wj)("OnDisconnect.update","onComplete",a,!0);const h=this._delegate.update(o);return a&&h.then(()=>a(null),y=>a(y)),h}}class Kg{constructor(o,a){this.committed=o,this.snapshot=a}toJSON(){return(0,Q.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class fc{constructor(o,a){this._database=o,this._delegate=a}val(){return(0,Q.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Q.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Q.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Q.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(o){return(0,Q.Dv)("DataSnapshot.child",0,1,arguments.length),o=String(o),Ct("DataSnapshot.child","path",o,!1),new fc(this._database,this._delegate.child(o))}hasChild(o){return(0,Q.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Ct("DataSnapshot.hasChild","path",o,!1),this._delegate.hasChild(o)}getPriority(){return(0,Q.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(o){return(0,Q.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Q.Wj)("DataSnapshot.forEach","action",o,!1),this._delegate.forEach(a=>o(new fc(this._database,a)))}hasChildren(){return(0,Q.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Q.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Q.Dv)("DataSnapshot.ref",0,0,arguments.length),new ja(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ro{constructor(o,a){this.database=o,this._delegate=a}on(o,a,h,y){var T;(0,Q.Dv)("Query.on",2,4,arguments.length),(0,Q.Wj)("Query.on","callback",a,!1);const N=Ro.getCancelAndContextArgs_("Query.on",h,y),G=(ge,gt)=>{a.call(N.context,new fc(this.database,ge),gt)};G.userCallback=a,G.context=N.context;const re=null===(T=N.cancel)||void 0===T?void 0:T.bind(N.context);switch(o){case"value":return ed(this._delegate,G,re),a;case"child_added":return Ph(this._delegate,G,re),a;case"child_removed":return Mp(this._delegate,G,re),a;case"child_changed":return Pf(this._delegate,G,re),a;case"child_moved":return jd(this._delegate,G,re),a;default:throw new Error((0,Q.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(o,a,h){if((0,Q.Dv)("Query.off",0,3,arguments.length),function(u,o,a){if(void 0!==o)switch(o){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Q.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,o),(0,Q.Wj)("Query.off","callback",a,!0),(0,Q.lb)("Query.off","context",h,!0),a){const y=()=>{};y.userCallback=a,y.context=h,Iu(this._delegate,o,y)}else Iu(this._delegate,o)}get(){return iy(this._delegate).then(o=>new fc(this.database,o))}once(o,a,h,y){(0,Q.Dv)("Query.once",1,4,arguments.length),(0,Q.Wj)("Query.once","callback",a,!0);const T=Ro.getCancelAndContextArgs_("Query.once",h,y),N=new Q.BH,G=(ge,gt)=>{const wt=new fc(this.database,ge);a&&a.call(T.context,wt,gt),N.resolve(wt)};G.userCallback=a,G.context=T.context;const re=ge=>{T.cancel&&T.cancel.call(T.context,ge),N.reject(ge)};switch(o){case"value":ed(this._delegate,G,re,{onlyOnce:!0});break;case"child_added":Ph(this._delegate,G,re,{onlyOnce:!0});break;case"child_removed":Mp(this._delegate,G,re,{onlyOnce:!0});break;case"child_changed":Pf(this._delegate,G,re,{onlyOnce:!0});break;case"child_moved":jd(this._delegate,G,re,{onlyOnce:!0});break;default:throw new Error((0,Q.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return N.promise}limitToFirst(o){return(0,Q.Dv)("Query.limitToFirst",1,1,arguments.length),new Ro(this.database,Sl(this._delegate,function sy(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Oh(u)}(o)))}limitToLast(o){return(0,Q.Dv)("Query.limitToLast",1,1,arguments.length),new Ro(this.database,Sl(this._delegate,function uo(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new oy(u)}(o)))}orderByChild(o){return(0,Q.Dv)("Query.orderByChild",1,1,arguments.length),new Ro(this.database,Sl(this._delegate,function Of(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ct("orderByChild","path",u,!1),new Nh(u)}(o)))}orderByKey(){return(0,Q.Dv)("Query.orderByKey",0,0,arguments.length),new Ro(this.database,Sl(this._delegate,function ay(){return new Lg}()))}orderByPriority(){return(0,Q.Dv)("Query.orderByPriority",0,0,arguments.length),new Ro(this.database,Sl(this._delegate,function Nf(){return new kh}()))}orderByValue(){return(0,Q.Dv)("Query.orderByValue",0,0,arguments.length),new Ro(this.database,Sl(this._delegate,function kc(){return new Nc}()))}startAt(o=null,a){return(0,Q.Dv)("Query.startAt",0,2,arguments.length),new Ro(this.database,Sl(this._delegate,function hc(u=null,o){return ht("startAt","key",o,!0),new dc(u,o)}(o,a)))}startAfter(o=null,a){return(0,Q.Dv)("Query.startAfter",0,2,arguments.length),new Ro(this.database,Sl(this._delegate,function Fg(u,o){return ht("startAfter","key",o,!0),new kg(u,o)}(o,a)))}endAt(o=null,a){return(0,Q.Dv)("Query.endAt",0,2,arguments.length),new Ro(this.database,Sl(this._delegate,function nd(u,o){return ht("endAt","key",o,!0),new td(u,o)}(o,a)))}endBefore(o=null,a){return(0,Q.Dv)("Query.endBefore",0,2,arguments.length),new Ro(this.database,Sl(this._delegate,function rd(u,o){return ht("endBefore","key",o,!0),new Ng(u,o)}(o,a)))}equalTo(o,a){return(0,Q.Dv)("Query.equalTo",1,2,arguments.length),new Ro(this.database,Sl(this._delegate,function Rp(u,o){return ht("equalTo","key",o,!0),new Fc(u,o)}(o,a)))}toString(){return(0,Q.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Q.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(o){if((0,Q.Dv)("Query.isEqual",1,1,arguments.length),!(o instanceof Ro))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(o._delegate)}static getCancelAndContextArgs_(o,a,h){const y={cancel:void 0,context:void 0};if(a&&h)y.cancel=a,(0,Q.Wj)(o,"cancel",y.cancel,!0),y.context=h,(0,Q.lb)(o,"context",y.context,!0);else if(a)if("object"==typeof a&&null!==a)y.context=a;else{if("function"!=typeof a)throw new Error((0,Q.gK)(o,"cancelOrContext")+" must either be a cancel callback or a context object.");y.cancel=a}return y}get ref(){return new ja(this.database,new ll(this._delegate._repo,this._delegate._path))}}class ja extends Ro{constructor(o,a){super(o,new Ca(a._repo,a._path,new Rs,!1)),this.database=o,this._delegate=a}getKey(){return(0,Q.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(o){return(0,Q.Dv)("Reference.child",1,1,arguments.length),"number"==typeof o&&(o=String(o)),new ja(this.database,Go(this._delegate,o))}getParent(){(0,Q.Dv)("Reference.parent",0,0,arguments.length);const o=this._delegate.parent;return o?new ja(this.database,o):null}getRoot(){return(0,Q.Dv)("Reference.root",0,0,arguments.length),new ja(this.database,this._delegate.root)}set(o,a){(0,Q.Dv)("Reference.set",1,2,arguments.length),(0,Q.Wj)("Reference.set","onComplete",a,!0);const h=Da(this._delegate,o);return a&&h.then(()=>a(null),y=>a(y)),h}update(o,a){if((0,Q.Dv)("Reference.update",1,2,arguments.length),Array.isArray(o)){const y={};for(let T=0;T<o.length;++T)y[""+T]=o[T];o=y,Gg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}In("Reference.update",this._delegate._path),(0,Q.Wj)("Reference.update","onComplete",a,!0);const h=p_(this._delegate,o);return a&&h.then(()=>a(null),y=>a(y)),h}setWithPriority(o,a,h){(0,Q.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Q.Wj)("Reference.setWithPriority","onComplete",h,!0);const y=function xh(u,o,a){if(In("setWithPriority",u._path),Va("setWithPriority",o,u._path,!1),ke("setWithPriority",a,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const h=new Q.BH;return Ul(u._repo,u._path,o,a,h.wrapCallback(()=>{})),h.promise}(this._delegate,o,a);return h&&y.then(()=>h(null),T=>h(T)),y}remove(o){(0,Q.Dv)("Reference.remove",0,1,arguments.length),(0,Q.Wj)("Reference.remove","onComplete",o,!0);const a=function Rf(u){return In("remove",u._path),Da(u,null)}(this._delegate);return o&&a.then(()=>o(null),h=>o(h)),a}transaction(o,a,h){(0,Q.Dv)("Reference.transaction",1,3,arguments.length),(0,Q.Wj)("Reference.transaction","transactionUpdate",o,!1),(0,Q.Wj)("Reference.transaction","onComplete",a,!0),function(u,o,a,h){if(void 0!==a&&"boolean"!=typeof a)throw new Error((0,Q.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,h);const y=function kf(u,o,a){var h;if(u=(0,Q.m9)(u),In("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const y=null===(h=null==a?void 0:a.applyLocally)||void 0===h||h,T=new Q.BH,G=ed(u,()=>{});return function Ce(u,o,a,h,y,T){k(u,"transaction on "+o);const N={path:o,update:a,onComplete:h,status:null,order:wn(),applyLocally:T,retryCount:0,unwatcher:y,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},G=bt(u,o,void 0);N.currentInputSnapshot=G;const re=N.update(G.val());if(void 0===re)N.unwatcher(),N.currentOutputSnapshotRaw=null,N.currentOutputSnapshotResolved=null,N.onComplete&&N.onComplete(null,!1,N.currentInputSnapshot);else{P("transaction failed: Data returned ",re,N.path),N.status=0;const ge=oc(u.transactionQueueTree_,o),gt=ac(ge)||[];let wt;gt.push(N),Io(ge,gt),"object"==typeof re&&null!==re&&(0,Q.r3)(re,".priority")?(wt=(0,Q.DV)(re,".priority"),(0,Q.hu)(Oa(wt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):wt=(Zc(u.serverSyncTree_,o)||St.EMPTY_NODE).getPriority().val();const Vt=yu(u),dn=$r(re,wt),gn=bl(dn,G,Vt);N.currentOutputSnapshotRaw=dn,N.currentOutputSnapshotResolved=gn,N.currentWriteId=Yi(u);const Hn=Bs(u.serverSyncTree_,o,gn,N.currentWriteId,N.applyLocally);bs(u.eventQueue_,o,Hn),Wt(u,u.transactionQueueTree_)}}(u._repo,u._path,o,(re,ge,gt)=>{let wt=null;re?T.reject(re):(wt=new Ju(gt,new ll(u._repo,u._path),C),T.resolve(new zd(ge,wt)))},G,y),T.promise}(this._delegate,o,{applyLocally:h}).then(T=>new Kg(T.committed,new fc(this.database,T.snapshot)));return a&&y.then(T=>a(null,T.committed,T.snapshot),T=>a(T,!1,null)),y}setPriority(o,a){(0,Q.Dv)("Reference.setPriority",1,2,arguments.length),(0,Q.Wj)("Reference.setPriority","onComplete",a,!0);const h=function Og(u,o){u=(0,Q.m9)(u),In("setPriority",u._path),ke("setPriority",o,!1);const a=new Q.BH;return Ul(u._repo,ci(u._path,".priority"),o,null,a.wrapCallback(()=>{})),a.promise}(this._delegate,o);return a&&h.then(()=>a(null),y=>a(y)),h}push(o,a){(0,Q.Dv)("Reference.push",0,2,arguments.length),(0,Q.Wj)("Reference.push","onComplete",a,!0);const h=function Eu(u,o){u=(0,Q.m9)(u),In("push",u._path),Va("push",o,u._path,!0);const a=Bl(u._repo),h=Vl(a),y=Go(u,h),T=Go(u,h);let N;return N=null!=o?Da(T,o).then(()=>T):Promise.resolve(T),y.then=N.then.bind(N),y.catch=N.then.bind(N,void 0),y}(this._delegate,o),y=h.then(N=>new ja(this.database,N));a&&y.then(()=>a(null),N=>a(N));const T=new ja(this.database,h);return T.then=y.then.bind(y),T.catch=y.catch.bind(y,void 0),T}onDisconnect(){return In("Reference.onDisconnect",this._delegate._path),new Wg(new Pc(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Gd{constructor(o,a){this._delegate=o,this.app=a,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Ug,forceLongPolling:Vg}}useEmulator(o,a,h={}){!function bu(u,o,a,h={}){(u=(0,Q.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&Hr("Cannot call useEmulator() after instance has already been initialized.");const y=u._repoInternal;let T;if(y.repoInfo_.nodeAdmin)h.mockUserToken&&Hr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),T=new ce(ce.OWNER);else if(h.mockUserToken){const N="string"==typeof h.mockUserToken?h.mockUserToken:(0,Q.Sg)(h.mockUserToken,u.app.options.projectId);T=new ce(N)}!function Fh(u,o,a,h){u.repoInfo_=new Jn(`${o}:${a}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams,!0),h&&(u.authTokenProvider_=h)}(y,o,a,T)}(this._delegate,o,a,h)}ref(o){if((0,Q.Dv)("database.ref",0,1,arguments.length),o instanceof ja){const a=xg(this._delegate,o.toString());return new ja(this,a)}{const a=Oc(this._delegate,o);return new ja(this,a)}}refFromURL(o){(0,Q.Dv)("database.refFromURL",1,1,arguments.length);const h=xg(this._delegate,o);return new ja(this,h)}goOffline(){return(0,Q.Dv)("database.goOffline",0,0,arguments.length),function Op(u){(u=(0,Q.m9)(u))._checkNotDeleted("goOffline"),_(u._repo)}(this._delegate)}goOnline(){return(0,Q.Dv)("database.goOnline",0,0,arguments.length),function Np(u){(u=(0,Q.m9)(u))._checkNotDeleted("goOnline"),function b(u){u.persistentConnection_&&u.persistentConnection_.resume($s)}(u._repo)}(this._delegate)}}Gd.ServerValue={TIMESTAMP:function Lh(){return kp}(),increment:u=>function sd(u){return{".sv":{increment:u}}}(u)};var $h=Object.freeze({__proto__:null,initStandalone:function xo({app:u,url:o,version:a,customAuthImpl:h,namespace:y,nodeAdmin:T=!1}){Et(a);const N=new Ke.zt("auth-internal",new Ke.H0("database-standalone"));return N.setComponent(new Ke.wA("auth-internal",()=>h,"PRIVATE")),{instance:new Gd(Hd(u,N,void 0,o,T),u),namespace:y}}});const hy=Gd.ServerValue;!function od(u){u.INTERNAL.registerComponent(new Ke.wA("database-compat",(o,{instanceIdentifier:a})=>{const h=o.getProvider("app-compat").getImmediate(),y=o.getProvider("database").getImmediate({identifier:a});return new Gd(y,h)},"PUBLIC").setServiceProps({Reference:ja,Query:Ro,Database:Gd,DataSnapshot:fc,enableLogging:jg,INTERNAL:$h,ServerValue:hy}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.3.4")}(vt.Z);var Lc=$(6217),Uh=$(9260);function iu(u){return null==u}function Bp(u){return"function"==typeof u.set}function Vh(u,o){return Bp(o)?o:u.ref(o)}function jh(u,o){if(function Lp(u){return"string"==typeof u}(u))return o.stringCase();if(Bp(u))return o.firebaseCase();if(function Wd(u){return"function"==typeof u.exportVal}(u))return o.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function Hh(u,o,a="on",h=Ue.z){return new Xe.y(y=>{let T=null;return T=u[a](o,(N,G)=>{h.schedule(()=>{y.next({snapshot:N,prevKey:G})}),"once"===a&&h.schedule(()=>y.complete())},N=>{h.schedule(()=>y.error(N))}),"on"===a?{unsubscribe(){null!=T&&u.off(o,T)}}:{unsubscribe(){}}}).pipe((0,oe.U)(y=>{const{snapshot:T,prevKey:N}=y;let G=null;return T.exists()&&(G=T.key),{type:o,payload:T,prevKey:N,key:G}}),(0,et.B)())}function ld(u,o){const a=u.length;for(let h=0;h<a;h++)if(u[h].payload.key===o)return h;return-1}function $p(u,o){const{payload:a,prevKey:h,key:y}=o,T=ld(u,y),N=function cd(u,o){if(iu(o))return 0;{const a=ld(u,o);return-1===a?u.length:a+1}}(u,h);switch(o.type){case"value":if(o.payload&&o.payload.exists()){let G=null;o.payload.forEach(re=>{const ge={payload:re,type:"value",prevKey:G,key:re.key};return G=re.key,u=[...u,ge],!1})}return u;case"child_added":if(T>-1){const G=u[T-1];(G&&G.key||null)!==h&&(u=u.filter(re=>re.payload.key!==a.key)).splice(N,0,o)}else{if(null==h)return[o,...u];(u=u.slice()).splice(N,0,o)}return u;case"child_removed":return u.filter(G=>G.payload.key!==a.key);case"child_changed":return u.map(G=>G.payload.key===y?o:G);case"child_moved":if(T>-1){const G=u.splice(T,1)[0];return(u=u.slice()).splice(N,0,G),u}return u;default:return u}}function Kd(u){return(iu(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function Up(u,o,a){return function ad(u,o,a){return Hh(u,"value","once",a).pipe((0,Le.w)(h=>{const y=[(0,Me.of)(h)];return o.forEach(T=>y.push(Hh(u,T,"on",a))),(0,Se.T)(...y).pipe((0,Re.R)($p,[]))}),(0,Je.x)())}(u,o=Kd(o),a)}function qg(u,o,a){const h=(o=Kd(o)).map(y=>Hh(u,y,"on",a));return(0,Se.T)(...h)}function Yg(u,o){return function(h,y){return jh(h,{stringCase:()=>u.child(h)[o](y),firebaseCase:()=>h[o](y),snapshotCase:()=>h.ref[o](y)})}}function Cu(u){return function(a){return a?jh(a,{stringCase:()=>u.child(a).remove(),firebaseCase:()=>a.remove(),snapshotCase:()=>a.ref.remove()}):u.remove()}}function jp(u,o){return function(){return Hh(u,"value","on",o)}}const Qg=new m.OlP("angularfire2.realtimeDatabaseURL"),Bc=new m.OlP("angularfire2.database.use-emulator");let py=(()=>{class u{constructor(a,h,y,T,N,G,re,ge,gt,wt,Vt,dn,gn,Hn,fi){this.schedulers=G;const Fi=re,ns=(0,he.on)(a,N,h);ge&&(0,be.nw)(ns,N,gt,Vt,dn,gn,wt,Hn),this.database=(0,he.cc)(`${ns.name}.database.${y}`,"AngularFireDatabase",ns.name,()=>{const io=N.runOutsideAngular(()=>ns.database(y||void 0));return Fi&&io.useEmulator(...Fi),io},[Fi])}list(a,h){const y=this.schedulers.ngZone.runOutsideAngular(()=>Vh(this.database,a));let T=y;return h&&(T=h(y)),function Du(u,o){const a=o.schedulers.outsideAngular,h=o.schedulers.ngZone.run(()=>u.ref);return{query:u,update:Yg(h,"update"),set:Yg(h,"set"),push:y=>h.push(y),remove:Cu(h),snapshotChanges:y=>Up(u,y,a).pipe(Be.iC),stateChanges:y=>qg(u,y,a).pipe(Be.iC),auditTrail:y=>function Vp(u,o,a){return function fy(u,o,a){return function qd(u,o){return Hh(u,"value","on",o).pipe((0,oe.U)(a=>{let h;return a.payload.forEach(y=>(h=y.key,!1)),{data:a,lastKeyToLoad:h}}))}(u,a).pipe(function xt(...u){const o=(0,lt.jO)(u);return(0,mt.e)((a,h)=>{const y=u.length,T=new Array(y);let N=u.map(()=>!1),G=!1;for(let re=0;re<y;re++)(0,ve.Xf)(u[re]).subscribe((0,Ye.x)(h,ge=>{T[re]=ge,!G&&!N[re]&&(N[re]=!0,(G=N.every(It.y))&&(N=null))},ze.Z));a.subscribe((0,Ye.x)(h,re=>{if(G){const ge=[re,...T];h.next(o?o(...ge):ge)}}))})}(o),(0,oe.U)(([y,T])=>{const N=y.lastKeyToLoad,G=T.map(re=>re.key);return{actions:T,lastKeyToLoad:N,loadedKeys:G}}),function Pt(u){return(0,mt.e)((o,a)=>{let h=!1,y=0;o.subscribe((0,Ye.x)(a,T=>(h||(h=!u(T,y++)))&&a.next(T)))})}(y=>-1===y.loadedKeys.indexOf(y.lastKeyToLoad)),(0,oe.U)(y=>y.actions))}(u,qg(u,o).pipe((0,Re.R)((y,T)=>[...y,T],[])),a)}(u,y,a).pipe(Be.iC),valueChanges:(y,T)=>Up(u,y,a).pipe((0,oe.U)(G=>G.map(re=>T&&T.idField?Object.assign(Object.assign({},re.payload.val()),{[T.idField]:re.key}):re.payload.val())),Be.iC)}}(T,this)}object(a){return function Zg(u,o){return{query:u,snapshotChanges:()=>jp(u,o.schedulers.outsideAngular)().pipe(Be.iC),update:a=>u.ref.update(a),set:a=>u.ref.set(a),remove:()=>u.ref.remove(),valueChanges:()=>jp(u,o.schedulers.outsideAngular)().pipe(Be.iC,(0,oe.U)(h=>h.payload.exists()?h.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Vh(this.database,a)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(a){return new(a||u)(m.LFG(he.Dh),m.LFG(he.xv,8),m.LFG(Qg,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Be.HU),m.LFG(Bc,8),m.LFG(be.zQ,8),m.LFG(be.Qv,8),m.LFG(be.L6,8),m.LFG(be._Q,8),m.LFG(be.rT,8),m.LFG(be.lh,8),m.LFG(be.f7,8),m.LFG(Lc.nm,8))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),gy=(()=>{class u{constructor(){Uh.Z.registerVersion("angularfire",Be.q4.full,"rtdb-compat")}}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:[py]}),u})();var Es=$(7340);function Al(u){return new m.vHH(3e3,!1)}function nm(){return typeof window<"u"&&typeof window.document<"u"}function Vf(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function zl(u){switch(u.length){case 0:return new Es.ZN;case 1:return u[0];default:return new Es.ZE(u)}}function Gh(u,o,a,h,y=new Map,T=new Map){const N=[],G=[];let re=-1,ge=null;if(h.forEach(gt=>{const wt=gt.get("offset"),Vt=wt==re,dn=Vt&&ge||new Map;gt.forEach((gn,Hn)=>{let fi=Hn,Fi=gn;if("offset"!==Hn)switch(fi=o.normalizePropertyName(fi,N),Fi){case Es.k1:Fi=y.get(Hn);break;case Es.l3:Fi=T.get(Hn);break;default:Fi=o.normalizeStyleValue(Hn,fi,Fi,N)}dn.set(fi,Fi)}),Vt||G.push(dn),ge=dn,re=wt}),N.length)throw function wy(u){return new m.vHH(3502,!1)}();return G}function hd(u,o,a,h){switch(o){case"start":u.onStart(()=>h(a&&Wh(a,"start",u)));break;case"done":u.onDone(()=>h(a&&Wh(a,"done",u)));break;case"destroy":u.onDestroy(()=>h(a&&Wh(a,"destroy",u)))}}function Wh(u,o,a){const h=a.totalTime,T=jf(u.element,u.triggerName,u.fromState,u.toState,o||u.phaseName,null==h?u.totalTime:h,!!a.disabled),N=u._data;return null!=N&&(T._data=N),T}function jf(u,o,a,h,y="",T=0,N){return{element:u,triggerName:o,fromState:a,toState:h,phaseName:y,totalTime:T,disabled:!!N}}function Ns(u,o,a){let h=u.get(o);return h||u.set(o,h=a),h}function Xp(u){const o=u.indexOf(":");return[u.substring(1,o),u.slice(o+1)]}let hi=(u,o)=>!1,Qd=(u,o,a)=>[],Hf=null;function gc(u){const o=u.parentNode||u.host;return o===Hf?null:o}(Vf()||typeof Element<"u")&&(nm()?(Hf=(()=>document.documentElement)(),hi=(u,o)=>{for(;o;){if(o===u)return!0;o=gc(o)}return!1}):hi=(u,o)=>u.contains(o),Qd=(u,o,a)=>{if(a)return Array.from(u.querySelectorAll(o));const h=u.querySelector(o);return h?[h]:[]});let cl=null,im=!1;const sm=hi,Jp=Qd;let Su=(()=>{class u{validateStyleProperty(a){return function fd(u){cl||(cl=function Tu(){return typeof document<"u"?document.body:null}()||{},im=!!cl.style&&"WebkitAppearance"in cl.style);let o=!0;return cl.style&&!function rm(u){return"ebkit"==u.substring(1,6)}(u)&&(o=u in cl.style,!o&&im&&(o="Webkit"+u.charAt(0).toUpperCase()+u.slice(1)in cl.style)),o}(a)}matchesElement(a,h){return!1}containsElement(a,h){return sm(a,h)}getParentElement(a){return gc(a)}query(a,h,y){return Jp(a,h,y)}computeStyle(a,h,y){return y||""}animate(a,h,y,T,N,G=[],re){return new Es.ZN(y,T)}}return u.\u0275fac=function(a){return new(a||u)},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})(),zf=(()=>{class u{}return u.NOOP=new Su,u})();const eg=1e3,lm="ng-enter",Gf="ng-leave",tg="ng-trigger",qh=".ng-trigger",ou="ng-animating",Xd=".ng-animating";function $c(u){if("number"==typeof u)return u;const o=u.match(/^(-?[\.\d]+)(m?s)/);return!o||o.length<2?0:au(parseFloat(o[1]),o[2])}function au(u,o){return"s"===o?u*eg:u}function Wf(u,o,a){return u.hasOwnProperty("duration")?u:function ng(u,o,a){let y,T=0,N="";if("string"==typeof u){const G=u.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===G)return o.push(Al()),{duration:0,delay:0,easing:""};y=au(parseFloat(G[1]),G[2]);const re=G[3];null!=re&&(T=au(parseFloat(re),G[4]));const ge=G[5];ge&&(N=ge)}else y=u;if(!a){let G=!1,re=o.length;y<0&&(o.push(function pc(){return new m.vHH(3100,!1)}()),G=!0),T<0&&(o.push(function ud(){return new m.vHH(3101,!1)}()),G=!0),G&&o.splice(re,0,Al())}return{duration:y,delay:T,easing:N}}(u,o,a)}function Au(u,o={}){return Object.keys(u).forEach(a=>{o[a]=u[a]}),o}function cm(u){const o=new Map;return Object.keys(u).forEach(a=>{o.set(a,u[a])}),o}function Mu(u,o=new Map,a){if(a)for(let[h,y]of a)o.set(h,y);for(let[h,y]of u)o.set(h,y);return o}function um(u,o,a){return a?o+":"+a+";":""}function dm(u){let o="";for(let a=0;a<u.style.length;a++){const h=u.style.item(a);o+=um(0,h,u.style.getPropertyValue(h))}for(const a in u.style)u.style.hasOwnProperty(a)&&!a.startsWith("_")&&(o+=um(0,lu(a),u.style[a]));u.setAttribute("style",o)}function Uc(u,o,a){u.style&&(o.forEach((h,y)=>{const T=Jd(y);a&&!a.has(y)&&a.set(y,u.style[T]),u.style[T]=h}),Vf()&&dm(u))}function Vc(u,o){u.style&&(o.forEach((a,h)=>{const y=Jd(h);u.style[y]=""}),Vf()&&dm(u))}function Yh(u){return Array.isArray(u)?1==u.length?u[0]:(0,Es.vP)(u):u}const gd=new RegExp("{{\\s*(.+?)\\s*}}","g");function qf(u){let o=[];if("string"==typeof u){let a;for(;a=gd.exec(u);)o.push(a[1]);gd.lastIndex=0}return o}function Qh(u,o,a){const h=u.toString(),y=h.replace(gd,(T,N)=>{let G=o[N];return null==G&&(a.push(function Xg(u){return new m.vHH(3003,!1)}()),G=""),G.toString()});return y==h?u:y}function Ru(u){const o=[];let a=u.next();for(;!a.done;)o.push(a.value),a=u.next();return o}const rg=/-+([a-z0-9])/g;function Jd(u){return u.replace(rg,(...o)=>o[1].toUpperCase())}function lu(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ha(u,o,a){switch(o.type){case 7:return u.visitTrigger(o,a);case 0:return u.visitState(o,a);case 1:return u.visitTransition(o,a);case 2:return u.visitSequence(o,a);case 3:return u.visitGroup(o,a);case 4:return u.visitAnimate(o,a);case 5:return u.visitKeyframes(o,a);case 6:return u.visitStyle(o,a);case 8:return u.visitReference(o,a);case 9:return u.visitAnimateChild(o,a);case 10:return u.visitAnimateRef(o,a);case 11:return u.visitQuery(o,a);case 12:return u.visitStagger(o,a);default:throw function zp(u){return new m.vHH(3004,!1)}()}}function hm(u,o){return window.getComputedStyle(u)[o]}const Jh="*";function Ou(u,o){const a=[];return"string"==typeof u?u.split(/\s*,\s*/).forEach(h=>function Nu(u,o,a){if(":"==u[0]){const re=function ef(u,o){switch(u){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(a,h)=>parseFloat(h)>parseFloat(a);case":decrement":return(a,h)=>parseFloat(h)<parseFloat(a);default:return o.push(function zh(u){return new m.vHH(3016,!1)}()),"* => *"}}(u,a);if("function"==typeof re)return void o.push(re);u=re}const h=u.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==h||h.length<4)return a.push(function Ey(u){return new m.vHH(3015,!1)}()),o;const y=h[1],T=h[2],N=h[3];o.push(og(y,N));"<"==T[0]&&!(y==Jh&&N==Jh)&&o.push(og(N,y))}(h,a,o)):a.push(u),a}const ku=new Set(["true","1"]),md=new Set(["false","0"]);function og(u,o){const a=ku.has(u)||md.has(u),h=ku.has(o)||md.has(o);return(y,T)=>{let N=u==Jh||u==y,G=o==Jh||o==T;return!N&&a&&"boolean"==typeof y&&(N=y?ku.has(u):md.has(u)),!G&&h&&"boolean"==typeof T&&(G=T?ku.has(o):md.has(o)),N&&G}}const pm=new RegExp("s*:selfs*,?","g");function tf(u,o,a,h){return new Qf(u).build(o,a,h)}class Qf{constructor(o){this._driver=o}build(o,a,h){const y=new za(a);return this._resetContextStyleTimingState(y),Ha(this,Yh(o),y)}_resetContextStyleTimingState(o){o.currentQuerySelector="",o.collectedStyles=new Map,o.collectedStyles.set("",new Map),o.currentTime=0}visitTrigger(o,a){let h=a.queryCount=0,y=a.depCount=0;const T=[],N=[];return"@"==o.name.charAt(0)&&a.errors.push(function Wp(){return new m.vHH(3006,!1)}()),o.definitions.forEach(G=>{if(this._resetContextStyleTimingState(a),0==G.type){const re=G,ge=re.name;ge.toString().split(/\s*,\s*/).forEach(gt=>{re.name=gt,T.push(this.visitState(re,a))}),re.name=ge}else if(1==G.type){const re=this.visitTransition(G,a);h+=re.queryCount,y+=re.depCount,N.push(re)}else a.errors.push(function Kp(){return new m.vHH(3007,!1)}())}),{type:7,name:o.name,states:T,transitions:N,queryCount:h,depCount:y,options:null}}visitState(o,a){const h=this.visitStyle(o.styles,a),y=o.options&&o.options.params||null;if(h.containsDynamicStyles){const T=new Set,N=y||{};h.styles.forEach(G=>{G instanceof Map&&G.forEach(re=>{qf(re).forEach(ge=>{N.hasOwnProperty(ge)||T.add(ge)})})}),T.size&&(Ru(T.values()),a.errors.push(function qp(u,o){return new m.vHH(3008,!1)}()))}return{type:0,name:o.name,style:h,options:y?{params:y}:null}}visitTransition(o,a){a.queryCount=0,a.depCount=0;const h=Ha(this,Yh(o.animation),a);return{type:1,matchers:Ou(o.expr,a.errors),animation:h,queryCount:a.queryCount,depCount:a.depCount,options:cu(o.options)}}visitSequence(o,a){return{type:2,steps:o.steps.map(h=>Ha(this,h,a)),options:cu(o.options)}}visitGroup(o,a){const h=a.currentTime;let y=0;const T=o.steps.map(N=>{a.currentTime=h;const G=Ha(this,N,a);return y=Math.max(y,a.currentTime),G});return a.currentTime=y,{type:3,steps:T,options:cu(o.options)}}visitAnimate(o,a){const h=function nf(u,o){if(u.hasOwnProperty("duration"))return u;if("number"==typeof u)return yd(Wf(u,o).duration,0,"");const a=u;if(a.split(/\s+/).some(T=>"{"==T.charAt(0)&&"{"==T.charAt(1))){const T=yd(0,0,"");return T.dynamic=!0,T.strValue=a,T}const y=Wf(a,o);return yd(y.duration,y.delay,y.easing)}(o.timings,a.errors);a.currentAnimateTimings=h;let y,T=o.styles?o.styles:(0,Es.oB)({});if(5==T.type)y=this.visitKeyframes(T,a);else{let N=o.styles,G=!1;if(!N){G=!0;const ge={};h.easing&&(ge.easing=h.easing),N=(0,Es.oB)(ge)}a.currentTime+=h.duration+h.delay;const re=this.visitStyle(N,a);re.isEmptyStep=G,y=re}return a.currentAnimateTimings=null,{type:4,timings:h,style:y,options:null}}visitStyle(o,a){const h=this._makeStyleAst(o,a);return this._validateStyleAst(h,a),h}_makeStyleAst(o,a){const h=[],y=Array.isArray(o.styles)?o.styles:[o.styles];for(let G of y)"string"==typeof G?G===Es.l3?h.push(G):a.errors.push(new m.vHH(3002,!1)):h.push(cm(G));let T=!1,N=null;return h.forEach(G=>{if(G instanceof Map&&(G.has("easing")&&(N=G.get("easing"),G.delete("easing")),!T))for(let re of G.values())if(re.toString().indexOf("{{")>=0){T=!0;break}}),{type:6,styles:h,easing:N,offset:o.offset,containsDynamicStyles:T,options:null}}_validateStyleAst(o,a){const h=a.currentAnimateTimings;let y=a.currentTime,T=a.currentTime;h&&T>0&&(T-=h.duration+h.delay),o.styles.forEach(N=>{"string"!=typeof N&&N.forEach((G,re)=>{const ge=a.collectedStyles.get(a.currentQuerySelector),gt=ge.get(re);let wt=!0;gt&&(T!=y&&T>=gt.startTime&&y<=gt.endTime&&(a.errors.push(function Zd(u,o,a,h,y){return new m.vHH(3010,!1)}()),wt=!1),T=gt.startTime),wt&&ge.set(re,{startTime:T,endTime:y}),a.options&&function Zh(u,o,a){const h=o.params||{},y=qf(u);y.length&&y.forEach(T=>{h.hasOwnProperty(T)||a.push(function Yd(u){return new m.vHH(3001,!1)}())})}(G,a.options,a.errors)})})}visitKeyframes(o,a){const h={type:5,styles:[],options:null};if(!a.currentAnimateTimings)return a.errors.push(function su(){return new m.vHH(3011,!1)}()),h;let T=0;const N=[];let G=!1,re=!1,ge=0;const gt=o.steps.map(Fi=>{const ns=this._makeStyleAst(Fi,a);let io=null!=ns.offset?ns.offset:function Xf(u){if("string"==typeof u)return null;let o=null;if(Array.isArray(u))u.forEach(a=>{if(a instanceof Map&&a.has("offset")){const h=a;o=parseFloat(h.get("offset")),h.delete("offset")}});else if(u instanceof Map&&u.has("offset")){const a=u;o=parseFloat(a.get("offset")),a.delete("offset")}return o}(ns.styles),Po=0;return null!=io&&(T++,Po=ns.offset=io),re=re||Po<0||Po>1,G=G||Po<ge,ge=Po,N.push(Po),ns});re&&a.errors.push(function dd(){return new m.vHH(3012,!1)}()),G&&a.errors.push(function yy(){return new m.vHH(3200,!1)}());const wt=o.steps.length;let Vt=0;T>0&&T<wt?a.errors.push(function Jg(){return new m.vHH(3202,!1)}()):0==T&&(Vt=1/(wt-1));const dn=wt-1,gn=a.currentTime,Hn=a.currentAnimateTimings,fi=Hn.duration;return gt.forEach((Fi,ns)=>{const io=Vt>0?ns==dn?1:Vt*ns:N[ns],Po=io*fi;a.currentTime=gn+Hn.delay+Po,Hn.duration=Po,this._validateStyleAst(Fi,a),Fi.offset=io,h.styles.push(Fi)}),h}visitReference(o,a){return{type:8,animation:Ha(this,Yh(o.animation),a),options:cu(o.options)}}visitAnimateChild(o,a){return a.depCount++,{type:9,options:cu(o.options)}}visitAnimateRef(o,a){return{type:10,animation:this.visitReference(o.animation,a),options:cu(o.options)}}visitQuery(o,a){const h=a.currentQuerySelector,y=o.options||{};a.queryCount++,a.currentQuery=o;const[T,N]=function gm(u){const o=!!u.split(/\s*,\s*/).find(a=>":self"==a);return o&&(u=u.replace(pm,"")),u=u.replace(/@\*/g,qh).replace(/@\w+/g,a=>qh+"-"+a.slice(1)).replace(/:animating/g,Xd),[u,o]}(o.selector);a.currentQuerySelector=h.length?h+" "+T:T,Ns(a.collectedStyles,a.currentQuerySelector,new Map);const G=Ha(this,Yh(o.animation),a);return a.currentQuery=null,a.currentQuerySelector=h,{type:11,selector:T,limit:y.limit||0,optional:!!y.optional,includeSelf:N,animation:G,originalSelector:o.selector,options:cu(o.options)}}visitStagger(o,a){a.currentQuery||a.errors.push(function _y(){return new m.vHH(3013,!1)}());const h="full"===o.timings?{duration:0,delay:0,easing:"full"}:Wf(o.timings,a.errors,!0);return{type:12,animation:Ha(this,Yh(o.animation),a),timings:h,options:null}}}class za{constructor(o){this.errors=o,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function cu(u){return u?(u=Au(u)).params&&(u.params=function mm(u){return u?Au(u):null}(u.params)):u={},u}function yd(u,o,a){return{duration:u,delay:o,easing:a}}function th(u,o,a,h,y,T,N=null,G=!1){return{type:1,element:u,keyframes:o,preStyleProps:a,postStyleProps:h,duration:y,delay:T,totalTime:y+T,easing:N,subTimeline:G}}class nh{constructor(){this._map=new Map}get(o){return this._map.get(o)||[]}append(o,a){let h=this._map.get(o);h||this._map.set(o,h=[]),h.push(...a)}has(o){return this._map.has(o)}clear(){this._map.clear()}}const cg=new RegExp(":enter","g"),ug=new RegExp(":leave","g");function rf(u,o,a,h,y,T=new Map,N=new Map,G,re,ge=[]){return(new Dy).buildKeyframes(u,o,a,h,y,T,N,G,re,ge)}class Dy{buildKeyframes(o,a,h,y,T,N,G,re,ge,gt=[]){ge=ge||new nh;const wt=new dg(o,a,ge,y,T,gt,[]);wt.options=re;const Vt=re.delay?$c(re.delay):0;wt.currentTimeline.delayNextStep(Vt),wt.currentTimeline.setStyles([N],null,wt.errors,re),Ha(this,h,wt);const dn=wt.timelines.filter(gn=>gn.containsAnimation());if(dn.length&&G.size){let gn;for(let Hn=dn.length-1;Hn>=0;Hn--){const fi=dn[Hn];if(fi.element===a){gn=fi;break}}gn&&!gn.allowOnlyTimelineStyles()&&gn.setStyles([G],null,wt.errors,re)}return dn.length?dn.map(gn=>gn.buildKeyframes()):[th(a,[],[],[],0,Vt,"",!1)]}visitTrigger(o,a){}visitState(o,a){}visitTransition(o,a){}visitAnimateChild(o,a){const h=a.subInstructions.get(a.element);if(h){const y=a.createSubContext(o.options),T=a.currentTimeline.currentTime,N=this._visitSubInstructions(h,y,y.options);T!=N&&a.transformIntoNewTimeline(N)}a.previousNode=o}visitAnimateRef(o,a){const h=a.createSubContext(o.options);h.transformIntoNewTimeline(),this._applyAnimationRefDelays([o.options,o.animation.options],a,h),this.visitReference(o.animation,h),a.transformIntoNewTimeline(h.currentTimeline.currentTime),a.previousNode=o}_applyAnimationRefDelays(o,a,h){for(const T of o){const N=null==T?void 0:T.delay;if(N){var y;const G="number"==typeof N?N:$c(Qh(N,null!==(y=null==T?void 0:T.params)&&void 0!==y?y:{},a.errors));h.delayNextStep(G)}}}_visitSubInstructions(o,a,h){let T=a.currentTimeline.currentTime;const N=null!=h.duration?$c(h.duration):null,G=null!=h.delay?$c(h.delay):null;return 0!==N&&o.forEach(re=>{const ge=a.appendInstructionToTimeline(re,N,G);T=Math.max(T,ge.duration+ge.delay)}),T}visitReference(o,a){a.updateOptions(o.options,!0),Ha(this,o.animation,a),a.previousNode=o}visitSequence(o,a){const h=a.subContextCount;let y=a;const T=o.options;if(T&&(T.params||T.delay)&&(y=a.createSubContext(T),y.transformIntoNewTimeline(),null!=T.delay)){6==y.previousNode.type&&(y.currentTimeline.snapshotCurrentStyles(),y.previousNode=ra);const N=$c(T.delay);y.delayNextStep(N)}o.steps.length&&(o.steps.forEach(N=>Ha(this,N,y)),y.currentTimeline.applyStylesToKeyframe(),y.subContextCount>h&&y.transformIntoNewTimeline()),a.previousNode=o}visitGroup(o,a){const h=[];let y=a.currentTimeline.currentTime;const T=o.options&&o.options.delay?$c(o.options.delay):0;o.steps.forEach(N=>{const G=a.createSubContext(o.options);T&&G.delayNextStep(T),Ha(this,N,G),y=Math.max(y,G.currentTimeline.currentTime),h.push(G.currentTimeline)}),h.forEach(N=>a.currentTimeline.mergeTimelineCollectedStyles(N)),a.transformIntoNewTimeline(y),a.previousNode=o}_visitTiming(o,a){if(o.dynamic){const h=o.strValue;return Wf(a.params?Qh(h,a.params,a.errors):h,a.errors)}return{duration:o.duration,delay:o.delay,easing:o.easing}}visitAnimate(o,a){const h=a.currentAnimateTimings=this._visitTiming(o.timings,a),y=a.currentTimeline;h.delay&&(a.incrementTime(h.delay),y.snapshotCurrentStyles());const T=o.style;5==T.type?this.visitKeyframes(T,a):(a.incrementTime(h.duration),this.visitStyle(T,a),y.applyStylesToKeyframe()),a.currentAnimateTimings=null,a.previousNode=o}visitStyle(o,a){const h=a.currentTimeline,y=a.currentAnimateTimings;!y&&h.hasCurrentStyleProperties()&&h.forwardFrame();const T=y&&y.easing||o.easing;o.isEmptyStep?h.applyEmptyStep(T):h.setStyles(o.styles,T,a.errors,a.options),a.previousNode=o}visitKeyframes(o,a){const h=a.currentAnimateTimings,y=a.currentTimeline.duration,T=h.duration,G=a.createSubContext().currentTimeline;G.easing=h.easing,o.styles.forEach(re=>{G.forwardTime((re.offset||0)*T),G.setStyles(re.styles,re.easing,a.errors,a.options),G.applyStylesToKeyframe()}),a.currentTimeline.mergeTimelineCollectedStyles(G),a.transformIntoNewTimeline(y+T),a.previousNode=o}visitQuery(o,a){const h=a.currentTimeline.currentTime,y=o.options||{},T=y.delay?$c(y.delay):0;T&&(6===a.previousNode.type||0==h&&a.currentTimeline.hasCurrentStyleProperties())&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=ra);let N=h;const G=a.invokeQuery(o.selector,o.originalSelector,o.limit,o.includeSelf,!!y.optional,a.errors);a.currentQueryTotal=G.length;let re=null;G.forEach((ge,gt)=>{a.currentQueryIndex=gt;const wt=a.createSubContext(o.options,ge);T&&wt.delayNextStep(T),ge===a.element&&(re=wt.currentTimeline),Ha(this,o.animation,wt),wt.currentTimeline.applyStylesToKeyframe(),N=Math.max(N,wt.currentTimeline.currentTime)}),a.currentQueryIndex=0,a.currentQueryTotal=0,a.transformIntoNewTimeline(N),re&&(a.currentTimeline.mergeTimelineCollectedStyles(re),a.currentTimeline.snapshotCurrentStyles()),a.previousNode=o}visitStagger(o,a){const h=a.parentContext,y=a.currentTimeline,T=o.timings,N=Math.abs(T.duration),G=N*(a.currentQueryTotal-1);let re=N*a.currentQueryIndex;switch(T.duration<0?"reverse":T.easing){case"reverse":re=G-re;break;case"full":re=h.currentStaggerTime}const gt=a.currentTimeline;re&&gt.delayNextStep(re);const wt=gt.currentTime;Ha(this,o.animation,a),a.previousNode=o,h.currentStaggerTime=y.currentTime-wt+(y.startTime-h.currentTimeline.startTime)}}const ra={};class dg{constructor(o,a,h,y,T,N,G,re){this._driver=o,this.element=a,this.subInstructions=h,this._enterClassName=y,this._leaveClassName=T,this.errors=N,this.timelines=G,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ra,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=re||new sf(this._driver,a,0),G.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(o,a){if(!o)return;const h=o;let y=this.options;null!=h.duration&&(y.duration=$c(h.duration)),null!=h.delay&&(y.delay=$c(h.delay));const T=h.params;if(T){let N=y.params;N||(N=this.options.params={}),Object.keys(T).forEach(G=>{(!a||!N.hasOwnProperty(G))&&(N[G]=Qh(T[G],N,this.errors))})}}_copyOptions(){const o={};if(this.options){const a=this.options.params;if(a){const h=o.params={};Object.keys(a).forEach(y=>{h[y]=a[y]})}}return o}createSubContext(o=null,a,h){const y=a||this.element,T=new dg(this._driver,y,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(y,h||0));return T.previousNode=this.previousNode,T.currentAnimateTimings=this.currentAnimateTimings,T.options=this._copyOptions(),T.updateOptions(o),T.currentQueryIndex=this.currentQueryIndex,T.currentQueryTotal=this.currentQueryTotal,T.parentContext=this,this.subContextCount++,T}transformIntoNewTimeline(o){return this.previousNode=ra,this.currentTimeline=this.currentTimeline.fork(this.element,o),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(o,a,h){const y={duration:null!=a?a:o.duration,delay:this.currentTimeline.currentTime+(null!=h?h:0)+o.delay,easing:""},T=new ep(this._driver,o.element,o.keyframes,o.preStyleProps,o.postStyleProps,y,o.stretchStartingKeyframe);return this.timelines.push(T),y}incrementTime(o){this.currentTimeline.forwardTime(this.currentTimeline.duration+o)}delayNextStep(o){o>0&&this.currentTimeline.delayNextStep(o)}invokeQuery(o,a,h,y,T,N){let G=[];if(y&&G.push(this.element),o.length>0){o=(o=o.replace(cg,"."+this._enterClassName)).replace(ug,"."+this._leaveClassName);let ge=this._driver.query(this.element,o,1!=h);0!==h&&(ge=h<0?ge.slice(ge.length+h,ge.length):ge.slice(0,h)),G.push(...ge)}return!T&&0==G.length&&N.push(function vy(u){return new m.vHH(3014,!1)}()),G}}class sf{constructor(o,a,h,y){this._driver=o,this.element=a,this.startTime=h,this._elementTimelineStylesLookup=y,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(a),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(a,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(o){const a=1===this._keyframes.size&&this._pendingStyles.size;this.duration||a?(this.forwardTime(this.currentTime+o),a&&this.snapshotCurrentStyles()):this.startTime+=o}fork(o,a){return this.applyStylesToKeyframe(),new sf(this._driver,o,a||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(o){this.applyStylesToKeyframe(),this.duration=o,this._loadKeyframe()}_updateStyle(o,a){this._localTimelineStyles.set(o,a),this._globalTimelineStyles.set(o,a),this._styleSummary.set(o,{time:this.currentTime,value:a})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(o){o&&this._previousKeyframe.set("easing",o);for(let[a,h]of this._globalTimelineStyles)this._backFill.set(a,h||Es.l3),this._currentKeyframe.set(a,Es.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(o,a,h,y){a&&this._previousKeyframe.set("easing",a);const T=y&&y.params||{},N=function af(u,o){const a=new Map;let h;return u.forEach(y=>{if("*"===y){h=h||o.keys();for(let T of h)a.set(T,Es.l3)}else Mu(y,a)}),a}(o,this._globalTimelineStyles);for(let[re,ge]of N){const gt=Qh(ge,T,h);var G;this._pendingStyles.set(re,gt),this._localTimelineStyles.has(re)||this._backFill.set(re,null!==(G=this._globalTimelineStyles.get(re))&&void 0!==G?G:Es.l3),this._updateStyle(re,gt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((o,a)=>{this._currentKeyframe.set(a,o)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((o,a)=>{this._currentKeyframe.has(a)||this._currentKeyframe.set(a,o)}))}snapshotCurrentStyles(){for(let[o,a]of this._localTimelineStyles)this._pendingStyles.set(o,a),this._updateStyle(o,a)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const o=[];for(let a in this._currentKeyframe)o.push(a);return o}mergeTimelineCollectedStyles(o){o._styleSummary.forEach((a,h)=>{const y=this._styleSummary.get(h);(!y||a.time>y.time)&&this._updateStyle(h,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const o=new Set,a=new Set,h=1===this._keyframes.size&&0===this.duration;let y=[];this._keyframes.forEach((G,re)=>{const ge=Mu(G,new Map,this._backFill);ge.forEach((gt,wt)=>{gt===Es.k1?o.add(wt):gt===Es.l3&&a.add(wt)}),h||ge.set("offset",re/this.duration),y.push(ge)});const T=o.size?Ru(o.values()):[],N=a.size?Ru(a.values()):[];if(h){const G=y[0],re=new Map(G);G.set("offset",0),re.set("offset",1),y=[G,re]}return th(this.element,y,T,N,this.duration,this.startTime,this.easing,!1)}}class ep extends sf{constructor(o,a,h,y,T,N,G=!1){super(o,a,N.delay),this.keyframes=h,this.preStyleProps=y,this.postStyleProps=T,this._stretchStartingKeyframe=G,this.timings={duration:N.duration,delay:N.delay,easing:N.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let o=this.keyframes,{delay:a,duration:h,easing:y}=this.timings;if(this._stretchStartingKeyframe&&a){const T=[],N=h+a,G=a/N,re=Mu(o[0]);re.set("offset",0),T.push(re);const ge=Mu(o[0]);ge.set("offset",Ga(G)),T.push(ge);const gt=o.length-1;for(let wt=1;wt<=gt;wt++){let Vt=Mu(o[wt]);const dn=Vt.get("offset");Vt.set("offset",Ga((a+dn*h)/N)),T.push(Vt)}h=N,a=0,y="",o=T}return th(this.element,o,this.preStyleProps,this.postStyleProps,h,a,y,!0)}}function Ga(u,o=3){const a=Math.pow(10,o-1);return Math.round(u*a)/a}class hg{}const Ay=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class My extends hg{normalizePropertyName(o,a){return Jd(o)}normalizeStyleValue(o,a,h,y){let T="";const N=h.toString().trim();if(Ay.has(a)&&0!==h&&"0"!==h)if("number"==typeof h)T="px";else{const G=h.match(/^[+-]?[\d\.]+([a-z]*)$/);G&&0==G[1].length&&y.push(function Gp(u,o){return new m.vHH(3005,!1)}())}return N+T}}function tp(u,o,a,h,y,T,N,G,re,ge,gt,wt,Vt){return{type:0,element:u,triggerName:o,isRemovalTransition:y,fromState:a,fromStyles:T,toState:h,toStyles:N,timelines:G,queriedElements:re,preStyleProps:ge,postStyleProps:gt,totalTime:wt,errors:Vt}}const lf={};class _m{constructor(o,a,h){this._triggerName=o,this.ast=a,this._stateStyles=h}match(o,a,h,y){return function rh(u,o,a,h,y){return u.some(T=>T(o,a,h,y))}(this.ast.matchers,o,a,h,y)}buildStyles(o,a,h){let y=this._stateStyles.get("*");return void 0!==o&&(y=this._stateStyles.get(null==o?void 0:o.toString())||y),y?y.buildStyles(a,h):new Map}build(o,a,h,y,T,N,G,re,ge,gt){var wt;const Vt=[],dn=this.ast.options&&this.ast.options.params||lf,Hn=this.buildStyles(h,G&&G.params||lf,Vt),fi=re&&re.params||lf,Fi=this.buildStyles(y,fi,Vt),ns=new Set,io=new Map,Po=new Map,zc="void"===y,Rl={params:uu(fi,dn),delay:null===(wt=this.ast.options)||void 0===wt?void 0:wt.delay},ho=gt?[]:rf(o,a,this.ast.animation,T,N,Hn,Fi,Rl,ge,Vt);let Wa=0;if(ho.forEach(hl=>{Wa=Math.max(hl.duration+hl.delay,Wa)}),Vt.length)return tp(a,this._triggerName,h,y,zc,Hn,Fi,[],[],io,Po,Wa,Vt);ho.forEach(hl=>{const fh=hl.element,Md=Ns(io,fh,new Set);hl.preStyleProps.forEach(ph=>Md.add(ph));const Bu=Ns(Po,fh,new Set);hl.postStyleProps.forEach(ph=>Bu.add(ph)),fh!==a&&ns.add(fh)});const hh=Ru(ns.values());return tp(a,this._triggerName,h,y,zc,Hn,Fi,ho,hh,io,Po,Wa)}}function uu(u,o){const a=Au(o);for(const h in u)u.hasOwnProperty(h)&&null!=u[h]&&(a[h]=u[h]);return a}class ih{constructor(o,a,h){this.styles=o,this.defaultParams=a,this.normalizer=h}buildStyles(o,a){const h=new Map,y=Au(this.defaultParams);return Object.keys(o).forEach(T=>{const N=o[T];null!==N&&(y[T]=N)}),this.styles.styles.forEach(T=>{"string"!=typeof T&&T.forEach((N,G)=>{N&&(N=Qh(N,y,a));const re=this.normalizer.normalizePropertyName(G,a);N=this.normalizer.normalizeStyleValue(G,re,N,a),h.set(G,N)})}),h}}class _d{constructor(o,a,h){this.name=o,this.ast=a,this._normalizer=h,this.transitionFactories=[],this.states=new Map,a.states.forEach(y=>{this.states.set(y.name,new ih(y.style,y.options&&y.options.params||{},h))}),rp(this.states,"true","1"),rp(this.states,"false","0"),a.transitions.forEach(y=>{this.transitionFactories.push(new _m(o,y,this.states))}),this.fallbackTransition=function vm(u,o,a){return new _m(u,{type:1,animation:{type:2,steps:[],options:null},matchers:[(N,G)=>!0],options:null,queryCount:0,depCount:0},o)}(o,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(o,a,h,y){return this.transitionFactories.find(N=>N.match(o,a,h,y))||null}matchStyles(o,a,h){return this.fallbackTransition.buildStyles(o,a,h)}}function rp(u,o,a){u.has(o)?u.has(a)||u.set(a,u.get(o)):u.has(a)&&u.set(o,u.get(a))}const ip=new nh;class sp{constructor(o,a,h){this.bodyNode=o,this._driver=a,this._normalizer=h,this._animations=new Map,this._playersById=new Map,this.players=[]}register(o,a){const h=[],y=[],T=tf(this._driver,a,h,y);if(h.length)throw function Iy(u){return new m.vHH(3503,!1)}();this._animations.set(o,T)}_buildPlayer(o,a,h){const y=o.element,T=Gh(0,this._normalizer,0,o.keyframes,a,h);return this._driver.animate(y,T,o.duration,o.delay,o.easing,[],!0)}create(o,a,h={}){const y=[],T=this._animations.get(o);let N;const G=new Map;if(T?(N=rf(this._driver,a,T,lm,Gf,new Map,new Map,h,ip,y),N.forEach(gt=>{const wt=Ns(G,gt.element,new Map);gt.postStyleProps.forEach(Vt=>wt.set(Vt,null))})):(y.push(function m_(){return new m.vHH(3300,!1)}()),N=[]),y.length)throw function Lf(u){return new m.vHH(3504,!1)}();G.forEach((gt,wt)=>{gt.forEach((Vt,dn)=>{gt.set(dn,this._driver.computeStyle(wt,dn,Es.l3))})});const ge=zl(N.map(gt=>{const wt=G.get(gt.element);return this._buildPlayer(gt,new Map,wt)}));return this._playersById.set(o,ge),ge.onDestroy(()=>this.destroy(o)),this.players.push(ge),ge}destroy(o){const a=this._getPlayer(o);a.destroy(),this._playersById.delete(o);const h=this.players.indexOf(a);h>=0&&this.players.splice(h,1)}_getPlayer(o){const a=this._playersById.get(o);if(!a)throw function tm(u){return new m.vHH(3301,!1)}();return a}listen(o,a,h,y){const T=jf(a,"","","");return hd(this._getPlayer(o),h,T,y),()=>{}}command(o,a,h,y){if("register"==h)return void this.register(o,y[0]);if("create"==h)return void this.create(o,a,y[0]||{});const T=this._getPlayer(o);switch(h){case"play":T.play();break;case"pause":T.pause();break;case"reset":T.reset();break;case"restart":T.restart();break;case"finish":T.finish();break;case"init":T.init();break;case"setPosition":T.setPosition(parseFloat(y[0]));break;case"destroy":this.destroy(o)}}}const jc="ng-animate-queued",mc="ng-animate-disabled",Ry=[],cf={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},uf={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ul="__ng_removed";class lp{get params(){return this.options.params}constructor(o,a=""){this.namespaceId=a;const h=o&&o.hasOwnProperty("value");if(this.value=function Py(u){return null!=u?u:null}(h?o.value:o),h){const T=Au(o);delete T.value,this.options=T}else this.options={};this.options.params||(this.options.params={})}absorbOptions(o){const a=o.params;if(a){const h=this.options.params;Object.keys(a).forEach(y=>{null==h[y]&&(h[y]=a[y])})}}}const dl="void",df=new lp(dl);class __{constructor(o,a,h){this.id=o,this.hostElement=a,this._engine=h,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+o,Gl(a,this._hostClassName)}listen(o,a,h,y){if(!this._triggers.has(a))throw function Yp(u,o){return new m.vHH(3302,!1)}();if(null==h||0==h.length)throw function Bf(u){return new m.vHH(3303,!1)}();if(!function Oy(u){return"start"==u||"done"==u}(h))throw function Zp(u,o){return new m.vHH(3400,!1)}();const T=Ns(this._elementListeners,o,[]),N={name:a,phase:h,callback:y};T.push(N);const G=Ns(this._engine.statesByElement,o,new Map);return G.has(a)||(Gl(o,tg),Gl(o,tg+"-"+a),G.set(a,df)),()=>{this._engine.afterFlush(()=>{const re=T.indexOf(N);re>=0&&T.splice(re,1),this._triggers.has(a)||G.delete(a)})}}register(o,a){return!this._triggers.has(o)&&(this._triggers.set(o,a),!0)}_getTrigger(o){const a=this._triggers.get(o);if(!a)throw function Qp(u){return new m.vHH(3401,!1)}();return a}trigger(o,a,h,y=!0){const T=this._getTrigger(a),N=new cp(this.id,a,o);let G=this._engine.statesByElement.get(o);G||(Gl(o,tg),Gl(o,tg+"-"+a),this._engine.statesByElement.set(o,G=new Map));let re=G.get(a);const ge=new lp(h,this.id);if(!(h&&h.hasOwnProperty("value"))&&re&&ge.absorbOptions(re.options),G.set(a,ge),re||(re=df),ge.value!==dl&&re.value===ge.value){if(!function mg(u,o){const a=Object.keys(u),h=Object.keys(o);if(a.length!=h.length)return!1;for(let y=0;y<a.length;y++){const T=a[y];if(!o.hasOwnProperty(T)||u[T]!==o[T])return!1}return!0}(re.params,ge.params)){const Hn=[],fi=T.matchStyles(re.value,re.params,Hn),Fi=T.matchStyles(ge.value,ge.params,Hn);Hn.length?this._engine.reportError(Hn):this._engine.afterFlush(()=>{Vc(o,fi),Uc(o,Fi)})}return}const Vt=Ns(this._engine.playersByElement,o,[]);Vt.forEach(Hn=>{Hn.namespaceId==this.id&&Hn.triggerName==a&&Hn.queued&&Hn.destroy()});let dn=T.matchTransition(re.value,ge.value,o,ge.params),gn=!1;if(!dn){if(!y)return;dn=T.fallbackTransition,gn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:a,transition:dn,fromState:re,toState:ge,player:N,isFallbackTransition:gn}),gn||(Gl(o,jc),N.onStart(()=>{Hc(o,jc)})),N.onDone(()=>{let Hn=this.players.indexOf(N);Hn>=0&&this.players.splice(Hn,1);const fi=this._engine.playersByElement.get(o);if(fi){let Fi=fi.indexOf(N);Fi>=0&&fi.splice(Fi,1)}}),this.players.push(N),Vt.push(N),N}deregister(o){this._triggers.delete(o),this._engine.statesByElement.forEach(a=>a.delete(o)),this._elementListeners.forEach((a,h)=>{this._elementListeners.set(h,a.filter(y=>y.name!=o))})}clearElementCache(o){this._engine.statesByElement.delete(o),this._elementListeners.delete(o);const a=this._engine.playersByElement.get(o);a&&(a.forEach(h=>h.destroy()),this._engine.playersByElement.delete(o))}_signalRemovalForInnerTriggers(o,a){const h=this._engine.driver.query(o,qh,!0);h.forEach(y=>{if(y[ul])return;const T=this._engine.fetchNamespacesByElement(y);T.size?T.forEach(N=>N.triggerLeaveAnimation(y,a,!1,!0)):this.clearElementCache(y)}),this._engine.afterFlushAnimationsDone(()=>h.forEach(y=>this.clearElementCache(y)))}triggerLeaveAnimation(o,a,h,y){const T=this._engine.statesByElement.get(o),N=new Map;if(T){const G=[];if(T.forEach((re,ge)=>{if(N.set(ge,re.value),this._triggers.has(ge)){const gt=this.trigger(o,ge,dl,y);gt&&G.push(gt)}}),G.length)return this._engine.markElementAsRemoved(this.id,o,!0,a,N),h&&zl(G).onDone(()=>this._engine.processLeaveNode(o)),!0}return!1}prepareLeaveAnimationListeners(o){const a=this._elementListeners.get(o),h=this._engine.statesByElement.get(o);if(a&&h){const y=new Set;a.forEach(T=>{const N=T.name;if(y.has(N))return;y.add(N);const re=this._triggers.get(N).fallbackTransition,ge=h.get(N)||df,gt=new lp(dl),wt=new cp(this.id,N,o);this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:N,transition:re,fromState:ge,toState:gt,player:wt,isFallbackTransition:!0})})}}removeNode(o,a){const h=this._engine;if(o.childElementCount&&this._signalRemovalForInnerTriggers(o,a),this.triggerLeaveAnimation(o,a,!0))return;let y=!1;if(h.totalAnimations){const T=h.players.length?h.playersByQueriedElement.get(o):[];if(T&&T.length)y=!0;else{let N=o;for(;N=N.parentNode;)if(h.statesByElement.get(N)){y=!0;break}}}if(this.prepareLeaveAnimationListeners(o),y)h.markElementAsRemoved(this.id,o,!1,a);else{const T=o[ul];(!T||T===cf)&&(h.afterFlush(()=>this.clearElementCache(o)),h.destroyInnerAnimations(o),h._onRemovalComplete(o,a))}}insertNode(o,a){Gl(o,this._hostClassName)}drainQueuedTransitions(o){const a=[];return this._queue.forEach(h=>{const y=h.player;if(y.destroyed)return;const T=h.element,N=this._elementListeners.get(T);N&&N.forEach(G=>{if(G.name==h.triggerName){const re=jf(T,h.triggerName,h.fromState.value,h.toState.value);re._data=o,hd(h.player,G.phase,re,G.callback)}}),y.markedForDestroy?this._engine.afterFlush(()=>{y.destroy()}):a.push(h)}),this._queue=[],a.sort((h,y)=>{const T=h.transition.ast.depCount,N=y.transition.ast.depCount;return 0==T||0==N?T-N:this._engine.driver.containsElement(h.element,y.element)?1:-1})}destroy(o){this.players.forEach(a=>a.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,o)}elementContainsData(o){let a=!1;return this._elementListeners.has(o)&&(a=!0),a=!!this._queue.find(h=>h.element===o)||a,a}}class xy{_onRemovalComplete(o,a){this.onRemovalComplete(o,a)}constructor(o,a,h){this.bodyNode=o,this.driver=a,this._normalizer=h,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(y,T)=>{}}get queuedPlayers(){const o=[];return this._namespaceList.forEach(a=>{a.players.forEach(h=>{h.queued&&o.push(h)})}),o}createNamespace(o,a){const h=new __(o,a,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,a)?this._balanceNamespaceList(h,a):(this.newHostElements.set(a,h),this.collectEnterElement(a)),this._namespaceLookup[o]=h}_balanceNamespaceList(o,a){const h=this._namespaceList,y=this.namespacesByHostElement;if(h.length-1>=0){let N=!1,G=this.driver.getParentElement(a);for(;G;){const re=y.get(G);if(re){const ge=h.indexOf(re);h.splice(ge+1,0,o),N=!0;break}G=this.driver.getParentElement(G)}N||h.unshift(o)}else h.push(o);return y.set(a,o),o}register(o,a){let h=this._namespaceLookup[o];return h||(h=this.createNamespace(o,a)),h}registerTrigger(o,a,h){let y=this._namespaceLookup[o];y&&y.register(a,h)&&this.totalAnimations++}destroy(o,a){if(!o)return;const h=this._fetchNamespace(o);this.afterFlush(()=>{this.namespacesByHostElement.delete(h.hostElement),delete this._namespaceLookup[o];const y=this._namespaceList.indexOf(h);y>=0&&this._namespaceList.splice(y,1)}),this.afterFlushAnimationsDone(()=>h.destroy(a))}_fetchNamespace(o){return this._namespaceLookup[o]}fetchNamespacesByElement(o){const a=new Set,h=this.statesByElement.get(o);if(h)for(let y of h.values())if(y.namespaceId){const T=this._fetchNamespace(y.namespaceId);T&&a.add(T)}return a}trigger(o,a,h,y){if(oh(a)){const T=this._fetchNamespace(o);if(T)return T.trigger(a,h,y),!0}return!1}insertNode(o,a,h,y){if(!oh(a))return;const T=a[ul];if(T&&T.setForRemoval){T.setForRemoval=!1,T.setForMove=!0;const N=this.collectedLeaveElements.indexOf(a);N>=0&&this.collectedLeaveElements.splice(N,1)}if(o){const N=this._fetchNamespace(o);N&&N.insertNode(a,h)}y&&this.collectEnterElement(a)}collectEnterElement(o){this.collectedEnterElements.push(o)}markElementAsDisabled(o,a){a?this.disabledNodes.has(o)||(this.disabledNodes.add(o),Gl(o,mc)):this.disabledNodes.has(o)&&(this.disabledNodes.delete(o),Hc(o,mc))}removeNode(o,a,h,y){if(oh(a)){const T=o?this._fetchNamespace(o):null;if(T?T.removeNode(a,y):this.markElementAsRemoved(o,a,!1,y),h){const N=this.namespacesByHostElement.get(a);N&&N.id!==o&&N.removeNode(a,y)}}else this._onRemovalComplete(a,y)}markElementAsRemoved(o,a,h,y,T){this.collectedLeaveElements.push(a),a[ul]={namespaceId:o,setForRemoval:y,hasAnimation:h,removedBeforeQueried:!1,previousTriggersValues:T}}listen(o,a,h,y,T){return oh(a)?this._fetchNamespace(o).listen(a,h,y,T):()=>{}}_buildInstruction(o,a,h,y,T){return o.transition.build(this.driver,o.element,o.fromState.value,o.toState.value,h,y,o.fromState.options,o.toState.options,a,T)}destroyInnerAnimations(o){let a=this.driver.query(o,qh,!0);a.forEach(h=>this.destroyActiveAnimationsForElement(h)),0!=this.playersByQueriedElement.size&&(a=this.driver.query(o,Xd,!0),a.forEach(h=>this.finishActiveQueriedAnimationOnElement(h)))}destroyActiveAnimationsForElement(o){const a=this.playersByElement.get(o);a&&a.forEach(h=>{h.queued?h.markedForDestroy=!0:h.destroy()})}finishActiveQueriedAnimationOnElement(o){const a=this.playersByQueriedElement.get(o);a&&a.forEach(h=>h.finish())}whenRenderingDone(){return new Promise(o=>{if(this.players.length)return zl(this.players).onDone(()=>o());o()})}processLeaveNode(o){var a;const h=o[ul];if(h&&h.setForRemoval){if(o[ul]=cf,h.namespaceId){this.destroyInnerAnimations(o);const y=this._fetchNamespace(h.namespaceId);y&&y.clearElementCache(o)}this._onRemovalComplete(o,h.setForRemoval)}null!==(a=o.classList)&&void 0!==a&&a.contains(mc)&&this.markElementAsDisabled(o,!1),this.driver.query(o,".ng-animate-disabled",!0).forEach(y=>{this.markElementAsDisabled(y,!1)})}flush(o=-1){let a=[];if(this.newHostElements.size&&(this.newHostElements.forEach((h,y)=>this._balanceNamespaceList(h,y)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let h=0;h<this.collectedEnterElements.length;h++)Gl(this.collectedEnterElements[h],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const h=[];try{a=this._flushAnimations(h,o)}finally{for(let y=0;y<h.length;y++)h[y]()}}else for(let h=0;h<this.collectedLeaveElements.length;h++)this.processLeaveNode(this.collectedLeaveElements[h]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(h=>h()),this._flushFns=[],this._whenQuietFns.length){const h=this._whenQuietFns;this._whenQuietFns=[],a.length?zl(a).onDone(()=>{h.forEach(y=>y())}):h.forEach(y=>y())}}reportError(o){throw function $f(u){return new m.vHH(3402,!1)}()}_flushAnimations(o,a){const h=new nh,y=[],T=new Map,N=[],G=new Map,re=new Map,ge=new Map,gt=new Set;this.disabledNodes.forEach(Ir=>{gt.add(Ir);const Or=this.driver.query(Ir,".ng-animate-queued",!0);for(let Jr=0;Jr<Or.length;Jr++)gt.add(Or[Jr])});const wt=this.bodyNode,Vt=Array.from(this.statesByElement.keys()),dn=ah(Vt,this.collectedEnterElements),gn=new Map;let Hn=0;dn.forEach((Ir,Or)=>{const Jr=lm+Hn++;gn.set(Or,Jr),Ir.forEach(Gi=>Gl(Gi,Jr))});const fi=[],Fi=new Set,ns=new Set;for(let Ir=0;Ir<this.collectedLeaveElements.length;Ir++){const Or=this.collectedLeaveElements[Ir],Jr=Or[ul];Jr&&Jr.setForRemoval&&(fi.push(Or),Fi.add(Or),Jr.hasAnimation?this.driver.query(Or,".ng-star-inserted",!0).forEach(Gi=>Fi.add(Gi)):ns.add(Or))}const io=new Map,Po=ah(Vt,Array.from(Fi));Po.forEach((Ir,Or)=>{const Jr=Gf+Hn++;io.set(Or,Jr),Ir.forEach(Gi=>Gl(Gi,Jr))}),o.push(()=>{dn.forEach((Ir,Or)=>{const Jr=gn.get(Or);Ir.forEach(Gi=>Hc(Gi,Jr))}),Po.forEach((Ir,Or)=>{const Jr=io.get(Or);Ir.forEach(Gi=>Hc(Gi,Jr))}),fi.forEach(Ir=>{this.processLeaveNode(Ir)})});const zc=[],Rl=[];for(let Ir=this._namespaceList.length-1;Ir>=0;Ir--)this._namespaceList[Ir].drainQueuedTransitions(a).forEach(Jr=>{const Gi=Jr.player,fo=Jr.element;if(zc.push(Gi),this.collectedEnterElements.length){const sa=fo[ul];if(sa&&sa.setForMove){if(sa.previousTriggersValues&&sa.previousTriggersValues.has(Jr.triggerName)){const Wc=sa.previousTriggersValues.get(Jr.triggerName),qa=this.statesByElement.get(Jr.element);if(qa&&qa.has(Jr.triggerName)){const mf=qa.get(Jr.triggerName);mf.value=Wc,qa.set(Jr.triggerName,mf)}}return void Gi.destroy()}}const xl=!wt||!this.driver.containsElement(wt,fo),Ka=io.get(fo),Gc=gn.get(fo),po=this._buildInstruction(Jr,h,Gc,Ka,xl);if(po.errors&&po.errors.length)return void Rl.push(po);if(xl)return Gi.onStart(()=>Vc(fo,po.fromStyles)),Gi.onDestroy(()=>Uc(fo,po.toStyles)),void y.push(Gi);if(Jr.isFallbackTransition)return Gi.onStart(()=>Vc(fo,po.fromStyles)),Gi.onDestroy(()=>Uc(fo,po.toStyles)),void y.push(Gi);const gf=[];po.timelines.forEach(sa=>{sa.stretchStartingKeyframe=!0,this.disabledNodes.has(sa.element)||gf.push(sa)}),po.timelines=gf,h.append(fo,po.timelines),N.push({instruction:po,player:Gi,element:fo}),po.queriedElements.forEach(sa=>Ns(G,sa,[]).push(Gi)),po.preStyleProps.forEach((sa,Wc)=>{if(sa.size){let qa=re.get(Wc);qa||re.set(Wc,qa=new Set),sa.forEach((mf,$u)=>qa.add($u))}}),po.postStyleProps.forEach((sa,Wc)=>{let qa=ge.get(Wc);qa||ge.set(Wc,qa=new Set),sa.forEach((mf,$u)=>qa.add($u))})});if(Rl.length){const Ir=[];Rl.forEach(Or=>{Ir.push(function Ml(u,o){return new m.vHH(3505,!1)}())}),zc.forEach(Or=>Or.destroy()),this.reportError(Ir)}const ho=new Map,Wa=new Map;N.forEach(Ir=>{const Or=Ir.element;h.has(Or)&&(Wa.set(Or,Or),this._beforeAnimationBuild(Ir.player.namespaceId,Ir.instruction,ho))}),y.forEach(Ir=>{const Or=Ir.element;this._getPreviousPlayers(Or,!1,Ir.namespaceId,Ir.triggerName,null).forEach(Gi=>{Ns(ho,Or,[]).push(Gi),Gi.destroy()})});const hh=fi.filter(Ir=>Ed(Ir,re,ge)),hl=new Map;pg(hl,this.driver,ns,ge,Es.l3).forEach(Ir=>{Ed(Ir,re,ge)&&hh.push(Ir)});const Md=new Map;dn.forEach((Ir,Or)=>{pg(Md,this.driver,new Set(Ir),re,Es.k1)}),hh.forEach(Ir=>{var Or,Jr;const Gi=hl.get(Ir),fo=Md.get(Ir);hl.set(Ir,new Map([...Array.from(null!==(Or=null==Gi?void 0:Gi.entries())&&void 0!==Or?Or:[]),...Array.from(null!==(Jr=null==fo?void 0:fo.entries())&&void 0!==Jr?Jr:[])]))});const Bu=[],ph=[],pf={};N.forEach(Ir=>{const{element:Or,player:Jr,instruction:Gi}=Ir;if(h.has(Or)){if(gt.has(Or))return Jr.onDestroy(()=>Uc(Or,Gi.toStyles)),Jr.disabled=!0,Jr.overrideTotalTime(Gi.totalTime),void y.push(Jr);let fo=pf;if(Wa.size>1){let Ka=Or;const Gc=[];for(;Ka=Ka.parentNode;){const po=Wa.get(Ka);if(po){fo=po;break}Gc.push(Ka)}Gc.forEach(po=>Wa.set(po,fo))}const xl=this._buildAnimation(Jr.namespaceId,Gi,ho,T,Md,hl);if(Jr.setRealPlayer(xl),fo===pf)Bu.push(Jr);else{const Ka=this.playersByElement.get(fo);Ka&&Ka.length&&(Jr.parentPlayer=zl(Ka)),y.push(Jr)}}else Vc(Or,Gi.fromStyles),Jr.onDestroy(()=>Uc(Or,Gi.toStyles)),ph.push(Jr),gt.has(Or)&&y.push(Jr)}),ph.forEach(Ir=>{const Or=T.get(Ir.element);if(Or&&Or.length){const Jr=zl(Or);Ir.setRealPlayer(Jr)}}),y.forEach(Ir=>{Ir.parentPlayer?Ir.syncPlayerEvents(Ir.parentPlayer):Ir.destroy()});for(let Ir=0;Ir<fi.length;Ir++){const Or=fi[Ir],Jr=Or[ul];if(Hc(Or,Gf),Jr&&Jr.hasAnimation)continue;let Gi=[];if(G.size){let xl=G.get(Or);xl&&xl.length&&Gi.push(...xl);let Ka=this.driver.query(Or,Xd,!0);for(let Gc=0;Gc<Ka.length;Gc++){let po=G.get(Ka[Gc]);po&&po.length&&Gi.push(...po)}}const fo=Gi.filter(xl=>!xl.destroyed);fo.length?wm(this,Or,fo):this.processLeaveNode(Or)}return fi.length=0,Bu.forEach(Ir=>{this.players.push(Ir),Ir.onDone(()=>{Ir.destroy();const Or=this.players.indexOf(Ir);this.players.splice(Or,1)}),Ir.play()}),Bu}elementContainsData(o,a){let h=!1;const y=a[ul];return y&&y.setForRemoval&&(h=!0),this.playersByElement.has(a)&&(h=!0),this.playersByQueriedElement.has(a)&&(h=!0),this.statesByElement.has(a)&&(h=!0),this._fetchNamespace(o).elementContainsData(a)||h}afterFlush(o){this._flushFns.push(o)}afterFlushAnimationsDone(o){this._whenQuietFns.push(o)}_getPreviousPlayers(o,a,h,y,T){let N=[];if(a){const G=this.playersByQueriedElement.get(o);G&&(N=G)}else{const G=this.playersByElement.get(o);if(G){const re=!T||T==dl;G.forEach(ge=>{ge.queued||!re&&ge.triggerName!=y||N.push(ge)})}}return(h||y)&&(N=N.filter(G=>!(h&&h!=G.namespaceId||y&&y!=G.triggerName))),N}_beforeAnimationBuild(o,a,h){const T=a.element,N=a.isRemovalTransition?void 0:o,G=a.isRemovalTransition?void 0:a.triggerName;for(const re of a.timelines){const ge=re.element,gt=ge!==T,wt=Ns(h,ge,[]);this._getPreviousPlayers(ge,gt,N,G,a.toState).forEach(dn=>{const gn=dn.getRealPlayer();gn.beforeDestroy&&gn.beforeDestroy(),dn.destroy(),wt.push(dn)})}Vc(T,a.fromStyles)}_buildAnimation(o,a,h,y,T,N){const G=a.triggerName,re=a.element,ge=[],gt=new Set,wt=new Set,Vt=a.timelines.map(gn=>{const Hn=gn.element;gt.add(Hn);const fi=Hn[ul];if(fi&&fi.removedBeforeQueried)return new Es.ZN(gn.duration,gn.delay);const Fi=Hn!==re,ns=function gg(u){const o=[];return dp(u,o),o}((h.get(Hn)||Ry).map(ho=>ho.getRealPlayer())).filter(ho=>!!ho.element&&ho.element===Hn),io=T.get(Hn),Po=N.get(Hn),zc=Gh(0,this._normalizer,0,gn.keyframes,io,Po),Rl=this._buildPlayer(gn,zc,ns);if(gn.subTimeline&&y&&wt.add(Hn),Fi){const ho=new cp(o,G,Hn);ho.setRealPlayer(Rl),ge.push(ho)}return Rl});ge.forEach(gn=>{Ns(this.playersByQueriedElement,gn.element,[]).push(gn),gn.onDone(()=>function Em(u,o,a){let h=u.get(o);if(h){if(h.length){const y=h.indexOf(a);h.splice(y,1)}0==h.length&&u.delete(o)}return h}(this.playersByQueriedElement,gn.element,gn))}),gt.forEach(gn=>Gl(gn,ou));const dn=zl(Vt);return dn.onDestroy(()=>{gt.forEach(gn=>Hc(gn,ou)),Uc(re,a.toStyles)}),wt.forEach(gn=>{Ns(y,gn,[]).push(dn)}),dn}_buildPlayer(o,a,h){return a.length>0?this.driver.animate(o.element,a,o.duration,o.delay,o.easing,h):new Es.ZN(o.duration,o.delay)}}class cp{constructor(o,a,h){this.namespaceId=o,this.triggerName=a,this.element=h,this._player=new Es.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(o){this._containsRealPlayer||(this._player=o,this._queuedCallbacks.forEach((a,h)=>{a.forEach(y=>hd(o,h,void 0,y))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(o.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(o){this.totalTime=o}syncPlayerEvents(o){const a=this._player;a.triggerCallback&&o.onStart(()=>a.triggerCallback("start")),o.onDone(()=>this.finish()),o.onDestroy(()=>this.destroy())}_queueEvent(o,a){Ns(this._queuedCallbacks,o,[]).push(a)}onDone(o){this.queued&&this._queueEvent("done",o),this._player.onDone(o)}onStart(o){this.queued&&this._queueEvent("start",o),this._player.onStart(o)}onDestroy(o){this.queued&&this._queueEvent("destroy",o),this._player.onDestroy(o)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(o){this.queued||this._player.setPosition(o)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(o){const a=this._player;a.triggerCallback&&a.triggerCallback(o)}}function oh(u){return u&&1===u.nodeType}function up(u,o){const a=u.style.display;return u.style.display=null!=o?o:"none",a}function pg(u,o,a,h,y){const T=[];a.forEach(re=>T.push(up(re)));const N=[];h.forEach((re,ge)=>{const gt=new Map;re.forEach(wt=>{const Vt=o.computeStyle(ge,wt,y);gt.set(wt,Vt),(!Vt||0==Vt.length)&&(ge[ul]=uf,N.push(ge))}),u.set(ge,gt)});let G=0;return a.forEach(re=>up(re,T[G++])),N}function ah(u,o){const a=new Map;if(u.forEach(G=>a.set(G,[])),0==o.length)return a;const h=1,y=new Set(o),T=new Map;function N(G){if(!G)return h;let re=T.get(G);if(re)return re;const ge=G.parentNode;return re=a.has(ge)?ge:y.has(ge)?h:N(ge),T.set(G,re),re}return o.forEach(G=>{const re=N(G);re!==h&&a.get(re).push(G)}),a}function Gl(u,o){var a;null===(a=u.classList)||void 0===a||a.add(o)}function Hc(u,o){var a;null===(a=u.classList)||void 0===a||a.remove(o)}function wm(u,o,a){zl(a).onDone(()=>u.processLeaveNode(o))}function dp(u,o){for(let a=0;a<u.length;a++){const h=u[a];h instanceof Es.ZE?dp(h.players,o):o.push(h)}}function Ed(u,o,a){const h=a.get(u);if(!h)return!1;let y=o.get(u);return y?h.forEach(T=>y.add(T)):o.set(u,h),a.delete(u),!0}class yc{constructor(o,a,h){this.bodyNode=o,this._driver=a,this._normalizer=h,this._triggerCache={},this.onRemovalComplete=(y,T)=>{},this._transitionEngine=new xy(o,a,h),this._timelineEngine=new sp(o,a,h),this._transitionEngine.onRemovalComplete=(y,T)=>this.onRemovalComplete(y,T)}registerTrigger(o,a,h,y,T){const N=o+"-"+y;let G=this._triggerCache[N];if(!G){const re=[],ge=[],gt=tf(this._driver,T,re,ge);if(re.length)throw function em(u,o){return new m.vHH(3404,!1)}();G=function fg(u,o,a){return new _d(u,o,a)}(y,gt,this._normalizer),this._triggerCache[N]=G}this._transitionEngine.registerTrigger(a,y,G)}register(o,a){this._transitionEngine.register(o,a)}destroy(o,a){this._transitionEngine.destroy(o,a)}onInsert(o,a,h,y){this._transitionEngine.insertNode(o,a,h,y)}onRemove(o,a,h,y){this._transitionEngine.removeNode(o,a,y||!1,h)}disableAnimations(o,a){this._transitionEngine.markElementAsDisabled(o,a)}process(o,a,h,y){if("@"==h.charAt(0)){const[T,N]=Xp(h);this._timelineEngine.command(T,a,N,y)}else this._transitionEngine.trigger(o,a,h,y)}listen(o,a,h,y,T){if("@"==h.charAt(0)){const[N,G]=Xp(h);return this._timelineEngine.listen(N,a,G,T)}return this._transitionEngine.listen(o,a,h,y,T)}flush(o=-1){this._transitionEngine.flush(o)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let wd=(()=>{class u{constructor(a,h,y){this._element=a,this._startStyles=h,this._endStyles=y,this._state=0;let T=u.initialStylesByElement.get(a);T||u.initialStylesByElement.set(a,T=new Map),this._initialStyles=T}start(){this._state<1&&(this._startStyles&&Uc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Uc(this._element,this._initialStyles),this._endStyles&&(Uc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(u.initialStylesByElement.delete(this._element),this._startStyles&&(Vc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vc(this._element,this._endStyles),this._endStyles=null),Uc(this._element,this._initialStyles),this._state=3)}}return u.initialStylesByElement=new WeakMap,u})();function du(u){let o=null;return u.forEach((a,h)=>{(function Im(u){return"display"===u||"position"===u})(h)&&(o=o||new Map,o.set(h,a))}),o}class lh{constructor(o,a,h,y){this.element=o,this.keyframes=a,this.options=h,this._specialStyles=y,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=h.duration,this._delay=h.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(o=>o()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const o=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,o,this.options),this._finalKeyframe=o.length?o[o.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(o){const a=[];return o.forEach(h=>{a.push(Object.fromEntries(h))}),a}_triggerWebAnimation(o,a,h){return o.animate(this._convertKeyframesToObject(a),h)}onStart(o){this._originalOnStartFns.push(o),this._onStartFns.push(o)}onDone(o){this._originalOnDoneFns.push(o),this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(o=>o()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}setPosition(o){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=o*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const o=new Map;this.hasStarted()&&this._finalKeyframe.forEach((h,y)=>{"offset"!==y&&o.set(y,this._finished?h:hm(this.element,y))}),this.currentSnapshot=o}triggerCallback(o){const a="start"===o?this._onStartFns:this._onDoneFns;a.forEach(h=>h()),a.length=0}}class bm{validateStyleProperty(o){return!0}validateAnimatableStyleProperty(o){return!0}matchesElement(o,a){return!1}containsElement(o,a){return sm(o,a)}getParentElement(o){return gc(o)}query(o,a,h){return Jp(o,a,h)}computeStyle(o,a,h){return window.getComputedStyle(o)[a]}animate(o,a,h,y,T,N=[]){const re={duration:h,delay:y,fill:0==y?"both":"forwards"};T&&(re.easing=T);const ge=new Map,gt=N.filter(dn=>dn instanceof lh);(function Yf(u,o){return 0===u||0===o})(h,y)&&gt.forEach(dn=>{dn.currentSnapshot.forEach((gn,Hn)=>ge.set(Hn,gn))});let wt=function Kf(u){return u.length?u[0]instanceof Map?u:u.map(o=>cm(o)):[]}(a).map(dn=>Mu(dn));wt=function ig(u,o,a){if(a.size&&o.length){let h=o[0],y=[];if(a.forEach((T,N)=>{h.has(N)||y.push(N),h.set(N,T)}),y.length)for(let T=1;T<o.length;T++){let N=o[T];y.forEach(G=>N.set(G,hm(u,G)))}}return o}(o,wt,ge);const Vt=function yg(u,o){let a=null,h=null;return Array.isArray(o)&&o.length?(a=du(o[0]),o.length>1&&(h=du(o[o.length-1]))):o instanceof Map&&(a=du(o)),a||h?new wd(u,a,h):null}(o,wt);return new lh(o,wt,re,Vt)}}var Ny=$(6895);let ch=(()=>{class u extends Es._j{constructor(a,h){super(),this._nextAnimationId=0,this._renderer=a.createRenderer(h.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(a){const h=this._nextAnimationId.toString();this._nextAnimationId++;const y=Array.isArray(a)?(0,Es.vP)(a):a;return uh(this._renderer,null,h,"register",[y]),new _g(h,this._renderer)}}return u.\u0275fac=function(a){return new(a||u)(m.LFG(m.FYo),m.LFG(Ny.K0))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();class _g extends Es.LC{constructor(o,a){super(),this._id=o,this._renderer=a}create(o,a){return new vg(this._id,o,a||{},this._renderer)}}class vg{constructor(o,a,h,y){this.id=o,this.element=a,this._renderer=y,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",h)}_listen(o,a){return this._renderer.listen(this.element,`@@${this.id}:${o}`,a)}_command(o,...a){return uh(this._renderer,this.element,this.id,o,a)}onDone(o){this._listen("done",o)}onStart(o){this._listen("start",o)}onDestroy(o){this._listen("destroy",o)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(o){this._command("setPosition",o)}getPosition(){var o,a;return null!==(o=null===(a=this._renderer.engine.players[+this.id])||void 0===a?void 0:a.getPosition())&&void 0!==o?o:0}}function uh(u,o,a,h,y){return u.setProperty(o,`@@${a}:${h}`,y)}const _c="@.disabled";let Id=(()=>{class u{constructor(a,h,y){this.delegate=a,this.engine=h,this._zone=y,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),h.onRemovalComplete=(T,N)=>{const G=null==N?void 0:N.parentNode(T);G&&N.removeChild(G,T)}}createRenderer(a,h){const T=this.delegate.createRenderer(a,h);if(!(a&&h&&h.data&&h.data.animation)){let gt=this._rendererCache.get(T);return gt||(gt=new ia("",T,this.engine,()=>this._rendererCache.delete(T)),this._rendererCache.set(T,gt)),gt}const N=h.id,G=h.id+"-"+this._currentId;this._currentId++,this.engine.register(G,a);const re=gt=>{Array.isArray(gt)?gt.forEach(re):this.engine.registerTrigger(N,G,a,gt.name,gt)};return h.data.animation.forEach(re),new bd(this,G,T,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(a,h,y){a>=0&&a<this._microtaskId?this._zone.run(()=>h(y)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(T=>{const[N,G]=T;N(G)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([h,y]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return u.\u0275fac=function(a){return new(a||u)(m.LFG(m.FYo),m.LFG(yc),m.LFG(m.R0b))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})();class ia{constructor(o,a,h,y){this.namespaceId=o,this.delegate=a,this.engine=h,this._onDestroy=y,this.destroyNode=this.delegate.destroyNode?T=>a.destroyNode(T):null}get data(){return this.delegate.data}destroy(){var o;this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),null===(o=this._onDestroy)||void 0===o||o.call(this)}createElement(o,a){return this.delegate.createElement(o,a)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}appendChild(o,a){this.delegate.appendChild(o,a),this.engine.onInsert(this.namespaceId,a,o,!1)}insertBefore(o,a,h,y=!0){this.delegate.insertBefore(o,a,h),this.engine.onInsert(this.namespaceId,a,o,y)}removeChild(o,a,h){this.engine.onRemove(this.namespaceId,a,this.delegate,h)}selectRootElement(o,a){return this.delegate.selectRootElement(o,a)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,a,h,y){this.delegate.setAttribute(o,a,h,y)}removeAttribute(o,a,h){this.delegate.removeAttribute(o,a,h)}addClass(o,a){this.delegate.addClass(o,a)}removeClass(o,a){this.delegate.removeClass(o,a)}setStyle(o,a,h,y){this.delegate.setStyle(o,a,h,y)}removeStyle(o,a,h){this.delegate.removeStyle(o,a,h)}setProperty(o,a,h){"@"==a.charAt(0)&&a==_c?this.disableAnimations(o,!!h):this.delegate.setProperty(o,a,h)}setValue(o,a){this.delegate.setValue(o,a)}listen(o,a,h){return this.delegate.listen(o,a,h)}disableAnimations(o,a){this.engine.disableAnimations(o,a)}}class bd extends ia{constructor(o,a,h,y,T){super(a,h,y,T),this.factory=o,this.namespaceId=a}setProperty(o,a,h){"@"==a.charAt(0)?"."==a.charAt(1)&&a==_c?this.disableAnimations(o,h=void 0===h||!!h):this.engine.process(this.namespaceId,o,a.slice(1),h):this.delegate.setProperty(o,a,h)}listen(o,a,h){if("@"==a.charAt(0)){const y=function hf(u){switch(u){case"body":return document.body;case"document":return document;case"window":return window;default:return u}}(o);let T=a.slice(1),N="";return"@"!=T.charAt(0)&&([T,N]=function Wl(u){const o=u.indexOf(".");return[u.substring(0,o),u.slice(o+1)]}(T)),this.engine.listen(this.namespaceId,y,T,N,G=>{this.factory.scheduleListenerCallback(G._data||-1,h,G)})}return this.delegate.listen(o,a,h)}}const Fu=[{provide:Es._j,useClass:ch},{provide:hg,useFactory:function Cd(){return new My}},{provide:yc,useClass:(()=>{class u extends yc{constructor(a,h,y,T){super(a.body,h,y)}ngOnDestroy(){this.flush()}}return u.\u0275fac=function(a){return new(a||u)(m.LFG(Ny.K0),m.LFG(zf),m.LFG(hg),m.LFG(m.z2F))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})()},{provide:m.FYo,useFactory:function Dd(u,o,a){return new Id(u,o,a)},deps:[g.se,yc,m.R0b]}],Lu=[{provide:zf,useFactory:()=>new bm},{provide:m.QbO,useValue:"BrowserAnimations"},...Fu],Td=[{provide:zf,useClass:Su},{provide:m.QbO,useValue:"NoopAnimations"},...Fu];let dh=(()=>{class u{static withConfig(a){return{ngModule:u,providers:a.disableAnimations?Td:Lu}}}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:Lu,imports:[g.b2]}),u})();(0,m.G48)(),(0,g.Cg)(Fe,{providers:[{provide:Y.wN,useClass:ie.r4},(0,m.RIp)(ie.Pc.forRoot({}),dh),(0,m.RIp)(he.hO.initializeApp({apiKey:"AIzaSyCdRRnBbX8R0qg3xauDHItMVmvdDAdzlxk",authDomain:"ionic-login-a9669.firebaseapp.com",projectId:"ionic-login-a9669",storageBucket:"ionic-login-a9669.appspot.com",messagingSenderId:"698057746644",appId:"1:698057746644:web:7558813a2e58ae92c73341",locationId:"us-central"})),(0,m.RIp)(be.ww),(0,m.RIp)(je.yb),(0,m.RIp)(Ne.TE),(0,m.RIp)(gy),(0,Y.bU)(de)]})},1135:(cn,at,$)=>{"use strict";$.d(at,{X:()=>g});var m=$(7579);class g extends m.x{constructor(ie){super(),this._value=ie}get value(){return this.getValue()}_subscribe(ie){const Pe=super._subscribe(ie);return!Pe.closed&&ie.next(this._value),Pe}getValue(){const{hasError:ie,thrownError:Pe,_value:Ae}=this;if(ie)throw Pe;return this._throwIfClosed(),Ae}next(ie){super.next(this._value=ie)}}},9751:(cn,at,$)=>{"use strict";$.d(at,{y:()=>de});var m=$(930),g=$(727),Y=$(8822),ie=$(9635),Pe=$(2416),Ae=$(576),fe=$(2806);let de=(()=>{class be{constructor(je){je&&(this._subscribe=je)}lift(je){const Ue=new be;return Ue.source=this,Ue.operator=je,Ue}subscribe(je,Ue,Xe){const Me=function he(be){return be&&be instanceof m.Lv||function De(be){return be&&(0,Ae.m)(be.next)&&(0,Ae.m)(be.error)&&(0,Ae.m)(be.complete)}(be)&&(0,g.Nn)(be)}(je)?je:new m.Hp(je,Ue,Xe);return(0,fe.x)(()=>{const{operator:Se,source:oe}=this;Me.add(Se?Se.call(Me,oe):oe?this._subscribe(Me):this._trySubscribe(Me))}),Me}_trySubscribe(je){try{return this._subscribe(je)}catch(Ue){je.error(Ue)}}forEach(je,Ue){return new(Ue=Fe(Ue))((Xe,Me)=>{const Se=new m.Hp({next:oe=>{try{je(oe)}catch(et){Me(et),Se.unsubscribe()}},error:Me,complete:Xe});this.subscribe(Se)})}_subscribe(je){var Ue;return null===(Ue=this.source)||void 0===Ue?void 0:Ue.subscribe(je)}[Y.L](){return this}pipe(...je){return(0,ie.U)(je)(this)}toPromise(je){return new(je=Fe(je))((Ue,Xe)=>{let Me;this.subscribe(Se=>Me=Se,Se=>Xe(Se),()=>Ue(Me))})}}return be.create=Ne=>new be(Ne),be})();function Fe(be){var Ne;return null!==(Ne=null!=be?be:Pe.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(cn,at,$)=>{"use strict";$.d(at,{x:()=>fe});var m=$(9751),g=$(727);const ie=(0,$(3888).d)(Fe=>function(){Fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=$(8737),Ae=$(2806);let fe=(()=>{class Fe extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(he){const be=new de(this,this);return be.operator=he,be}_throwIfClosed(){if(this.closed)throw new ie}next(he){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const be of this.currentObservers)be.next(he)}})}error(he){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=he;const{observers:be}=this;for(;be.length;)be.shift().error(he)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:he}=this;for(;he.length;)he.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var he;return(null===(he=this.observers)||void 0===he?void 0:he.length)>0}_trySubscribe(he){return this._throwIfClosed(),super._trySubscribe(he)}_subscribe(he){return this._throwIfClosed(),this._checkFinalizedStatuses(he),this._innerSubscribe(he)}_innerSubscribe(he){const{hasError:be,isStopped:Ne,observers:je}=this;return be||Ne?g.Lc:(this.currentObservers=null,je.push(he),new g.w0(()=>{this.currentObservers=null,(0,Pe.P)(je,he)}))}_checkFinalizedStatuses(he){const{hasError:be,thrownError:Ne,isStopped:je}=this;be?he.error(Ne):je&&he.complete()}asObservable(){const he=new m.y;return he.source=this,he}}return Fe.create=(De,he)=>new de(De,he),Fe})();class de extends fe{constructor(De,he){super(),this.destination=De,this.source=he}next(De){var he,be;null===(be=null===(he=this.destination)||void 0===he?void 0:he.next)||void 0===be||be.call(he,De)}error(De){var he,be;null===(be=null===(he=this.destination)||void 0===he?void 0:he.error)||void 0===be||be.call(he,De)}complete(){var De,he;null===(he=null===(De=this.destination)||void 0===De?void 0:De.complete)||void 0===he||he.call(De)}_subscribe(De){var he,be;return null!==(be=null===(he=this.source)||void 0===he?void 0:he.subscribe(De))&&void 0!==be?be:g.Lc}}},930:(cn,at,$)=>{"use strict";$.d(at,{Hp:()=>Xe,Lv:()=>be});var m=$(576),g=$(727),Y=$(2416),ie=$(7849),Pe=$(5032);const Ae=Fe("C",void 0,void 0);function Fe(Le,Re,Je){return{kind:Le,value:Re,error:Je}}var De=$(3410),he=$(2806);class be extends g.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,g.Nn)(Re)&&Re.add(this)):this.destination=et}static create(Re,Je,mt){return new Xe(Re,Je,mt)}next(Re){this.isStopped?oe(function de(Le){return Fe("N",Le,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?oe(function fe(Le){return Fe("E",void 0,Le)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?oe(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ne=Function.prototype.bind;function je(Le,Re){return Ne.call(Le,Re)}class Ue{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Je}=this;if(Je.next)try{Je.next(Re)}catch(mt){Me(mt)}}error(Re){const{partialObserver:Je}=this;if(Je.error)try{Je.error(Re)}catch(mt){Me(mt)}else Me(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Je){Me(Je)}}}class Xe extends be{constructor(Re,Je,mt){let Ye;if(super(),(0,m.m)(Re)||!Re)Ye={next:null!=Re?Re:void 0,error:null!=Je?Je:void 0,complete:null!=mt?mt:void 0};else{let ve;this&&Y.v.useDeprecatedNextContext?(ve=Object.create(Re),ve.unsubscribe=()=>this.unsubscribe(),Ye={next:Re.next&&je(Re.next,ve),error:Re.error&&je(Re.error,ve),complete:Re.complete&&je(Re.complete,ve)}):Ye=Re}this.destination=new Ue(Ye)}}function Me(Le){Y.v.useDeprecatedSynchronousErrorHandling?(0,he.O)(Le):(0,ie.h)(Le)}function oe(Le,Re){const{onStoppedNotification:Je}=Y.v;Je&&De.z.setTimeout(()=>Je(Le,Re))}const et={closed:!0,next:Pe.Z,error:function Se(Le){throw Le},complete:Pe.Z}},727:(cn,at,$)=>{"use strict";$.d(at,{Lc:()=>Ae,w0:()=>Pe,Nn:()=>fe});var m=$(576);const Y=(0,$(3888).d)(Fe=>function(he){Fe(this),this.message=he?`${he.length} errors occurred during unsubscription:\n${he.map((be,Ne)=>`${Ne+1}) ${be.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=he});var ie=$(8737);class Pe{constructor(De){this.initialTeardown=De,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let De;if(!this.closed){this.closed=!0;const{_parentage:he}=this;if(he)if(this._parentage=null,Array.isArray(he))for(const je of he)je.remove(this);else he.remove(this);const{initialTeardown:be}=this;if((0,m.m)(be))try{be()}catch(je){De=je instanceof Y?je.errors:[je]}const{_finalizers:Ne}=this;if(Ne){this._finalizers=null;for(const je of Ne)try{de(je)}catch(Ue){De=null!=De?De:[],Ue instanceof Y?De=[...De,...Ue.errors]:De.push(Ue)}}if(De)throw new Y(De)}}add(De){var he;if(De&&De!==this)if(this.closed)de(De);else{if(De instanceof Pe){if(De.closed||De._hasParent(this))return;De._addParent(this)}(this._finalizers=null!==(he=this._finalizers)&&void 0!==he?he:[]).push(De)}}_hasParent(De){const{_parentage:he}=this;return he===De||Array.isArray(he)&&he.includes(De)}_addParent(De){const{_parentage:he}=this;this._parentage=Array.isArray(he)?(he.push(De),he):he?[he,De]:De}_removeParent(De){const{_parentage:he}=this;he===De?this._parentage=null:Array.isArray(he)&&(0,ie.P)(he,De)}remove(De){const{_finalizers:he}=this;he&&(0,ie.P)(he,De),De instanceof Pe&&De._removeParent(this)}}Pe.EMPTY=(()=>{const Fe=new Pe;return Fe.closed=!0,Fe})();const Ae=Pe.EMPTY;function fe(Fe){return Fe instanceof Pe||Fe&&"closed"in Fe&&(0,m.m)(Fe.remove)&&(0,m.m)(Fe.add)&&(0,m.m)(Fe.unsubscribe)}function de(Fe){(0,m.m)(Fe)?Fe():Fe.unsubscribe()}},2416:(cn,at,$)=>{"use strict";$.d(at,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(cn,at,$)=>{"use strict";$.d(at,{c:()=>Ae});var m=$(9751),g=$(727),Y=$(8343),ie=$(5403),Pe=$(4482);class Ae extends m.y{constructor(de,Fe){super(),this.source=de,this.subjectFactory=Fe,this._subject=null,this._refCount=0,this._connection=null,(0,Pe.A)(de)&&(this.lift=de.lift)}_subscribe(de){return this.getSubject().subscribe(de)}getSubject(){const de=this._subject;return(!de||de.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:de}=this;this._subject=this._connection=null,null==de||de.unsubscribe()}connect(){let de=this._connection;if(!de){de=this._connection=new g.w0;const Fe=this.getSubject();de.add(this.source.subscribe((0,ie.x)(Fe,void 0,()=>{this._teardown(),Fe.complete()},De=>{this._teardown(),Fe.error(De)},()=>this._teardown()))),de.closed&&(this._connection=null,de=g.w0.EMPTY)}return de}refCount(){return(0,Y.x)()(this)}}},9841:(cn,at,$)=>{"use strict";$.d(at,{a:()=>De});var m=$(9751),g=$(4742),Y=$(8996),ie=$(4671),Pe=$(3268),Ae=$(3269),fe=$(1810),de=$(5403),Fe=$(9672);function De(...Ne){const je=(0,Ae.yG)(Ne),Ue=(0,Ae.jO)(Ne),{args:Xe,keys:Me}=(0,g.D)(Ne);if(0===Xe.length)return(0,Y.D)([],je);const Se=new m.y(function he(Ne,je,Ue=ie.y){return Xe=>{be(je,()=>{const{length:Me}=Ne,Se=new Array(Me);let oe=Me,et=Me;for(let Le=0;Le<Me;Le++)be(je,()=>{const Re=(0,Y.D)(Ne[Le],je);let Je=!1;Re.subscribe((0,de.x)(Xe,mt=>{Se[Le]=mt,Je||(Je=!0,et--),et||Xe.next(Ue(Se.slice()))},()=>{--oe||Xe.complete()}))},Xe)},Xe)}}(Xe,je,Me?oe=>(0,fe.n)(Me,oe):ie.y));return Ue?Se.pipe((0,Pe.Z)(Ue)):Se}function be(Ne,je,Ue){Ne?(0,Fe.f)(Ue,Ne,je):je()}},7272:(cn,at,$)=>{"use strict";$.d(at,{z:()=>Pe});var m=$(8189),Y=$(3269),ie=$(8996);function Pe(...Ae){return function g(){return(0,m.J)(1)}()((0,ie.D)(Ae,(0,Y.yG)(Ae)))}},9770:(cn,at,$)=>{"use strict";$.d(at,{P:()=>Y});var m=$(9751),g=$(8421);function Y(ie){return new m.y(Pe=>{(0,g.Xf)(ie()).subscribe(Pe)})}},515:(cn,at,$)=>{"use strict";$.d(at,{E:()=>g});const g=new($(9751).y)(Pe=>Pe.complete())},4128:(cn,at,$)=>{"use strict";$.d(at,{D:()=>de});var m=$(9751),g=$(4742),Y=$(8421),ie=$(3269),Pe=$(5403),Ae=$(3268),fe=$(1810);function de(...Fe){const De=(0,ie.jO)(Fe),{args:he,keys:be}=(0,g.D)(Fe),Ne=new m.y(je=>{const{length:Ue}=he;if(!Ue)return void je.complete();const Xe=new Array(Ue);let Me=Ue,Se=Ue;for(let oe=0;oe<Ue;oe++){let et=!1;(0,Y.Xf)(he[oe]).subscribe((0,Pe.x)(je,Le=>{et||(et=!0,Se--),Xe[oe]=Le},()=>Me--,void 0,()=>{(!Me||!et)&&(Se||je.next(be?(0,fe.n)(be,Xe):Xe),je.complete())}))}});return De?Ne.pipe((0,Ae.Z)(De)):Ne}},8996:(cn,at,$)=>{"use strict";$.d(at,{D:()=>Re});var m=$(8421),g=$(5363),Y=$(9468),Ae=$(9751),de=$(2202),Fe=$(576),De=$(9672);function be(Je,mt){if(!Je)throw new Error("Iterable cannot be null");return new Ae.y(Ye=>{(0,De.f)(Ye,mt,()=>{const ve=Je[Symbol.asyncIterator]();(0,De.f)(Ye,mt,()=>{ve.next().then(It=>{It.done?Ye.complete():Ye.next(It.value)})},0,!0)})})}var Ne=$(3670),je=$(8239),Ue=$(1144),Xe=$(6495),Me=$(2206),Se=$(4532),oe=$(3260);function Re(Je,mt){return mt?function Le(Je,mt){if(null!=Je){if((0,Ne.c)(Je))return function ie(Je,mt){return(0,m.Xf)(Je).pipe((0,Y.R)(mt),(0,g.Q)(mt))}(Je,mt);if((0,Ue.z)(Je))return function fe(Je,mt){return new Ae.y(Ye=>{let ve=0;return mt.schedule(function(){ve===Je.length?Ye.complete():(Ye.next(Je[ve++]),Ye.closed||this.schedule())})})}(Je,mt);if((0,je.t)(Je))return function Pe(Je,mt){return(0,m.Xf)(Je).pipe((0,Y.R)(mt),(0,g.Q)(mt))}(Je,mt);if((0,Me.D)(Je))return be(Je,mt);if((0,Xe.T)(Je))return function he(Je,mt){return new Ae.y(Ye=>{let ve;return(0,De.f)(Ye,mt,()=>{ve=Je[de.h](),(0,De.f)(Ye,mt,()=>{let It,ze;try{({value:It,done:ze}=ve.next())}catch(lt){return void Ye.error(lt)}ze?Ye.complete():Ye.next(It)},0,!0)}),()=>(0,Fe.m)(null==ve?void 0:ve.return)&&ve.return()})}(Je,mt);if((0,oe.L)(Je))return function et(Je,mt){return be((0,oe.Q)(Je),mt)}(Je,mt)}throw(0,Se.z)(Je)}(Je,mt):(0,m.Xf)(Je)}},4968:(cn,at,$)=>{"use strict";$.d(at,{R:()=>De});var m=$(8421),g=$(9751),Y=$(5577),ie=$(1144),Pe=$(576),Ae=$(3268);const fe=["addListener","removeListener"],de=["addEventListener","removeEventListener"],Fe=["on","off"];function De(Ue,Xe,Me,Se){if((0,Pe.m)(Me)&&(Se=Me,Me=void 0),Se)return De(Ue,Xe,Me).pipe((0,Ae.Z)(Se));const[oe,et]=function je(Ue){return(0,Pe.m)(Ue.addEventListener)&&(0,Pe.m)(Ue.removeEventListener)}(Ue)?de.map(Le=>Re=>Ue[Le](Xe,Re,Me)):function be(Ue){return(0,Pe.m)(Ue.addListener)&&(0,Pe.m)(Ue.removeListener)}(Ue)?fe.map(he(Ue,Xe)):function Ne(Ue){return(0,Pe.m)(Ue.on)&&(0,Pe.m)(Ue.off)}(Ue)?Fe.map(he(Ue,Xe)):[];if(!oe&&(0,ie.z)(Ue))return(0,Y.z)(Le=>De(Le,Xe,Me))((0,m.Xf)(Ue));if(!oe)throw new TypeError("Invalid event target");return new g.y(Le=>{const Re=(...Je)=>Le.next(1<Je.length?Je:Je[0]);return oe(Re),()=>et(Re)})}function he(Ue,Xe){return Me=>Se=>Ue[Me](Xe,Se)}},8421:(cn,at,$)=>{"use strict";$.d(at,{Xf:()=>Ne});var m=$(655),g=$(1144),Y=$(8239),ie=$(9751),Pe=$(3670),Ae=$(2206),fe=$(4532),de=$(6495),Fe=$(3260),De=$(576),he=$(7849),be=$(8822);function Ne(Le){if(Le instanceof ie.y)return Le;if(null!=Le){if((0,Pe.c)(Le))return function je(Le){return new ie.y(Re=>{const Je=Le[be.L]();if((0,De.m)(Je.subscribe))return Je.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,g.z)(Le))return function Ue(Le){return new ie.y(Re=>{for(let Je=0;Je<Le.length&&!Re.closed;Je++)Re.next(Le[Je]);Re.complete()})}(Le);if((0,Y.t)(Le))return function Xe(Le){return new ie.y(Re=>{Le.then(Je=>{Re.closed||(Re.next(Je),Re.complete())},Je=>Re.error(Je)).then(null,he.h)})}(Le);if((0,Ae.D)(Le))return Se(Le);if((0,de.T)(Le))return function Me(Le){return new ie.y(Re=>{for(const Je of Le)if(Re.next(Je),Re.closed)return;Re.complete()})}(Le);if((0,Fe.L)(Le))return function oe(Le){return Se((0,Fe.Q)(Le))}(Le)}throw(0,fe.z)(Le)}function Se(Le){return new ie.y(Re=>{(function et(Le,Re){var Je,mt,Ye,ve;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Je=(0,m.KL)(Le);!(mt=yield Je.next()).done;)if(Re.next(mt.value),Re.closed)return}catch(It){Ye={error:It}}finally{try{mt&&!mt.done&&(ve=Je.return)&&(yield ve.call(Je))}finally{if(Ye)throw Ye.error}}Re.complete()})})(Le,Re).catch(Je=>Re.error(Je))})}},6451:(cn,at,$)=>{"use strict";$.d(at,{T:()=>Ae});var m=$(8189),g=$(8421),Y=$(515),ie=$(3269),Pe=$(8996);function Ae(...fe){const de=(0,ie.yG)(fe),Fe=(0,ie._6)(fe,1/0),De=fe;return De.length?1===De.length?(0,g.Xf)(De[0]):(0,m.J)(Fe)((0,Pe.D)(De,de)):Y.E}},9646:(cn,at,$)=>{"use strict";$.d(at,{of:()=>Y});var m=$(3269),g=$(8996);function Y(...ie){const Pe=(0,m.yG)(ie);return(0,g.D)(ie,Pe)}},2843:(cn,at,$)=>{"use strict";$.d(at,{_:()=>Y});var m=$(9751),g=$(576);function Y(ie,Pe){const Ae=(0,g.m)(ie)?ie:()=>ie,fe=de=>de.error(Ae());return new m.y(Pe?de=>Pe.schedule(fe,0,de):fe)}},5403:(cn,at,$)=>{"use strict";$.d(at,{x:()=>g});var m=$(930);function g(ie,Pe,Ae,fe,de){return new Y(ie,Pe,Ae,fe,de)}class Y extends m.Lv{constructor(Pe,Ae,fe,de,Fe,De){super(Pe),this.onFinalize=Fe,this.shouldUnsubscribe=De,this._next=Ae?function(he){try{Ae(he)}catch(be){Pe.error(be)}}:super._next,this._error=de?function(he){try{de(he)}catch(be){Pe.error(be)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(he){Pe.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(Pe=this.onFinalize)||void 0===Pe||Pe.call(this))}}}},262:(cn,at,$)=>{"use strict";$.d(at,{K:()=>ie});var m=$(8421),g=$(5403),Y=$(4482);function ie(Pe){return(0,Y.e)((Ae,fe)=>{let De,de=null,Fe=!1;de=Ae.subscribe((0,g.x)(fe,void 0,void 0,he=>{De=(0,m.Xf)(Pe(he,ie(Pe)(Ae))),de?(de.unsubscribe(),de=null,De.subscribe(fe)):Fe=!0})),Fe&&(de.unsubscribe(),de=null,De.subscribe(fe))})}},4351:(cn,at,$)=>{"use strict";$.d(at,{b:()=>Y});var m=$(5577),g=$(576);function Y(ie,Pe){return(0,g.m)(Pe)?(0,m.z)(ie,Pe,1):(0,m.z)(ie,1)}},8372:(cn,at,$)=>{"use strict";$.d(at,{b:()=>ie});var m=$(4986),g=$(4482),Y=$(5403);function ie(Pe,Ae=m.z){return(0,g.e)((fe,de)=>{let Fe=null,De=null,he=null;const be=()=>{if(Fe){Fe.unsubscribe(),Fe=null;const je=De;De=null,de.next(je)}};function Ne(){const je=he+Pe,Ue=Ae.now();if(Ue<je)return Fe=this.schedule(void 0,je-Ue),void de.add(Fe);be()}fe.subscribe((0,Y.x)(de,je=>{De=je,he=Ae.now(),Fe||(Fe=Ae.schedule(Ne,Pe),de.add(Fe))},()=>{be(),de.complete()},void 0,()=>{De=Fe=null}))})}},6590:(cn,at,$)=>{"use strict";$.d(at,{d:()=>Y});var m=$(4482),g=$(5403);function Y(ie){return(0,m.e)((Pe,Ae)=>{let fe=!1;Pe.subscribe((0,g.x)(Ae,de=>{fe=!0,Ae.next(de)},()=>{fe||Ae.next(ie),Ae.complete()}))})}},1884:(cn,at,$)=>{"use strict";$.d(at,{x:()=>ie});var m=$(4671),g=$(4482),Y=$(5403);function ie(Ae,fe=m.y){return Ae=null!=Ae?Ae:Pe,(0,g.e)((de,Fe)=>{let De,he=!0;de.subscribe((0,Y.x)(Fe,be=>{const Ne=fe(be);(he||!Ae(De,Ne))&&(he=!1,De=Ne,Fe.next(be))}))})}function Pe(Ae,fe){return Ae===fe}},9300:(cn,at,$)=>{"use strict";$.d(at,{h:()=>Y});var m=$(4482),g=$(5403);function Y(ie,Pe){return(0,m.e)((Ae,fe)=>{let de=0;Ae.subscribe((0,g.x)(fe,Fe=>ie.call(Pe,Fe,de++)&&fe.next(Fe)))})}},8746:(cn,at,$)=>{"use strict";$.d(at,{x:()=>g});var m=$(4482);function g(Y){return(0,m.e)((ie,Pe)=>{try{ie.subscribe(Pe)}finally{Pe.add(Y)}})}},590:(cn,at,$)=>{"use strict";$.d(at,{P:()=>fe});var m=$(6805),g=$(9300),Y=$(5698),ie=$(6590),Pe=$(8068),Ae=$(4671);function fe(de,Fe){const De=arguments.length>=2;return he=>he.pipe(de?(0,g.h)((be,Ne)=>de(be,Ne,he)):Ae.y,(0,Y.q)(1),De?(0,ie.d)(Fe):(0,Pe.T)(()=>new m.K))}},4004:(cn,at,$)=>{"use strict";$.d(at,{U:()=>Y});var m=$(4482),g=$(5403);function Y(ie,Pe){return(0,m.e)((Ae,fe)=>{let de=0;Ae.subscribe((0,g.x)(fe,Fe=>{fe.next(ie.call(Pe,Fe,de++))}))})}},9718:(cn,at,$)=>{"use strict";$.d(at,{h:()=>g});var m=$(4004);function g(Y){return(0,m.U)(()=>Y)}},8189:(cn,at,$)=>{"use strict";$.d(at,{J:()=>Y});var m=$(5577),g=$(4671);function Y(ie=1/0){return(0,m.z)(g.y,ie)}},5577:(cn,at,$)=>{"use strict";$.d(at,{z:()=>de});var m=$(4004),g=$(8421),Y=$(4482),ie=$(9672),Pe=$(5403),fe=$(576);function de(Fe,De,he=1/0){return(0,fe.m)(De)?de((be,Ne)=>(0,m.U)((je,Ue)=>De(be,je,Ne,Ue))((0,g.Xf)(Fe(be,Ne))),he):("number"==typeof De&&(he=De),(0,Y.e)((be,Ne)=>function Ae(Fe,De,he,be,Ne,je,Ue,Xe){const Me=[];let Se=0,oe=0,et=!1;const Le=()=>{et&&!Me.length&&!Se&&De.complete()},Re=mt=>Se<be?Je(mt):Me.push(mt),Je=mt=>{je&&De.next(mt),Se++;let Ye=!1;(0,g.Xf)(he(mt,oe++)).subscribe((0,Pe.x)(De,ve=>{null==Ne||Ne(ve),je?Re(ve):De.next(ve)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(Se--;Me.length&&Se<be;){const ve=Me.shift();Ue?(0,ie.f)(De,Ue,()=>Je(ve)):Je(ve)}Le()}catch(ve){De.error(ve)}}))};return Fe.subscribe((0,Pe.x)(De,Re,()=>{et=!0,Le()})),()=>{null==Xe||Xe()}}(be,Ne,Fe,he)))}},5363:(cn,at,$)=>{"use strict";$.d(at,{Q:()=>ie});var m=$(9672),g=$(4482),Y=$(5403);function ie(Pe,Ae=0){return(0,g.e)((fe,de)=>{fe.subscribe((0,Y.x)(de,Fe=>(0,m.f)(de,Pe,()=>de.next(Fe),Ae),()=>(0,m.f)(de,Pe,()=>de.complete(),Ae),Fe=>(0,m.f)(de,Pe,()=>de.error(Fe),Ae)))})}},8343:(cn,at,$)=>{"use strict";$.d(at,{x:()=>Y});var m=$(4482),g=$(5403);function Y(){return(0,m.e)((ie,Pe)=>{let Ae=null;ie._refCount++;const fe=(0,g.x)(Pe,void 0,void 0,void 0,()=>{if(!ie||ie._refCount<=0||0<--ie._refCount)return void(Ae=null);const de=ie._connection,Fe=Ae;Ae=null,de&&(!Fe||de===Fe)&&de.unsubscribe(),Pe.unsubscribe()});ie.subscribe(fe),fe.closed||(Ae=ie.connect())})}},5026:(cn,at,$)=>{"use strict";$.d(at,{R:()=>ie});var m=$(4482),g=$(5403);function ie(Pe,Ae){return(0,m.e)(function Y(Pe,Ae,fe,de,Fe){return(De,he)=>{let be=fe,Ne=Ae,je=0;De.subscribe((0,g.x)(he,Ue=>{const Xe=je++;Ne=be?Pe(Ne,Ue,Xe):(be=!0,Ue),de&&he.next(Ne)},Fe&&(()=>{be&&he.next(Ne),he.complete()})))}}(Pe,Ae,arguments.length>=2,!0))}},3099:(cn,at,$)=>{"use strict";$.d(at,{B:()=>Pe});var m=$(8421),g=$(7579),Y=$(930),ie=$(4482);function Pe(fe={}){const{connector:de=(()=>new g.x),resetOnError:Fe=!0,resetOnComplete:De=!0,resetOnRefCountZero:he=!0}=fe;return be=>{let Ne,je,Ue,Xe=0,Me=!1,Se=!1;const oe=()=>{null==je||je.unsubscribe(),je=void 0},et=()=>{oe(),Ne=Ue=void 0,Me=Se=!1},Le=()=>{const Re=Ne;et(),null==Re||Re.unsubscribe()};return(0,ie.e)((Re,Je)=>{Xe++,!Se&&!Me&&oe();const mt=Ue=null!=Ue?Ue:de();Je.add(()=>{Xe--,0===Xe&&!Se&&!Me&&(je=Ae(Le,he))}),mt.subscribe(Je),!Ne&&Xe>0&&(Ne=new Y.Hp({next:Ye=>mt.next(Ye),error:Ye=>{Se=!0,oe(),je=Ae(et,Fe,Ye),mt.error(Ye)},complete:()=>{Me=!0,oe(),je=Ae(et,De),mt.complete()}}),(0,m.Xf)(Re).subscribe(Ne))})(be)}}function Ae(fe,de,...Fe){if(!0===de)return void fe();if(!1===de)return;const De=new Y.Hp({next:()=>{De.unsubscribe(),fe()}});return de(...Fe).subscribe(De)}},8675:(cn,at,$)=>{"use strict";$.d(at,{O:()=>ie});var m=$(7272),g=$(3269),Y=$(4482);function ie(...Pe){const Ae=(0,g.yG)(Pe);return(0,Y.e)((fe,de)=>{(Ae?(0,m.z)(Pe,fe,Ae):(0,m.z)(Pe,fe)).subscribe(de)})}},9468:(cn,at,$)=>{"use strict";$.d(at,{R:()=>g});var m=$(4482);function g(Y,ie=0){return(0,m.e)((Pe,Ae)=>{Ae.add(Y.schedule(()=>Pe.subscribe(Ae),ie))})}},3900:(cn,at,$)=>{"use strict";$.d(at,{w:()=>ie});var m=$(8421),g=$(4482),Y=$(5403);function ie(Pe,Ae){return(0,g.e)((fe,de)=>{let Fe=null,De=0,he=!1;const be=()=>he&&!Fe&&de.complete();fe.subscribe((0,Y.x)(de,Ne=>{null==Fe||Fe.unsubscribe();let je=0;const Ue=De++;(0,m.Xf)(Pe(Ne,Ue)).subscribe(Fe=(0,Y.x)(de,Xe=>de.next(Ae?Ae(Ne,Xe,Ue,je++):Xe),()=>{Fe=null,be()}))},()=>{he=!0,be()}))})}},5698:(cn,at,$)=>{"use strict";$.d(at,{q:()=>ie});var m=$(515),g=$(4482),Y=$(5403);function ie(Pe){return Pe<=0?()=>m.E:(0,g.e)((Ae,fe)=>{let de=0;Ae.subscribe((0,Y.x)(fe,Fe=>{++de<=Pe&&(fe.next(Fe),Pe<=de&&fe.complete())}))})}},8505:(cn,at,$)=>{"use strict";$.d(at,{b:()=>Pe});var m=$(576),g=$(4482),Y=$(5403),ie=$(4671);function Pe(Ae,fe,de){const Fe=(0,m.m)(Ae)||fe||de?{next:Ae,error:fe,complete:de}:Ae;return Fe?(0,g.e)((De,he)=>{var be;null===(be=Fe.subscribe)||void 0===be||be.call(Fe);let Ne=!0;De.subscribe((0,Y.x)(he,je=>{var Ue;null===(Ue=Fe.next)||void 0===Ue||Ue.call(Fe,je),he.next(je)},()=>{var je;Ne=!1,null===(je=Fe.complete)||void 0===je||je.call(Fe),he.complete()},je=>{var Ue;Ne=!1,null===(Ue=Fe.error)||void 0===Ue||Ue.call(Fe,je),he.error(je)},()=>{var je,Ue;Ne&&(null===(je=Fe.unsubscribe)||void 0===je||je.call(Fe)),null===(Ue=Fe.finalize)||void 0===Ue||Ue.call(Fe)}))}):ie.y}},8068:(cn,at,$)=>{"use strict";$.d(at,{T:()=>ie});var m=$(6805),g=$(4482),Y=$(5403);function ie(Ae=Pe){return(0,g.e)((fe,de)=>{let Fe=!1;fe.subscribe((0,Y.x)(de,De=>{Fe=!0,de.next(De)},()=>Fe?de.complete():de.error(Ae())))})}function Pe(){return new m.K}},4408:(cn,at,$)=>{"use strict";$.d(at,{o:()=>Pe});var m=$(727);class g extends m.w0{constructor(fe,de){super()}schedule(fe,de=0){return this}}const Y={setInterval(Ae,fe,...de){const{delegate:Fe}=Y;return null!=Fe&&Fe.setInterval?Fe.setInterval(Ae,fe,...de):setInterval(Ae,fe,...de)},clearInterval(Ae){const{delegate:fe}=Y;return((null==fe?void 0:fe.clearInterval)||clearInterval)(Ae)},delegate:void 0};var ie=$(8737);class Pe extends g{constructor(fe,de){super(fe,de),this.scheduler=fe,this.work=de,this.pending=!1}schedule(fe,de=0){var Fe;if(this.closed)return this;this.state=fe;const De=this.id,he=this.scheduler;return null!=De&&(this.id=this.recycleAsyncId(he,De,de)),this.pending=!0,this.delay=de,this.id=null!==(Fe=this.id)&&void 0!==Fe?Fe:this.requestAsyncId(he,this.id,de),this}requestAsyncId(fe,de,Fe=0){return Y.setInterval(fe.flush.bind(fe,this),Fe)}recycleAsyncId(fe,de,Fe=0){if(null!=Fe&&this.delay===Fe&&!1===this.pending)return de;null!=de&&Y.clearInterval(de)}execute(fe,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(fe,de);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,de){let De,Fe=!1;try{this.work(fe)}catch(he){Fe=!0,De=he||new Error("Scheduled action threw falsy error")}if(Fe)return this.unsubscribe(),De}unsubscribe(){if(!this.closed){const{id:fe,scheduler:de}=this,{actions:Fe}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(Fe,this),null!=fe&&(this.id=this.recycleAsyncId(de,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(cn,at,$)=>{"use strict";$.d(at,{v:()=>Y});var m=$(6063);class g{constructor(Pe,Ae=g.now){this.schedulerActionCtor=Pe,this.now=Ae}schedule(Pe,Ae=0,fe){return new this.schedulerActionCtor(this,Pe).schedule(fe,Ae)}}g.now=m.l.now;class Y extends g{constructor(Pe,Ae=g.now){super(Pe,Ae),this.actions=[],this._active=!1}flush(Pe){const{actions:Ae}=this;if(this._active)return void Ae.push(Pe);let fe;this._active=!0;do{if(fe=Pe.execute(Pe.state,Pe.delay))break}while(Pe=Ae.shift());if(this._active=!1,fe){for(;Pe=Ae.shift();)Pe.unsubscribe();throw fe}}}},4986:(cn,at,$)=>{"use strict";$.d(at,{P:()=>ie,z:()=>Y});var m=$(4408);const Y=new($(7565).v)(m.o),ie=Y},6063:(cn,at,$)=>{"use strict";$.d(at,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(cn,at,$)=>{"use strict";$.d(at,{z:()=>m});const m={setTimeout(g,Y,...ie){const{delegate:Pe}=m;return null!=Pe&&Pe.setTimeout?Pe.setTimeout(g,Y,...ie):setTimeout(g,Y,...ie)},clearTimeout(g){const{delegate:Y}=m;return((null==Y?void 0:Y.clearTimeout)||clearTimeout)(g)},delegate:void 0}},2202:(cn,at,$)=>{"use strict";$.d(at,{h:()=>g});const g=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(cn,at,$)=>{"use strict";$.d(at,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(cn,at,$)=>{"use strict";$.d(at,{K:()=>g});const g=(0,$(3888).d)(Y=>function(){Y(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(cn,at,$)=>{"use strict";$.d(at,{_6:()=>Ae,jO:()=>ie,yG:()=>Pe});var m=$(576),g=$(3532);function Y(fe){return fe[fe.length-1]}function ie(fe){return(0,m.m)(Y(fe))?fe.pop():void 0}function Pe(fe){return(0,g.K)(Y(fe))?fe.pop():void 0}function Ae(fe,de){return"number"==typeof Y(fe)?fe.pop():de}},4742:(cn,at,$)=>{"use strict";$.d(at,{D:()=>Pe});const{isArray:m}=Array,{getPrototypeOf:g,prototype:Y,keys:ie}=Object;function Pe(fe){if(1===fe.length){const de=fe[0];if(m(de))return{args:de,keys:null};if(function Ae(fe){return fe&&"object"==typeof fe&&g(fe)===Y}(de)){const Fe=ie(de);return{args:Fe.map(De=>de[De]),keys:Fe}}}return{args:fe,keys:null}}},8737:(cn,at,$)=>{"use strict";function m(g,Y){if(g){const ie=g.indexOf(Y);0<=ie&&g.splice(ie,1)}}$.d(at,{P:()=>m})},3888:(cn,at,$)=>{"use strict";function m(g){const ie=g(Pe=>{Error.call(Pe),Pe.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}$.d(at,{d:()=>m})},1810:(cn,at,$)=>{"use strict";function m(g,Y){return g.reduce((ie,Pe,Ae)=>(ie[Pe]=Y[Ae],ie),{})}$.d(at,{n:()=>m})},2806:(cn,at,$)=>{"use strict";$.d(at,{O:()=>ie,x:()=>Y});var m=$(2416);let g=null;function Y(Pe){if(m.v.useDeprecatedSynchronousErrorHandling){const Ae=!g;if(Ae&&(g={errorThrown:!1,error:null}),Pe(),Ae){const{errorThrown:fe,error:de}=g;if(g=null,fe)throw de}}else Pe()}function ie(Pe){m.v.useDeprecatedSynchronousErrorHandling&&g&&(g.errorThrown=!0,g.error=Pe)}},9672:(cn,at,$)=>{"use strict";function m(g,Y,ie,Pe=0,Ae=!1){const fe=Y.schedule(function(){ie(),Ae?g.add(this.schedule(null,Pe)):this.unsubscribe()},Pe);if(g.add(fe),!Ae)return fe}$.d(at,{f:()=>m})},4671:(cn,at,$)=>{"use strict";function m(g){return g}$.d(at,{y:()=>m})},1144:(cn,at,$)=>{"use strict";$.d(at,{z:()=>m});const m=g=>g&&"number"==typeof g.length&&"function"!=typeof g},2206:(cn,at,$)=>{"use strict";$.d(at,{D:()=>g});var m=$(576);function g(Y){return Symbol.asyncIterator&&(0,m.m)(null==Y?void 0:Y[Symbol.asyncIterator])}},576:(cn,at,$)=>{"use strict";function m(g){return"function"==typeof g}$.d(at,{m:()=>m})},3670:(cn,at,$)=>{"use strict";$.d(at,{c:()=>Y});var m=$(8822),g=$(576);function Y(ie){return(0,g.m)(ie[m.L])}},6495:(cn,at,$)=>{"use strict";$.d(at,{T:()=>Y});var m=$(2202),g=$(576);function Y(ie){return(0,g.m)(null==ie?void 0:ie[m.h])}},8239:(cn,at,$)=>{"use strict";$.d(at,{t:()=>g});var m=$(576);function g(Y){return(0,m.m)(null==Y?void 0:Y.then)}},3260:(cn,at,$)=>{"use strict";$.d(at,{L:()=>ie,Q:()=>Y});var m=$(655),g=$(576);function Y(Pe){return(0,m.FC)(this,arguments,function*(){const fe=Pe.getReader();try{for(;;){const{value:de,done:Fe}=yield(0,m.qq)(fe.read());if(Fe)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(de)}}finally{fe.releaseLock()}})}function ie(Pe){return(0,g.m)(null==Pe?void 0:Pe.getReader)}},3532:(cn,at,$)=>{"use strict";$.d(at,{K:()=>g});var m=$(576);function g(Y){return Y&&(0,m.m)(Y.schedule)}},4482:(cn,at,$)=>{"use strict";$.d(at,{A:()=>g,e:()=>Y});var m=$(576);function g(ie){return(0,m.m)(null==ie?void 0:ie.lift)}function Y(ie){return Pe=>{if(g(Pe))return Pe.lift(function(Ae){try{return ie(Ae,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(cn,at,$)=>{"use strict";$.d(at,{Z:()=>ie});var m=$(4004);const{isArray:g}=Array;function ie(Pe){return(0,m.U)(Ae=>function Y(Pe,Ae){return g(Ae)?Pe(...Ae):Pe(Ae)}(Pe,Ae))}},5032:(cn,at,$)=>{"use strict";function m(){}$.d(at,{Z:()=>m})},9635:(cn,at,$)=>{"use strict";$.d(at,{U:()=>Y,z:()=>g});var m=$(4671);function g(...ie){return Y(ie)}function Y(ie){return 0===ie.length?m.y:1===ie.length?ie[0]:function(Ae){return ie.reduce((fe,de)=>de(fe),Ae)}}},7849:(cn,at,$)=>{"use strict";$.d(at,{h:()=>Y});var m=$(2416),g=$(3410);function Y(ie){g.z.setTimeout(()=>{const{onUnhandledError:Pe}=m.v;if(!Pe)throw ie;Pe(ie)})}},4532:(cn,at,$)=>{"use strict";function m(g){return new TypeError(`You provided ${null!==g&&"object"==typeof g?"an invalid object":`'${g}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(at,{z:()=>m})},863:(cn,at,$)=>{var m={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,7879,9230],"./ion-datetime_3.entry.js":[4959,7879,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168]};function g(Y){if(!$.o(m,Y))return Promise.resolve().then(()=>{var Ae=new Error("Cannot find module '"+Y+"'");throw Ae.code="MODULE_NOT_FOUND",Ae});var ie=m[Y],Pe=ie[0];return Promise.all(ie.slice(1).map($.e)).then(()=>$(Pe))}g.keys=()=>Object.keys(m),g.id=863,cn.exports=g},655:(cn,at,$)=>{"use strict";function ie(Be,At){var vt={};for(var Ke in Be)Object.prototype.hasOwnProperty.call(Be,Ke)&&At.indexOf(Ke)<0&&(vt[Ke]=Be[Ke]);if(null!=Be&&"function"==typeof Object.getOwnPropertySymbols){var qe=0;for(Ke=Object.getOwnPropertySymbols(Be);qe<Ke.length;qe++)At.indexOf(Ke[qe])<0&&Object.prototype.propertyIsEnumerable.call(Be,Ke[qe])&&(vt[Ke[qe]]=Be[Ke[qe]])}return vt}function Pe(Be,At,vt,Ke){var Q,qe=arguments.length,We=qe<3?At:null===Ke?Ke=Object.getOwnPropertyDescriptor(At,vt):Ke;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)We=Reflect.decorate(Be,At,vt,Ke);else for(var _t=Be.length-1;_t>=0;_t--)(Q=Be[_t])&&(We=(qe<3?Q(We):qe>3?Q(At,vt,We):Q(At,vt))||We);return qe>3&&We&&Object.defineProperty(At,vt,We),We}function be(Be,At,vt,Ke){return new(vt||(vt=Promise))(function(We,Q){function _t(un){try{zt(Ke.next(un))}catch(Et){Q(Et)}}function Dt(un){try{zt(Ke.throw(un))}catch(Et){Q(Et)}}function zt(un){un.done?We(un.value):function qe(We){return We instanceof vt?We:new vt(function(Q){Q(We)})}(un.value).then(_t,Dt)}zt((Ke=Ke.apply(Be,At||[])).next())})}function Le(Be){return this instanceof Le?(this.v=Be,this):new Le(Be)}function Re(Be,At,vt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,Ke=vt.apply(Be,At||[]),We=[];return qe={},Q("next"),Q("throw"),Q("return"),qe[Symbol.asyncIterator]=function(){return this},qe;function Q(ut){Ke[ut]&&(qe[ut]=function(Ot){return new Promise(function(sn,Cn){We.push([ut,Ot,sn,Cn])>1||_t(ut,Ot)})})}function _t(ut,Ot){try{!function Dt(ut){ut.value instanceof Le?Promise.resolve(ut.value.v).then(zt,un):Et(We[0][2],ut)}(Ke[ut](Ot))}catch(sn){Et(We[0][3],sn)}}function zt(ut){_t("next",ut)}function un(ut){_t("throw",ut)}function Et(ut,Ot){ut(Ot),We.shift(),We.length&&_t(We[0][0],We[0][1])}}function mt(Be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt,At=Be[Symbol.asyncIterator];return At?At.call(Be):(Be=function Xe(Be){var At="function"==typeof Symbol&&Symbol.iterator,vt=At&&Be[At],Ke=0;if(vt)return vt.call(Be);if(Be&&"number"==typeof Be.length)return{next:function(){return Be&&Ke>=Be.length&&(Be=void 0),{value:Be&&Be[Ke++],done:!Be}}};throw new TypeError(At?"Object is not iterable.":"Symbol.iterator is not defined.")}(Be),vt={},Ke("next"),Ke("throw"),Ke("return"),vt[Symbol.asyncIterator]=function(){return this},vt);function Ke(We){vt[We]=Be[We]&&function(Q){return new Promise(function(_t,Dt){!function qe(We,Q,_t,Dt){Promise.resolve(Dt).then(function(zt){We({value:zt,done:_t})},Q)}(_t,Dt,(Q=Be[We](Q)).done,Q.value)})}}}$.d(at,{FC:()=>Re,KL:()=>mt,_T:()=>ie,gn:()=>Pe,mG:()=>be,qq:()=>Le})},7340:(cn,at,$)=>{"use strict";$.d(at,{F4:()=>De,IO:()=>Ue,LC:()=>g,SB:()=>Fe,X$:()=>ie,ZE:()=>oe,ZN:()=>Se,_j:()=>m,eR:()=>he,jt:()=>Pe,k1:()=>et,l3:()=>Y,oB:()=>de,pV:()=>Ne,ru:()=>Ae,vP:()=>fe});class m{}class g{}const Y="*";function ie(Le,Re){return{type:7,name:Le,definitions:Re,options:{}}}function Pe(Le,Re=null){return{type:4,styles:Re,timings:Le}}function Ae(Le,Re=null){return{type:3,steps:Le,options:Re}}function fe(Le,Re=null){return{type:2,steps:Le,options:Re}}function de(Le){return{type:6,styles:Le,offset:null}}function Fe(Le,Re,Je){return{type:0,name:Le,styles:Re,options:Je}}function De(Le){return{type:5,steps:Le}}function he(Le,Re,Je=null){return{type:1,expr:Le,animation:Re,options:Je}}function Ne(Le=null){return{type:9,options:Le}}function Ue(Le,Re,Je=null){return{type:11,selector:Le,animation:Re,options:Je}}function Me(Le){Promise.resolve().then(Le)}class Se{constructor(Re=0,Je=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Re+Je}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Re=>Re()),this._onDoneFns=[])}onStart(Re){this._originalOnStartFns.push(Re),this._onStartFns.push(Re)}onDone(Re){this._originalOnDoneFns.push(Re),this._onDoneFns.push(Re)}onDestroy(Re){this._onDestroyFns.push(Re)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Me(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Re=>Re()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Re=>Re()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Re){this._position=this.totalTime?Re*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Re){const Je="start"==Re?this._onStartFns:this._onDoneFns;Je.forEach(mt=>mt()),Je.length=0}}class oe{constructor(Re){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Re;let Je=0,mt=0,Ye=0;const ve=this.players.length;0==ve?Me(()=>this._onFinish()):this.players.forEach(It=>{It.onDone(()=>{++Je==ve&&this._onFinish()}),It.onDestroy(()=>{++mt==ve&&this._onDestroy()}),It.onStart(()=>{++Ye==ve&&this._onStart()})}),this.totalTime=this.players.reduce((It,ze)=>Math.max(It,ze.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Re=>Re()),this._onDoneFns=[])}init(){this.players.forEach(Re=>Re.init())}onStart(Re){this._onStartFns.push(Re)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Re=>Re()),this._onStartFns=[])}onDone(Re){this._onDoneFns.push(Re)}onDestroy(Re){this._onDestroyFns.push(Re)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Re=>Re.play())}pause(){this.players.forEach(Re=>Re.pause())}restart(){this.players.forEach(Re=>Re.restart())}finish(){this._onFinish(),this.players.forEach(Re=>Re.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Re=>Re.destroy()),this._onDestroyFns.forEach(Re=>Re()),this._onDestroyFns=[])}reset(){this.players.forEach(Re=>Re.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Re){const Je=Re*this.totalTime;this.players.forEach(mt=>{const Ye=mt.totalTime?Math.min(1,Je/mt.totalTime):1;mt.setPosition(Ye)})}getPosition(){const Re=this.players.reduce((Je,mt)=>null===Je||mt.totalTime>Je.totalTime?mt:Je,null);return null!=Re?Re.getPosition():0}beforeDestroy(){this.players.forEach(Re=>{Re.beforeDestroy&&Re.beforeDestroy()})}triggerCallback(Re){const Je="start"==Re?this._onStartFns:this._onDoneFns;Je.forEach(mt=>mt()),Je.length=0}}const et="!"},6895:(cn,at,$)=>{"use strict";$.d(at,{Do:()=>oe,EM:()=>Do,HT:()=>ie,JF:()=>Vr,K0:()=>Ae,Mx:()=>ps,NF:()=>Qi,O5:()=>xe,PM:()=>Ss,RF:()=>nt,S$:()=>Xe,V_:()=>Fe,Ye:()=>et,b0:()=>Se,bD:()=>Ba,ez:()=>qi,mk:()=>hr,n9:()=>Nt,q:()=>Y,sg:()=>Wi,tP:()=>Ln,w_:()=>Pe});var m=$(4650);let g=null;function Y(){return g}function ie(U){g||(g=U)}class Pe{}const Ae=new m.OlP("DocumentToken");let fe=(()=>{class U{historyGo(z){throw new Error("Not implemented")}}return U.\u0275fac=function(z){return new(z||U)},U.\u0275prov=m.Yz7({token:U,factory:function(){return function de(){return(0,m.LFG)(De)}()},providedIn:"platform"}),U})();const Fe=new m.OlP("Location Initialized");let De=(()=>{class U extends fe{constructor(z){super(),this._doc=z,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Y().getBaseHref(this._doc)}onPopState(z){const se=Y().getGlobalEventTarget(this._doc,"window");return se.addEventListener("popstate",z,!1),()=>se.removeEventListener("popstate",z)}onHashChange(z){const se=Y().getGlobalEventTarget(this._doc,"window");return se.addEventListener("hashchange",z,!1),()=>se.removeEventListener("hashchange",z)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(z){this._location.pathname=z}pushState(z,se,Ge){he()?this._history.pushState(z,se,Ge):this._location.hash=Ge}replaceState(z,se,Ge){he()?this._history.replaceState(z,se,Ge):this._location.hash=Ge}forward(){this._history.forward()}back(){this._history.back()}historyGo(z=0){this._history.go(z)}getState(){return this._history.state}}return U.\u0275fac=function(z){return new(z||U)(m.LFG(Ae))},U.\u0275prov=m.Yz7({token:U,factory:function(){return function be(){return new De((0,m.LFG)(Ae))}()},providedIn:"platform"}),U})();function he(){return!!window.history.pushState}function Ne(U,ee){if(0==U.length)return ee;if(0==ee.length)return U;let z=0;return U.endsWith("/")&&z++,ee.startsWith("/")&&z++,2==z?U+ee.substring(1):1==z?U+ee:U+"/"+ee}function je(U){const ee=U.match(/#|\?|$/),z=ee&&ee.index||U.length;return U.slice(0,z-("/"===U[z-1]?1:0))+U.slice(z)}function Ue(U){return U&&"?"!==U[0]?"?"+U:U}let Xe=(()=>{class U{historyGo(z){throw new Error("Not implemented")}}return U.\u0275fac=function(z){return new(z||U)},U.\u0275prov=m.Yz7({token:U,factory:function(){return(0,m.f3M)(Se)},providedIn:"root"}),U})();const Me=new m.OlP("appBaseHref");let Se=(()=>{class U extends Xe{constructor(z,se){var Ge,Ht,Zt;super(),this._platformLocation=z,this._removeListenerFns=[],this._baseHref=null!==(Ge=null!==(Ht=null!=se?se:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Ht?Ht:null===(Zt=(0,m.f3M)(Ae).location)||void 0===Zt?void 0:Zt.origin)&&void 0!==Ge?Ge:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}prepareExternalUrl(z){return Ne(this._baseHref,z)}path(z=!1){const se=this._platformLocation.pathname+Ue(this._platformLocation.search),Ge=this._platformLocation.hash;return Ge&&z?`${se}${Ge}`:se}pushState(z,se,Ge,Ht){const Zt=this.prepareExternalUrl(Ge+Ue(Ht));this._platformLocation.pushState(z,se,Zt)}replaceState(z,se,Ge,Ht){const Zt=this.prepareExternalUrl(Ge+Ue(Ht));this._platformLocation.replaceState(z,se,Zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(z=0){var se,Ge;null===(se=(Ge=this._platformLocation).historyGo)||void 0===se||se.call(Ge,z)}}return U.\u0275fac=function(z){return new(z||U)(m.LFG(fe),m.LFG(Me,8))},U.\u0275prov=m.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})(),oe=(()=>{class U extends Xe{constructor(z,se){super(),this._platformLocation=z,this._baseHref="",this._removeListenerFns=[],null!=se&&(this._baseHref=se)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}path(z=!1){let se=this._platformLocation.hash;return null==se&&(se="#"),se.length>0?se.substring(1):se}prepareExternalUrl(z){const se=Ne(this._baseHref,z);return se.length>0?"#"+se:se}pushState(z,se,Ge,Ht){let Zt=this.prepareExternalUrl(Ge+Ue(Ht));0==Zt.length&&(Zt=this._platformLocation.pathname),this._platformLocation.pushState(z,se,Zt)}replaceState(z,se,Ge,Ht){let Zt=this.prepareExternalUrl(Ge+Ue(Ht));0==Zt.length&&(Zt=this._platformLocation.pathname),this._platformLocation.replaceState(z,se,Zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(z=0){var se,Ge;null===(se=(Ge=this._platformLocation).historyGo)||void 0===se||se.call(Ge,z)}}return U.\u0275fac=function(z){return new(z||U)(m.LFG(fe),m.LFG(Me,8))},U.\u0275prov=m.Yz7({token:U,factory:U.\u0275fac}),U})(),et=(()=>{class U{constructor(z){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=z;const se=this._locationStrategy.getBaseHref();this._basePath=function mt(U){if(new RegExp("^(https?:)?//").test(U)){const[,z]=U.split(/\/\/[^\/]+/);return z}return U}(je(Je(se))),this._locationStrategy.onPopState(Ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ge.state,type:Ge.type})})}ngOnDestroy(){var z;null===(z=this._urlChangeSubscription)||void 0===z||z.unsubscribe(),this._urlChangeListeners=[]}path(z=!1){return this.normalize(this._locationStrategy.path(z))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(z,se=""){return this.path()==this.normalize(z+Ue(se))}normalize(z){return U.stripTrailingSlash(function Re(U,ee){if(!U||!ee.startsWith(U))return ee;const z=ee.substring(U.length);return""===z||["/",";","?","#"].includes(z[0])?z:ee}(this._basePath,Je(z)))}prepareExternalUrl(z){return z&&"/"!==z[0]&&(z="/"+z),this._locationStrategy.prepareExternalUrl(z)}go(z,se="",Ge=null){this._locationStrategy.pushState(Ge,"",z,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+Ue(se)),Ge)}replaceState(z,se="",Ge=null){this._locationStrategy.replaceState(Ge,"",z,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+Ue(se)),Ge)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(z=0){var se,Ge;null===(se=(Ge=this._locationStrategy).historyGo)||void 0===se||se.call(Ge,z)}onUrlChange(z){return this._urlChangeListeners.push(z),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(se=>{this._notifyUrlChangeListeners(se.url,se.state)})),()=>{const se=this._urlChangeListeners.indexOf(z);var Ge;this._urlChangeListeners.splice(se,1),0===this._urlChangeListeners.length&&(null===(Ge=this._urlChangeSubscription)||void 0===Ge||Ge.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(z="",se){this._urlChangeListeners.forEach(Ge=>Ge(z,se))}subscribe(z,se,Ge){return this._subject.subscribe({next:z,error:se,complete:Ge})}}return U.normalizeQueryParams=Ue,U.joinWithSlash=Ne,U.stripTrailingSlash=je,U.\u0275fac=function(z){return new(z||U)(m.LFG(Xe))},U.\u0275prov=m.Yz7({token:U,factory:function(){return function Le(){return new et((0,m.LFG)(Xe))}()},providedIn:"root"}),U})();function Je(U){return U.replace(/\/index.html$/,"")}function ps(U,ee){ee=encodeURIComponent(ee);for(const z of U.split(";")){const se=z.indexOf("="),[Ge,Ht]=-1==se?[z,""]:[z.slice(0,se),z.slice(se+1)];if(Ge.trim()===ee)return decodeURIComponent(Ht)}return null}const Oi=/\s+/,vn=[];let hr=(()=>{class U{constructor(z,se,Ge,Ht){this._iterableDiffers=z,this._keyValueDiffers=se,this._ngEl=Ge,this._renderer=Ht,this.initialClasses=vn,this.stateMap=new Map}set klass(z){this.initialClasses=null!=z?z.trim().split(Oi):vn}set ngClass(z){this.rawClass="string"==typeof z?z.trim().split(Oi):z}ngDoCheck(){for(const se of this.initialClasses)this._updateState(se,!0);const z=this.rawClass;if(Array.isArray(z)||z instanceof Set)for(const se of z)this._updateState(se,!0);else if(null!=z)for(const se of Object.keys(z))this._updateState(se,Boolean(z[se]));this._applyStateDiff()}_updateState(z,se){const Ge=this.stateMap.get(z);void 0!==Ge?(Ge.enabled!==se&&(Ge.changed=!0,Ge.enabled=se),Ge.touched=!0):this.stateMap.set(z,{enabled:se,changed:!0,touched:!0})}_applyStateDiff(){for(const z of this.stateMap){const se=z[0],Ge=z[1];Ge.changed?(this._toggleClass(se,Ge.enabled),Ge.changed=!1):Ge.touched||(Ge.enabled&&this._toggleClass(se,!1),this.stateMap.delete(se)),Ge.touched=!1}}_toggleClass(z,se){(z=z.trim()).length>0&&z.split(Oi).forEach(Ge=>{se?this._renderer.addClass(this._ngEl.nativeElement,Ge):this._renderer.removeClass(this._ngEl.nativeElement,Ge)})}}return U.\u0275fac=function(z){return new(z||U)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},U.\u0275dir=m.lG2({type:U,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),U})();class mi{constructor(ee,z,se,Ge){this.$implicit=ee,this.ngForOf=z,this.index=se,this.count=Ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wi=(()=>{class U{set ngForOf(z){this._ngForOf=z,this._ngForOfDirty=!0}set ngForTrackBy(z){this._trackByFn=z}get ngForTrackBy(){return this._trackByFn}constructor(z,se,Ge){this._viewContainer=z,this._template=se,this._differs=Ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(z){z&&(this._template=z)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const z=this._ngForOf;!this._differ&&z&&(this._differ=this._differs.find(z).create(this.ngForTrackBy))}if(this._differ){const z=this._differ.diff(this._ngForOf);z&&this._applyChanges(z)}}_applyChanges(z){const se=this._viewContainer;z.forEachOperation((Ge,Ht,Zt)=>{if(null==Ge.previousIndex)se.createEmbeddedView(this._template,new mi(Ge.item,this._ngForOf,-1,-1),null===Zt?void 0:Zt);else if(null==Zt)se.remove(null===Ht?void 0:Ht);else if(null!==Ht){const Fn=se.get(Ht);se.move(Fn,Zt),wr(Fn,Ge)}});for(let Ge=0,Ht=se.length;Ge<Ht;Ge++){const Fn=se.get(Ge).context;Fn.index=Ge,Fn.count=Ht,Fn.ngForOf=this._ngForOf}z.forEachIdentityChange(Ge=>{wr(se.get(Ge.currentIndex),Ge)})}static ngTemplateContextGuard(z,se){return!0}}return U.\u0275fac=function(z){return new(z||U)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},U.\u0275dir=m.lG2({type:U,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),U})();function wr(U,ee){U.context.$implicit=ee.item}let xe=(()=>{class U{constructor(z,se){this._viewContainer=z,this._context=new Ze,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=se}set ngIf(z){this._context.$implicit=this._context.ngIf=z,this._updateView()}set ngIfThen(z){Te("ngIfThen",z),this._thenTemplateRef=z,this._thenViewRef=null,this._updateView()}set ngIfElse(z){Te("ngIfElse",z),this._elseTemplateRef=z,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(z,se){return!0}}return U.\u0275fac=function(z){return new(z||U)(m.Y36(m.s_b),m.Y36(m.Rgc))},U.\u0275dir=m.lG2({type:U,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),U})();class Ze{constructor(){this.$implicit=null,this.ngIf=null}}function Te(U,ee){if(ee&&!ee.createEmbeddedView)throw new Error(`${U} must be a TemplateRef, but received '${(0,m.AaK)(ee)}'.`)}class tt{constructor(ee,z){this._viewContainerRef=ee,this._templateRef=z,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ee){ee&&!this._created?this.create():!ee&&this._created&&this.destroy()}}let nt=(()=>{class U{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(z){this._ngSwitch=z,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(z){this._defaultViews.push(z)}_matchCase(z){const se=z==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||se,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),se}_updateDefaultCases(z){if(this._defaultViews.length>0&&z!==this._defaultUsed){this._defaultUsed=z;for(const se of this._defaultViews)se.enforceState(z)}}}return U.\u0275fac=function(z){return new(z||U)},U.\u0275dir=m.lG2({type:U,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),U})(),Nt=(()=>{class U{constructor(z,se,Ge){this.ngSwitch=Ge,Ge._addCase(),this._view=new tt(z,se)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return U.\u0275fac=function(z){return new(z||U)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(nt,9))},U.\u0275dir=m.lG2({type:U,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),U})(),Ln=(()=>{class U{constructor(z){this._viewContainerRef=z,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(z){if(z.ngTemplateOutlet||z.ngTemplateOutletInjector){const se=this._viewContainerRef;if(this._viewRef&&se.remove(se.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Ge,ngTemplateOutletContext:Ht,ngTemplateOutletInjector:Zt}=this;this._viewRef=se.createEmbeddedView(Ge,Ht,Zt?{injector:Zt}:void 0)}else this._viewRef=null}else this._viewRef&&z.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return U.\u0275fac=function(z){return new(z||U)(m.Y36(m.s_b))},U.\u0275dir=m.lG2({type:U,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[m.TTD]}),U})(),qi=(()=>{class U{}return U.\u0275fac=function(z){return new(z||U)},U.\u0275mod=m.oAB({type:U}),U.\u0275inj=m.cJS({}),U})();const Ba="browser",Ts="server";function Qi(U){return U===Ba}function Ss(U){return U===Ts}let Do=(()=>{class U{}return U.\u0275prov=(0,m.Yz7)({token:U,providedIn:"root",factory:()=>new Qa((0,m.LFG)(Ae),window)}),U})();class Qa{constructor(ee,z){this.document=ee,this.window=z,this.offset=()=>[0,0]}setOffset(ee){this.offset=Array.isArray(ee)?()=>ee:ee}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ee){this.supportsScrolling()&&this.window.scrollTo(ee[0],ee[1])}scrollToAnchor(ee){if(!this.supportsScrolling())return;const z=function ko(U,ee){const z=U.getElementById(ee)||U.getElementsByName(ee)[0];if(z)return z;if("function"==typeof U.createTreeWalker&&U.body&&(U.body.createShadowRoot||U.body.attachShadow)){const se=U.createTreeWalker(U.body,NodeFilter.SHOW_ELEMENT);let Ge=se.currentNode;for(;Ge;){const Ht=Ge.shadowRoot;if(Ht){const Zt=Ht.getElementById(ee)||Ht.querySelector(`[name="${ee}"]`);if(Zt)return Zt}Ge=se.nextNode()}}return null}(this.document,ee);z&&(this.scrollToElement(z),z.focus())}setHistoryScrollRestoration(ee){if(this.supportScrollRestoration()){const z=this.window.history;z&&z.scrollRestoration&&(z.scrollRestoration=ee)}}scrollToElement(ee){const z=ee.getBoundingClientRect(),se=z.left+this.window.pageXOffset,Ge=z.top+this.window.pageYOffset,Ht=this.offset();this.window.scrollTo(se-Ht[0],Ge-Ht[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ee=No(this.window.history)||No(Object.getPrototypeOf(this.window.history));return!(!ee||!ee.writable&&!ee.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function No(U){return Object.getOwnPropertyDescriptor(U,"scrollRestoration")}class Vr{}},4650:(cn,at,$)=>{"use strict";$.d(at,{$8M:()=>vl,$WT:()=>lr,$Z:()=>Yf,AFp:()=>VE,AaK:()=>de,BQk:()=>Rl,CHM:()=>Dr,CRH:()=>_E,CZH:()=>mv,CqO:()=>fh,D6c:()=>xI,EJc:()=>Ww,EiD:()=>Op,EpF:()=>Wa,F$t:()=>fo,F4k:()=>hl,FYo:()=>Yd,FiY:()=>ta,G48:()=>pI,Gf:()=>mE,GfV:()=>Wp,GkF:()=>ho,Gpc:()=>he,Hsn:()=>xl,Ikx:()=>Xy,JOm:()=>Yo,JVY:()=>Fg,JZr:()=>Xe,KtG:()=>Xr,L6k:()=>Oh,LAX:()=>oy,LFG:()=>Xn,LMc:()=>OI,LSH:()=>sd,Lbi:()=>jw,Lck:()=>nv,MAs:()=>dn,MMx:()=>c_,MR2:()=>Ro,NdJ:()=>Md,O4$:()=>Ol,OlP:()=>ds,Oqu:()=>Eg,P3R:()=>zg,PXZ:()=>aI,Q6J:()=>gn,QGY:()=>hh,QbO:()=>Hw,Qsj:()=>Xg,R0b:()=>Wu,RDi:()=>xf,RIp:()=>ja,Rgc:()=>rs,SBq:()=>pc,Sil:()=>qw,Suo:()=>yE,TTD:()=>Js,TgZ:()=>Fi,Udp:()=>zy,W1O:()=>IE,X6Q:()=>fI,XFs:()=>fn,Xpm:()=>_n,Xts:()=>Fp,Y36:()=>lu,YKP:()=>fl,YNc:()=>wt,Yjl:()=>cr,Yz7:()=>Et,Z0I:()=>Cn,ZZ4:()=>Z0,_Bn:()=>vh,_UZ:()=>io,_Vd:()=>Es,_uU:()=>A_,aQg:()=>Q0,c2e:()=>zw,cJS:()=>Ot,cg1:()=>$m,dDg:()=>rI,dqk:()=>Tr,eBb:()=>sy,eJc:()=>N0,ekj:()=>Pm,eoX:()=>ZE,f3M:()=>ei,g9A:()=>HE,h0i:()=>Za,hGG:()=>RI,hij:()=>Fm,iGM:()=>gE,iPO:()=>uI,ifc:()=>Ee,ip1:()=>UE,jDz:()=>Sf,kL8:()=>Um,kcU:()=>ea,lG2:()=>Kn,lqb:()=>cd,lri:()=>qE,mCW:()=>Nf,n5z:()=>kl,n_E:()=>Ci,oAB:()=>Mt,oxw:()=>Jr,pB0:()=>uo,q3G:()=>Mo,q4F:()=>Kp,qLn:()=>su,qOj:()=>ah,qZA:()=>ns,qzn:()=>hc,rWj:()=>YE,sBO:()=>gI,s_b:()=>La,soG:()=>yv,tBr:()=>da,tb:()=>XE,tp0:()=>ec,uIk:()=>fp,vHH:()=>Me,vpe:()=>kn,wAp:()=>Yr,xp6:()=>Qd,ynx:()=>zc,z2F:()=>_v,z3N:()=>dc,zSh:()=>Vh,zs3:()=>Su});var m=$(7579),g=$(727),Y=$(9751),ie=$(6451),Pe=$(3099);function Ae(n){for(let i in n)if(n[i]===Ae)return i;throw Error("Could not find renamed property on target object.")}function fe(n,i){for(const l in i)i.hasOwnProperty(l)&&!n.hasOwnProperty(l)&&(n[l]=i[l])}function de(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(de).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const l=i.indexOf("\n");return-1===l?i:i.substring(0,l)}function Fe(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const De=Ae({__forward_ref__:Ae});function he(n){return n.__forward_ref__=he,n.toString=function(){return de(this())},n}function be(n){return Ne(n)?n():n}function Ne(n){return"function"==typeof n&&n.hasOwnProperty(De)&&n.__forward_ref__===he}function je(n){return n&&!!n.\u0275providers}const Xe="https://g.co/ng/security#xss";class Me extends Error{constructor(i,l){super(Se(i,l)),this.code=i}}function Se(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function oe(n){return"string"==typeof n?n:null==n?"":String(n)}function et(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():oe(n)}function mt(n,i){throw new Me(-201,!1)}function Q(n,i){null==n&&function _t(n,i,l,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${l} ${d} ${i} <=Actual]`))}(i,n,null,"!=")}function Et(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function sn(n){return zn(n,tn)||zn(n,Qt)}function Cn(n){return null!==sn(n)}function zn(n,i){return n.hasOwnProperty(i)?n[i]:null}function wn(n){return n&&(n.hasOwnProperty(ir)||n.hasOwnProperty(jn))?n[ir]:null}const tn=Ae({\u0275prov:Ae}),ir=Ae({\u0275inj:Ae}),Qt=Ae({ngInjectableDef:Ae}),jn=Ae({ngInjectorDef:Ae});var fn=(()=>((fn=fn||{})[fn.Default=0]="Default",fn[fn.Host=1]="Host",fn[fn.Self=2]="Self",fn[fn.SkipSelf=4]="SkipSelf",fn[fn.Optional=8]="Optional",fn))();let xn;function Cr(n){const i=xn;return xn=n,i}function Hr(n,i,l){const d=sn(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&fn.Optional?null:void 0!==i?i:void mt(de(n))}const Tr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),vr={},oi="__NG_DI_FLAG__",mr="ngTempTokenPath",_i="ngTokenPath",pr=/\n/gm,ii="\u0275",Gn="__source";let vi;function rr(n){const i=vi;return vi=n,i}function Pi(n,i=fn.Default){if(void 0===vi)throw new Me(-203,!1);return null===vi?Hr(n,void 0,i):vi.get(n,i&fn.Optional?null:void 0,i)}function Xn(n,i=fn.Default){return(function Di(){return xn}()||Pi)(be(n),i)}function ei(n,i=fn.Default){return Xn(n,li(i))}function li(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Nr(n){const i=[];for(let l=0;l<n.length;l++){const d=be(n[l]);if(Array.isArray(d)){if(0===d.length)throw new Me(900,!1);let f,v=fn.Default;for(let M=0;M<d.length;M++){const L=d[M],H=Zr(L);"number"==typeof H?-1===H?f=L.token:v|=H:f=L}i.push(Xn(f,v))}else i.push(Xn(d))}return i}function si(n,i){return n[oi]=i,n.prototype[oi]=i,n}function Zr(n){return n[oi]}function He(n){return{toString:n}.toString()}var ce=(()=>((ce=ce||{})[ce.OnPush=0]="OnPush",ce[ce.Default=1]="Default",ce))(),Ee=(()=>{return(n=Ee||(Ee={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ee;var n})();const ue={},ot=[],Oe=Ae({\u0275cmp:Ae}),Ve=Ae({\u0275dir:Ae}),we=Ae({\u0275pipe:Ae}),rt=Ae({\u0275mod:Ae}),Rt=Ae({\u0275fac:Ae}),Yt=Ae({__NG_ELEMENT_ID__:Ae});let Dn=0;function _n(n){return He(()=>{const i=Qs(n),l={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ce.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Ee.Emulated,id:"c"+Dn++,styles:n.styles||ot,_:null,schemas:n.schemas||null,tView:null};fs(l);const d=n.dependencies;return l.directiveDefs=ps(d,!1),l.pipeDefs=ps(d,!0),l})}function kr(n){return Mn(n)||Lr(n)}function kt(n){return null!==n}function Mt(n){return He(()=>({type:n.type,bootstrap:n.bootstrap||ot,declarations:n.declarations||ot,imports:n.imports||ot,exports:n.exports||ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Pn(n,i){if(null==n)return ue;const l={};for(const d in n)if(n.hasOwnProperty(d)){let f=n[d],v=f;Array.isArray(f)&&(v=f[1],f=f[0]),l[f]=d,i&&(i[f]=v)}return l}function Kn(n){return He(()=>{const i=Qs(n);return fs(i),i})}function cr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Mn(n){return n[Oe]||null}function Lr(n){return n[Ve]||null}function Er(n){return n[we]||null}function lr(n){const i=Mn(n)||Lr(n)||Er(n);return null!==i&&i.standalone}function ur(n,i){const l=n[rt]||null;if(!l&&!0===i)throw new Error(`Type ${de(n)} does not have '\u0275mod' property.`);return l}function Qs(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Pn(n.inputs,i),outputs:Pn(n.outputs)}}function fs(n){var i;null===(i=n.features)||void 0===i||i.forEach(l=>l(n))}function ps(n,i){if(!n)return null;const l=i?Er:kr;return()=>("function"==typeof n?n():n).map(d=>l(d)).filter(kt)}const Oi=0,vn=1,hr=2,gi=3,Fr=4,Ei=5,mi=6,Wi=7,wr=8,ae=9,xe=10,Ze=11,Te=12,tt=13,nt=14,Nt=15,$t=16,Kt=17,Jt=18,mn=19,qn=20,Ln=21,sr=22,Zi=1,ft=2,st=7,Tt=8,qt=9,en=10;function Yn(n){return Array.isArray(n)&&"object"==typeof n[Zi]}function fr(n){return Array.isArray(n)&&!0===n[Zi]}function Qr(n){return 0!=(4&n.flags)}function Cs(n){return n.componentOffset>-1}function ks(n){return 1==(1&n.flags)}function qr(n){return!!n.template}function zr(n){return 0!=(256&n[hr])}function ui(n,i){return n.hasOwnProperty(Rt)?n[Rt]:null}class Co{constructor(i,l,d){this.previousValue=i,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Js(){return Do}function Do(n){return n.type.prototype.ngOnChanges&&(n.setInput=No),Qa}function Qa(){const n=eo(this),i=null==n?void 0:n.current;if(i){const l=n.previous;if(l===ue)n.previous=i;else for(let d in i)l[d]=i[d];n.current=null,this.ngOnChanges(i)}}function No(n,i,l,d){const f=this.declaredInputs[l],v=eo(n)||function Vr(n,i){return n[ko]=i}(n,{previous:ue,current:null}),M=v.current||(v.current={}),L=v.previous,H=L[f];M[f]=new Co(H&&H.currentValue,i,L===ue),n[d]=i}Js.ngInherit=!0;const ko="__ngSimpleChanges__";function eo(n){return n[ko]||null}const wi=function(n,i,l){},ws="svg";function Ti(n){for(;Array.isArray(n);)n=n[Oi];return n}function ls(n,i){return Ti(i[n])}function Ms(n,i){return Ti(i[n.index])}function oo(n,i){return n.data[i]}function Z(n,i){const l=i[n];return Yn(l)?l:l[Oi]}function q(n){return 64==(64&n[hr])}function Xt(n,i){return null==i?null:n[i]}function $n(n){n[Jt]=0}function er(n,i){n[Ei]+=i;let l=n,d=n[gi];for(;null!==d&&(1===i&&1===l[Ei]||-1===i&&0===l[Ei]);)d[Ei]+=i,l=d,d=d[gi]}const Tn={lFrame:Ea(null),bindingsEnabled:!0};function _e(){return Tn.bindingsEnabled}function pt(){return Tn.lFrame.lView}function St(){return Tn.lFrame.tView}function Dr(n){return Tn.lFrame.contextLView=n,n[wr]}function Xr(n){return Tn.lFrame.contextLView=null,n}function ti(){let n=$r();for(;null!==n&&64===n.type;)n=n.parent;return n}function $r(){return Tn.lFrame.currentTNode}function ki(n,i){const l=Tn.lFrame;l.currentTNode=n,l.isParent=i}function Ps(){return Tn.lFrame.isParent}function es(){Tn.lFrame.isParent=!1}function to(){return Tn.lFrame.bindingIndex++}function pl(n,i){const l=Tn.lFrame;l.bindingIndex=l.bindingRootIndex=n,vs(i)}function vs(n){Tn.lFrame.currentDirectiveIndex=n}function ya(){return Tn.lFrame.currentQueryIndex}function _a(n){Tn.lFrame.currentQueryIndex=n}function Sa(n){const i=n[vn];return 2===i.type?i.declTNode:1===i.type?n[mi]:null}function va(n,i,l){if(l&fn.SkipSelf){let f=i,v=n;for(;!(f=f.parent,null!==f||l&fn.Host||(f=Sa(v),null===f||(v=v[Nt],10&f.type))););if(null===f)return!1;i=f,n=v}const d=Tn.lFrame=Xa();return d.currentTNode=i,d.lView=n,!0}function Jo(n){const i=Xa(),l=n[vn];Tn.lFrame=i,i.currentTNode=l.firstChild,i.lView=n,i.tView=l,i.contextLView=n,i.bindingIndex=l.bindingStartIndex,i.inI18n=!1}function Xa(){const n=Tn.lFrame,i=null===n?null:n.child;return null===i?Ea(n):i}function Ea(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function wa(){const n=Tn.lFrame;return Tn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Wo=wa;function ml(){const n=wa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function zs(){return Tn.lFrame.selectedIndex}function Fo(n){Tn.lFrame.selectedIndex=n}function Ri(){const n=Tn.lFrame;return oo(n.tView,n.selectedIndex)}function Ol(){Tn.lFrame.currentNamespace=ws}function ea(){!function ql(){Tn.lFrame.currentNamespace=null}()}function Si(n,i){for(let X=i.directiveStart,ye=i.directiveEnd;X<ye;X++){const yt=n.data[X].type.prototype,{ngAfterContentInit:Bt,ngAfterContentChecked:ln,ngAfterViewInit:An,ngAfterViewChecked:nr,ngOnDestroy:Ar}=yt;var l,d,f,v,M,L,H;Bt&&(null!==(l=n.contentHooks)&&void 0!==l?l:n.contentHooks=[]).push(-X,Bt),ln&&((null!==(d=n.contentHooks)&&void 0!==d?d:n.contentHooks=[]).push(X,ln),(null!==(f=n.contentCheckHooks)&&void 0!==f?f:n.contentCheckHooks=[]).push(X,ln)),An&&(null!==(v=n.viewHooks)&&void 0!==v?v:n.viewHooks=[]).push(-X,An),nr&&((null!==(M=n.viewHooks)&&void 0!==M?M:n.viewHooks=[]).push(X,nr),(null!==(L=n.viewCheckHooks)&&void 0!==L?L:n.viewCheckHooks=[]).push(X,nr)),null!=Ar&&(null!==(H=n.destroyHooks)&&void 0!==H?H:n.destroyHooks=[]).push(X,Ar)}}function Aa(n,i,l){ee(n,i,3,l)}function la(n,i,l,d){(3&n[hr])===l&&ee(n,i,l,d)}function U(n,i){let l=n[hr];(3&l)===i&&(l&=2047,l+=1,n[hr]=l)}function ee(n,i,l,d){const v=null!=d?d:-1,M=i.length-1;let L=0;for(let H=void 0!==d?65535&n[Jt]:0;H<M;H++)if("number"==typeof i[H+1]){if(L=i[H],null!=d&&L>=d)break}else i[H]<0&&(n[Jt]+=65536),(L<v||-1==v)&&(z(n,l,i,H),n[Jt]=(4294901760&n[Jt])+H+2),H++}function z(n,i,l,d){const f=l[d]<0,v=l[d+1],L=n[f?-l[d]:l[d]];if(f){if(n[hr]>>11<n[Jt]>>16&&(3&n[hr])===i){n[hr]+=2048,wi(4,L,v);try{v.call(L)}finally{wi(5,L,v)}}}else{wi(4,L,v);try{v.call(L)}finally{wi(5,L,v)}}}const se=-1;class Ge{constructor(i,l,d){this.factory=i,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function yr(n,i,l){let d=0;for(;d<l.length;){const f=l[d];if("number"==typeof f){if(0!==f)break;d++;const v=l[d++],M=l[d++],L=l[d++];n.setAttribute(i,M,L,v)}else{const v=f,M=l[++d];Ws(v)?n.setProperty(i,v,M):n.setAttribute(i,v,M),d++}}return d}function xi(n){return 3===n||4===n||6===n}function Ws(n){return 64===n.charCodeAt(0)}function ao(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let l=-1;for(let d=0;d<i.length;d++){const f=i[d];"number"==typeof f?l=f:0===l||Lo(n,l,f,null,-1===l||2===l?i[++d]:null)}}return n}function Lo(n,i,l,d,f){let v=0,M=n.length;if(-1===i)M=-1;else for(;v<n.length;){const L=n[v++];if("number"==typeof L){if(L===i){M=-1;break}if(L>i){M=v-1;break}}}for(;v<n.length;){const L=n[v];if("number"==typeof L)break;if(L===l){if(null===d)return void(null!==f&&(n[v+1]=f));if(d===n[v+1])return void(n[v+2]=f)}v++,null!==d&&v++,null!==f&&v++}-1!==M&&(n.splice(M,0,i),v=M+1),n.splice(v++,0,l),null!==d&&n.splice(v++,0,d),null!==f&&n.splice(v++,0,f)}function Ks(n){return n!==se}function qs(n){return 32767&n}function no(n,i){let l=function Bo(n){return n>>16}(n),d=i;for(;l>0;)d=d[Nt],l--;return d}let el=!0;function ca(n){const i=el;return el=n,i}const Ia=255,Nl=5;let ro=0;const Eo={};function Yl(n,i){const l=yn(n,i);if(-1!==l)return l;const d=i[vn];d.firstCreatePass&&(n.injectorIndex=i.length,Os(d.data,n),Os(i,null),Os(d.blueprint,null));const f=ni(n,i),v=n.injectorIndex;if(Ks(f)){const M=qs(f),L=no(f,i),H=L[vn].data;for(let X=0;X<8;X++)i[v+X]=L[M+X]|H[M+X]}return i[v+8]=f,v}function Os(n,i){n.push(0,0,0,0,0,0,0,0,i)}function yn(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function ni(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let l=0,d=null,f=i;for(;null!==f;){if(d=Xl(f),null===d)return se;if(l++,f=f[Nt],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return se}function lo(n,i,l){!function _l(n,i,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Yt)&&(d=l[Yt]),null==d&&(d=l[Yt]=ro++);const f=d&Ia;i.data[n+(f>>Nl)]|=1<<f}(n,i,l)}function Zn(n,i,l){if(l&fn.Optional||void 0!==n)return n;mt()}function dr(n,i,l,d){if(l&fn.Optional&&void 0===d&&(d=null),!(l&(fn.Self|fn.Host))){const f=n[ae],v=Cr(void 0);try{return f?f.get(i,d,l&fn.Optional):Hr(i,d,l&fn.Optional)}finally{Cr(v)}}return Zn(d,0,l)}function Ku(n,i,l,d=fn.Default,f){if(null!==n){if(1024&i[hr]){const M=function kd(n,i,l,d,f){let v=n,M=i;for(;null!==v&&null!==M&&1024&M[hr]&&!(256&M[hr]);){const L=Un(v,M,l,d|fn.Self,Eo);if(L!==Eo)return L;let H=v.parent;if(!H){const X=M[Ln];if(X){const ye=X.get(l,Eo,d);if(ye!==Eo)return ye}H=Xl(M),M=M[Nt]}v=H}return f}(n,i,l,d,Eo);if(M!==Eo)return M}const v=Un(n,i,l,d,Eo);if(v!==Eo)return v}return dr(i,l,d,f)}function Un(n,i,l,d,f){const v=function wc(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Yt)?n[Yt]:void 0;return"number"==typeof i?i>=0?i&Ia:ba:i}(l);if("function"==typeof v){if(!va(i,n,d))return d&fn.Host?Zn(f,0,d):dr(i,l,d,f);try{const M=v(d);if(null!=M||d&fn.Optional)return M;mt()}finally{Wo()}}else if("number"==typeof v){let M=null,L=yn(n,i),H=se,X=d&fn.Host?i[$t][mi]:null;for((-1===L||d&fn.SkipSelf)&&(H=-1===L?ni(n,i):i[L+8],H!==se&&Ql(d,!1)?(M=i[vn],L=qs(H),i=no(H,i)):L=-1);-1!==L;){const ye=i[vn];if($o(v,L,ye.data)){const $e=Lt(L,i,l,M,d,X);if($e!==Eo)return $e}H=i[L+8],H!==se&&Ql(d,i[vn].data[L+8]===X)&&$o(v,L,i)?(M=ye,L=qs(H),i=no(H,i)):L=-1}}return f}function Lt(n,i,l,d,f,v){const M=i[vn],L=M.data[n+8],ye=an(L,M,l,null==d?Cs(L)&&el:d!=M&&0!=(3&L.type),f&fn.Host&&v===L);return null!==ye?br(i,M,ye,L):Eo}function an(n,i,l,d,f){const v=n.providerIndexes,M=i.data,L=1048575&v,H=n.directiveStart,ye=v>>20,yt=f?L+ye:n.directiveEnd;for(let Bt=d?L:L+ye;Bt<yt;Bt++){const ln=M[Bt];if(Bt<H&&l===ln||Bt>=H&&ln.type===l)return Bt}if(f){const Bt=M[H];if(Bt&&qr(Bt)&&Bt.type===l)return H}return null}function br(n,i,l,d){let f=n[l];const v=i.data;if(function Ht(n){return n instanceof Ge}(f)){const M=f;M.resolving&&function Le(n,i){const l=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new Me(-200,`Circular dependency in DI detected for ${n}${l}`)}(et(v[l]));const L=ca(M.canSeeViewProviders);M.resolving=!0;const H=M.injectImpl?Cr(M.injectImpl):null;va(n,d,fn.Default);try{f=n[l]=M.factory(void 0,v,n,d),i.firstCreatePass&&l>=d.directiveStart&&function Ja(n,i,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:v}=i.type.prototype;if(d){var M,L;const $e=Do(i);(null!==(M=l.preOrderHooks)&&void 0!==M?M:l.preOrderHooks=[]).push(n,$e),(null!==(L=l.preOrderCheckHooks)&&void 0!==L?L:l.preOrderCheckHooks=[]).push(n,$e)}var H,X,ye;f&&(null!==(H=l.preOrderHooks)&&void 0!==H?H:l.preOrderHooks=[]).push(0-n,f),v&&((null!==(X=l.preOrderHooks)&&void 0!==X?X:l.preOrderHooks=[]).push(n,v),(null!==(ye=l.preOrderCheckHooks)&&void 0!==ye?ye:l.preOrderCheckHooks=[]).push(n,v))}(l,v[l],i)}finally{null!==H&&Cr(H),ca(L),M.resolving=!1,Wo()}}return f}function $o(n,i,l){return!!(l[i+(n>>Nl)]&1<<n)}function Ql(n,i){return!(n&fn.Self||n&fn.Host&&i)}class $a{constructor(i,l){this._tNode=i,this._lView=l}get(i,l,d){return Ku(this._tNode,this._lView,i,li(d),l)}}function ba(){return new $a(ti(),pt())}function kl(n){return He(()=>{const i=n.prototype.constructor,l=i[Rt]||tl(i),d=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==d;){const v=f[Rt]||tl(f);if(v&&v!==l)return v;f=Object.getPrototypeOf(f)}return v=>new v})}function tl(n){return Ne(n)?()=>{const i=tl(be(n));return i&&i()}:ui(n)}function Xl(n){const i=n[vn],l=i.type;return 2===l?i.declTNode:1===l?n[mi]:null}function vl(n){return function Zl(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const l=n.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const v=l[f];if(xi(v))break;if(0===v)f+=2;else if("number"==typeof v)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(v===i)return l[f+1];f+=2}}}return null}(ti(),n)}const Rr="__parameters__";function tr(n,i,l){return He(()=>{const d=function us(n){return function(...l){if(n){const d=n(...l);for(const f in d)this[f]=d[f]}}}(i);function f(...v){if(this instanceof f)return d.apply(this,v),this;const M=new f(...v);return L.annotation=M,L;function L(H,X,ye){const $e=H.hasOwnProperty(Rr)?H[Rr]:Object.defineProperty(H,Rr,{value:[]})[Rr];for(;$e.length<=ye;)$e.push(null);return($e[ye]=$e[ye]||[]).push(M),H}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class ds{constructor(i,l){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Et({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function R(n,i){n.forEach(l=>Array.isArray(l)?R(l,i):i(l))}function O(n,i,l){i>=n.length?n.push(l):n.splice(i,0,l)}function w(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function B(n,i){const l=[];for(let d=0;d<n;d++)l.push(i);return l}function Ut(n,i,l){let d=Wn(n,i);return d>=0?n[1|d]=l:(d=~d,function pe(n,i,l,d){let f=n.length;if(f==i)n.push(l,d);else if(1===f)n.push(d,n[0]),n[0]=l;else{for(f--,n.push(n[f-1],n[f]);f>i;)n[f]=n[f-2],f--;n[i]=l,n[i+1]=d}}(n,d,i,l)),d}function pn(n,i){const l=Wn(n,i);if(l>=0)return n[1|l]}function Wn(n,i){return function zi(n,i,l){let d=0,f=n.length>>l;for(;f!==d;){const v=d+(f-d>>1),M=n[v<<l];if(i===M)return v<<l;M>i?f=v:d=v+1}return~(f<<l)}(n,i,1)}const da=si(tr("Inject",n=>({token:n})),-1),ta=si(tr("Optional"),8),ec=si(tr("SkipSelf"),4);var Yo=(()=>((Yo=Yo||{})[Yo.Important=1]="Important",Yo[Yo.DashCase=2]="DashCase",Yo))();const xa=new Map;let Pa=0;const Ct="__ngContext__";function jt(n,i){Yn(i)?(n[Ct]=i[qn],function Oa(n){xa.set(n[qn],n)}(i)):n[Ct]=i}let Ho;function Bl(n,i){return Ho(n,i)}function $l(n){const i=n[gi];return fr(i)?i[gi]:i}function Ai(n){return Mc(n[tt])}function Yi(n){return Mc(n[Fr])}function Mc(n){for(;null!==n&&!fr(n);)n=n[Fr];return n}function Ul(n,i,l,d,f){if(null!=d){let v,M=!1;fr(d)?v=d:Yn(d)&&(M=!0,d=d[Oi]);const L=Ti(d);0===n&&null!==l?null==f?zo(i,l,L):di(i,l,L,f||null,!0):1===n&&null!==l?di(i,l,L,f||null,!0):2===n?function Ca(n,i,l){const d=cc(n,i);d&&function Rc(n,i,l,d){n.removeChild(i,l,d)}(n,d,i,l)}(i,L,M):3===n&&i.destroyNode(L),null!=v&&function Ju(n,i,l,d,f){const v=l[st];v!==Ti(l)&&Ul(i,n,d,v,f);for(let L=en;L<l.length;L++){const H=l[L];Na(H[vn],H,n,i,d,v)}}(i,n,v,l,f)}}function Xu(n,i,l){return n.createElement(i,l)}function k(n,i){const l=n[qt],d=l.indexOf(i),f=i[gi];512&i[hr]&&(i[hr]&=-513,er(f,-1)),l.splice(d,1)}function ne(n,i){if(n.length<=en)return;const l=en+i,d=n[l];if(d){const f=d[Kt];null!==f&&f!==n&&k(f,d),i>0&&(n[l-1][Fr]=d[Fr]);const v=w(n,en+i);!function Mh(n,i){Na(n,i,i[Ze],2,null,null),i[Oi]=null,i[mi]=null}(d[vn],d);const M=v[mn];null!==M&&M.detachView(v[vn]),d[gi]=null,d[Fr]=null,d[hr]&=-65}return d}function Ce(n,i){if(!(128&i[hr])){const l=i[Ze];l.destroyNode&&Na(n,i,l,3,null,null),function x(n){let i=n[tt];if(!i)return bt(n[vn],n);for(;i;){let l=null;if(Yn(i))l=i[tt];else{const d=i[en];d&&(l=d)}if(!l){for(;i&&!i[Fr]&&i!==n;)Yn(i)&&bt(i[vn],i),i=i[gi];null===i&&(i=n),Yn(i)&&bt(i[vn],i),l=i&&i[Fr]}i=l}}(i)}}function bt(n,i){if(!(128&i[hr])){i[hr]&=-65,i[hr]|=128,function Rn(n,i){let l;if(null!=n&&null!=(l=n.destroyHooks))for(let d=0;d<l.length;d+=2){const f=i[l[d]];if(!(f instanceof Ge)){const v=l[d+1];if(Array.isArray(v))for(let M=0;M<v.length;M+=2){const L=f[v[M]],H=v[M+1];wi(4,L,H);try{H.call(L)}finally{wi(5,L,H)}}else{wi(4,f,v);try{v.call(f)}finally{wi(5,f,v)}}}}}(n,i),function Wt(n,i){const l=n.cleanup,d=i[Wi];let f=-1;if(null!==l)for(let v=0;v<l.length-1;v+=2)if("string"==typeof l[v]){const M=l[v+3];M>=0?d[f=M]():d[f=-M].unsubscribe(),v+=2}else{const M=d[f=l[v+1]];l[v].call(M)}if(null!==d){for(let v=f+1;v<d.length;v++)(0,d[v])();i[Wi]=null}}(n,i),1===i[vn].type&&i[Ze].destroy();const l=i[Kt];if(null!==l&&fr(i[gi])){l!==i[gi]&&k(l,i);const d=i[mn];null!==d&&d.detachView(n)}!function P(n){xa.delete(n[qn])}(i)}}function Bn(n,i,l){return function gr(n,i,l){let d=i;for(;null!==d&&40&d.type;)d=(i=d).parent;if(null===d)return l[Oi];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:v}=n.data[d.directiveStart+f];if(v===Ee.None||v===Ee.Emulated)return null}return Ms(d,l)}}(n,i.parent,l)}function di(n,i,l,d,f){n.insertBefore(i,l,d,f)}function zo(n,i,l){n.appendChild(i,l)}function Dl(n,i,l,d,f){null!==d?di(n,i,l,d,f):zo(n,i,l)}function cc(n,i){return n.parentNode(i)}function Vd(n,i,l){return _u(n,i,l)}let nu,Eu,yi,ed,_u=function xc(n,i,l){return 40&n.type?Ms(n,l):null};function Ao(n,i,l,d){const f=Bn(n,d,i),v=i[Ze],L=Vd(d.parent||i[mi],d,i);if(null!=f)if(Array.isArray(l))for(let H=0;H<l.length;H++)Dl(v,f,l[H],L,!1);else Dl(v,f,l,L,!1);void 0!==nu&&nu(v,d,i,l,f)}function ru(n,i){if(null!==i){const l=i.type;if(3&l)return Ms(i,n);if(4&l)return Pc(-1,n[i.index]);if(8&l){const d=i.child;if(null!==d)return ru(n,d);{const f=n[i.index];return fr(f)?Pc(-1,f):Ti(f)}}if(32&l)return Bl(i,n)()||Ti(n[i.index]);{const d=uc(n,i);return null!==d?Array.isArray(d)?d[0]:ru($l(n[$t]),d):ru(n,i.next)}}return null}function uc(n,i){return null!==i?n[$t][mi].projection[i.projection]:null}function Pc(n,i){const l=en+n+1;if(l<i.length){const d=i[l],f=d[vn].firstChild;if(null!==f)return ru(d,f)}return i[st]}function vu(n,i,l,d,f,v,M){for(;null!=l;){const L=d[l.index],H=l.type;if(M&&0===i&&(L&&jt(Ti(L),d),l.flags|=2),32!=(32&l.flags))if(8&H)vu(n,i,l.child,d,f,v,!1),Ul(i,n,f,L,v);else if(32&H){const X=Bl(l,d);let ye;for(;ye=X();)Ul(i,n,f,ye,v);Ul(i,n,f,L,v)}else 16&H?ll(n,i,d,l,f,v):Ul(i,n,f,L,v);l=M?l.projectionNext:l.next}}function Na(n,i,l,d,f,v){vu(l,d,n.firstChild,i,f,v,!1)}function ll(n,i,l,d,f,v){const M=l[$t],H=M[mi].projection[d.projection];if(Array.isArray(H))for(let X=0;X<H.length;X++)Ul(i,n,f,H[X],v);else vu(n,i,H,M[gi],f,v,!0)}function Go(n,i,l){""===l?n.removeAttribute(i,"class"):n.setAttribute(i,"class",l)}function Pg(n,i,l){const{mergedAttrs:d,classes:f,styles:v}=l;null!==d&&yr(n,i,d),null!==f&&Go(n,i,f),null!==v&&function xg(n,i,l){n.setAttribute(i,"style",l)}(n,i,v)}function Da(n){var i;return(null===(i=function Rf(){if(void 0===Eu&&(Eu=null,Tr.trustedTypes))try{Eu=Tr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Eu}())||void 0===i?void 0:i.createHTML(n))||n}function xf(n){yi=n}function Mp(n){var i;return(null===(i=function Ph(){if(void 0===ed&&(ed=null,Tr.trustedTypes))try{ed=Tr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ed}())||void 0===i?void 0:i.createScriptURL(n))||n}class Iu{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xe})`}}class jl extends Iu{getTypeName(){return"HTML"}}class td extends Iu{getTypeName(){return"Style"}}class nd extends Iu{getTypeName(){return"Script"}}class Ng extends Iu{getTypeName(){return"URL"}}class rd extends Iu{getTypeName(){return"ResourceURL"}}function dc(n){return n instanceof Iu?n.changingThisBreaksApplicationSecurity:n}function hc(n,i){const l=function kg(n){return n instanceof Iu&&n.getTypeName()||null}(n);if(null!=l&&l!==i){if("ResourceURL"===l&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${l} (see ${Xe})`)}return l===i}function Fg(n){return new jl(n)}function Oh(n){return new td(n)}function sy(n){return new nd(n)}function oy(n){return new Ng(n)}function uo(n){return new rd(n)}class Of{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const l=(new window.DOMParser).parseFromString(Da(i),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(i):(l.removeChild(l.firstChild),l)}catch{return null}}}class Lg{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const l=this.inertDocument.createElement("template");return l.innerHTML=Da(i),l}}const kh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Nf(n){return(n=String(n)).match(kh)?n:"unsafe:"+n}function Nc(n){const i={};for(const l of n.split(","))i[l]=!0;return i}function kc(...n){const i={};for(const l of n)for(const d in l)l.hasOwnProperty(d)&&(i[d]=!0);return i}const Fc=Nc("area,br,col,hr,img,wbr"),Rp=Nc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Sl=Nc("rp,rt"),Fh=kc(Fc,kc(Rp,Nc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),kc(Sl,Nc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),kc(Sl,Rp)),Hd=Nc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$g=kc(Hd,Nc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Nc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Zo=Nc("script,style,template");class ts{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let l=i.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(i){const l=i.nodeName.toLowerCase();if(!Fh.hasOwnProperty(l))return this.sanitizedSomething=!0,!Zo.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=i.attributes;for(let f=0;f<d.length;f++){const v=d.item(f),M=v.name,L=M.toLowerCase();if(!$g.hasOwnProperty(L)){this.sanitizedSomething=!0;continue}let H=v.value;Hd[L]&&(H=Nf(H)),this.buf.push(" ",M,'="',Pp(H),'"')}return this.buf.push(">"),!0}endElement(i){const l=i.nodeName.toLowerCase();Fh.hasOwnProperty(l)&&!Fc.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(i){this.buf.push(Pp(i))}checkClobberedElement(i,l){if(l&&(i.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return l}}const Ug=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vg=/([^\#-~ |!])/g;function Pp(n){return n.replace(/&/g,"&amp;").replace(Ug,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Vg,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let bu;function Op(n,i){let l=null;try{bu=bu||function Nh(n){const i=new Lg(n);return function ay(){try{return!!(new window.DOMParser).parseFromString(Da(""),"text/html")}catch{return!1}}()?new Of(i):i}(n);let d=i?String(i):"";l=bu.getInertBodyElement(d);let f=5,v=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=v,v=l.innerHTML,l=bu.getInertBodyElement(d)}while(d!==v);return Da((new ts).sanitizeChildren(Np(l)||l))}finally{if(l){const d=Np(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Np(n){return"content"in n&&function jg(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Mo=(()=>((Mo=Mo||{})[Mo.NONE=0]="NONE",Mo[Mo.HTML=1]="HTML",Mo[Mo.STYLE=2]="STYLE",Mo[Mo.SCRIPT=3]="SCRIPT",Mo[Mo.URL=4]="URL",Mo[Mo.RESOURCE_URL=5]="RESOURCE_URL",Mo))();function sd(n){const i=Bh();return i?i.sanitize(Mo.URL,n)||"":hc(n,"URL")?dc(n):Nf(oe(n))}function zd(n){const i=Bh();if(i)return Mp(i.sanitize(Mo.RESOURCE_URL,n)||"");if(hc(n,"ResourceURL"))return Mp(dc(n));throw new Me(904,!1)}function zg(n,i,l){return function Hg(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?zd:sd}(i,l)(n)}function Bh(){const n=pt();return n&&n[Te]}const Fp=new ds("ENVIRONMENT_INITIALIZER"),Wg=new ds("INJECTOR",-1),Kg=new ds("INJECTOR_DEF_TYPES");class fc{get(i,l=vr){if(l===vr){const d=new Error(`NullInjectorError: No provider for ${de(i)}!`);throw d.name="NullInjectorError",d}return l}}function Ro(n){return{\u0275providers:n}}function ja(...n){return{\u0275providers:Gd(0,n),\u0275fromNgModule:!0}}function Gd(n,...i){const l=[],d=new Set;let f;return R(i,v=>{const M=v;$h(M,l,[],d)&&(f||(f=[]),f.push(M))}),void 0!==f&&xo(f,l),l}function xo(n,i){for(let l=0;l<n.length;l++){const{providers:f}=n[l];od(f,v=>{i.push(v)})}}function $h(n,i,l,d){if(!(n=be(n)))return!1;let f=null,v=wn(n);const M=!v&&Mn(n);if(v||M){if(M&&!M.standalone)return!1;f=n}else{const H=n.ngModule;if(v=wn(H),!v)return!1;f=H}const L=d.has(f);if(M){if(L)return!1;if(d.add(f),M.dependencies){const H="function"==typeof M.dependencies?M.dependencies():M.dependencies;for(const X of H)$h(X,i,l,d)}}else{if(!v)return!1;{if(null!=v.imports&&!L){let X;d.add(f);try{R(v.imports,ye=>{$h(ye,i,l,d)&&(X||(X=[]),X.push(ye))})}finally{}void 0!==X&&xo(X,i)}if(!L){const X=ui(f)||(()=>new f);i.push({provide:f,useFactory:X,deps:ot},{provide:Kg,useValue:f,multi:!0},{provide:Fp,useValue:()=>Xn(f),multi:!0})}const H=v.providers;null==H||L||od(H,ye=>{i.push(ye)})}}return f!==n&&void 0!==n.providers}function od(n,i){for(let l of n)je(l)&&(l=l.\u0275providers),Array.isArray(l)?od(l,i):i(l)}const Lc=Ae({provide:String,useValue:Ae});function Uh(n){return null!==n&&"object"==typeof n&&Lc in n}function iu(n){return"function"==typeof n}const Vh=new ds("Set Injector scope."),jh={},Hh={};let ad;function ld(){return void 0===ad&&(ad=new fc),ad}class cd{}class $p extends cd{get destroyed(){return this._destroyed}constructor(i,l,d,f){super(),this.parent=l,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Du(i,M=>this.processProvider(M)),this.records.set(Wg,qd(void 0,this)),f.has("environment")&&this.records.set(cd,qd(void 0,this));const v=this.records.get(Vh);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Kg.multi,ot,fn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const l=rr(this),d=Cr(void 0);try{return i()}finally{rr(l),Cr(d)}}get(i,l=vr,d=fn.Default){this.assertNotDestroyed(),d=li(d);const f=rr(this),v=Cr(void 0);try{if(!(d&fn.SkipSelf)){let L=this.records.get(i);if(void 0===L){const H=function Cu(n){return"function"==typeof n||"object"==typeof n&&n instanceof ds}(i)&&sn(i);L=H&&this.injectableDefInScope(H)?qd(Kd(i),jh):null,this.records.set(i,L)}if(null!=L)return this.hydrate(i,L)}return(d&fn.Self?ld():this.parent).get(i,l=d&fn.Optional&&l===vr?null:l)}catch(M){if("NullInjectorError"===M.name){if((M[mr]=M[mr]||[]).unshift(de(i)),f)throw M;return function Kr(n,i,l,d){const f=n[mr];throw i[Gn]&&f.unshift(i[Gn]),n.message=function Qe(n,i,l,d=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==ii?n.slice(2):n;let f=de(i);if(Array.isArray(i))f=i.map(de).join(" -> ");else if("object"==typeof i){let v=[];for(let M in i)if(i.hasOwnProperty(M)){let L=i[M];v.push(M+":"+("string"==typeof L?JSON.stringify(L):de(L)))}f=`{${v.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${n.replace(pr,"\n  ")}`}("\n"+n.message,f,l,d),n[_i]=f,n[mr]=null,n}(M,i,"R3InjectorError",this.source)}throw M}finally{Cr(v),rr(f)}}resolveInjectorInitializers(){const i=rr(this),l=Cr(void 0);try{const d=this.get(Fp.multi,ot,fn.Self);for(const f of d)f()}finally{rr(i),Cr(l)}}toString(){const i=[],l=this.records;for(const d of l.keys())i.push(de(d));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processProvider(i){let l=iu(i=be(i))?i:be(i&&i.provide);const d=function qg(n){return Uh(n)?qd(void 0,n.useValue):qd(Vp(n),jh)}(i);if(iu(i)||!0!==i.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=qd(void 0,jh,!0),f.factory=()=>Nr(f.multi),this.records.set(l,f)),l=i,f.multi.push(i)}this.records.set(l,d)}hydrate(i,l){return l.value===jh&&(l.value=Hh,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Yg(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(i){if(!i.providedIn)return!1;const l=be(i.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Kd(n){const i=sn(n),l=null!==i?i.factory:ui(n);if(null!==l)return l;if(n instanceof ds)throw new Me(204,!1);if(n instanceof Function)return function Up(n){const i=n.length;if(i>0)throw B(i,"?"),new Me(204,!1);const l=function hn(n){return n&&(n[tn]||n[Qt])||null}(n);return null!==l?()=>l.factory(n):()=>new n}(n);throw new Me(204,!1)}function Vp(n,i,l){let d;if(iu(n)){const f=be(n);return ui(f)||Kd(f)}if(Uh(n))d=()=>be(n.useValue);else if(function Wd(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Nr(n.deps||[]));else if(function Lp(n){return!(!n||!n.useExisting)}(n))d=()=>Xn(be(n.useExisting));else{const f=be(n&&(n.useClass||n.provide));if(!function fy(n){return!!n.deps}(n))return ui(f)||Kd(f);d=()=>new f(...Nr(n.deps))}return d}function qd(n,i,l=!1){return{factory:n,value:i,multi:l?[]:void 0}}function Du(n,i){for(const l of n)Array.isArray(l)?Du(l,i):l&&je(l)?Du(l.\u0275providers,i):i(l)}class jp{}class Zg{}class gy{resolveComponentFactory(i){throw function Qg(n){const i=Error(`No component factory found for ${de(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Es=(()=>{class n{}return n.NULL=new gy,n})();function Hp(){return Al(ti(),pt())}function Al(n,i){return new pc(Ms(n,i))}let pc=(()=>{class n{constructor(l){this.nativeElement=l}}return n.__NG_ELEMENT_ID__=Hp,n})();function ud(n){return n instanceof pc?n.nativeElement:n}class Yd{}let Xg=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function zp(){const n=pt(),l=Z(ti().index,n);return(Yn(l)?l:n)[Ze]}(),n})(),Gp=(()=>{class n{}return n.\u0275prov=Et({token:n,providedIn:"root",factory:()=>null}),n})();class Wp{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Kp=new Wp("15.2.9"),qp={},Ff="ngOriginalError";function Zd(n){return n[Ff]}class su{constructor(){this._console=console}handleError(i){const l=this._findOriginalError(i);this._console.error("ERROR",i),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(i){let l=i&&Zd(i);for(;l&&Zd(l);)l=Zd(l);return l||null}}function ka(n){return n instanceof Function?n():n}function Yp(n,i,l){let d=n.length;for(;;){const f=n.indexOf(i,l);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const v=i.length;if(f+v===d||n.charCodeAt(f+v)<=32)return f}l=f+1}}const Bf="ng-template";function Zp(n,i,l){let d=0,f=!0;for(;d<n.length;){let v=n[d++];if("string"==typeof v&&f){const M=n[d++];if(l&&"class"===v&&-1!==Yp(M.toLowerCase(),i,0))return!0}else{if(1===v){for(;d<n.length&&"string"==typeof(v=n[d++]);)if(v.toLowerCase()===i)return!0;return!1}"number"==typeof v&&(f=!1)}}return!1}function Qp(n){return 4===n.type&&n.value!==Bf}function $f(n,i,l){return i===(4!==n.type||l?n.value:Bf)}function y_(n,i,l){let d=4;const f=n.attrs||[],v=function zl(n){for(let i=0;i<n.length;i++)if(xi(n[i]))return i;return n.length}(f);let M=!1;for(let L=0;L<i.length;L++){const H=i[L];if("number"!=typeof H){if(!M)if(4&d){if(d=2|1&d,""!==H&&!$f(n,H,l)||""===H&&1===i.length){if(Ml(d))return!1;M=!0}}else{const X=8&d?H:i[++L];if(8&d&&null!==n.attrs){if(!Zp(n.attrs,X,l)){if(Ml(d))return!1;M=!0}continue}const $e=Uf(8&d?"class":H,f,Qp(n),l);if(-1===$e){if(Ml(d))return!1;M=!0;continue}if(""!==X){let yt;yt=$e>v?"":f[$e+1].toLowerCase();const Bt=8&d?yt:null;if(Bt&&-1!==Yp(Bt,X,0)||2&d&&X!==yt){if(Ml(d))return!1;M=!0}}}}else{if(!M&&!Ml(d)&&!Ml(H))return!1;if(M&&Ml(H))continue;M=!1,d=H|1&d}}return Ml(d)||M}function Ml(n){return 0==(1&n)}function Uf(n,i,l,d){if(null===i)return-1;let f=0;if(d||!l){let v=!1;for(;f<i.length;){const M=i[f];if(M===n)return f;if(3===M||6===M)v=!0;else{if(1===M||2===M){let L=i[++f];for(;"string"==typeof L;)L=i[++f];continue}if(4===M)break;if(0===M){f+=4;continue}}f+=v?1:2}return-1}return function Gh(n,i){let l=n.indexOf(4);if(l>-1)for(l++;l<n.length;){const d=n[l];if("number"==typeof d)return-1;if(d===i)return l;l++}return-1}(i,n)}function nm(n,i,l=!1){for(let d=0;d<i.length;d++)if(y_(n,i[d],l))return!0;return!1}function hd(n,i){e:for(let l=0;l<i.length;l++){const d=i[l];if(n.length===d.length){for(let f=0;f<n.length;f++)if(n[f]!==d[f])continue e;return!0}}return!1}function Wh(n,i){return n?":not("+i.trim()+")":i}function jf(n){let i=n[0],l=1,d=2,f="",v=!1;for(;l<n.length;){let M=n[l];if("string"==typeof M)if(2&d){const L=n[++l];f+="["+M+(L.length>0?'="'+L+'"':"")+"]"}else 8&d?f+="."+M:4&d&&(f+=" "+M);else""!==f&&!Ml(M)&&(i+=Wh(v,f),f=""),d=M,v=v||!Ml(d);l++}return""!==f&&(i+=Wh(v,f)),i}const hi={};function Qd(n){Hf(St(),pt(),zs()+n,!1)}function Hf(n,i,l,d){if(!d)if(3==(3&i[hr])){const v=n.preOrderCheckHooks;null!==v&&Aa(i,v,l)}else{const v=n.preOrderHooks;null!==v&&la(i,v,0,l)}Fo(l)}function Jp(n,i=null,l=null,d){const f=om(n,i,l,d);return f.resolveInjectorInitializers(),f}function om(n,i=null,l=null,d,f=new Set){const v=[l||ot,ja(n)];return d=d||("object"==typeof n?void 0:de(n)),new $p(v,i||ld(),d||null,f)}let Su=(()=>{class n{static create(l,d){if(Array.isArray(l))return Jp({name:""},d,l,"");{var f;const v=null!==(f=l.name)&&void 0!==f?f:"";return Jp({name:v},l.parent,l.providers,v)}}}return n.THROW_IF_NOT_FOUND=vr,n.NULL=new fc,n.\u0275prov=Et({token:n,providedIn:"any",factory:()=>Xn(Wg)}),n.__NG_ELEMENT_ID__=-1,n})();function lu(n,i=fn.Default){const l=pt();return null===l?Xn(n,i):Ku(ti(),l,be(n),i)}function Yf(){throw new Error("invalid")}function Ha(n,i){const l=n.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const v=l[d+1];if(-1!==v){const M=n.data[v];_a(l[d]),M.contentQueries(2,i[v],v)}}}function xu(n,i,l,d,f,v,M,L,H,X,ye){const $e=i.blueprint.slice();return $e[Oi]=f,$e[hr]=76|d,(null!==ye||n&&1024&n[hr])&&($e[hr]|=1024),$n($e),$e[gi]=$e[Nt]=n,$e[wr]=l,$e[xe]=M||n&&n[xe],$e[Ze]=L||n&&n[Ze],$e[Te]=H||n&&n[Te]||null,$e[ae]=X||n&&n[ae]||null,$e[mi]=v,$e[qn]=function Jc(){return Pa++}(),$e[Ln]=ye,$e[$t]=2==i.type?n[$t]:$e,$e}function Pu(n,i,l,d,f){let v=n.data[i];if(null===v)v=function sg(n,i,l,d,f){const v=$r(),M=Ps(),H=n.data[i]=function tf(n,i,l,d,f,v){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,M?v:v&&v.parent,l,i,d,f);return null===n.firstChild&&(n.firstChild=H),null!==v&&(M?null==v.child&&null!==H.parent&&(v.child=H):null===v.next&&(v.next=H,H.prev=v)),H}(n,i,l,d,f),function ma(){return Tn.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=l,v.value=d,v.attrs=f;const M=function Bi(){const n=Tn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();v.injectorIndex=null===M?-1:M.injectorIndex}return ki(v,!0),v}function eh(n,i,l,d){if(0===l)return-1;const f=i.length;for(let v=0;v<l;v++)i.push(d),n.blueprint.push(d),n.data.push(null);return f}function fm(n,i,l){Jo(i);try{const d=n.viewQuery;null!==d&&_d(1,d,l);const f=n.template;null!==f&&Jh(n,i,f,1,l),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Ha(n,i),n.staticViewQueries&&_d(2,n.viewQuery,l);const v=n.components;null!==v&&function Xh(n,i){for(let l=0;l<i.length;l++)_m(n,i[l])}(i,v)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{i[hr]&=-5,ml()}}function Zf(n,i,l,d){const f=i[hr];if(128!=(128&f)){Jo(i);try{$n(i),function cs(n){return Tn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==l&&Jh(n,i,l,2,d);const M=3==(3&f);if(M){const X=n.preOrderCheckHooks;null!==X&&Aa(i,X,null)}else{const X=n.preOrderHooks;null!==X&&la(i,X,0,null),U(i,0)}if(function My(n){for(let i=Ai(n);null!==i;i=Yi(i)){if(!i[ft])continue;const l=i[qt];for(let d=0;d<l.length;d++){const f=l[d];512&f[hr]||er(f[gi],1),f[hr]|=512}}}(i),function Ay(n){for(let i=Ai(n);null!==i;i=Yi(i))for(let l=en;l<i.length;l++){const d=i[l],f=d[vn];q(d)&&Zf(f,d,f.template,d[wr])}}(i),null!==n.contentQueries&&Ha(n,i),M){const X=n.contentCheckHooks;null!==X&&Aa(i,X)}else{const X=n.contentHooks;null!==X&&la(i,X,1),U(i,1)}!function ig(n,i){const l=n.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)Fo(~f);else{const v=f,M=l[++d],L=l[++d];pl(M,v),L(2,i[v])}}}finally{Fo(-1)}}(n,i);const L=n.components;null!==L&&function hm(n,i){for(let l=0;l<i.length;l++)tp(n,i[l])}(i,L);const H=n.viewQuery;if(null!==H&&_d(2,H,d),M){const X=n.viewCheckHooks;null!==X&&Aa(i,X)}else{const X=n.viewHooks;null!==X&&la(i,X,2),U(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[hr]&=-41,512&i[hr]&&(i[hr]&=-513,er(i[gi],-1))}finally{ml()}}}function Jh(n,i,l,d,f){const v=zs(),M=2&d;try{Fo(-1),M&&i.length>sr&&Hf(n,i,sr,!1),wi(M?2:0,f),l(d,f)}finally{Fo(v),wi(M?3:1,f)}}function Ou(n,i,l){if(Qr(i)){const f=i.directiveEnd;for(let v=i.directiveStart;v<f;v++){const M=n.data[v];M.contentQueries&&M.contentQueries(1,l[v],v)}}}function Nu(n,i,l){_e()&&(function Cy(n,i,l,d){const f=l.directiveStart,v=l.directiveEnd;Cs(l)&&function ep(n,i,l){const d=Ms(i,n),f=ku(l),v=n[xe],M=rh(n,xu(n,f,null,l.onPush?32:16,d,i,v,v.createRenderer(d,l),null,null,null));n[i.index]=M}(i,l,n.data[f+l.componentOffset]),n.firstCreatePass||Yl(l,i),jt(d,i);const M=l.initialInputs;for(let L=f;L<v;L++){const H=n.data[L],X=br(i,n,L,l);jt(X,i),null!==M&&Ty(0,L-f,X,H,0,M),qr(H)&&(Z(l.index,i)[wr]=br(i,n,L,l))}}(n,i,l,Ms(l,i)),64==(64&l.flags)&&cg(n,i,l))}function ef(n,i,l=Ms){const d=i.localNames;if(null!==d){let f=i.index+1;for(let v=0;v<d.length;v+=2){const M=d[v+1],L=-1===M?l(i,n):n[M];n[f++]=L}}}function ku(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=md(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function md(n,i,l,d,f,v,M,L,H,X){const ye=sr+d,$e=ye+f,yt=function og(n,i){const l=[];for(let d=0;d<i;d++)l.push(d<n?null:hi);return l}(ye,$e),Bt="function"==typeof X?X():X;return yt[vn]={type:n,blueprint:yt,template:l,queries:null,viewQuery:L,declTNode:i,data:yt.slice().fill(null,ye),bindingStartIndex:ye,expandoStartIndex:$e,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof M?M():M,firstChild:null,schemas:H,consts:Bt,incompleteFirstPass:!1}}function pm(n,i,l,d){const f=rp(i);null===l?f.push(d):(f.push(l),n.firstCreatePass&&ip(n).push(d,f.length-1))}function lg(n,i,l,d){for(let f in n)if(n.hasOwnProperty(f)){l=null===l?{}:l;const v=n[f];null===d?Qf(l,i,f,v):d.hasOwnProperty(f)&&Qf(l,i,d[f],v)}return l}function Qf(n,i,l,d){n.hasOwnProperty(l)?n[l].push(i,d):n[l]=[i,d]}function za(n,i,l,d,f,v,M,L){const H=Ms(i,l);let ye,X=i.inputs;!L&&null!=X&&(ye=X[d])?(op(n,l,ye,d,f),Cs(i)&&function Xf(n,i){const l=Z(i,n);16&l[hr]||(l[hr]|=32)}(l,i.index)):3&i.type&&(d=function mm(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),f=null!=M?M(f,i.value||"",d):f,v.setProperty(H,d,f))}function yd(n,i,l,d){if(_e()){const f=null===d?null:{"":-1},v=function ug(n,i){const l=n.directiveRegistry;let d=null,f=null;if(l)for(let M=0;M<l.length;M++){const L=l[M];if(nm(i,L.selectors,!1))if(d||(d=[]),qr(L))if(null!==L.findHostDirectiveDefs){const H=[];f=f||new Map,L.findHostDirectiveDefs(L,H,f),d.unshift(...H,L),rf(n,i,H.length)}else d.unshift(L),rf(n,i,0);else{var v;f=f||new Map,null===(v=L.findHostDirectiveDefs)||void 0===v||v.call(L,L,d,f),d.push(L)}}return null===d?null:[d,f]}(n,l);let M,L;null===v?M=L=null:[M,L]=v,null!==M&&th(n,i,l,M,f,L),f&&function Dy(n,i,l){if(i){const d=n.localNames=[];for(let f=0;f<i.length;f+=2){const v=l[i[f+1]];if(null==v)throw new Me(-301,!1);d.push(i[f],v)}}}(l,d,f)}l.mergedAttrs=ao(l.mergedAttrs,l.attrs)}function th(n,i,l,d,f,v){for(let $e=0;$e<d.length;$e++)lo(Yl(l,i),n,d[$e].type);!function dg(n,i,l){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+l,n.providerIndexes=i}(l,n.data.length,d.length);for(let $e=0;$e<d.length;$e++){const yt=d[$e];yt.providersResolver&&yt.providersResolver(yt)}let M=!1,L=!1,H=eh(n,i,d.length,null);for(let $e=0;$e<d.length;$e++){const yt=d[$e];l.mergedAttrs=ao(l.mergedAttrs,yt.hostAttrs),sf(n,l,i,H,yt),ra(H,yt,f),null!==yt.contentQueries&&(l.flags|=4),(null!==yt.hostBindings||null!==yt.hostAttrs||0!==yt.hostVars)&&(l.flags|=64);const Bt=yt.type.prototype;var X,ye;!M&&(Bt.ngOnChanges||Bt.ngOnInit||Bt.ngDoCheck)&&((null!==(X=n.preOrderHooks)&&void 0!==X?X:n.preOrderHooks=[]).push(l.index),M=!0),L||!Bt.ngOnChanges&&!Bt.ngDoCheck||((null!==(ye=n.preOrderCheckHooks)&&void 0!==ye?ye:n.preOrderCheckHooks=[]).push(l.index),L=!0),H++}!function gm(n,i,l){const f=i.directiveEnd,v=n.data,M=i.attrs,L=[];let H=null,X=null;for(let ye=i.directiveStart;ye<f;ye++){const $e=v[ye],yt=l?l.get($e):null,ln=yt?yt.outputs:null;H=lg($e.inputs,ye,H,yt?yt.inputs:null),X=lg($e.outputs,ye,X,ln);const An=null===H||null===M||Qp(i)?null:hg(H,ye,M);L.push(An)}null!==H&&(H.hasOwnProperty("class")&&(i.flags|=8),H.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=L,i.inputs=H,i.outputs=X}(n,l,v)}function cg(n,i,l){const d=l.directiveStart,f=l.directiveEnd,v=l.index,M=function gl(){return Tn.lFrame.currentDirectiveIndex}();try{Fo(v);for(let L=d;L<f;L++){const H=n.data[L],X=i[L];vs(L),(null!==H.hostBindings||0!==H.hostVars||null!==H.hostAttrs)&&Jf(H,X)}}finally{Fo(-1),vs(M)}}function Jf(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function rf(n,i,l){var d;i.componentOffset=l,(null!==(d=n.components)&&void 0!==d?d:n.components=[]).push(i.index)}function ra(n,i,l){if(l){if(i.exportAs)for(let d=0;d<i.exportAs.length;d++)l[i.exportAs[d]]=n;qr(i)&&(l[""]=n)}}function sf(n,i,l,d,f){n.data[d]=f;const v=f.factory||(f.factory=ui(f.type)),M=new Ge(v,qr(f),lu);n.blueprint[d]=M,l[d]=M,function nh(n,i,l,d,f){const v=f.hostBindings;if(v){let M=n.hostBindingOpCodes;null===M&&(M=n.hostBindingOpCodes=[]);const L=~i.index;(function ym(n){let i=n.length;for(;i>0;){const l=n[--i];if("number"==typeof l&&l<0)return l}return 0})(M)!=L&&M.push(L),M.push(l,d,v)}}(n,i,d,eh(n,l,f.hostVars,hi),f)}function Ga(n,i,l,d,f,v){const M=Ms(n,i);!function af(n,i,l,d,f,v,M){if(null==v)n.removeAttribute(i,f,l);else{const L=null==M?oe(v):M(v,d||"",f);n.setAttribute(i,f,L,l)}}(i[Ze],M,v,n.value,l,d,f)}function Ty(n,i,l,d,f,v){const M=v[i];if(null!==M){const L=d.setInput;for(let H=0;H<M.length;){const X=M[H++],ye=M[H++],$e=M[H++];null!==L?d.setInput(l,$e,X,ye):l[ye]=$e}}}function hg(n,i,l){let d=null,f=0;for(;f<l.length;){const v=l[f];if(0!==v)if(5!==v){if("number"==typeof v)break;if(n.hasOwnProperty(v)){null===d&&(d=[]);const M=n[v];for(let L=0;L<M.length;L+=2)if(M[L]===i){d.push(v,M[L+1],l[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function Sy(n,i,l,d){return[n,!0,!1,i,null,0,d,l,null,null]}function tp(n,i){const l=Z(i,n);if(q(l)){const d=l[vn];48&l[hr]?Zf(d,l,d.template,l[wr]):l[Ei]>0&&lf(l)}}function lf(n){for(let d=Ai(n);null!==d;d=Yi(d))for(let f=en;f<d.length;f++){const v=d[f];if(q(v))if(512&v[hr]){const M=v[vn];Zf(M,v,M.template,v[wr])}else v[Ei]>0&&lf(v)}const l=n[vn].components;if(null!==l)for(let d=0;d<l.length;d++){const f=Z(l[d],n);q(f)&&f[Ei]>0&&lf(f)}}function _m(n,i){const l=Z(i,n),d=l[vn];(function np(n,i){for(let l=i.length;l<n.blueprint.length;l++)i.push(n.blueprint[l])})(d,l),fm(d,l,l[wr])}function rh(n,i){return n[tt]?n[nt][Fr]=i:n[tt]=i,n[nt]=i,i}function uu(n){for(;n;){n[hr]|=32;const i=$l(n);if(zr(n)&&!i)return n;n=i}return null}function ih(n,i,l,d=!0){const f=i[xe];f.begin&&f.begin();try{Zf(n,i,n.template,l)}catch(M){throw d&&jc(i,M),M}finally{f.end&&f.end()}}function _d(n,i,l){_a(0),i(n,l)}function rp(n){return n[Wi]||(n[Wi]=[])}function ip(n){return n.cleanup||(n.cleanup=[])}function jc(n,i){const l=n[ae],d=l?l.get(su,null):null;d&&d.handleError(i)}function op(n,i,l,d,f){for(let v=0;v<l.length;){const M=l[v++],L=l[v++],H=i[M],X=n.data[M];null!==X.setInput?X.setInput(H,f,d,L):H[L]=f}}function sh(n,i,l){let d=l?n.styles:null,f=l?n.classes:null,v=0;if(null!==i)for(let M=0;M<i.length;M++){const L=i[M];"number"==typeof L?v=L:1==v?f=Fe(f,L):2==v&&(d=Fe(d,L+": "+i[++M]+";"))}l?n.styles=d:n.stylesWithoutHost=d,l?n.classes=f:n.classesWithoutHost=f}function ap(n,i,l,d,f=!1){for(;null!==l;){const v=i[l.index];if(null!==v&&d.push(Ti(v)),fr(v))for(let L=en;L<v.length;L++){const H=v[L],X=H[vn].firstChild;null!==X&&ap(H[vn],H,X,d)}const M=l.type;if(8&M)ap(n,i,l.child,d);else if(32&M){const L=Bl(l,i);let H;for(;H=L();)d.push(H)}else if(16&M){const L=uc(i,l);if(Array.isArray(L))d.push(...L);else{const H=$l(i[$t]);ap(H[vn],H,L,d,!0)}}l=f?l.projectionNext:l.next}return d}class vd{get rootNodes(){const i=this._lView,l=i[vn];return ap(l,i,l.firstChild,[])}constructor(i,l){this._lView=i,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[wr]}set context(i){this._lView[wr]=i}get destroyed(){return 128==(128&this._lView[hr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[gi];if(fr(i)){const l=i[Tt],d=l?l.indexOf(this):-1;d>-1&&(ne(i,d),w(l,d))}this._attachedToViewContainer=!1}Ce(this._lView[vn],this._lView)}onDestroy(i){pm(this._lView[vn],this._lView,null,i)}markForCheck(){uu(this._cdRefInjectingView||this._lView)}detach(){this._lView[hr]&=-65}reattach(){this._lView[hr]|=64}detectChanges(){ih(this._lView[vn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rg(n,i){Na(n,i,i[Ze],2,null,null)}(this._lView[vn],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Me(902,!1);this._appRef=i}}class Ry extends vd{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;ih(i[vn],i,i[wr],!1)}checkNoChanges(){}get context(){return null}}class cf extends Es{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const l=Mn(i);return new dl(l,this.ngModule)}}function uf(n){const i=[];for(let l in n)n.hasOwnProperty(l)&&i.push({propName:n[l],templateName:l});return i}class lp{constructor(i,l){this.injector=i,this.parentInjector=l}get(i,l,d){d=li(d);const f=this.injector.get(i,qp,d);return f!==qp||l===qp?f:this.parentInjector.get(i,l,d)}}class dl extends Zg{get inputs(){return uf(this.componentDef.inputs)}get outputs(){return uf(this.componentDef.outputs)}constructor(i,l){super(),this.componentDef=i,this.ngModule=l,this.componentType=i.type,this.selector=function Ns(n){return n.map(jf).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!l}create(i,l,d,f){var v;let M=(f=f||this.ngModule)instanceof cd?f:null===(v=f)||void 0===v?void 0:v.injector;M&&null!==this.componentDef.getStandaloneInjector&&(M=this.componentDef.getStandaloneInjector(M)||M);const L=M?new lp(i,M):i,H=L.get(Yd,null);if(null===H)throw new Me(407,!1);const X=L.get(Gp,null),ye=H.createRenderer(null,this.componentDef),$e=this.componentDef.selectors[0][0]||"div",yt=d?function ag(n,i,l){return n.selectRootElement(i,l===Ee.ShadowDom)}(ye,d,this.componentDef.encapsulation):Xu(ye,$e,function ul(n){const i=n.toLowerCase();return"svg"===i?ws:"math"===i?"math":null}($e)),Bt=this.componentDef.onPush?288:272,ln=md(0,null,null,1,0,null,null,null,null,null),An=xu(null,ln,null,Bt,null,null,H,ye,X,L,null);let nr,Ar;Jo(An);try{const pi=this.componentDef;let En,Li=null;pi.findHostDirectiveDefs?(En=[],Li=new Map,pi.findHostDirectiveDefs(pi,En,Li),En.push(pi)):En=[pi];const bo=function xy(n,i){const l=n[vn],d=sr;return n[d]=i,Pu(l,d,2,"#host",null)}(An,yt),aa=function cp(n,i,l,d,f,v,M,L){const H=f[vn];!function Em(n,i,l,d){for(const f of n)i.mergedAttrs=ao(i.mergedAttrs,f.hostAttrs);null!==i.mergedAttrs&&(sh(i,i.mergedAttrs,!0),null!==l&&Pg(d,l,i))}(d,n,i,M);const X=v.createRenderer(i,l),ye=xu(f,ku(l),null,l.onPush?32:16,f[n.index],n,v,X,L||null,null,null);return H.firstCreatePass&&rf(H,n,d.length-1),rh(f,ye),f[n.index]=ye}(bo,yt,pi,En,An,H,ye);Ar=oo(ln,sr),yt&&function oh(n,i,l,d){if(d)yr(n,l,["ng-version",Kp.full]);else{const{attrs:f,classes:v}=function Xp(n){const i=[],l=[];let d=1,f=2;for(;d<n.length;){let v=n[d];if("string"==typeof v)2===f?""!==v&&i.push(v,n[++d]):8===f&&l.push(v);else{if(!Ml(f))break;f=v}d++}return{attrs:i,classes:l}}(i.selectors[0]);f&&yr(n,l,f),v&&v.length>0&&Go(n,l,v.join(" "))}}(ye,pi,yt,d),void 0!==l&&function Oy(n,i,l){const d=n.projection=[];for(let f=0;f<i.length;f++){const v=l[f];d.push(null!=v?Array.from(v):null)}}(Ar,this.ngContentSelectors,l),nr=function Py(n,i,l,d,f,v){const M=ti(),L=f[vn],H=Ms(M,f);th(L,f,M,l,null,d);for(let ye=0;ye<l.length;ye++)jt(br(f,L,M.directiveStart+ye,M),f);cg(L,f,M),H&&jt(H,f);const X=br(f,L,M.directiveStart+M.componentOffset,M);if(n[wr]=f[wr]=X,null!==v)for(const ye of v)ye(X,i);return Ou(L,M,n),X}(aa,pi,En,Li,An,[up]),fm(ln,An,null)}finally{ml()}return new df(this.componentType,nr,Al(Ar,An),An,Ar)}}class df extends jp{constructor(i,l,d,f,v){super(),this.location=d,this._rootLView=f,this._tNode=v,this.instance=l,this.hostView=this.changeDetectorRef=new Ry(f),this.componentType=i}setInput(i,l){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[i])){const v=this._rootLView;op(v[vn],v,f,i,l),uu(Z(this._tNode.index,v))}}get injector(){return new $a(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function up(){const n=ti();Si(pt()[vn],n)}function ah(n){let i=function pg(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),l=!0;const d=[n];for(;i;){let f;if(qr(n))f=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Me(903,!1);f=i.\u0275dir}if(f){if(l){d.push(f);const M=n;M.inputs=Hc(n.inputs),M.declaredInputs=Hc(n.declaredInputs),M.outputs=Hc(n.outputs);const L=f.hostBindings;L&&dp(n,L);const H=f.viewQuery,X=f.contentQueries;if(H&&wm(n,H),X&&gg(n,X),fe(n.inputs,f.inputs),fe(n.declaredInputs,f.declaredInputs),fe(n.outputs,f.outputs),qr(f)&&f.data.animation){const ye=n.data;ye.animation=(ye.animation||[]).concat(f.data.animation)}}const v=f.features;if(v)for(let M=0;M<v.length;M++){const L=v[M];L&&L.ngInherit&&L(n),L===ah&&(l=!1)}}i=Object.getPrototypeOf(i)}!function Gl(n){let i=0,l=null;for(let d=n.length-1;d>=0;d--){const f=n[d];f.hostVars=i+=f.hostVars,f.hostAttrs=ao(f.hostAttrs,l=ao(l,f.hostAttrs))}}(d)}function Hc(n){return n===ue?{}:n===ot?[]:n}function wm(n,i){const l=n.viewQuery;n.viewQuery=l?(d,f)=>{i(d,f),l(d,f)}:i}function gg(n,i){const l=n.contentQueries;n.contentQueries=l?(d,f,v)=>{i(d,f,v),l(d,f,v)}:i}function dp(n,i){const l=n.hostBindings;n.hostBindings=l?(d,f)=>{i(d,f),l(d,f)}:i}function ch(n){return!!uh(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function uh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ia(n,i,l){return!Object.is(n[i],l)&&(n[i]=l,!0)}function fp(n,i,l,d){const f=pt();return ia(f,to(),i)&&(St(),Ga(Ri(),f,n,i,l,d)),fp}function wt(n,i,l,d,f,v,M,L){const H=pt(),X=St(),ye=n+sr,$e=X.firstCreatePass?function gt(n,i,l,d,f,v,M,L,H){const X=i.consts,ye=Pu(i,n,4,M||null,Xt(X,L));yd(i,l,ye,Xt(X,H)),Si(i,ye);const $e=ye.tView=md(2,ye,d,f,v,i.directiveRegistry,i.pipeRegistry,null,i.schemas,X);return null!==i.queries&&(i.queries.template(i,ye),$e.queries=i.queries.embeddedTView(ye)),ye}(ye,X,H,i,l,d,f,v,M):X.data[ye];ki($e,!1);const yt=H[Ze].createComment("");Ao(X,H,yt,$e),jt(yt,H),rh(H,H[ye]=Sy(yt,H,yt,$e)),ks($e)&&Nu(X,H,$e),null!=M&&ef(H,$e,L)}function dn(n){return function S(n,i){return n[i]}(function Hs(){return Tn.lFrame.contextLView}(),sr+n)}function gn(n,i,l){const d=pt();return ia(d,to(),i)&&za(St(),Ri(),d,n,i,d[Ze],l,!1),gn}function Hn(n,i,l,d,f){const M=f?"class":"style";op(n,l,i.inputs[M],M,d)}function Fi(n,i,l,d){const f=pt(),v=St(),M=sr+n,L=f[Ze],H=v.firstCreatePass?function fi(n,i,l,d,f,v){const M=i.consts,H=Pu(i,n,2,d,Xt(M,f));return yd(i,l,H,Xt(M,v)),null!==H.attrs&&sh(H,H.attrs,!1),null!==H.mergedAttrs&&sh(H,H.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,H),H}(M,v,f,i,l,d):v.data[M],X=f[M]=Xu(L,i,function To(){return Tn.lFrame.currentNamespace}()),ye=ks(H);return ki(H,!0),Pg(L,X,H),32!=(32&H.flags)&&Ao(v,f,X,H),0===function I(){return Tn.lFrame.elementDepthCount}()&&jt(X,f),function D(){Tn.lFrame.elementDepthCount++}(),ye&&(Nu(v,f,H),Ou(v,H,f)),null!==d&&ef(f,H),Fi}function ns(){let n=ti();Ps()?es():(n=n.parent,ki(n,!1));const i=n;!function V(){Tn.lFrame.elementDepthCount--}();const l=St();return l.firstCreatePass&&(Si(l,n),Qr(n)&&l.queries.elementEnd(n)),null!=i.classesWithoutHost&&function jr(n){return 0!=(8&n.flags)}(i)&&Hn(l,i,pt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Pr(n){return 0!=(16&n.flags)}(i)&&Hn(l,i,pt(),i.stylesWithoutHost,!1),ns}function io(n,i,l,d){return Fi(n,i,l,d),ns(),io}function zc(n,i,l){const d=pt(),f=St(),v=n+sr,M=f.firstCreatePass?function Po(n,i,l,d,f){const v=i.consts,M=Xt(v,d),L=Pu(i,n,8,"ng-container",M);return null!==M&&sh(L,M,!0),yd(i,l,L,Xt(v,f)),null!==i.queries&&i.queries.elementStart(i,L),L}(v,f,d,i,l):f.data[v];ki(M,!0);const L=d[v]=d[Ze].createComment("");return Ao(f,d,L,M),jt(L,d),ks(M)&&(Nu(f,d,M),Ou(f,M,d)),null!=l&&ef(d,M),zc}function Rl(){let n=ti();const i=St();return Ps()?es():(n=n.parent,ki(n,!1)),i.firstCreatePass&&(Si(i,n),Qr(n)&&i.queries.elementEnd(n)),Rl}function ho(n,i,l){return zc(n,i,l),Rl(),ho}function Wa(){return pt()}function hh(n){return!!n&&"function"==typeof n.then}function hl(n){return!!n&&"function"==typeof n.subscribe}const fh=hl;function Md(n,i,l,d){const f=pt(),v=St(),M=ti();return function pf(n,i,l,d,f,v,M){const L=ks(d),X=n.firstCreatePass&&ip(n),ye=i[wr],$e=rp(i);let yt=!0;if(3&d.type||M){const An=Ms(d,i),nr=M?M(An):An,Ar=$e.length,pi=M?Li=>M(Ti(Li[d.index])):d.index;let En=null;if(!M&&L&&(En=function ph(n,i,l,d){const f=n.cleanup;if(null!=f)for(let v=0;v<f.length-1;v+=2){const M=f[v];if(M===l&&f[v+1]===d){const L=i[Wi],H=f[v+2];return L.length>H?L[H]:null}"string"==typeof M&&(v+=2)}return null}(n,i,f,d.index)),null!==En)(En.__ngLastListenerFn__||En).__ngNextListenerFn__=v,En.__ngLastListenerFn__=v,yt=!1;else{v=Or(d,i,ye,v,!1);const Li=l.listen(nr,f,v);$e.push(v,Li),X&&X.push(f,pi,Ar,Ar+1)}}else v=Or(d,i,ye,v,!1);const Bt=d.outputs;let ln;if(yt&&null!==Bt&&(ln=Bt[f])){const An=ln.length;if(An)for(let nr=0;nr<An;nr+=2){const bo=i[ln[nr]][ln[nr+1]].subscribe(v),aa=$e.length;$e.push(v,bo),X&&X.push(f,d.index,aa,-(aa+1))}}}(v,f,f[Ze],M,n,i,d),Md}function Ir(n,i,l,d){try{return wi(6,i,l),!1!==l(d)}catch(f){return jc(n,f),!1}finally{wi(7,i,l)}}function Or(n,i,l,d,f){return function v(M){if(M===Function)return d;uu(n.componentOffset>-1?Z(n.index,i):i);let H=Ir(i,l,d,M),X=v.__ngNextListenerFn__;for(;X;)H=Ir(i,l,X,M)&&H,X=X.__ngNextListenerFn__;return f&&!1===H&&(M.preventDefault(),M.returnValue=!1),H}}function Jr(n=1){return function yl(n){return(Tn.lFrame.contextLView=function Kl(n,i){for(;n>0;)i=i[Nt],n--;return i}(n,Tn.lFrame.contextLView))[wr]}(n)}function Gi(n,i){let l=null;const d=function Vf(n){const i=n.attrs;if(null!=i){const l=i.indexOf(5);if(!(1&l))return i[l+1]}return null}(n);for(let f=0;f<i.length;f++){const v=i[f];if("*"!==v){if(null===d?nm(n,v,!0):hd(d,v))return f}else l=f}return l}function fo(n){const i=pt()[$t][mi];if(!i.projection){const d=i.projection=B(n?n.length:1,null),f=d.slice();let v=i.child;for(;null!==v;){const M=n?Gi(v,n):0;null!==M&&(f[M]?f[M].projectionNext=v:d[M]=v,f[M]=v),v=v.next}}}function xl(n,i=0,l){const d=pt(),f=St(),v=Pu(f,sr+n,16,null,l||null);null===v.projection&&(v.projection=i),es(),32!=(32&v.flags)&&function Rh(n,i,l){ll(i[Ze],0,i,l,Bn(n,l,i),Vd(l.parent||i[mi],l,i))}(f,d,v)}function Dm(n,i){return n<<17|i<<2}function Uu(n){return n>>17&32767}function Tm(n){return 2|n}function Vu(n){return(131068&n)>>2}function ky(n,i){return-131069&n|i<<2}function Fy(n){return 1|n}function Sm(n,i,l,d,f){const v=n[l+1],M=null===i;let L=d?Uu(v):Vu(v),H=!1;for(;0!==L&&(!1===H||M);){const ye=n[L+1];E_(n[L],i)&&(H=!0,n[L+1]=d?Fy(ye):Tm(ye)),L=d?Uu(ye):Vu(ye)}H&&(n[l+1]=d?Tm(v):Fy(v))}function E_(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Wn(n,i)>=0}function zy(n,i,l){return Kc(n,i,l,!1),zy}function Pm(n,i){return Kc(n,i,null,!0),Pm}function Kc(n,i,l,d){const f=pt(),v=St(),M=function Rs(n){const i=Tn.lFrame,l=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,l}(2);v.firstUpdatePass&&function Wy(n,i,l,d){const f=n.data;if(null===f[l+1]){const v=f[zs()],M=function Gy(n,i){return i>=n.expandoStartIndex}(n,l);(function km(n,i){return 0!=(n.flags&(i?8:16))})(v,d)&&null===i&&!M&&(i=!1),i=function b_(n,i,l,d){const f=function Xo(n){const i=Tn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let v=d?i.residualClasses:i.residualStyles;if(null===f)0===(d?i.classBindings:i.styleBindings)&&(l=Rd(l=Nm(null,n,i,l,d),i.attrs,d),v=null);else{const M=i.directiveStylingLast;if(-1===M||n[M]!==f)if(l=Nm(f,n,i,l,d),null===v){let H=function Om(n,i,l){const d=l?i.classBindings:i.styleBindings;if(0!==Vu(d))return n[Uu(d)]}(n,i,d);void 0!==H&&Array.isArray(H)&&(H=Nm(null,n,i,H[1],d),H=Rd(H,i.attrs,d),function as(n,i,l,d){n[Uu(l?i.classBindings:i.styleBindings)]=d}(n,i,d,H))}else v=function C_(n,i,l){let d;const f=i.directiveEnd;for(let v=1+i.directiveStylingLast;v<f;v++)d=Rd(d,n[v].hostAttrs,l);return Rd(d,i.attrs,l)}(n,i,d)}return void 0!==v&&(d?i.residualClasses=v:i.residualStyles=v),l}(f,v,i,d),function By(n,i,l,d,f,v){let M=v?i.classBindings:i.styleBindings,L=Uu(M),H=Vu(M);n[d]=l;let ye,X=!1;if(Array.isArray(l)?(ye=l[1],(null===ye||Wn(l,ye)>0)&&(X=!0)):ye=l,f)if(0!==H){const yt=Uu(n[L+1]);n[d+1]=Dm(yt,L),0!==yt&&(n[yt+1]=ky(n[yt+1],d)),n[L+1]=function pp(n,i){return 131071&n|i<<17}(n[L+1],d)}else n[d+1]=Dm(L,0),0!==L&&(n[L+1]=ky(n[L+1],d)),L=d;else n[d+1]=Dm(H,0),0===L?L=d:n[H+1]=ky(n[H+1],d),H=d;X&&(n[d+1]=Tm(n[d+1])),Sm(n,ye,d,!0),Sm(n,ye,d,!1),function $y(n,i,l,d,f){const v=f?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof i&&Wn(v,i)>=0&&(l[d+1]=Fy(l[d+1]))}(i,ye,n,d,v),M=Dm(L,H),v?i.classBindings=M:i.styleBindings=M}(f,v,i,l,M,d)}}(v,n,M,d),i!==hi&&ia(f,M,i)&&function Ky(n,i,l,d,f,v,M,L){if(!(3&i.type))return;const H=n.data,X=H[L+1],ye=function Iv(n){return 1==(1&n)}(X)?T_(H,i,l,f,Vu(X),M):void 0;_f(ye)||(_f(v)||function v_(n){return 2==(2&n)}(X)&&(v=T_(H,null,l,f,L,M)),function Oc(n,i,l,d,f){if(i)f?n.addClass(l,d):n.removeClass(l,d);else{let v=-1===d.indexOf("-")?void 0:Yo.DashCase;null==f?n.removeStyle(l,d,v):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),v|=Yo.Important),n.setStyle(l,d,f,v))}}(d,M,ls(zs(),l),f,v))}(v,v.data[zs()],f,f[Ze],n,f[M+1]=function S_(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=de(dc(n)))),n}(i,l),d,M)}function Nm(n,i,l,d,f){let v=null;const M=l.directiveEnd;let L=l.directiveStylingLast;for(-1===L?L=l.directiveStart:L++;L<M&&(v=i[L],d=Rd(d,v.hostAttrs,f),v!==n);)L++;return null!==n&&(l.directiveStylingLast=L),d}function Rd(n,i,l){const d=l?1:2;let f=-1;if(null!==i)for(let v=0;v<i.length;v++){const M=i[v];"number"==typeof M?f=M:f===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ut(n,M,!!l||i[++v]))}return void 0===n?null:n}function T_(n,i,l,d,f,v){const M=null===i;let L;for(;f>0;){const H=n[f],X=Array.isArray(H),ye=X?H[1]:H,$e=null===ye;let yt=l[f+1];yt===hi&&(yt=$e?ot:void 0);let Bt=$e?pn(yt,d):ye===d?yt:void 0;if(X&&!_f(Bt)&&(Bt=pn(H,d)),_f(Bt)&&(L=Bt,M))return L;const ln=n[f+1];f=M?Uu(ln):Vu(ln)}if(null!==i){let H=v?i.residualClasses:i.residualStyles;null!=H&&(L=pn(H,d))}return L}function _f(n){return void 0!==n}function A_(n,i=""){const l=pt(),d=St(),f=n+sr,v=d.firstCreatePass?Pu(d,f,1,i,null):d.data[f],M=l[f]=function Qu(n,i){return n.createText(i)}(l[Ze],i);Ao(d,l,M,v),ki(v,!1)}function Eg(n){return Fm("",n,""),Eg}function Fm(n,i,l){const d=pt(),f=function Dd(n,i,l,d){return ia(n,to(),l)?i+oe(l)+d:hi}(d,n,i,l);return f!==hi&&function mc(n,i,l){const d=ls(i,n);!function Sh(n,i,l){n.setValue(i,l)}(n[Ze],d,l)}(d,zs(),f),Fm}function Xy(n,i,l){const d=pt();return ia(d,to(),i)&&za(St(),Ri(),d,n,i,d[Ze],l,!0),Xy}const Ef=void 0;var e_=["en",[["a","p"],["AM","PM"],Ef],[["AM","PM"],Ef,Ef],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ef,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ef,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ef,"{1} 'at' {0}",Ef],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Jy(n){const l=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let wf={};function $m(n){const i=function Vm(n){return n.toLowerCase().replace(/_/g,"-")}(n);let l=_p(i);if(l)return l;const d=i.split("-")[0];if(l=_p(d),l)return l;if("en"===d)return e_;throw new Me(701,!1)}function Um(n){return $m(n)[Yr.PluralCase]}function _p(n){return n in wf||(wf[n]=Tr.ng&&Tr.ng.common&&Tr.ng.common.locales&&Tr.ng.common.locales[n]),wf[n]}var Yr=(()=>((Yr=Yr||{})[Yr.LocaleId=0]="LocaleId",Yr[Yr.DayPeriodsFormat=1]="DayPeriodsFormat",Yr[Yr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Yr[Yr.DaysFormat=3]="DaysFormat",Yr[Yr.DaysStandalone=4]="DaysStandalone",Yr[Yr.MonthsFormat=5]="MonthsFormat",Yr[Yr.MonthsStandalone=6]="MonthsStandalone",Yr[Yr.Eras=7]="Eras",Yr[Yr.FirstDayOfWeek=8]="FirstDayOfWeek",Yr[Yr.WeekendRange=9]="WeekendRange",Yr[Yr.DateFormat=10]="DateFormat",Yr[Yr.TimeFormat=11]="TimeFormat",Yr[Yr.DateTimeFormat=12]="DateTimeFormat",Yr[Yr.NumberSymbols=13]="NumberSymbols",Yr[Yr.NumberFormats=14]="NumberFormats",Yr[Yr.CurrencyCode=15]="CurrencyCode",Yr[Yr.CurrencySymbol=16]="CurrencySymbol",Yr[Yr.CurrencyName=17]="CurrencyName",Yr[Yr.Currencies=18]="Currencies",Yr[Yr.Directionality=19]="Directionality",Yr[Yr.PluralCase=20]="PluralCase",Yr[Yr.ExtraData=21]="ExtraData",Yr))();const vp="en-US";let wp=vp;function Ag(n,i,l,d,f){if(n=be(n),Array.isArray(n))for(let v=0;v<n.length;v++)Ag(n[v],i,l,d,f);else{const v=St(),M=pt();let L=iu(n)?n:be(n.provide),H=Vp(n);const X=ti(),ye=1048575&X.providerIndexes,$e=X.directiveStart,yt=X.providerIndexes>>20;if(iu(n)||!n.multi){const Bt=new Ge(H,f,lu),ln=Qm(L,i,f?ye:ye+yt,$e);-1===ln?(lo(Yl(X,M),v,L),l_(v,n,i.length),i.push(L),X.directiveStart++,X.directiveEnd++,f&&(X.providerIndexes+=1048576),l.push(Bt),M.push(Bt)):(l[ln]=Bt,M[ln]=Bt)}else{const Bt=Qm(L,i,ye+yt,$e),ln=Qm(L,i,ye,ye+yt),nr=ln>=0&&l[ln];if(f&&!nr||!f&&!(Bt>=0&&l[Bt])){lo(Yl(X,M),v,L);const Ar=function tv(n,i,l,d,f){const v=new Ge(n,l,lu);return v.multi=[],v.index=i,v.componentProviders=0,ev(v,f,d&&!l),v}(f?m0:Xm,l.length,f,d,H);!f&&nr&&(l[ln].providerFactory=Ar),l_(v,n,i.length,0),i.push(L),X.directiveStart++,X.directiveEnd++,f&&(X.providerIndexes+=1048576),l.push(Ar),M.push(Ar)}else l_(v,n,Bt>-1?Bt:ln,ev(l[f?ln:Bt],H,!f&&d));!f&&d&&nr&&l[ln].componentProviders++}}}function l_(n,i,l,d){const f=iu(i),v=function Bp(n){return!!n.useClass}(i);if(f||v){const H=(v?be(i.useClass):i).prototype.ngOnDestroy;if(H){const X=n.destroyHooks||(n.destroyHooks=[]);if(!f&&i.multi){const ye=X.indexOf(l);-1===ye?X.push(l,[d,H]):X[ye+1].push(d,H)}else X.push(l,H)}}}function ev(n,i,l){return l&&n.componentProviders++,n.multi.push(i)-1}function Qm(n,i,l,d){for(let f=l;f<d;f++)if(i[f]===n)return f;return-1}function Xm(n,i,l,d){return Jm(this.multi,[])}function m0(n,i,l,d){const f=this.multi;let v;if(this.providerFactory){const M=this.providerFactory.componentProviders,L=br(l,l[vn],this.providerFactory.index,d);v=L.slice(0,M),Jm(f,v);for(let H=M;H<L.length;H++)v.push(L[H])}else v=[],Jm(f,v);return v}function Jm(n,i){for(let l=0;l<n.length;l++)i.push((0,n[l])());return i}function vh(n,i=[]){return l=>{l.providersResolver=(d,f)=>function Sg(n,i,l){const d=St();if(d.firstCreatePass){const f=qr(n);Ag(l,d.data,d.blueprint,f,!0),Ag(i,d.data,d.blueprint,f,!1)}}(d,f?f(n):n,i)}}class Za{}class fl{}function nv(n,i){return new Tp(n,null!=i?i:null)}class Tp extends Za{constructor(i,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cf(this);const d=ur(i);this._bootstrapComponents=ka(d.bootstrap),this._r3Injector=om(i,l,[{provide:Za,useValue:this},{provide:Es,useValue:this.componentFactoryResolver}],de(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Tf extends fl{constructor(i){super(),this.moduleType=i}create(i){return new Tp(this.moduleType,i)}}class Pl extends Za{constructor(i,l,d){super(),this.componentFactoryResolver=new cf(this),this.instance=null;const f=new $p([...i,{provide:Za,useValue:this},{provide:Es,useValue:this.componentFactoryResolver}],l||ld(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function c_(n,i,l=null){return new Pl(n,i,l).injector}let u_=(()=>{class n{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const d=Gd(0,l.type),f=d.length>0?c_([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Et({token:n,providedIn:"environment",factory:()=>new n(Xn(cd))}),n})();function Sf(n){n.getStandaloneInjector=i=>i.get(u_).getOrCreateStandaloneInjector(n)}function Sn(n){return i=>{setTimeout(n,void 0,i)}}const kn=class rn extends m.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,l,d){let f=i,v=l||(()=>null),M=d;if(i&&"object"==typeof i){var L,H,X;const $e=i;f=null===(L=$e.next)||void 0===L?void 0:L.bind($e),v=null===(H=$e.error)||void 0===H?void 0:H.bind($e),M=null===(X=$e.complete)||void 0===X?void 0:X.bind($e)}this.__isAsync&&(v=Sn(v),f&&(f=Sn(f)),M&&(M=Sn(M)));const ye=super.subscribe({next:f,error:v,complete:M});return i instanceof g.w0&&i.add(ye),ye}};function _r(){return this._results[Symbol.iterator]()}class Ci{get changes(){return this._changes||(this._changes=new kn)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Ci.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=_r)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,l){return this._results.reduce(i,l)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,l){const d=this;d.dirty=!1;const f=function Uo(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Dc(n,i,l){if(n.length!==i.length)return!1;for(let d=0;d<n.length;d++){let f=n[d],v=i[d];if(l&&(f=l(f),v=l(v)),v!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let rs=(()=>{class n{}return n.__NG_ELEMENT_ID__=so,n})();const Mi=rs,Fa=class extends Mi{constructor(i,l,d){super(),this._declarationLView=i,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(i,l){const d=this._declarationTContainer.tView,f=xu(this._declarationLView,d,i,16,null,d.declTNode,null,null,null,null,l||null);f[Kt]=this._declarationLView[this._declarationTContainer.index];const M=this._declarationLView[mn];return null!==M&&(f[mn]=M.createEmbeddedView(d)),fm(d,f,i),new vd(f)}};function so(){return Us(ti(),pt())}function Us(n,i){return 4&n.type?new Fa(i,n,Al(n,i)):null}let La=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ih,n})();function Ih(){return hE(ti(),pt())}const mw=La,uE=class extends mw{constructor(i,l,d){super(),this._lContainer=i,this._hostTNode=l,this._hostLView=d}get element(){return Al(this._hostTNode,this._hostLView)}get injector(){return new $a(this._hostTNode,this._hostLView)}get parentInjector(){const i=ni(this._hostTNode,this._hostLView);if(Ks(i)){const l=no(i,this._hostLView),d=qs(i);return new $a(l[vn].data[d+8],l)}return new $a(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const l=dE(this._lContainer);return null!==l&&l[i]||null}get length(){return this._lContainer.length-en}createEmbeddedView(i,l,d){let f,v;"number"==typeof d?f=d:null!=d&&(f=d.index,v=d.injector);const M=i.createEmbeddedView(l||{},v);return this.insert(M,f),M}createComponent(i,l,d,f,v){const M=i&&!function Ua(n){return"function"==typeof n}(i);let L;if(M)L=l;else{const $e=l||{};L=$e.index,d=$e.injector,f=$e.projectableNodes,v=$e.environmentInjector||$e.ngModuleRef}const H=M?i:new dl(Mn(i)),X=d||this.parentInjector;if(!v&&null==H.ngModule){const yt=(M?X:this.parentInjector).get(cd,null);yt&&(v=yt)}const ye=H.create(X,f,void 0,v);return this.insert(ye.hostView,L),ye}insert(i,l){const d=i._lView,f=d[vn];if(function Ie(n){return fr(n[gi])}(d)){const ye=this.indexOf(i);if(-1!==ye)this.detach(ye);else{const $e=d[gi],yt=new uE($e,$e[mi],$e[gi]);yt.detach(yt.indexOf(i))}}const v=this._adjustIndex(l),M=this._lContainer;!function _(n,i,l,d){const f=en+d,v=l.length;d>0&&(l[f-1][Fr]=i),d<v-en?(i[Fr]=l[f],O(l,en+d,i)):(l.push(i),i[Fr]=null),i[gi]=l;const M=i[Kt];null!==M&&l!==M&&function b(n,i){const l=n[qt];i[$t]!==i[gi][gi][$t]&&(n[ft]=!0),null===l?n[qt]=[i]:l.push(i)}(M,i);const L=i[mn];null!==L&&L.insertView(n),i[hr]|=64}(f,d,M,v);const L=Pc(v,M),H=d[Ze],X=cc(H,M[st]);return null!==X&&function Mf(n,i,l,d,f,v){d[Oi]=f,d[mi]=i,Na(n,d,l,1,f,v)}(f,M[mi],H,d,X,L),i.attachToViewContainerRef(),O(A0(M),v,i),i}move(i,l){return this.insert(i,l)}indexOf(i){const l=dE(this._lContainer);return null!==l?l.indexOf(i):-1}remove(i){const l=this._adjustIndex(i,-1),d=ne(this._lContainer,l);d&&(w(A0(this._lContainer),l),Ce(d[vn],d))}detach(i){const l=this._adjustIndex(i,-1),d=ne(this._lContainer,l);return d&&null!=w(A0(this._lContainer),l)?new vd(d):null}_adjustIndex(i,l=0){return null==i?this.length+l:i}};function dE(n){return n[Tt]}function A0(n){return n[Tt]||(n[Tt]=[])}function hE(n,i){let l;const d=i[n.index];if(fr(d))l=d;else{let f;if(8&n.type)f=Ti(d);else{const v=i[Ze];f=v.createComment("");const M=Ms(n,i);di(v,cc(v,M),f,function tu(n,i){return n.nextSibling(i)}(v,M),!1)}i[n.index]=l=Sy(d,i,f,n),rh(i,l)}return new uE(l,n,i)}class M0{constructor(i){this.queryList=i,this.matches=null}clone(){return new M0(this.queryList)}setDirty(){this.queryList.setDirty()}}class R0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const l=i.queries;if(null!==l){const d=null!==i.contentQueries?i.contentQueries[0]:l.length,f=[];for(let v=0;v<d;v++){const M=l.getByIndex(v);f.push(this.queries[M.indexInDeclarationView].clone())}return new R0(f)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let l=0;l<this.queries.length;l++)null!==wE(i,l).matches&&this.queries[l].setDirty()}}class fE{constructor(i,l,d=null){this.predicate=i,this.flags=l,this.read=d}}class x0{constructor(i=[]){this.queries=i}elementStart(i,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(i,l)}elementEnd(i){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(i)}embeddedTView(i){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,v=this.getByIndex(d).embeddedTView(i,f);v&&(v.indexInDeclarationView=d,null!==l?l.push(v):l=[v])}return null!==l?new x0(l):null}template(i,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(i,l)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class P0{constructor(i,l=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(i,l){this.isApplyingToNode(l)&&this.matchTNode(i,l)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,l){this.elementStart(i,l)}embeddedTView(i,l){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,l),new P0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=i.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(i,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const v=d[f];this.matchTNodeWithReadOption(i,l,yw(l,v)),this.matchTNodeWithReadOption(i,l,an(l,i,v,!1,!1))}else d===rs?4&l.type&&this.matchTNodeWithReadOption(i,l,-1):this.matchTNodeWithReadOption(i,l,an(l,i,d,!1,!1))}matchTNodeWithReadOption(i,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===pc||f===La||f===rs&&4&l.type)this.addMatch(l.index,-2);else{const v=an(l,i,f,!1,!1);null!==v&&this.addMatch(l.index,v)}else this.addMatch(l.index,d)}}addMatch(i,l){null===this.matches?this.matches=[i,l]:this.matches.push(i,l)}}function yw(n,i){const l=n.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===i)return l[d+1];return null}function vw(n,i,l,d){return-1===l?function _w(n,i){return 11&n.type?Al(n,i):4&n.type?Us(n,i):null}(i,n):-2===l?function Ew(n,i,l){return l===pc?Al(i,n):l===rs?Us(i,n):l===La?hE(i,n):void 0}(n,i,d):br(n,n[vn],l,i)}function pE(n,i,l,d){const f=i[mn].queries[d];if(null===f.matches){const v=n.data,M=l.matches,L=[];for(let H=0;H<M.length;H+=2){const X=M[H];L.push(X<0?null:vw(i,v[X],M[H+1],l.metadata.read))}f.matches=L}return f.matches}function O0(n,i,l,d){const f=n.queries.getByIndex(l),v=f.matches;if(null!==v){const M=pE(n,i,f,l);for(let L=0;L<v.length;L+=2){const H=v[L];if(H>0)d.push(M[L/2]);else{const X=v[L+1],ye=i[-H];for(let $e=en;$e<ye.length;$e++){const yt=ye[$e];yt[Kt]===yt[gi]&&O0(yt[vn],yt,X,d)}if(null!==ye[qt]){const $e=ye[qt];for(let yt=0;yt<$e.length;yt++){const Bt=$e[yt];O0(Bt[vn],Bt,X,d)}}}}}return d}function gE(n){const i=pt(),l=St(),d=ya();_a(d+1);const f=wE(l,d);if(n.dirty&&function A(n){return 4==(4&n[hr])}(i)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const v=f.crossesNgTemplate?O0(l,i,d,[]):pE(l,i,f,d);n.reset(v,ud),n.notifyOnChanges()}return!0}return!1}function mE(n,i,l){const d=St();d.firstCreatePass&&(EE(d,new fE(n,i,l),-1),2==(2&i)&&(d.staticViewQueries=!0)),vE(d,pt(),i)}function yE(n,i,l,d){const f=St();if(f.firstCreatePass){const v=ti();EE(f,new fE(i,l,d),v.index),function Iw(n,i){const l=n.contentQueries||(n.contentQueries=[]);i!==(l.length?l[l.length-1]:-1)&&l.push(n.queries.length-1,i)}(f,n),2==(2&l)&&(f.staticContentQueries=!0)}vE(f,pt(),l)}function _E(){return function ww(n,i){return n[mn].queries[i].queryList}(pt(),ya())}function vE(n,i,l){const d=new Ci(4==(4&l));pm(n,i,d,d.destroy),null===i[mn]&&(i[mn]=new R0),i[mn].queries.push(new M0(d))}function EE(n,i,l){null===n.queries&&(n.queries=new x0),n.queries.track(new P0(i,l))}function wE(n,i){return n.queries.getByIndex(i)}function IE(n,i){return Us(n,i)}function N0(n){return!!ur(n)}function gv(...n){}const UE=new ds("Application Initializer");let mv=(()=>{class n{constructor(l){this.appInits=l,this.resolve=gv,this.reject=gv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const v=this.appInits[f]();if(hh(v))l.push(v);else if(fh(v)){const M=new Promise((L,H)=>{v.subscribe({complete:L,error:H})});l.push(M)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return n.\u0275fac=function(l){return new(l||n)(Xn(UE,8))},n.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VE=new ds("AppId",{providedIn:"root",factory:function jE(){return`${$0()}${$0()}${$0()}`}});function $0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const HE=new ds("Platform Initializer"),jw=new ds("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Hw=new ds("AnimationModuleType");let zw=(()=>{class n{log(l){console.log(l)}warn(l){console.warn(l)}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const yv=new ds("LocaleId",{providedIn:"root",factory:()=>ei(yv,fn.Optional|fn.SkipSelf)||function Gw(){return typeof $localize<"u"&&$localize.locale||vp}()}),Ww=new ds("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Kw{constructor(i,l){this.ngModuleFactory=i,this.componentFactories=l}}let qw=(()=>{class n{compileModuleSync(l){return new Tf(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),v=ka(ur(l).declarations).reduce((M,L)=>{const H=Mn(L);return H&&M.push(new dl(H)),M},[]);return new Kw(d,v)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qw=(()=>Promise.resolve(0))();function U0(n){typeof Zone>"u"?Qw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Wu{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kn(!1),this.onMicrotaskEmpty=new kn(!1),this.onStable=new kn(!1),this.onError=new kn(!1),typeof Zone>"u")throw new Me(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Xw(){let n=Tr.requestAnimationFrame,i=Tr.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const l=n[Zone.__symbol__("OriginalDelegate")];l&&(n=l);const d=i[Zone.__symbol__("OriginalDelegate")];d&&(i=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function tI(n){const i=()=>{!function eI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Tr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j0(n),n.isCheckStableRunning=!0,V0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,v,M,L)=>{try{return WE(n),l.invokeTask(f,v,M,L)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&i(),KE(n)}},onInvoke:(l,d,f,v,M,L,H)=>{try{return WE(n),l.invoke(f,v,M,L,H)}finally{n.shouldCoalesceRunChangeDetection&&i(),KE(n)}},onHasTask:(l,d,f,v)=>{l.hasTask(f,v),d===f&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,j0(n),V0(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(l,d,f,v)=>(l.handleError(f,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wu.isInAngularZone())throw new Me(909,!1)}static assertNotInAngularZone(){if(Wu.isInAngularZone())throw new Me(909,!1)}run(i,l,d){return this._inner.run(i,l,d)}runTask(i,l,d,f){const v=this._inner,M=v.scheduleEventTask("NgZoneEvent: "+f,i,Jw,gv,gv);try{return v.runTask(M,l,d)}finally{v.cancelTask(M)}}runGuarded(i,l,d){return this._inner.runGuarded(i,l,d)}runOutsideAngular(i){return this._outer.run(i)}}const Jw={};function V0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function WE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KE(n){n._nesting--,V0(n)}class nI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kn,this.onMicrotaskEmpty=new kn,this.onStable=new kn,this.onError=new kn}run(i,l,d){return i.apply(l,d)}runGuarded(i,l,d){return i.apply(l,d)}runOutsideAngular(i){return i()}runTask(i,l,d,f){return i.apply(l,d)}}const qE=new ds(""),YE=new ds("");let H0,rI=(()=>{class n{constructor(l,d,f){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,H0||(function iI(n){H0=n}(f),f.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wu.assertNotInAngularZone(),U0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())U0(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(M=>M.timeoutId!==v),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,f){return[]}}return n.\u0275fac=function(l){return new(l||n)(Xn(Wu),Xn(ZE),Xn(YE))},n.\u0275prov=Et({token:n,factory:n.\u0275fac}),n})(),ZE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){var f,v;return null!==(f=null===(v=H0)||void 0===v?void 0:v.findTestabilityInTree(this,l,d))&&void 0!==f?f:null}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Af=!1;let Ap=null;const z0=new ds("PlatformDestroyListeners"),XE=new ds("appBootstrapListener");class aI{constructor(i,l){this.name=i,this.token=l}}function uI(n){const{rootComponent:i,appProviders:l,platformProviders:d}=n;Af&&void 0!==i&&function em(n){if(function wy(n){if(!Mn(n))throw new Me(906,`The ${et(n)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}(n),!Mn(n).standalone)throw new Me(907,`The ${et(n)} component is not marked as standalone, but Angular expects to have a standalone component here. Please make sure the ${et(n)} component has the \`standalone: true\` flag in the decorator.`)}(i);const f=function cI(n=[]){if(Ap)return Ap;const i=function ew(n=[],i){return Su.create({name:i,providers:[{provide:Vh,useValue:"platform"},{provide:z0,useValue:new Set([()=>Ap=null])},...n]})}(n);return Ap=i,function JE(n){const i=n.get(HE,null);i&&i.forEach(l=>l())}(i),i}(d),v=function rw(n,i){let l;return l="noop"===n?new nI:("zone.js"===n?void 0:n)||new Wu(i),l}("zone.js",function nw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}());return v.run(()=>{const L=c_([{provide:Wu,useValue:v},...l||[]],f,"Environment Injector"),H=L.get(su,null);if(Af&&!H)throw new Me(402,"No `ErrorHandler` found in the Dependency Injection tree.");let X;v.runOutsideAngular(()=>{X=v.onError.subscribe({next:yt=>{H.handleError(yt)}})});const ye=()=>L.destroy(),$e=f.get(z0);return $e.add(ye),L.onDestroy(()=>{X.unsubscribe(),$e.delete(ye)}),function iw(n,i,l){try{const d=l();return hh(d)?d.catch(f=>{throw i.runOutsideAngular(()=>n.handleError(f)),f}):d}catch(d){throw i.runOutsideAngular(()=>n.handleError(d)),d}}(H,v,()=>{const yt=L.get(mv);return yt.runInitializers(),yt.donePromise.then(()=>{!function L_(n){Q(n,"Expected localeId to be defined"),"string"==typeof n&&(wp=n.toLowerCase().replace(/_/g,"-"))}(L.get(yv,vp)||vp);const ln=L.get(_v);return void 0!==i&&ln.bootstrap(i),ln})})})}let _v=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(l,d,f){this._zone=l,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new Y.y(L=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{L.next(this._stable),L.complete()})}),M=new Y.y(L=>{let H;this._zone.runOutsideAngular(()=>{H=this._zone.onStable.subscribe(()=>{Wu.assertNotInAngularZone(),U0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,L.next(!0))})})});const X=this._zone.onUnstable.subscribe(()=>{Wu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{L.next(!1)}))});return()=>{H.unsubscribe(),X.unsubscribe()}});this.isStable=(0,ie.T)(v,M.pipe((0,Pe.B)()))}bootstrap(l,d){Af&&this.warnIfDestroyed();const f=l instanceof Zg;if(!this._injector.get(mv).done){const Bt="Cannot bootstrap as there are still asynchronous initializers running."+(!f&&lr(l)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new Me(405,Af&&Bt)}let M;M=f?l:this._injector.get(Es).resolveComponentFactory(l),this.componentTypes.push(M.componentType);const L=function oI(n){return n.isBoundToModule}(M)?void 0:this._injector.get(Za),X=M.create(Su.NULL,[],d||M.selector,L),ye=X.location.nativeElement,$e=X.injector.get(qE,null);return null==$e||$e.registerApplication(ye),X.onDestroy(()=>{this.detachView(X.hostView),vv(this.components,X),null==$e||$e.unregisterApplication(ye)}),this._loadComponent(X),X}tick(){if(Af&&this.warnIfDestroyed(),this._runningTick)throw new Me(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){Af&&this.warnIfDestroyed();const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){Af&&this.warnIfDestroyed();const d=l;vv(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const d=this._injector.get(XE,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return Af&&this.warnIfDestroyed(),this._destroyListeners.push(l),()=>vv(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Me(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){Af&&this._destroyed&&console.warn(Se(406,"This instance of the `ApplicationRef` has already been destroyed."))}}return n.\u0275fac=function(l){return new(l||n)(Xn(Wu),Xn(cd),Xn(su))},n.\u0275prov=Et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vv(n,i){const l=n.indexOf(i);l>-1&&n.splice(l,1)}function fI(){return!1}function pI(){}let gI=(()=>{class n{}return n.__NG_ELEMENT_ID__=mI,n})();function mI(n){return function yI(n,i,l){if(Cs(n)&&!l){const d=Z(n.index,i);return new vd(d,d)}return 47&n.type?new vd(i[$t],i):null}(ti(),pt(),16==(16&n))}class uw{constructor(){}supports(i){return ch(i)}create(i){return new bI(i)}}const II=(n,i)=>i;class bI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||II}forEachItem(i){let l;for(l=this._itHead;null!==l;l=l._next)i(l)}forEachOperation(i){let l=this._itHead,d=this._removalsHead,f=0,v=null;for(;l||d;){const M=!d||l&&l.currentIndex<hw(d,f,v)?l:d,L=hw(M,f,v),H=M.currentIndex;if(M===d)f--,d=d._nextRemoved;else if(l=l._next,null==M.previousIndex)f++;else{v||(v=[]);const X=L-f,ye=H-f;if(X!=ye){for(let yt=0;yt<X;yt++){const Bt=yt<v.length?v[yt]:v[yt]=0,ln=Bt+yt;ye<=ln&&ln<X&&(v[yt]=Bt+1)}v[M.previousIndex]=ye-X}}L!==H&&i(M,L,H)}}forEachPreviousItem(i){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)i(l)}forEachAddedItem(i){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)i(l)}forEachMovedItem(i){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)i(l)}forEachRemovedItem(i){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)i(l)}forEachIdentityChange(i){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)i(l)}diff(i){if(null==i&&(i=[]),!ch(i))throw new Me(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let f,v,M,l=this._itHead,d=!1;if(Array.isArray(i)){this.length=i.length;for(let L=0;L<this.length;L++)v=i[L],M=this._trackByFn(L,v),null!==l&&Object.is(l.trackById,M)?(d&&(l=this._verifyReinsertion(l,v,M,L)),Object.is(l.item,v)||this._addIdentityChange(l,v)):(l=this._mismatch(l,v,M,L),d=!0),l=l._next}else f=0,function vg(n,i){if(Array.isArray(n))for(let l=0;l<n.length;l++)i(n[l]);else{const l=n[Symbol.iterator]();let d;for(;!(d=l.next()).done;)i(d.value)}}(i,L=>{M=this._trackByFn(f,L),null!==l&&Object.is(l.trackById,M)?(d&&(l=this._verifyReinsertion(l,L,M,f)),Object.is(l.item,L)||this._addIdentityChange(l,L)):(l=this._mismatch(l,L,M,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,l,d,f){let v;return null===i?v=this._itTail:(v=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(i.item,l)||this._addIdentityChange(i,l),this._reinsertAfter(i,v,f)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(i.item,l)||this._addIdentityChange(i,l),this._moveAfter(i,v,f)):i=this._addAfter(new CI(l,d),v,f),i}_verifyReinsertion(i,l,d,f){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?i=this._reinsertAfter(v,i._prev,f):i.currentIndex!=f&&(i.currentIndex=f,this._addToMoves(i,f)),i}_truncate(i){for(;null!==i;){const l=i._next;this._addToRemovals(this._unlink(i)),i=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const f=i._prevRemoved,v=i._nextRemoved;return null===f?this._removalsHead=v:f._nextRemoved=v,null===v?this._removalsTail=f:v._prevRemoved=f,this._insertAfter(i,l,d),this._addToMoves(i,d),i}_moveAfter(i,l,d){return this._unlink(i),this._insertAfter(i,l,d),this._addToMoves(i,d),i}_addAfter(i,l,d){return this._insertAfter(i,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,l,d){const f=null===l?this._itHead:l._next;return i._next=f,i._prev=l,null===f?this._itTail=i:f._prev=i,null===l?this._itHead=i:l._next=i,null===this._linkedRecords&&(this._linkedRecords=new dw),this._linkedRecords.put(i),i.currentIndex=d,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const l=i._prev,d=i._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,i}_addToMoves(i,l){return i.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,l){return i.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class CI{constructor(i,l){this.item=i,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,i))return d;return null}remove(i){const l=i._prevDup,d=i._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class dw{constructor(){this.map=new Map}put(i){const l=i.trackById;let d=this.map.get(l);d||(d=new DI,this.map.set(l,d)),d.add(i)}get(i,l){const f=this.map.get(i);return f?f.get(i,l):null}remove(i){const l=i.trackById;return this.map.get(l).remove(i)&&this.map.delete(l),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hw(n,i,l){const d=n.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+i+f}class fw{constructor(){}supports(i){return i instanceof Map||uh(i)}create(){return new TI}}class TI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let l;for(l=this._mapHead;null!==l;l=l._next)i(l)}forEachPreviousItem(i){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)i(l)}forEachChangedItem(i){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)i(l)}forEachAddedItem(i){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)i(l)}forEachRemovedItem(i){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)i(l)}diff(i){if(i){if(!(i instanceof Map||uh(i)))throw new Me(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(i,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const v=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,v)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,l){if(i){const d=i._prev;return l._next=i,l._prev=d,i._prev=l,d&&(d._next=l),i===this._mapHead&&(this._mapHead=l),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(i,l){if(this._records.has(i)){const f=this._records.get(i);this._maybeAddToChanges(f,l);const v=f._prev,M=f._next;return v&&(v._next=M),M&&(M._prev=v),f._next=null,f._prev=null,f}const d=new SI(i);return this._records.set(i,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,l){Object.is(l,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=l,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,l){i instanceof Map?i.forEach(l):Object.keys(i).forEach(d=>l(i[d],d))}}class SI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function pw(){return new Z0([new uw])}let Z0=(()=>{class n{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new n(l)}static extend(l){return{provide:n,useFactory:d=>n.create(l,d||pw()),deps:[[n,new ec,new ta]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new Me(901,!1)}}return n.\u0275prov=Et({token:n,providedIn:"root",factory:pw}),n})();function gw(){return new Q0([new fw])}let Q0=(()=>{class n{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new n(l)}static extend(l){return{provide:n,useFactory:d=>n.create(l,d||gw()),deps:[[n,new ec,new ta]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(d)return d;throw new Me(901,!1)}}return n.\u0275prov=Et({token:n,providedIn:"root",factory:gw}),n})(),RI=(()=>{class n{constructor(l){}}return n.\u0275fac=function(l){return new(l||n)(Xn(_v))},n.\u0275mod=Mt({type:n}),n.\u0275inj=Ot({}),n})();function xI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function OI(n,i){const l=Mn(n),d=i.elementInjector||ld();return new dl(l).create(d,i.projectableNodes,i.hostElement,i.environmentInjector)}},4006:(cn,at,$)=>{"use strict";$.d(at,{Cf:()=>Se,F:()=>mi,JJ:()=>jn,JL:()=>fn,JU:()=>de,UX:()=>Ii,Zs:()=>eo,_Y:()=>sr,a5:()=>wn,kI:()=>Le,qu:()=>Ie,sg:()=>qr,u:()=>_o,u5:()=>Tn});var m=$(4650),g=$(6895),Y=$(8996),ie=$(4128),Pe=$(4004);let Ae=(()=>{class C{constructor(D,V){this._renderer=D,this._elementRef=V,this.onChange=_e=>{},this.onTouched=()=>{}}setProperty(D,V){this._renderer.setProperty(this._elementRef.nativeElement,D,V)}registerOnTouched(D){this.onTouched=D}registerOnChange(D){this.onChange=D}setDisabledState(D){this.setProperty("disabled",D)}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.Qsj),m.Y36(m.SBq))},C.\u0275dir=m.lG2({type:C}),C})(),fe=(()=>{class C extends Ae{}return C.\u0275fac=function(){let I;return function(V){return(I||(I=m.n5z(C)))(V||C)}}(),C.\u0275dir=m.lG2({type:C,features:[m.qOj]}),C})();const de=new m.OlP("NgValueAccessor"),he={provide:de,useExisting:(0,m.Gpc)(()=>je),multi:!0},Ne=new m.OlP("CompositionEventMode");let je=(()=>{class C extends Ae{constructor(D,V,_e){super(D,V),this._compositionMode=_e,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function be(){const C=(0,g.q)()?(0,g.q)().getUserAgent():"";return/android (\d+)/.test(C.toLowerCase())}())}writeValue(D){this.setProperty("value",null==D?"":D)}_handleInput(D){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(D)}_compositionStart(){this._composing=!0}_compositionEnd(D){this._composing=!1,this._compositionMode&&this.onChange(D)}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Ne,8))},C.\u0275dir=m.lG2({type:C,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(D,V){1&D&&m.NdJ("input",function(ct){return V._handleInput(ct.target.value)})("blur",function(){return V.onTouched()})("compositionstart",function(){return V._compositionStart()})("compositionend",function(ct){return V._compositionEnd(ct.target.value)})},features:[m._Bn([he]),m.qOj]}),C})();const Ue=!1;function Xe(C){return null==C||("string"==typeof C||Array.isArray(C))&&0===C.length}function Me(C){return null!=C&&"number"==typeof C.length}const Se=new m.OlP("NgValidators"),oe=new m.OlP("NgAsyncValidators"),et=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Le{static min(I){return function Re(C){return I=>{if(Xe(I.value)||Xe(C))return null;const D=parseFloat(I.value);return!isNaN(D)&&D<C?{min:{min:C,actual:I.value}}:null}}(I)}static max(I){return function Je(C){return I=>{if(Xe(I.value)||Xe(C))return null;const D=parseFloat(I.value);return!isNaN(D)&&D>C?{max:{max:C,actual:I.value}}:null}}(I)}static required(I){return mt(I)}static requiredTrue(I){return Ye(I)}static email(I){return function ve(C){return Xe(C.value)||et.test(C.value)?null:{email:!0}}(I)}static minLength(I){return function It(C){return I=>Xe(I.value)||!Me(I.value)?null:I.value.length<C?{minlength:{requiredLength:C,actualLength:I.value.length}}:null}(I)}static maxLength(I){return function ze(C){return I=>Me(I.value)&&I.value.length>C?{maxlength:{requiredLength:C,actualLength:I.value.length}}:null}(I)}static pattern(I){return function lt(C){if(!C)return xt;let I,D;return"string"==typeof C?(D="","^"!==C.charAt(0)&&(D+="^"),D+=C,"$"!==C.charAt(C.length-1)&&(D+="$"),I=new RegExp(D)):(D=C.toString(),I=C),V=>{if(Xe(V.value))return null;const _e=V.value;return I.test(_e)?null:{pattern:{requiredPattern:D,actualValue:_e}}}}(I)}static nullValidator(I){return null}static compose(I){return We(I)}static composeAsync(I){return _t(I)}}function mt(C){return Xe(C.value)?{required:!0}:null}function Ye(C){return!0===C.value?null:{required:!0}}function xt(C){return null}function Pt(C){return null!=C}function Be(C){const I=(0,m.QGY)(C)?(0,Y.D)(C):C;if(Ue&&!(0,m.CqO)(I)){let D="Expected async validator to return Promise or Observable.";throw"object"==typeof C&&(D+=" Are you using a synchronous validator where an async validator is expected?"),new m.vHH(-1101,D)}return I}function At(C){let I={};return C.forEach(D=>{I=null!=D?{...I,...D}:I}),0===Object.keys(I).length?null:I}function vt(C,I){return I.map(D=>D(C))}function qe(C){return C.map(I=>function Ke(C){return!C.validate}(I)?I:D=>I.validate(D))}function We(C){if(!C)return null;const I=C.filter(Pt);return 0==I.length?null:function(D){return At(vt(D,I))}}function Q(C){return null!=C?We(qe(C)):null}function _t(C){if(!C)return null;const I=C.filter(Pt);return 0==I.length?null:function(D){const V=vt(D,I).map(Be);return(0,ie.D)(V).pipe((0,Pe.U)(At))}}function Dt(C){return null!=C?_t(qe(C)):null}function zt(C,I){return null===C?[I]:Array.isArray(C)?[...C,I]:[C,I]}function un(C){return C._rawValidators}function Et(C){return C._rawAsyncValidators}function ut(C){return C?Array.isArray(C)?C:[C]:[]}function Ot(C,I){return Array.isArray(C)?C.includes(I):C===I}function sn(C,I){const D=ut(I);return ut(C).forEach(_e=>{Ot(D,_e)||D.push(_e)}),D}function Cn(C,I){return ut(I).filter(D=>!Ot(C,D))}class zn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(I){this._rawValidators=I||[],this._composedValidatorFn=Q(this._rawValidators)}_setAsyncValidators(I){this._rawAsyncValidators=I||[],this._composedAsyncValidatorFn=Dt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(I){this._onDestroyCallbacks.push(I)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(I=>I()),this._onDestroyCallbacks=[]}reset(I){this.control&&this.control.reset(I)}hasError(I,D){return!!this.control&&this.control.hasError(I,D)}getError(I,D){return this.control?this.control.getError(I,D):null}}class hn extends zn{get formDirective(){return null}get path(){return null}}class wn extends zn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class tn{constructor(I){this._cd=I}get isTouched(){var I,D;return!(null===(I=this._cd)||void 0===I||null===(D=I.control)||void 0===D||!D.touched)}get isUntouched(){var I,D;return!(null===(I=this._cd)||void 0===I||null===(D=I.control)||void 0===D||!D.untouched)}get isPristine(){var I,D;return!(null===(I=this._cd)||void 0===I||null===(D=I.control)||void 0===D||!D.pristine)}get isDirty(){var I,D;return!(null===(I=this._cd)||void 0===I||null===(D=I.control)||void 0===D||!D.dirty)}get isValid(){var I,D;return!(null===(I=this._cd)||void 0===I||null===(D=I.control)||void 0===D||!D.valid)}get isInvalid(){var I,D;return!(null===(I=this._cd)||void 0===I||null===(D=I.control)||void 0===D||!D.invalid)}get isPending(){var I,D;return!(null===(I=this._cd)||void 0===I||null===(D=I.control)||void 0===D||!D.pending)}get isSubmitted(){var I;return!(null===(I=this._cd)||void 0===I||!I.submitted)}}let jn=(()=>{class C extends tn{constructor(D){super(D)}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(wn,2))},C.\u0275dir=m.lG2({type:C,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(D,V){2&D&&m.ekj("ng-untouched",V.isUntouched)("ng-touched",V.isTouched)("ng-pristine",V.isPristine)("ng-dirty",V.isDirty)("ng-valid",V.isValid)("ng-invalid",V.isInvalid)("ng-pending",V.isPending)},features:[m.qOj]}),C})(),fn=(()=>{class C extends tn{constructor(D){super(D)}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(hn,10))},C.\u0275dir=m.lG2({type:C,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(D,V){2&D&&m.ekj("ng-untouched",V.isUntouched)("ng-touched",V.isTouched)("ng-pristine",V.isPristine)("ng-dirty",V.isDirty)("ng-valid",V.isValid)("ng-invalid",V.isInvalid)("ng-pending",V.isPending)("ng-submitted",V.isSubmitted)},features:[m.qOj]}),C})();function pr(C,I){return C?`with name: '${I}'`:`at index: ${I}`}const rr=!1,Pi="VALID",Xn="INVALID",ai="PENDING",ei="DISABLED";function li(C){return(Kr(C)?C.validators:C)||null}function si(C,I){return(Kr(I)?I.asyncValidators:C)||null}function Kr(C){return null!=C&&!Array.isArray(C)&&"object"==typeof C}function Qe(C,I,D){const V=C.controls;if(!(I?Object.keys(V):V).length)throw new m.vHH(1e3,rr?function ii(C){return`\n    There are no form controls registered with this ${C?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(I):"");if(!V[D])throw new m.vHH(1001,rr?function Gn(C,I){return`Cannot find form control ${pr(C,I)}`}(I,D):"")}function He(C,I,D){C._forEachChild((V,_e)=>{if(void 0===D[_e])throw new m.vHH(1002,rr?function vi(C,I){return`Must supply a value for form control ${pr(C,I)}`}(I,_e):"")})}class ce{constructor(I,D){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(I),this._assignAsyncValidators(D)}get validator(){return this._composedValidatorFn}set validator(I){this._rawValidators=this._composedValidatorFn=I}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(I){this._rawAsyncValidators=this._composedAsyncValidatorFn=I}get parent(){return this._parent}get valid(){return this.status===Pi}get invalid(){return this.status===Xn}get pending(){return this.status==ai}get disabled(){return this.status===ei}get enabled(){return this.status!==ei}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(I){this._assignValidators(I)}setAsyncValidators(I){this._assignAsyncValidators(I)}addValidators(I){this.setValidators(sn(I,this._rawValidators))}addAsyncValidators(I){this.setAsyncValidators(sn(I,this._rawAsyncValidators))}removeValidators(I){this.setValidators(Cn(I,this._rawValidators))}removeAsyncValidators(I){this.setAsyncValidators(Cn(I,this._rawAsyncValidators))}hasValidator(I){return Ot(this._rawValidators,I)}hasAsyncValidator(I){return Ot(this._rawAsyncValidators,I)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(I={}){this.touched=!0,this._parent&&!I.onlySelf&&this._parent.markAsTouched(I)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(I=>I.markAllAsTouched())}markAsUntouched(I={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(D=>{D.markAsUntouched({onlySelf:!0})}),this._parent&&!I.onlySelf&&this._parent._updateTouched(I)}markAsDirty(I={}){this.pristine=!1,this._parent&&!I.onlySelf&&this._parent.markAsDirty(I)}markAsPristine(I={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(D=>{D.markAsPristine({onlySelf:!0})}),this._parent&&!I.onlySelf&&this._parent._updatePristine(I)}markAsPending(I={}){this.status=ai,!1!==I.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!I.onlySelf&&this._parent.markAsPending(I)}disable(I={}){const D=this._parentMarkedDirty(I.onlySelf);this.status=ei,this.errors=null,this._forEachChild(V=>{V.disable({...I,onlySelf:!0})}),this._updateValue(),!1!==I.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...I,skipPristineCheck:D}),this._onDisabledChange.forEach(V=>V(!0))}enable(I={}){const D=this._parentMarkedDirty(I.onlySelf);this.status=Pi,this._forEachChild(V=>{V.enable({...I,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:I.emitEvent}),this._updateAncestors({...I,skipPristineCheck:D}),this._onDisabledChange.forEach(V=>V(!1))}_updateAncestors(I){this._parent&&!I.onlySelf&&(this._parent.updateValueAndValidity(I),I.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(I){this._parent=I}getRawValue(){return this.value}updateValueAndValidity(I={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pi||this.status===ai)&&this._runAsyncValidator(I.emitEvent)),!1!==I.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!I.onlySelf&&this._parent.updateValueAndValidity(I)}_updateTreeValidity(I={emitEvent:!0}){this._forEachChild(D=>D._updateTreeValidity(I)),this.updateValueAndValidity({onlySelf:!0,emitEvent:I.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ei:Pi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(I){if(this.asyncValidator){this.status=ai,this._hasOwnPendingAsyncValidator=!0;const D=Be(this.asyncValidator(this));this._asyncValidationSubscription=D.subscribe(V=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(V,{emitEvent:I})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(I,D={}){this.errors=I,this._updateControlsErrors(!1!==D.emitEvent)}get(I){let D=I;return null==D||(Array.isArray(D)||(D=D.split(".")),0===D.length)?null:D.reduce((V,_e)=>V&&V._find(_e),this)}getError(I,D){const V=D?this.get(D):this;return V&&V.errors?V.errors[I]:null}hasError(I,D){return!!this.getError(I,D)}get root(){let I=this;for(;I._parent;)I=I._parent;return I}_updateControlsErrors(I){this.status=this._calculateStatus(),I&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(I)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?ei:this.errors?Xn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ai)?ai:this._anyControlsHaveStatus(Xn)?Xn:Pi}_anyControlsHaveStatus(I){return this._anyControls(D=>D.status===I)}_anyControlsDirty(){return this._anyControls(I=>I.dirty)}_anyControlsTouched(){return this._anyControls(I=>I.touched)}_updatePristine(I={}){this.pristine=!this._anyControlsDirty(),this._parent&&!I.onlySelf&&this._parent._updatePristine(I)}_updateTouched(I={}){this.touched=this._anyControlsTouched(),this._parent&&!I.onlySelf&&this._parent._updateTouched(I)}_registerOnCollectionChange(I){this._onCollectionChange=I}_setUpdateStrategy(I){Kr(I)&&null!=I.updateOn&&(this._updateOn=I.updateOn)}_parentMarkedDirty(I){return!I&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(I){return null}_assignValidators(I){this._rawValidators=Array.isArray(I)?I.slice():I,this._composedValidatorFn=function Nr(C){return Array.isArray(C)?Q(C):C||null}(this._rawValidators)}_assignAsyncValidators(I){this._rawAsyncValidators=Array.isArray(I)?I.slice():I,this._composedAsyncValidatorFn=function Zr(C){return Array.isArray(C)?Dt(C):C||null}(this._rawAsyncValidators)}}class Ee extends ce{constructor(I,D,V){super(li(D),si(V,D)),this.controls=I,this._initObservables(),this._setUpdateStrategy(D),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(I,D){return this.controls[I]?this.controls[I]:(this.controls[I]=D,D.setParent(this),D._registerOnCollectionChange(this._onCollectionChange),D)}addControl(I,D,V={}){this.registerControl(I,D),this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}removeControl(I,D={}){this.controls[I]&&this.controls[I]._registerOnCollectionChange(()=>{}),delete this.controls[I],this.updateValueAndValidity({emitEvent:D.emitEvent}),this._onCollectionChange()}setControl(I,D,V={}){this.controls[I]&&this.controls[I]._registerOnCollectionChange(()=>{}),delete this.controls[I],D&&this.registerControl(I,D),this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}contains(I){return this.controls.hasOwnProperty(I)&&this.controls[I].enabled}setValue(I,D={}){He(this,!0,I),Object.keys(I).forEach(V=>{Qe(this,!0,V),this.controls[V].setValue(I[V],{onlySelf:!0,emitEvent:D.emitEvent})}),this.updateValueAndValidity(D)}patchValue(I,D={}){null!=I&&(Object.keys(I).forEach(V=>{const _e=this.controls[V];_e&&_e.patchValue(I[V],{onlySelf:!0,emitEvent:D.emitEvent})}),this.updateValueAndValidity(D))}reset(I={},D={}){this._forEachChild((V,_e)=>{V.reset(I[_e],{onlySelf:!0,emitEvent:D.emitEvent})}),this._updatePristine(D),this._updateTouched(D),this.updateValueAndValidity(D)}getRawValue(){return this._reduceChildren({},(I,D,V)=>(I[V]=D.getRawValue(),I))}_syncPendingControls(){let I=this._reduceChildren(!1,(D,V)=>!!V._syncPendingControls()||D);return I&&this.updateValueAndValidity({onlySelf:!0}),I}_forEachChild(I){Object.keys(this.controls).forEach(D=>{const V=this.controls[D];V&&I(V,D)})}_setUpControls(){this._forEachChild(I=>{I.setParent(this),I._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(I){for(const[D,V]of Object.entries(this.controls))if(this.contains(D)&&I(V))return!0;return!1}_reduceValue(){return this._reduceChildren({},(D,V,_e)=>((V.enabled||this.disabled)&&(D[_e]=V.value),D))}_reduceChildren(I,D){let V=I;return this._forEachChild((_e,ct)=>{V=D(V,_e,ct)}),V}_allControlsDisabled(){for(const I of Object.keys(this.controls))if(this.controls[I].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(I){return this.controls.hasOwnProperty(I)?this.controls[I]:null}}class Oe extends Ee{}const we=new m.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>rt}),rt="always";function Yt(C,I,D=rt){var V,_e;kr(C,I),I.valueAccessor.writeValue(C.value),(C.disabled||"always"===D)&&(null===(V=(_e=I.valueAccessor).setDisabledState)||void 0===V||V.call(_e,C.disabled)),function Mt(C,I){I.valueAccessor.registerOnChange(D=>{C._pendingValue=D,C._pendingChange=!0,C._pendingDirty=!0,"change"===C.updateOn&&Pn(C,I)})}(C,I),function Kn(C,I){const D=(V,_e)=>{I.valueAccessor.writeValue(V),_e&&I.viewToModelUpdate(V)};C.registerOnChange(D),I._registerOnDestroy(()=>{C._unregisterOnChange(D)})}(C,I),function nn(C,I){I.valueAccessor.registerOnTouched(()=>{C._pendingTouched=!0,"blur"===C.updateOn&&C._pendingChange&&Pn(C,I),"submit"!==C.updateOn&&C.markAsTouched()})}(C,I),function Jn(C,I){if(I.valueAccessor.setDisabledState){const D=V=>{I.valueAccessor.setDisabledState(V)};C.registerOnDisabledChange(D),I._registerOnDestroy(()=>{C._unregisterOnDisabledChange(D)})}}(C,I)}function Dn(C,I,D=!0){const V=()=>{};I.valueAccessor&&(I.valueAccessor.registerOnChange(V),I.valueAccessor.registerOnTouched(V)),kt(C,I),C&&(I._invokeOnDestroyCallbacks(),C._registerOnCollectionChange(()=>{}))}function _n(C,I){C.forEach(D=>{D.registerOnValidatorChange&&D.registerOnValidatorChange(I)})}function kr(C,I){const D=un(C);null!==I.validator?C.setValidators(zt(D,I.validator)):"function"==typeof D&&C.setValidators([D]);const V=Et(C);null!==I.asyncValidator?C.setAsyncValidators(zt(V,I.asyncValidator)):"function"==typeof V&&C.setAsyncValidators([V]);const _e=()=>C.updateValueAndValidity();_n(I._rawValidators,_e),_n(I._rawAsyncValidators,_e)}function kt(C,I){let D=!1;if(null!==C){if(null!==I.validator){const _e=un(C);if(Array.isArray(_e)&&_e.length>0){const ct=_e.filter(Gt=>Gt!==I.validator);ct.length!==_e.length&&(D=!0,C.setValidators(ct))}}if(null!==I.asyncValidator){const _e=Et(C);if(Array.isArray(_e)&&_e.length>0){const ct=_e.filter(Gt=>Gt!==I.asyncValidator);ct.length!==_e.length&&(D=!0,C.setAsyncValidators(ct))}}}const V=()=>{};return _n(I._rawValidators,V),_n(I._rawAsyncValidators,V),D}function Pn(C,I){C._pendingDirty&&C.markAsDirty(),C.setValue(C._pendingValue,{emitModelToViewChange:!1}),I.viewToModelUpdate(C._pendingValue),C._pendingChange=!1}function cr(C,I){kr(C,I)}function Oi(C,I){C._syncPendingControls(),I.forEach(D=>{const V=D.control;"submit"===V.updateOn&&V._pendingChange&&(D.viewToModelUpdate(V._pendingValue),V._pendingChange=!1)})}const Fr={provide:hn,useExisting:(0,m.Gpc)(()=>mi)},Ei=(()=>Promise.resolve())();let mi=(()=>{class C extends hn{constructor(D,V,_e){super(),this.callSetDisabledState=_e,this.submitted=!1,this._directives=new Set,this.ngSubmit=new m.vpe,this.form=new Ee({},Q(D),Dt(V))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(D){Ei.then(()=>{const V=this._findContainer(D.path);D.control=V.registerControl(D.name,D.control),Yt(D.control,D,this.callSetDisabledState),D.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(D)})}getControl(D){return this.form.get(D.path)}removeControl(D){Ei.then(()=>{const V=this._findContainer(D.path);V&&V.removeControl(D.name),this._directives.delete(D)})}addFormGroup(D){Ei.then(()=>{const V=this._findContainer(D.path),_e=new Ee({});cr(_e,D),V.registerControl(D.name,_e),_e.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(D){Ei.then(()=>{const V=this._findContainer(D.path);V&&V.removeControl(D.name)})}getFormGroup(D){return this.form.get(D.path)}updateModel(D,V){Ei.then(()=>{this.form.get(D.path).setValue(V)})}setValue(D){this.control.setValue(D)}onSubmit(D){var V;return this.submitted=!0,Oi(this.form,this._directives),this.ngSubmit.emit(D),"dialog"===(null==D||null===(V=D.target)||void 0===V?void 0:V.method)}onReset(){this.resetForm()}resetForm(D){this.form.reset(D),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(D){return D.pop(),D.length?this.form.get(D):this.form}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(Se,10),m.Y36(oe,10),m.Y36(we,8))},C.\u0275dir=m.lG2({type:C,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(D,V){1&D&&m.NdJ("submit",function(ct){return V.onSubmit(ct)})("reset",function(){return V.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([Fr]),m.qOj]}),C})();function Wi(C,I){const D=C.indexOf(I);D>-1&&C.splice(D,1)}function wr(C){return"object"==typeof C&&null!==C&&2===Object.keys(C).length&&"value"in C&&"disabled"in C}const ae=class extends ce{constructor(I=null,D,V){super(li(D),si(V,D)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(I),this._setUpdateStrategy(D),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kr(D)&&(D.nonNullable||D.initialValueIsDefault)&&(this.defaultValue=wr(I)?I.value:I)}setValue(I,D={}){this.value=this._pendingValue=I,this._onChange.length&&!1!==D.emitModelToViewChange&&this._onChange.forEach(V=>V(this.value,!1!==D.emitViewToModelChange)),this.updateValueAndValidity(D)}patchValue(I,D={}){this.setValue(I,D)}reset(I=this.defaultValue,D={}){this._applyFormState(I),this.markAsPristine(D),this.markAsUntouched(D),this.setValue(this.value,D),this._pendingChange=!1}_updateValue(){}_anyControls(I){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(I){this._onChange.push(I)}_unregisterOnChange(I){Wi(this._onChange,I)}registerOnDisabledChange(I){this._onDisabledChange.push(I)}_unregisterOnDisabledChange(I){Wi(this._onDisabledChange,I)}_forEachChild(I){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(I){wr(I)?(this.value=this._pendingValue=I.value,I.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=I}};let sr=(()=>{class C{}return C.\u0275fac=function(D){return new(D||C)},C.\u0275dir=m.lG2({type:C,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),C})(),Tt=(()=>{class C{}return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=m.oAB({type:C}),C.\u0275inj=m.cJS({}),C})();const fr=new m.OlP("NgModelWithFormControlWarning"),ks={provide:hn,useExisting:(0,m.Gpc)(()=>qr)};let qr=(()=>{class C extends hn{constructor(D,V,_e){super(),this.callSetDisabledState=_e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.vpe,this._setValidators(D),this._setAsyncValidators(V)}ngOnChanges(D){this._checkFormPresent(),D.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(D){const V=this.form.get(D.path);return Yt(V,D,this.callSetDisabledState),V.updateValueAndValidity({emitEvent:!1}),this.directives.push(D),V}getControl(D){return this.form.get(D.path)}removeControl(D){Dn(D.control||null,D,!1),function hr(C,I){const D=C.indexOf(I);D>-1&&C.splice(D,1)}(this.directives,D)}addFormGroup(D){this._setUpFormContainer(D)}removeFormGroup(D){this._cleanUpFormContainer(D)}getFormGroup(D){return this.form.get(D.path)}addFormArray(D){this._setUpFormContainer(D)}removeFormArray(D){this._cleanUpFormContainer(D)}getFormArray(D){return this.form.get(D.path)}updateModel(D,V){this.form.get(D.path).setValue(V)}onSubmit(D){var V;return this.submitted=!0,Oi(this.form,this.directives),this.ngSubmit.emit(D),"dialog"===(null==D||null===(V=D.target)||void 0===V?void 0:V.method)}onReset(){this.resetForm()}resetForm(D){this.form.reset(D),this.submitted=!1}_updateDomValue(){this.directives.forEach(D=>{const V=D.control,_e=this.form.get(D.path);V!==_e&&(Dn(V||null,D),(C=>C instanceof ae)(_e)&&(Yt(_e,D,this.callSetDisabledState),D.control=_e))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(D){const V=this.form.get(D.path);cr(V,D),V.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(D){if(this.form){const V=this.form.get(D.path);V&&function Mn(C,I){return kt(C,I)}(V,D)&&V.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kr(this.form,this),this._oldForm&&kt(this._oldForm,this)}_checkFormPresent(){}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(Se,10),m.Y36(oe,10),m.Y36(we,8))},C.\u0275dir=m.lG2({type:C,selectors:[["","formGroup",""]],hostBindings:function(D,V){1&D&&m.NdJ("submit",function(ct){return V.onSubmit(ct)})("reset",function(){return V.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([ks]),m.qOj,m.TTD]}),C})();const Xs={provide:wn,useExisting:(0,m.Gpc)(()=>_o)};let _o=(()=>{class C extends wn{set isDisabled(D){}constructor(D,V,_e,ct,Gt){super(),this._ngModelWarningConfig=Gt,this._added=!1,this.update=new m.vpe,this._ngModelWarningSent=!1,this._parent=D,this._setValidators(V),this._setAsyncValidators(_e),this.valueAccessor=function vn(C,I){if(!I)return null;let D,V,_e;return Array.isArray(I),I.forEach(ct=>{ct.constructor===je?D=ct:function ps(C){return Object.getPrototypeOf(C.constructor)===fe}(ct)?V=ct:_e=ct}),_e||V||D||null}(0,ct)}ngOnChanges(D){this._added||this._setUpControl(),function fs(C,I){if(!C.hasOwnProperty("model"))return!1;const D=C.model;return!!D.isFirstChange()||!Object.is(I,D.currentValue)}(D,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(D){this.viewModel=D,this.update.emit(D)}get path(){return function Rt(C,I){return[...I.path,C]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return C._ngModelWarningSentOnce=!1,C.\u0275fac=function(D){return new(D||C)(m.Y36(hn,13),m.Y36(Se,10),m.Y36(oe,10),m.Y36(de,10),m.Y36(fr,8))},C.\u0275dir=m.lG2({type:C,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[m._Bn([Xs]),m.qOj,m.TTD]}),C})(),Ss=(()=>{class C{constructor(){this._validator=xt}ngOnChanges(D){if(this.inputName in D){const V=this.normalizeInput(D[this.inputName].currentValue);this._enabled=this.enabled(V),this._validator=this._enabled?this.createValidator(V):xt,this._onChange&&this._onChange()}}validate(D){return this._validator(D)}registerOnValidatorChange(D){this._onChange=D}enabled(D){return null!=D}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275dir=m.lG2({type:C,features:[m.TTD]}),C})();const Qa={provide:Se,useExisting:(0,m.Gpc)(()=>ko),multi:!0},No={provide:Se,useExisting:(0,m.Gpc)(()=>eo),multi:!0};let ko=(()=>{class C extends Ss{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=m.D6c,this.createValidator=D=>mt}enabled(D){return D}}return C.\u0275fac=function(){let I;return function(V){return(I||(I=m.n5z(C)))(V||C)}}(),C.\u0275dir=m.lG2({type:C,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(D,V){2&D&&m.uIk("required",V._enabled?"":null)},inputs:{required:"required"},features:[m._Bn([Qa]),m.qOj]}),C})(),eo=(()=>{class C extends ko{constructor(){super(...arguments),this.createValidator=D=>Ye}}return C.\u0275fac=function(){let I;return function(V){return(I||(I=m.n5z(C)))(V||C)}}(),C.\u0275dir=m.lG2({type:C,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(D,V){2&D&&m.uIk("required",V._enabled?"":null)},features:[m._Bn([No]),m.qOj]}),C})(),oo=(()=>{class C{}return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=m.oAB({type:C}),C.\u0275inj=m.cJS({imports:[Tt]}),C})();class S extends ce{constructor(I,D,V){super(li(D),si(V,D)),this.controls=I,this._initObservables(),this._setUpdateStrategy(D),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(I){return this.controls[this._adjustIndex(I)]}push(I,D={}){this.controls.push(I),this._registerControl(I),this.updateValueAndValidity({emitEvent:D.emitEvent}),this._onCollectionChange()}insert(I,D,V={}){this.controls.splice(I,0,D),this._registerControl(D),this.updateValueAndValidity({emitEvent:V.emitEvent})}removeAt(I,D={}){let V=this._adjustIndex(I);V<0&&(V=0),this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),this.updateValueAndValidity({emitEvent:D.emitEvent})}setControl(I,D,V={}){let _e=this._adjustIndex(I);_e<0&&(_e=0),this.controls[_e]&&this.controls[_e]._registerOnCollectionChange(()=>{}),this.controls.splice(_e,1),D&&(this.controls.splice(_e,0,D),this._registerControl(D)),this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(I,D={}){He(this,!1,I),I.forEach((V,_e)=>{Qe(this,!1,_e),this.at(_e).setValue(V,{onlySelf:!0,emitEvent:D.emitEvent})}),this.updateValueAndValidity(D)}patchValue(I,D={}){null!=I&&(I.forEach((V,_e)=>{this.at(_e)&&this.at(_e).patchValue(V,{onlySelf:!0,emitEvent:D.emitEvent})}),this.updateValueAndValidity(D))}reset(I=[],D={}){this._forEachChild((V,_e)=>{V.reset(I[_e],{onlySelf:!0,emitEvent:D.emitEvent})}),this._updatePristine(D),this._updateTouched(D),this.updateValueAndValidity(D)}getRawValue(){return this.controls.map(I=>I.getRawValue())}clear(I={}){this.controls.length<1||(this._forEachChild(D=>D._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:I.emitEvent}))}_adjustIndex(I){return I<0?I+this.length:I}_syncPendingControls(){let I=this.controls.reduce((D,V)=>!!V._syncPendingControls()||D,!1);return I&&this.updateValueAndValidity({onlySelf:!0}),I}_forEachChild(I){this.controls.forEach((D,V)=>{I(D,V)})}_updateValue(){this.value=this.controls.filter(I=>I.enabled||this.disabled).map(I=>I.value)}_anyControls(I){return this.controls.some(D=>D.enabled&&I(D))}_setUpControls(){this._forEachChild(I=>this._registerControl(I))}_allControlsDisabled(){for(const I of this.controls)if(I.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(I){I.setParent(this),I._registerOnCollectionChange(this._onCollectionChange)}_find(I){var D;return null!==(D=this.at(I))&&void 0!==D?D:null}}function q(C){return!!C&&(void 0!==C.asyncValidators||void 0!==C.validators||void 0!==C.updateOn)}let Ie=(()=>{class C{constructor(){this.useNonNullable=!1}get nonNullable(){const D=new C;return D.useNonNullable=!0,D}group(D,V=null){const _e=this._reduceControls(D);let ct={};return q(V)?ct=V:null!==V&&(ct.validators=V.validator,ct.asyncValidators=V.asyncValidator),new Ee(_e,ct)}record(D,V=null){const _e=this._reduceControls(D);return new Oe(_e,V)}control(D,V,_e){let ct={};return this.useNonNullable?(q(V)?ct=V:(ct.validators=V,ct.asyncValidators=_e),new ae(D,{...ct,nonNullable:!0})):new ae(D,V,_e)}array(D,V,_e){const ct=D.map(Gt=>this._createControl(Gt));return new S(ct,V,_e)}_reduceControls(D){const V={};return Object.keys(D).forEach(_e=>{V[_e]=this._createControl(D[_e])}),V}_createControl(D){return D instanceof ae||D instanceof ce?D:Array.isArray(D)?this.control(D[0],D.length>1?D[1]:null,D.length>2?D[2]:null):this.control(D)}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),Tn=(()=>{class C{static withConfig(D){var V;return{ngModule:C,providers:[{provide:we,useValue:null!==(V=D.callSetDisabledState)&&void 0!==V?V:rt}]}}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=m.oAB({type:C}),C.\u0275inj=m.cJS({imports:[oo]}),C})(),Ii=(()=>{class C{static withConfig(D){var V,_e;return{ngModule:C,providers:[{provide:fr,useValue:null!==(V=D.warnOnNgModelWithFormControl)&&void 0!==V?V:"always"},{provide:we,useValue:null!==(_e=D.callSetDisabledState)&&void 0!==_e?_e:rt}]}}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=m.oAB({type:C}),C.\u0275inj=m.cJS({imports:[oo]}),C})()},1481:(cn,at,$)=>{"use strict";$.d(at,{Cg:()=>Ot,Dx:()=>Qn,H7:()=>ce,b2:()=>Di,se:()=>Pt});var m=$(6895),g=$(4650);class Y extends m.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ie extends Y{static makeCurrent(){(0,m.HT)(new ie)}onAndCancel(Ve,we,rt){return Ve.addEventListener(we,rt,!1),()=>{Ve.removeEventListener(we,rt,!1)}}dispatchEvent(Ve,we){Ve.dispatchEvent(we)}remove(Ve){Ve.parentNode&&Ve.parentNode.removeChild(Ve)}createElement(Ve,we){return(we=we||this.getDefaultDocument()).createElement(Ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ve){return Ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ve){return Ve instanceof DocumentFragment}getGlobalEventTarget(Ve,we){return"window"===we?window:"document"===we?Ve:"body"===we?Ve.body:null}getBaseHref(Ve){const we=function Ae(){return Pe=Pe||document.querySelector("base"),Pe?Pe.getAttribute("href"):null}();return null==we?null:function de(Oe){fe=fe||document.createElement("a"),fe.setAttribute("href",Oe);const Ve=fe.pathname;return"/"===Ve.charAt(0)?Ve:`/${Ve}`}(we)}resetBaseElement(){Pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ve){return(0,m.Mx)(document.cookie,Ve)}}let fe,Pe=null;const Fe=new g.OlP("TRANSITION_ID"),he=[{provide:g.ip1,useFactory:function De(Oe,Ve,we){return()=>{we.get(g.CZH).donePromise.then(()=>{const rt=(0,m.q)(),Rt=Ve.querySelectorAll(`style[ng-transition="${Oe}"]`);for(let Yt=0;Yt<Rt.length;Yt++)rt.remove(Rt[Yt])})}},deps:[Fe,m.K0,g.zs3],multi:!0}];let Ne=(()=>{class Oe{build(){return new XMLHttpRequest}}return Oe.\u0275fac=function(we){return new(we||Oe)},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const je=new g.OlP("EventManagerPlugins");let Ue=(()=>{class Oe{constructor(we,rt){this._zone=rt,this._eventNameToPlugin=new Map,we.forEach(Rt=>{Rt.manager=this}),this._plugins=we.slice().reverse()}addEventListener(we,rt,Rt){return this._findPluginFor(rt).addEventListener(we,rt,Rt)}addGlobalEventListener(we,rt,Rt){return this._findPluginFor(rt).addGlobalEventListener(we,rt,Rt)}getZone(){return this._zone}_findPluginFor(we){const rt=this._eventNameToPlugin.get(we);if(rt)return rt;const Rt=this._plugins;for(let Yt=0;Yt<Rt.length;Yt++){const Dn=Rt[Yt];if(Dn.supports(we))return this._eventNameToPlugin.set(we,Dn),Dn}throw new Error(`No event manager plugin found for event ${we}`)}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(je),g.LFG(g.R0b))},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();class Xe{constructor(Ve){this._doc=Ve}addGlobalEventListener(Ve,we,rt){const Rt=(0,m.q)().getGlobalEventTarget(this._doc,Ve);if(!Rt)throw new Error(`Unsupported event target ${Rt} for event ${we}`);return this.addEventListener(Rt,we,rt)}}let Me=(()=>{class Oe{constructor(){this.usageCount=new Map}addStyles(we){for(const rt of we)1===this.changeUsageCount(rt,1)&&this.onStyleAdded(rt)}removeStyles(we){for(const rt of we)0===this.changeUsageCount(rt,-1)&&this.onStyleRemoved(rt)}onStyleRemoved(we){}onStyleAdded(we){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(we,rt){var Rt;const Yt=this.usageCount;let Dn=null!==(Rt=Yt.get(we))&&void 0!==Rt?Rt:0;return Dn+=rt,Dn>0?Yt.set(we,Dn):Yt.delete(we),Dn}ngOnDestroy(){for(const we of this.getAllStyles())this.onStyleRemoved(we);this.usageCount.clear()}}return Oe.\u0275fac=function(we){return new(we||Oe)},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})(),Se=(()=>{class Oe extends Me{constructor(we){super(),this.doc=we,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(we){for(const rt of this.hostNodes)this.addStyleToHost(rt,we)}onStyleRemoved(we){const rt=this.styleRef,Rt=rt.get(we);null==Rt||Rt.forEach(Yt=>Yt.remove()),rt.delete(we)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(we){this.hostNodes.add(we);for(const rt of this.getAllStyles())this.addStyleToHost(we,rt)}removeHost(we){this.hostNodes.delete(we)}addStyleToHost(we,rt){const Rt=this.doc.createElement("style");Rt.textContent=rt,we.appendChild(Rt);const Yt=this.styleRef.get(rt);Yt?Yt.push(Rt):this.styleRef.set(rt,[Rt])}resetHostNodes(){const we=this.hostNodes;we.clear(),we.add(this.doc.head)}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(m.K0))},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const oe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},et=/%COMP%/g,ve=new g.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function lt(Oe,Ve){return Ve.flat(100).map(we=>we.replace(et,Oe))}function xt(Oe){return Ve=>{if("__ngUnwrap__"===Ve)return Oe;!1===Oe(Ve)&&(Ve.preventDefault(),Ve.returnValue=!1)}}let Pt=(()=>{class Oe{constructor(we,rt,Rt,Yt){this.eventManager=we,this.sharedStylesHost=rt,this.appId=Rt,this.removeStylesOnCompDestory=Yt,this.rendererByCompId=new Map,this.defaultRenderer=new Be(we)}createRenderer(we,rt){if(!we||!rt)return this.defaultRenderer;const Rt=this.getOrCreateRenderer(we,rt);return Rt instanceof Q?Rt.applyToHost(we):Rt instanceof We&&Rt.applyStyles(),Rt}getOrCreateRenderer(we,rt){const Rt=this.rendererByCompId;let Yt=Rt.get(rt.id);if(!Yt){const Dn=this.eventManager,_n=this.sharedStylesHost,Jn=this.removeStylesOnCompDestory;switch(rt.encapsulation){case g.ifc.Emulated:Yt=new Q(Dn,_n,rt,this.appId,Jn);break;case g.ifc.ShadowDom:return new qe(Dn,_n,we,rt);default:Yt=new We(Dn,_n,rt,Jn)}Yt.onDestroy=()=>Rt.delete(rt.id),Rt.set(rt.id,Yt)}return Yt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(Ue),g.LFG(Se),g.LFG(g.AFp),g.LFG(ve))},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();class Be{constructor(Ve){this.eventManager=Ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ve,we){return we?document.createElementNS(oe[we]||we,Ve):document.createElement(Ve)}createComment(Ve){return document.createComment(Ve)}createText(Ve){return document.createTextNode(Ve)}appendChild(Ve,we){(Ke(Ve)?Ve.content:Ve).appendChild(we)}insertBefore(Ve,we,rt){Ve&&(Ke(Ve)?Ve.content:Ve).insertBefore(we,rt)}removeChild(Ve,we){Ve&&Ve.removeChild(we)}selectRootElement(Ve,we){let rt="string"==typeof Ve?document.querySelector(Ve):Ve;if(!rt)throw new Error(`The selector "${Ve}" did not match any elements`);return we||(rt.textContent=""),rt}parentNode(Ve){return Ve.parentNode}nextSibling(Ve){return Ve.nextSibling}setAttribute(Ve,we,rt,Rt){if(Rt){we=Rt+":"+we;const Yt=oe[Rt];Yt?Ve.setAttributeNS(Yt,we,rt):Ve.setAttribute(we,rt)}else Ve.setAttribute(we,rt)}removeAttribute(Ve,we,rt){if(rt){const Rt=oe[rt];Rt?Ve.removeAttributeNS(Rt,we):Ve.removeAttribute(`${rt}:${we}`)}else Ve.removeAttribute(we)}addClass(Ve,we){Ve.classList.add(we)}removeClass(Ve,we){Ve.classList.remove(we)}setStyle(Ve,we,rt,Rt){Rt&(g.JOm.DashCase|g.JOm.Important)?Ve.style.setProperty(we,rt,Rt&g.JOm.Important?"important":""):Ve.style[we]=rt}removeStyle(Ve,we,rt){rt&g.JOm.DashCase?Ve.style.removeProperty(we):Ve.style[we]=""}setProperty(Ve,we,rt){Ve[we]=rt}setValue(Ve,we){Ve.nodeValue=we}listen(Ve,we,rt){return"string"==typeof Ve?this.eventManager.addGlobalEventListener(Ve,we,xt(rt)):this.eventManager.addEventListener(Ve,we,xt(rt))}}function Ke(Oe){return"TEMPLATE"===Oe.tagName&&void 0!==Oe.content}class qe extends Be{constructor(Ve,we,rt,Rt){super(Ve),this.sharedStylesHost=we,this.hostEl=rt,this.shadowRoot=rt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Yt=lt(Rt.id,Rt.styles);for(const Dn of Yt){const _n=document.createElement("style");_n.textContent=Dn,this.shadowRoot.appendChild(_n)}}nodeOrShadowRoot(Ve){return Ve===this.hostEl?this.shadowRoot:Ve}appendChild(Ve,we){return super.appendChild(this.nodeOrShadowRoot(Ve),we)}insertBefore(Ve,we,rt){return super.insertBefore(this.nodeOrShadowRoot(Ve),we,rt)}removeChild(Ve,we){return super.removeChild(this.nodeOrShadowRoot(Ve),we)}parentNode(Ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ve)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class We extends Be{constructor(Ve,we,rt,Rt,Yt=rt.id){super(Ve),this.sharedStylesHost=we,this.removeStylesOnCompDestory=Rt,this.rendererUsageCount=0,this.styles=lt(Yt,rt.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var Ve;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(Ve=this.onDestroy)||void 0===Ve||Ve.call(this))}}class Q extends We{constructor(Ve,we,rt,Rt,Yt){const Dn=Rt+"-"+rt.id;super(Ve,we,rt,Yt,Dn),this.contentAttr=function It(Oe){return"_ngcontent-%COMP%".replace(et,Oe)}(Dn),this.hostAttr=function ze(Oe){return"_nghost-%COMP%".replace(et,Oe)}(Dn)}applyToHost(Ve){this.applyStyles(),this.setAttribute(Ve,this.hostAttr,"")}createElement(Ve,we){const rt=super.createElement(Ve,we);return super.setAttribute(rt,this.contentAttr,""),rt}}let _t=(()=>{class Oe extends Xe{constructor(we){super(we)}supports(we){return!0}addEventListener(we,rt,Rt){return we.addEventListener(rt,Rt,!1),()=>this.removeEventListener(we,rt,Rt)}removeEventListener(we,rt,Rt){return we.removeEventListener(rt,Rt)}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(m.K0))},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const Dt=["alt","control","meta","shift"],zt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},un={alt:Oe=>Oe.altKey,control:Oe=>Oe.ctrlKey,meta:Oe=>Oe.metaKey,shift:Oe=>Oe.shiftKey};let Et=(()=>{class Oe extends Xe{constructor(we){super(we)}supports(we){return null!=Oe.parseEventName(we)}addEventListener(we,rt,Rt){const Yt=Oe.parseEventName(rt),Dn=Oe.eventCallback(Yt.fullKey,Rt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,m.q)().onAndCancel(we,Yt.domEventName,Dn))}static parseEventName(we){const rt=we.toLowerCase().split("."),Rt=rt.shift();if(0===rt.length||"keydown"!==Rt&&"keyup"!==Rt)return null;const Yt=Oe._normalizeKey(rt.pop());let Dn="",_n=rt.indexOf("code");if(_n>-1&&(rt.splice(_n,1),Dn="code."),Dt.forEach(kr=>{const kt=rt.indexOf(kr);kt>-1&&(rt.splice(kt,1),Dn+=kr+".")}),Dn+=Yt,0!=rt.length||0===Yt.length)return null;const Jn={};return Jn.domEventName=Rt,Jn.fullKey=Dn,Jn}static matchEventFullKeyCode(we,rt){let Rt=zt[we.key]||we.key,Yt="";return rt.indexOf("code.")>-1&&(Rt=we.code,Yt="code."),!(null==Rt||!Rt)&&(Rt=Rt.toLowerCase()," "===Rt?Rt="space":"."===Rt&&(Rt="dot"),Dt.forEach(Dn=>{Dn!==Rt&&(0,un[Dn])(we)&&(Yt+=Dn+".")}),Yt+=Rt,Yt===rt)}static eventCallback(we,rt,Rt){return Yt=>{Oe.matchEventFullKeyCode(Yt,we)&&Rt.runGuarded(()=>rt(Yt))}}static _normalizeKey(we){return"esc"===we?"escape":we}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(m.K0))},Oe.\u0275prov=g.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();function Ot(Oe,Ve){return(0,g.iPO)({rootComponent:Oe,...Cn(Ve)})}function Cn(Oe){var Ve;return{appProviders:[...xn,...null!==(Ve=null==Oe?void 0:Oe.providers)&&void 0!==Ve?Ve:[]],platformProviders:ir}}const ir=[{provide:g.Lbi,useValue:m.bD},{provide:g.g9A,useValue:function hn(){ie.makeCurrent()},multi:!0},{provide:m.K0,useFactory:function tn(){return(0,g.RDi)(document),document},deps:[]}],jn=new g.OlP(""),fn=[{provide:g.rWj,useClass:class be{addToWindow(Ve){g.dqk.getAngularTestability=(rt,Rt=!0)=>{const Yt=Ve.findTestabilityInTree(rt,Rt);if(null==Yt)throw new Error("Could not find testability for element.");return Yt},g.dqk.getAllAngularTestabilities=()=>Ve.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>Ve.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(rt=>{const Rt=g.dqk.getAllAngularTestabilities();let Yt=Rt.length,Dn=!1;const _n=function(Jn){Dn=Dn||Jn,Yt--,0==Yt&&rt(Dn)};Rt.forEach(function(Jn){Jn.whenStable(_n)})})}findTestabilityInTree(Ve,we,rt){if(null==we)return null;const Rt=Ve.getTestability(we);return null!=Rt?Rt:rt?(0,m.q)().isShadowRoot(we)?this.findTestabilityInTree(Ve,we.host,!0):this.findTestabilityInTree(Ve,we.parentElement,!0):null}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],xn=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function wn(){return new g.qLn},deps:[]},{provide:je,useClass:_t,multi:!0,deps:[m.K0,g.R0b,g.Lbi]},{provide:je,useClass:Et,multi:!0,deps:[m.K0]},{provide:Pt,useClass:Pt,deps:[Ue,Se,g.AFp,ve]},{provide:g.FYo,useExisting:Pt},{provide:Me,useExisting:Se},{provide:Se,useClass:Se,deps:[m.K0]},{provide:Ue,useClass:Ue,deps:[je,g.R0b]},{provide:m.JF,useClass:Ne,deps:[]},[]];let Di=(()=>{class Oe{constructor(we){}static withServerTransition(we){return{ngModule:Oe,providers:[{provide:g.AFp,useValue:we.appId},{provide:Fe,useExisting:g.AFp},he]}}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(jn,12))},Oe.\u0275mod=g.oAB({type:Oe}),Oe.\u0275inj=g.cJS({providers:[...xn,...fn],imports:[m.ez,g.hGG]}),Oe})(),Qn=(()=>{class Oe{constructor(we){this._doc=we}getTitle(){return this._doc.title}setTitle(we){this._doc.title=we||""}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(m.K0))},Oe.\u0275prov=g.Yz7({token:Oe,factory:function(we){let rt=null;return rt=we?new we:function Tr(){return new Qn((0,g.LFG)(m.K0))}(),rt},providedIn:"root"}),Oe})();typeof window<"u"&&window;let ce=(()=>{class Oe{}return Oe.\u0275fac=function(we){return new(we||Oe)},Oe.\u0275prov=g.Yz7({token:Oe,factory:function(we){let rt=null;return rt=we?new(we||Oe):g.LFG(ue),rt},providedIn:"root"}),Oe})(),ue=(()=>{class Oe extends ce{constructor(we){super(),this._doc=we}sanitize(we,rt){if(null==rt)return null;switch(we){case g.q3G.NONE:return rt;case g.q3G.HTML:return(0,g.qzn)(rt,"HTML")?(0,g.z3N)(rt):(0,g.EiD)(this._doc,String(rt)).toString();case g.q3G.STYLE:return(0,g.qzn)(rt,"Style")?(0,g.z3N)(rt):rt;case g.q3G.SCRIPT:if((0,g.qzn)(rt,"Script"))return(0,g.z3N)(rt);throw new Error("unsafe value used in a script context");case g.q3G.URL:return(0,g.qzn)(rt,"URL")?(0,g.z3N)(rt):(0,g.mCW)(String(rt));case g.q3G.RESOURCE_URL:if((0,g.qzn)(rt,"ResourceURL"))return(0,g.z3N)(rt);throw new Error(`unsafe value used in a resource URL context (see ${g.JZr})`);default:throw new Error(`Unexpected SecurityContext ${we} (see ${g.JZr})`)}}bypassSecurityTrustHtml(we){return(0,g.JVY)(we)}bypassSecurityTrustStyle(we){return(0,g.L6k)(we)}bypassSecurityTrustScript(we){return(0,g.eBb)(we)}bypassSecurityTrustUrl(we){return(0,g.LAX)(we)}bypassSecurityTrustResourceUrl(we){return(0,g.pB0)(we)}}return Oe.\u0275fac=function(we){return new(we||Oe)(g.LFG(m.K0))},Oe.\u0275prov=g.Yz7({token:Oe,factory:function(we){let rt=null;return rt=we?new we:function Ee(Oe){return new ue(Oe.get(m.K0))}(g.LFG(g.zs3)),rt},providedIn:"root"}),Oe})()},6159:(cn,at,$)=>{"use strict";$.d(at,{gz:()=>qr,y6:()=>js,OD:()=>mi,eC:()=>Dt,wN:()=>qs,F0:()=>Os,rH:()=>ni,Bz:()=>Yc,Hx:()=>pr,bU:()=>Ql});var m=$(4650),g=$(8996),Y=$(9646),ie=$(1135),Pe=$(6805),Ae=$(9841),fe=$(7272),de=$(9770),Fe=$(9635),De=$(2843),he=$(9751),be=$(515),Ne=$(4033),je=$(7579),Ue=$(6895),Xe=$(4004),Me=$(3900),Se=$(5698),oe=$(8675),et=$(9300),Le=$(5577),Re=$(590),Je=$(4351),mt=$(8505),Ye=$(262),ve=$(5026),It=$(4482),ze=$(5403);function lt(R){return R<=0?()=>be.E:(0,It.e)((O,w)=>{let B=[];O.subscribe((0,ze.x)(w,W=>{B.push(W),R<B.length&&B.shift()},()=>{for(const W of B)w.next(W);w.complete()},void 0,()=>{B=null}))})}var xt=$(8068),Pt=$(6590),Be=$(4671);function At(R,O){const w=arguments.length>=2;return B=>B.pipe(R?(0,et.h)((W,le)=>R(W,le,B)):Be.y,lt(1),w?(0,Pt.d)(O):(0,xt.T)(()=>new Pe.K))}var Ke=$(9718),qe=$(8746),We=$(8343),Q=$(8189),_t=$(1481);const Dt="primary",zt=Symbol("RouteTitle");class un{constructor(O){this.params=O||{}}has(O){return Object.prototype.hasOwnProperty.call(this.params,O)}get(O){if(this.has(O)){const w=this.params[O];return Array.isArray(w)?w[0]:w}return null}getAll(O){if(this.has(O)){const w=this.params[O];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function Et(R){return new un(R)}function ut(R,O,w){const B=w.path.split("/");if(B.length>R.length||"full"===w.pathMatch&&(O.hasChildren()||B.length<R.length))return null;const W={};for(let le=0;le<B.length;le++){const pe=B[le],dt=R[le];if(pe.startsWith(":"))W[pe.substring(1)]=dt;else if(pe!==dt.path)return null}return{consumed:R.slice(0,B.length),posParams:W}}function sn(R,O){const w=R?Object.keys(R):void 0,B=O?Object.keys(O):void 0;if(!w||!B||w.length!=B.length)return!1;let W;for(let le=0;le<w.length;le++)if(W=w[le],!Cn(R[W],O[W]))return!1;return!0}function Cn(R,O){if(Array.isArray(R)&&Array.isArray(O)){if(R.length!==O.length)return!1;const w=[...R].sort(),B=[...O].sort();return w.every((W,le)=>B[le]===W)}return R===O}function zn(R){return Array.prototype.concat.apply([],R)}function hn(R){return R.length>0?R[R.length-1]:null}function tn(R,O){for(const w in R)R.hasOwnProperty(w)&&O(R[w],w)}function ir(R){return(0,m.CqO)(R)?R:(0,m.QGY)(R)?(0,g.D)(Promise.resolve(R)):(0,Y.of)(R)}const Qt=!1,jn={exact:function Cr(R,O,w){if(!mr(R.segments,O.segments)||!Qn(R.segments,O.segments,w)||R.numberOfChildren!==O.numberOfChildren)return!1;for(const B in O.children)if(!R.children[B]||!Cr(R.children[B],O.children[B],w))return!1;return!0},subset:Ur},fn={exact:function Di(R,O){return sn(R,O)},subset:function Hr(R,O){return Object.keys(O).length<=Object.keys(R).length&&Object.keys(O).every(w=>Cn(R[w],O[w]))},ignored:()=>!0};function xn(R,O,w){return jn[w.paths](R.root,O.root,w.matrixParams)&&fn[w.queryParams](R.queryParams,O.queryParams)&&!("exact"===w.fragment&&R.fragment!==O.fragment)}function Ur(R,O,w){return Tr(R,O,O.segments,w)}function Tr(R,O,w,B){if(R.segments.length>w.length){const W=R.segments.slice(0,w.length);return!(!mr(W,w)||O.hasChildren()||!Qn(W,w,B))}if(R.segments.length===w.length){if(!mr(R.segments,w)||!Qn(R.segments,w,B))return!1;for(const W in O.children)if(!R.children[W]||!Ur(R.children[W],O.children[W],B))return!1;return!0}{const W=w.slice(0,R.segments.length),le=w.slice(R.segments.length);return!!(mr(R.segments,W)&&Qn(R.segments,W,B)&&R.children[Dt])&&Tr(R.children[Dt],O,le,B)}}function Qn(R,O,w){return O.every((B,W)=>fn[w](R[W].parameters,B.parameters))}class bn{constructor(O=new on([],{}),w={},B=null){this.root=O,this.queryParams=w,this.fragment=B}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Et(this.queryParams)),this._queryParamMap}toString(){return Gn.serialize(this)}}class on{constructor(O,w){this.segments=O,this.children=w,this.parent=null,tn(w,(B,W)=>B.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vi(this)}}class vr{constructor(O,w){this.path=O,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=Et(this.parameters)),this._parameterMap}toString(){return si(this)}}function mr(R,O){return R.length===O.length&&R.every((w,B)=>w.path===O[B].path)}let pr=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=m.Yz7({token:R,factory:function(){return new ii},providedIn:"root"}),R})();class ii{parse(O){const w=new Oe(O);return new bn(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(O){const w=`/${rr(O.root,!0)}`,B=function Kr(R){const O=Object.keys(R).map(w=>{const B=R[w];return Array.isArray(B)?B.map(W=>`${Xn(w)}=${Xn(W)}`).join("&"):`${Xn(w)}=${Xn(B)}`}).filter(w=>!!w);return O.length?`?${O.join("&")}`:""}(O.queryParams);return`${w}${B}${"string"==typeof O.fragment?`#${function ai(R){return encodeURI(R)}(O.fragment)}`:""}`}}const Gn=new ii;function vi(R){return R.segments.map(O=>si(O)).join("/")}function rr(R,O){if(!R.hasChildren())return vi(R);if(O){const w=R.children[Dt]?rr(R.children[Dt],!1):"",B=[];return tn(R.children,(W,le)=>{le!==Dt&&B.push(`${le}:${rr(W,!1)}`)}),B.length>0?`${w}(${B.join("//")})`:w}{const w=function _i(R,O){let w=[];return tn(R.children,(B,W)=>{W===Dt&&(w=w.concat(O(B,W)))}),tn(R.children,(B,W)=>{W!==Dt&&(w=w.concat(O(B,W)))}),w}(R,(B,W)=>W===Dt?[rr(R.children[Dt],!1)]:[`${W}:${rr(B,!1)}`]);return 1===Object.keys(R.children).length&&null!=R.children[Dt]?`${vi(R)}/${w[0]}`:`${vi(R)}/(${w.join("//")})`}}function Pi(R){return encodeURIComponent(R).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xn(R){return Pi(R).replace(/%3B/gi,";")}function ei(R){return Pi(R).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function li(R){return decodeURIComponent(R)}function Nr(R){return li(R.replace(/\+/g,"%20"))}function si(R){return`${ei(R.path)}${function Zr(R){return Object.keys(R).map(O=>`;${ei(O)}=${ei(R[O])}`).join("")}(R.parameters)}`}const Qe=/^[^\/()?;=#]+/;function He(R){const O=R.match(Qe);return O?O[0]:""}const ce=/^[^=?&#]+/,ue=/^[^&#]+/;class Oe{constructor(O){this.url=O,this.remaining=O}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new on([],{}):new on([],this.parseChildren())}parseQueryParams(){const O={};if(this.consumeOptional("?"))do{this.parseQueryParam(O)}while(this.consumeOptional("&"));return O}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const O=[];for(this.peekStartsWith("(")||O.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),O.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let B={};return this.peekStartsWith("(")&&(B=this.parseParens(!1)),(O.length>0||Object.keys(w).length>0)&&(B[Dt]=new on(O,w)),B}parseSegment(){const O=He(this.remaining);if(""===O&&this.peekStartsWith(";"))throw new m.vHH(4009,Qt);return this.capture(O),new vr(li(O),this.parseMatrixParams())}parseMatrixParams(){const O={};for(;this.consumeOptional(";");)this.parseParam(O);return O}parseParam(O){const w=He(this.remaining);if(!w)return;this.capture(w);let B="";if(this.consumeOptional("=")){const W=He(this.remaining);W&&(B=W,this.capture(B))}O[li(w)]=li(B)}parseQueryParam(O){const w=function Ee(R){const O=R.match(ce);return O?O[0]:""}(this.remaining);if(!w)return;this.capture(w);let B="";if(this.consumeOptional("=")){const pe=function ot(R){const O=R.match(ue);return O?O[0]:""}(this.remaining);pe&&(B=pe,this.capture(B))}const W=Nr(w),le=Nr(B);if(O.hasOwnProperty(W)){let pe=O[W];Array.isArray(pe)||(pe=[pe],O[W]=pe),pe.push(le)}else O[W]=le}parseParens(O){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const B=He(this.remaining),W=this.remaining[B.length];if("/"!==W&&")"!==W&&";"!==W)throw new m.vHH(4010,Qt);let le;B.indexOf(":")>-1?(le=B.slice(0,B.indexOf(":")),this.capture(le),this.capture(":")):O&&(le=Dt);const pe=this.parseChildren();w[le]=1===Object.keys(pe).length?pe[Dt]:new on([],pe),this.consumeOptional("//")}return w}peekStartsWith(O){return this.remaining.startsWith(O)}consumeOptional(O){return!!this.peekStartsWith(O)&&(this.remaining=this.remaining.substring(O.length),!0)}capture(O){if(!this.consumeOptional(O))throw new m.vHH(4011,Qt)}}function Ve(R){return R.segments.length>0?new on([],{[Dt]:R}):R}function we(R){const O={};for(const B of Object.keys(R.children)){const le=we(R.children[B]);(le.segments.length>0||le.hasChildren())&&(O[B]=le)}return function rt(R){if(1===R.numberOfChildren&&R.children[Dt]){const O=R.children[Dt];return new on(R.segments.concat(O.segments),O.children)}return R}(new on(R.segments,O))}function Rt(R){return R instanceof bn}const Yt=!1;function kr(R,O,w,B,W){var le;if(0===w.length)return nn(O.root,O.root,O.root,B,W);const pe=function cr(R){if("string"==typeof R[0]&&1===R.length&&"/"===R[0])return new Kn(!0,0,R);let O=0,w=!1;const B=R.reduce((W,le,pe)=>{if("object"==typeof le&&null!=le){if(le.outlets){const dt={};return tn(le.outlets,(Ut,pn)=>{dt[pn]="string"==typeof Ut?Ut.split("/"):Ut}),[...W,{outlets:dt}]}if(le.segmentPath)return[...W,le.segmentPath]}return"string"!=typeof le?[...W,le]:0===pe?(le.split("/").forEach((dt,Ut)=>{0==Ut&&"."===dt||(0==Ut&&""===dt?w=!0:".."===dt?O++:""!=dt&&W.push(dt))}),W):[...W,le]},[]);return new Kn(w,O,B)}(w);return pe.toRoot()?nn(O.root,O.root,new on([],{}),B,W):function dt(pn){var Wn;const Vn=function Er(R,O,w,B){if(R.isAbsolute)return new Mn(O.root,!0,0);if(-1===B)return new Mn(w,w===O.root,0);return function lr(R,O,w){let B=R,W=O,le=w;for(;le>W;){if(le-=W,B=B.parent,!B)throw new m.vHH(4005,Yt&&"Invalid number of '../'");W=B.segments.length}return new Mn(B,!1,W-le)}(w,B+(kt(R.commands[0])?0:1),R.numberOfDoubleDots)}(pe,O,null===(Wn=R.snapshot)||void 0===Wn?void 0:Wn._urlSegment,pn),zi=Vn.processChildren?fs(Vn.segmentGroup,Vn.index,pe.commands):Qs(Vn.segmentGroup,Vn.index,pe.commands);return nn(O.root,Vn.segmentGroup,zi,B,W)}(null===(le=R.snapshot)||void 0===le?void 0:le._lastPathIndex)}function kt(R){return"object"==typeof R&&null!=R&&!R.outlets&&!R.segmentPath}function Mt(R){return"object"==typeof R&&null!=R&&R.outlets}function nn(R,O,w,B,W){let pe,le={};B&&tn(B,(Ut,pn)=>{le[pn]=Array.isArray(Ut)?Ut.map(Wn=>`${Wn}`):`${Ut}`}),pe=R===O?w:Pn(R,O,w);const dt=Ve(we(pe));return new bn(dt,le,W)}function Pn(R,O,w){const B={};return tn(R.children,(W,le)=>{B[le]=W===O?w:Pn(W,O,w)}),new on(R.segments,B)}class Kn{constructor(O,w,B){if(this.isAbsolute=O,this.numberOfDoubleDots=w,this.commands=B,O&&B.length>0&&kt(B[0]))throw new m.vHH(4003,Yt&&"Root segment cannot have matrix parameters");const W=B.find(Mt);if(W&&W!==hn(B))throw new m.vHH(4004,Yt&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mn{constructor(O,w,B){this.segmentGroup=O,this.processChildren=w,this.index=B}}function Qs(R,O,w){if(R||(R=new on([],{})),0===R.segments.length&&R.hasChildren())return fs(R,O,w);const B=function ps(R,O,w){let B=0,W=O;const le={match:!1,pathIndex:0,commandIndex:0};for(;W<R.segments.length;){if(B>=w.length)return le;const pe=R.segments[W],dt=w[B];if(Mt(dt))break;const Ut=`${dt}`,pn=B<w.length-1?w[B+1]:null;if(W>0&&void 0===Ut)break;if(Ut&&pn&&"object"==typeof pn&&void 0===pn.outlets){if(!gi(Ut,pn,pe))return le;B+=2}else{if(!gi(Ut,{},pe))return le;B++}W++}return{match:!0,pathIndex:W,commandIndex:B}}(R,O,w),W=w.slice(B.commandIndex);if(B.match&&B.pathIndex<R.segments.length){const le=new on(R.segments.slice(0,B.pathIndex),{});return le.children[Dt]=new on(R.segments.slice(B.pathIndex),R.children),fs(le,0,W)}return B.match&&0===W.length?new on(R.segments,{}):B.match&&!R.hasChildren()?Oi(R,O,w):B.match?fs(R,0,W):Oi(R,O,w)}function fs(R,O,w){if(0===w.length)return new on(R.segments,{});{const B=function ur(R){return Mt(R[0])?R[0].outlets:{[Dt]:R}}(w),W={};if(!B[Dt]&&R.children[Dt]&&1===R.numberOfChildren&&0===R.children[Dt].segments.length){const le=fs(R.children[Dt],O,w);return new on(R.segments,le.children)}return tn(B,(le,pe)=>{"string"==typeof le&&(le=[le]),null!==le&&(W[pe]=Qs(R.children[pe],O,le))}),tn(R.children,(le,pe)=>{void 0===B[pe]&&(W[pe]=le)}),new on(R.segments,W)}}function Oi(R,O,w){const B=R.segments.slice(0,O);let W=0;for(;W<w.length;){const le=w[W];if(Mt(le)){const Ut=vn(le.outlets);return new on(B,Ut)}if(0===W&&kt(w[0])){B.push(new vr(R.segments[O].path,hr(w[0]))),W++;continue}const pe=Mt(le)?le.outlets[Dt]:`${le}`,dt=W<w.length-1?w[W+1]:null;pe&&dt&&kt(dt)?(B.push(new vr(pe,hr(dt))),W+=2):(B.push(new vr(pe,{})),W++)}return new on(B,{})}function vn(R){const O={};return tn(R,(w,B)=>{"string"==typeof w&&(w=[w]),null!==w&&(O[B]=Oi(new on([],{}),0,w))}),O}function hr(R){const O={};return tn(R,(w,B)=>O[B]=`${w}`),O}function gi(R,O,w){return R==w.path&&sn(O,w.parameters)}const Fr="imperative";class Ei{constructor(O,w){this.id=O,this.url=w}}class mi extends Ei{constructor(O,w,B="imperative",W=null){super(O,w),this.type=0,this.navigationTrigger=B,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Wi extends Ei{constructor(O,w,B){super(O,w),this.urlAfterRedirects=B,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wr extends Ei{constructor(O,w,B,W){super(O,w),this.reason=B,this.code=W,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ae extends Ei{constructor(O,w,B,W){super(O,w),this.reason=B,this.code=W,this.type=16}}class xe extends Ei{constructor(O,w,B,W){super(O,w),this.error=B,this.target=W,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ze extends Ei{constructor(O,w,B,W){super(O,w),this.urlAfterRedirects=B,this.state=W,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Te extends Ei{constructor(O,w,B,W){super(O,w),this.urlAfterRedirects=B,this.state=W,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tt extends Ei{constructor(O,w,B,W,le){super(O,w),this.urlAfterRedirects=B,this.state=W,this.shouldActivate=le,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nt extends Ei{constructor(O,w,B,W){super(O,w),this.urlAfterRedirects=B,this.state=W,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nt extends Ei{constructor(O,w,B,W){super(O,w),this.urlAfterRedirects=B,this.state=W,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $t{constructor(O){this.route=O,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Kt{constructor(O){this.route=O,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jt{constructor(O){this.snapshot=O,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mn{constructor(O){this.snapshot=O,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qn{constructor(O){this.snapshot=O,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ln{constructor(O){this.snapshot=O,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sr{constructor(O,w,B){this.routerEvent=O,this.position=w,this.anchor=B,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ft=(()=>{class R{createUrlTree(w,B,W,le,pe,dt){return kr(w||B.root,W,le,pe,dt)}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac}),R})(),Tt=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=m.Yz7({token:R,factory:function(O){return ft.\u0275fac(O)},providedIn:"root"}),R})();class qt{constructor(O){this._root=O}get root(){return this._root.value}parent(O){const w=this.pathFromRoot(O);return w.length>1?w[w.length-2]:null}children(O){const w=en(O,this._root);return w?w.children.map(B=>B.value):[]}firstChild(O){const w=en(O,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(O){const w=or(O,this._root);return w.length<2?[]:w[w.length-2].children.map(W=>W.value).filter(W=>W!==O)}pathFromRoot(O){return or(O,this._root).map(w=>w.value)}}function en(R,O){if(R===O.value)return O;for(const w of O.children){const B=en(R,w);if(B)return B}return null}function or(R,O){if(R===O.value)return[O];for(const w of O.children){const B=or(R,w);if(B.length)return B.unshift(O),B}return[]}class Yn{constructor(O,w){this.value=O,this.children=w}toString(){return`TreeNode(${this.value})`}}function fr(R){const O={};return R&&R.children.forEach(w=>O[w.value.outlet]=w),O}class Qr extends qt{constructor(O,w){super(O),this.snapshot=w,Ni(this,O)}toString(){return this.snapshot.toString()}}function Cs(R,O){const w=function ks(R,O){const pe=new Br([],{},{},"",{},Dt,O,null,R.root,-1,{});return new Ki("",new Yn(pe,[]))}(R,O),B=new ie.X([new vr("",{})]),W=new ie.X({}),le=new ie.X({}),pe=new ie.X({}),dt=new ie.X(""),Ut=new qr(B,W,pe,dt,le,Dt,O,w.root);return Ut.snapshot=w.root,new Qr(new Yn(Ut,[]),w)}class qr{constructor(O,w,B,W,le,pe,dt,Ut){var pn,Wn;this.url=O,this.params=w,this.queryParams=B,this.fragment=W,this.data=le,this.outlet=pe,this.component=dt,this.title=null!==(pn=null===(Wn=this.data)||void 0===Wn?void 0:Wn.pipe((0,Xe.U)(Vn=>Vn[zt])))&&void 0!==pn?pn:(0,Y.of)(void 0),this._futureSnapshot=Ut}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xe.U)(O=>Et(O)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xe.U)(O=>Et(O)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zr(R,O="emptyOnly"){const w=R.pathFromRoot;let B=0;if("always"!==O)for(B=w.length-1;B>=1;){const W=w[B],le=w[B-1];if(W.routeConfig&&""===W.routeConfig.path)B--;else{if(le.component)break;B--}}return function Gr(R){return R.reduce((O,w)=>{var B;return{params:{...O.params,...w.params},data:{...O.data,...w.data},resolve:{...w.data,...O.resolve,...null===(B=w.routeConfig)||void 0===B?void 0:B.data,...w._resolvedData}}},{params:{},data:{},resolve:{}})}(w.slice(B))}class Br{get title(){var O;return null===(O=this.data)||void 0===O?void 0:O[zt]}constructor(O,w,B,W,le,pe,dt,Ut,pn,Wn,Vn){this.url=O,this.params=w,this.queryParams=B,this.fragment=W,this.data=le,this.outlet=pe,this.component=dt,this.routeConfig=Ut,this._urlSegment=pn,this._lastPathIndex=Wn,this._resolve=Vn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Et(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Et(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(B=>B.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ki extends qt{constructor(O,w){super(w),this.url=O,Ni(this,w)}toString(){return Xs(this._root)}}function Ni(R,O){O.value._routerState=R,O.children.forEach(w=>Ni(R,w))}function Xs(R){const O=R.children.length>0?` { ${R.children.map(Xs).join(", ")} } `:"";return`${R.value}${O}`}function _o(R){if(R.snapshot){const O=R.snapshot,w=R._futureSnapshot;R.snapshot=w,sn(O.queryParams,w.queryParams)||R.queryParams.next(w.queryParams),O.fragment!==w.fragment&&R.fragment.next(w.fragment),sn(O.params,w.params)||R.params.next(w.params),function Ot(R,O){if(R.length!==O.length)return!1;for(let w=0;w<R.length;++w)if(!sn(R[w],O[w]))return!1;return!0}(O.url,w.url)||R.url.next(w.url),sn(O.data,w.data)||R.data.next(w.data)}else R.snapshot=R._futureSnapshot,R.data.next(R._futureSnapshot.data)}function Vs(R,O){const w=sn(R.params,O.params)&&function oi(R,O){return mr(R,O)&&R.every((w,B)=>sn(w.parameters,O[B].parameters))}(R.url,O.url);return w&&!(!R.parent!=!O.parent)&&(!R.parent||Vs(R.parent,O.parent))}function ci(R,O,w){if(w&&R.shouldReuseRoute(O.value,w.value.snapshot)){const B=w.value;B._futureSnapshot=O.value;const W=function xr(R,O,w){return O.children.map(B=>{for(const W of w.children)if(R.shouldReuseRoute(B.value,W.value.snapshot))return ci(R,B,W);return ci(R,B)})}(R,O,w);return new Yn(B,W)}{if(R.shouldAttach(O.value)){const le=R.retrieve(O.value);if(null!==le){const pe=le.route;return pe.value._futureSnapshot=O.value,pe.children=O.children.map(dt=>ci(R,dt)),pe}}const B=function Ds(R){return new qr(new ie.X(R.url),new ie.X(R.params),new ie.X(R.queryParams),new ie.X(R.fragment),new ie.X(R.data),R.outlet,R.component,R)}(O.value),W=O.children.map(le=>ci(R,le));return new Yn(B,W)}}const pa="ngNavigationCancelingError";function xs(R,O){const{redirectTo:w,navigationBehaviorOptions:B}=Rt(O)?{redirectTo:O,navigationBehaviorOptions:void 0}:O,W=qi(!1,0,O);return W.url=w,W.navigationBehaviorOptions=B,W}function qi(R,O,w){const B=new Error("NavigationCancelingError: "+(R||""));return B[pa]=!0,B.cancellationCode=O,w&&(B.url=w),B}function Ba(R){return Ts(R)&&Rt(R.url)}function Ts(R){return R&&R[pa]}class vo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new js,this.attachRef=null}}let js=(()=>{class R{constructor(){this.contexts=new Map}onChildOutletCreated(w,B){const W=this.getOrCreateContext(w);W.outlet=B,this.contexts.set(w,W)}onChildOutletDestroyed(w){const B=this.getContext(w);B&&(B.outlet=null,B.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let B=this.getContext(w);return B||(B=new vo,this.contexts.set(w,B)),B}getContext(w){return this.contexts.get(w)||null}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();const Qi=!1;let Ss=(()=>{class R{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dt,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.parentContexts=(0,m.f3M)(js),this.location=(0,m.f3M)(m.s_b),this.changeDetector=(0,m.f3M)(m.sBO),this.environmentInjector=(0,m.f3M)(m.lqb)}ngOnChanges(w){if(w.name){const{firstChange:B,previousValue:W}=w.name;if(B)return;this.isTrackedInParentContexts(W)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(W)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(w){var B;return(null===(B=this.parentContexts.getContext(w))||void 0===B?void 0:B.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);null!=w&&w.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,Qi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,Qi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,Qi);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,B){this.activated=w,this._activatedRoute=B,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,B){if(this.isActivated)throw new m.vHH(4013,Qi);this._activatedRoute=w;const W=this.location,pe=w.snapshot.component,dt=this.parentContexts.getOrCreateContext(this.name).children,Ut=new ui(w,dt,W.injector);if(B&&function Co(R){return!!R.resolveComponentFactory}(B)){const pn=B.resolveComponentFactory(pe);this.activated=W.createComponent(pn,W.length,Ut)}else this.activated=W.createComponent(pe,{index:W.length,injector:Ut,environmentInjector:null!=B?B:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275dir=m.lG2({type:R,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[m.TTD]}),R})();class ui{constructor(O,w,B){this.route=O,this.childContexts=w,this.parent=B}get(O,w){return O===qr?this.route:O===js?this.childContexts:this.parent.get(O,w)}}let Js=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275cmp=m.Xpm({type:R,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(w,B){1&w&&m._UZ(0,"router-outlet")},dependencies:[Ss],encapsulation:2}),R})();function Do(R,O){var w;return R.providers&&!R._injector&&(R._injector=(0,m.MMx)(R.providers,O,`Route: ${R.path}`)),null!==(w=R._injector)&&void 0!==w?w:O}function ws(R){const O=R.children&&R.children.map(ws),w=O?{...R,children:O}:{...R};return!w.component&&!w.loadComponent&&(O||w.loadChildren)&&w.outlet&&w.outlet!==Dt&&(w.component=Js),w}function is(R){return R.outlet||Dt}function Ti(R,O){const w=R.filter(B=>is(B)===O);return w.push(...R.filter(B=>is(B)!==O)),w}function _s(R){var O;if(!R)return null;if(null!==(O=R.routeConfig)&&void 0!==O&&O._injector)return R.routeConfig._injector;for(let w=R.parent;w;w=w.parent){const B=w.routeConfig;if(null!=B&&B._loadedInjector)return B._loadedInjector;if(null!=B&&B._injector)return B._injector}return null}class Ms{constructor(O,w,B,W){this.routeReuseStrategy=O,this.futureState=w,this.currState=B,this.forwardEvent=W}activate(O){const w=this.futureState._root,B=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,B,O),_o(this.futureState.root),this.activateChildRoutes(w,B,O)}deactivateChildRoutes(O,w,B){const W=fr(w);O.children.forEach(le=>{const pe=le.value.outlet;this.deactivateRoutes(le,W[pe],B),delete W[pe]}),tn(W,(le,pe)=>{this.deactivateRouteAndItsChildren(le,B)})}deactivateRoutes(O,w,B){const W=O.value,le=w?w.value:null;if(W===le)if(W.component){const pe=B.getContext(W.outlet);pe&&this.deactivateChildRoutes(O,w,pe.children)}else this.deactivateChildRoutes(O,w,B);else le&&this.deactivateRouteAndItsChildren(w,B)}deactivateRouteAndItsChildren(O,w){O.value.component&&this.routeReuseStrategy.shouldDetach(O.value.snapshot)?this.detachAndStoreRouteSubtree(O,w):this.deactivateRouteAndOutlet(O,w)}detachAndStoreRouteSubtree(O,w){const B=w.getContext(O.value.outlet),W=B&&O.value.component?B.children:w,le=fr(O);for(const pe of Object.keys(le))this.deactivateRouteAndItsChildren(le[pe],W);if(B&&B.outlet){const pe=B.outlet.detach(),dt=B.children.onOutletDeactivated();this.routeReuseStrategy.store(O.value.snapshot,{componentRef:pe,route:O,contexts:dt})}}deactivateRouteAndOutlet(O,w){const B=w.getContext(O.value.outlet),W=B&&O.value.component?B.children:w,le=fr(O);for(const pe of Object.keys(le))this.deactivateRouteAndItsChildren(le[pe],W);B&&(B.outlet&&(B.outlet.deactivate(),B.children.onOutletDeactivated()),B.attachRef=null,B.resolver=null,B.route=null)}activateChildRoutes(O,w,B){const W=fr(w);O.children.forEach(le=>{this.activateRoutes(le,W[le.value.outlet],B),this.forwardEvent(new Ln(le.value.snapshot))}),O.children.length&&this.forwardEvent(new mn(O.value.snapshot))}activateRoutes(O,w,B){const W=O.value,le=w?w.value:null;if(_o(W),W===le)if(W.component){const dt=B.getOrCreateContext(W.outlet);this.activateChildRoutes(O,w,dt.children)}else this.activateChildRoutes(O,w,B);else if(W.component){const dt=B.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const Ut=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),dt.children.onOutletReAttached(Ut.contexts),dt.attachRef=Ut.componentRef,dt.route=Ut.route.value,dt.outlet&&dt.outlet.attach(Ut.componentRef,Ut.route.value),_o(Ut.route.value),this.activateChildRoutes(O,null,dt.children)}else{var pe;const Ut=_s(W.snapshot),pn=null!==(pe=null==Ut?void 0:Ut.get(m._Vd))&&void 0!==pe?pe:null;dt.attachRef=null,dt.route=W,dt.resolver=pn,dt.injector=Ut,dt.outlet&&dt.outlet.activateWith(W,dt.injector),this.activateChildRoutes(O,null,dt.children)}}else this.activateChildRoutes(O,null,B)}}class ga{constructor(O){this.path=O,this.route=this.path[this.path.length-1]}}class oo{constructor(O,w){this.component=O,this.route=w}}function S(R,O,w){const B=R._root;return q(B,O?O._root:null,w,[B.value])}function A(R,O){const w=Symbol(),B=O.get(R,w);return B===w?"function"!=typeof R||(0,m.Z0I)(R)?O.get(R):R:B}function q(R,O,w,B,W={canDeactivateChecks:[],canActivateChecks:[]}){const le=fr(O);return R.children.forEach(pe=>{(function Ie(R,O,w,B,W={canDeactivateChecks:[],canActivateChecks:[]}){const le=R.value,pe=O?O.value:null,dt=w?w.getContext(R.value.outlet):null;if(pe&&le.routeConfig===pe.routeConfig){const Ut=function Xt(R,O,w){if("function"==typeof w)return w(R,O);switch(w){case"pathParamsChange":return!mr(R.url,O.url);case"pathParamsOrQueryParamsChange":return!mr(R.url,O.url)||!sn(R.queryParams,O.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vs(R,O)||!sn(R.queryParams,O.queryParams);default:return!Vs(R,O)}}(pe,le,le.routeConfig.runGuardsAndResolvers);Ut?W.canActivateChecks.push(new ga(B)):(le.data=pe.data,le._resolvedData=pe._resolvedData),q(R,O,le.component?dt?dt.children:null:w,B,W),Ut&&dt&&dt.outlet&&dt.outlet.isActivated&&W.canDeactivateChecks.push(new oo(dt.outlet.component,pe))}else pe&&$n(O,dt,W),W.canActivateChecks.push(new ga(B)),q(R,null,le.component?dt?dt.children:null:w,B,W)})(pe,le[pe.value.outlet],w,B.concat([pe.value]),W),delete le[pe.value.outlet]}),tn(le,(pe,dt)=>$n(pe,w.getContext(dt),W)),W}function $n(R,O,w){const B=fr(R),W=R.value;tn(B,(le,pe)=>{$n(le,W.component?O?O.children.getContext(pe):null:O,w)}),w.canDeactivateChecks.push(new oo(W.component&&O&&O.outlet&&O.outlet.isActivated?O.outlet.component:null,W))}function er(R){return"function"==typeof R}function Gt(R){return R instanceof Pe.K||"EmptyError"===(null==R?void 0:R.name)}const pt=Symbol("INITIAL_VALUE");function St(){return(0,Me.w)(R=>(0,Ae.a)(R.map(O=>O.pipe((0,Se.q)(1),(0,oe.O)(pt)))).pipe((0,Xe.U)(O=>{for(const w of O)if(!0!==w){if(w===pt)return pt;if(!1===w||w instanceof bn)return w}return!0}),(0,et.h)(O=>O!==pt),(0,Se.q)(1)))}function Hi(R){return(0,Fe.z)((0,mt.b)(O=>{if(Rt(O))throw xs(0,O)}),(0,Xe.U)(O=>!0===O))}const bi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ss(R,O,w,B,W){const le=cs(R,O,w);return le.matched?function Xi(R,O,w,B){const W=O.canMatch;if(!W||0===W.length)return(0,Y.of)(!0);const le=W.map(pe=>{const dt=A(pe,R);return ir(function V(R){return R&&er(R.canMatch)}(dt)?dt.canMatch(O,w):R.runInContext(()=>dt(O,w)))});return(0,Y.of)(le).pipe(St(),Hi())}(B=Do(O,B),O,w).pipe((0,Xe.U)(pe=>!0===pe?le:{...bi})):(0,Y.of)(le)}function cs(R,O,w){var B;if(""===O.path)return"full"===O.pathMatch&&(R.hasChildren()||w.length>0)?{...bi}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const le=(O.matcher||ut)(w,R,O);if(!le)return{...bi};const pe={};tn(le.posParams,(Ut,pn)=>{pe[pn]=Ut.path});const dt=le.consumed.length>0?{...pe,...le.consumed[le.consumed.length-1].parameters}:pe;return{matched:!0,consumedSegments:le.consumed,remainingSegments:w.slice(le.consumed.length),parameters:dt,positionalParamSegments:null!==(B=le.posParams)&&void 0!==B?B:{}}}function to(R,O,w,B){if(w.length>0&&function Ta(R,O,w){return w.some(B=>gl(R,O,B)&&is(B)!==Dt)}(R,w,B)){const le=new on(O,function ma(R,O,w,B){const W={};W[Dt]=B,B._sourceSegment=R,B._segmentIndexShift=O.length;for(const le of w)if(""===le.path&&is(le)!==Dt){const pe=new on([],{});pe._sourceSegment=R,pe._segmentIndexShift=O.length,W[is(le)]=pe}return W}(R,O,B,new on(w,R.children)));return le._sourceSegment=R,le._segmentIndexShift=O.length,{segmentGroup:le,slicedSegments:[]}}if(0===w.length&&function pl(R,O,w){return w.some(B=>gl(R,O,B))}(R,w,B)){const le=new on(R.segments,function Rs(R,O,w,B,W){const le={};for(const pe of B)if(gl(R,w,pe)&&!W[is(pe)]){const dt=new on([],{});dt._sourceSegment=R,dt._segmentIndexShift=O.length,le[is(pe)]=dt}return{...W,...le}}(R,O,w,B,R.children));return le._sourceSegment=R,le._segmentIndexShift=O.length,{segmentGroup:le,slicedSegments:w}}const W=new on(R.segments,R.children);return W._sourceSegment=R,W._segmentIndexShift=O.length,{segmentGroup:W,slicedSegments:w}}function gl(R,O,w){return(!(R.hasChildren()||O.length>0)||"full"!==w.pathMatch)&&""===w.path}function vs(R,O,w,B){return!!(is(R)===B||B!==Dt&&gl(O,w,R))&&("**"===R.path||cs(O,R,w).matched)}function Xo(R,O,w){return 0===O.length&&!R.children[w]}const ya=!1;class _a{constructor(O){this.segmentGroup=O||null}}class Sa{constructor(O){this.urlTree=O}}function va(R){return(0,De._)(new _a(R))}function Jo(R){return(0,De._)(new Sa(R))}class Wo{constructor(O,w,B,W,le){this.injector=O,this.configLoader=w,this.urlSerializer=B,this.urlTree=W,this.config=le,this.allowRedirects=!0}apply(){const O=to(this.urlTree.root,[],[],this.config).segmentGroup,w=new on(O.segments,O.children);return this.expandSegmentGroup(this.injector,this.config,w,Dt).pipe((0,Xe.U)(le=>this.createUrlTree(we(le),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ye.K)(le=>{if(le instanceof Sa)return this.allowRedirects=!1,this.match(le.urlTree);throw le instanceof _a?this.noMatchError(le):le}))}match(O){return this.expandSegmentGroup(this.injector,this.config,O.root,Dt).pipe((0,Xe.U)(W=>this.createUrlTree(we(W),O.queryParams,O.fragment))).pipe((0,Ye.K)(W=>{throw W instanceof _a?this.noMatchError(W):W}))}noMatchError(O){return new m.vHH(4002,ya)}createUrlTree(O,w,B){const W=Ve(O);return new bn(W,w,B)}expandSegmentGroup(O,w,B,W){return 0===B.segments.length&&B.hasChildren()?this.expandChildren(O,w,B).pipe((0,Xe.U)(le=>new on([],le))):this.expandSegment(O,B,w,B.segments,W,!0)}expandChildren(O,w,B){const W=[];for(const le of Object.keys(B.children))"primary"===le?W.unshift(le):W.push(le);return(0,g.D)(W).pipe((0,Je.b)(le=>{const pe=B.children[le],dt=Ti(w,le);return this.expandSegmentGroup(O,dt,pe,le).pipe((0,Xe.U)(Ut=>({segment:Ut,outlet:le})))}),(0,ve.R)((le,pe)=>(le[pe.outlet]=pe.segment,le),{}),At())}expandSegment(O,w,B,W,le,pe){return(0,g.D)(B).pipe((0,Je.b)(dt=>this.expandSegmentAgainstRoute(O,w,B,dt,W,le,pe).pipe((0,Ye.K)(pn=>{if(pn instanceof _a)return(0,Y.of)(null);throw pn}))),(0,Re.P)(dt=>!!dt),(0,Ye.K)((dt,Ut)=>{if(Gt(dt))return Xo(w,W,le)?(0,Y.of)(new on([],{})):va(w);throw dt}))}expandSegmentAgainstRoute(O,w,B,W,le,pe,dt){return vs(W,w,le,pe)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(O,w,W,le,pe):dt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(O,w,B,W,le,pe):va(w):va(w)}expandSegmentAgainstRouteUsingRedirect(O,w,B,W,le,pe){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(O,B,W,pe):this.expandRegularSegmentAgainstRouteUsingRedirect(O,w,B,W,le,pe)}expandWildCardWithParamsAgainstRouteUsingRedirect(O,w,B,W){const le=this.applyRedirectCommands([],B.redirectTo,{});return B.redirectTo.startsWith("/")?Jo(le):this.lineralizeSegments(B,le).pipe((0,Le.z)(pe=>{const dt=new on(pe,{});return this.expandSegment(O,dt,w,pe,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(O,w,B,W,le,pe){const{matched:dt,consumedSegments:Ut,remainingSegments:pn,positionalParamSegments:Wn}=cs(w,W,le);if(!dt)return va(w);const Vn=this.applyRedirectCommands(Ut,W.redirectTo,Wn);return W.redirectTo.startsWith("/")?Jo(Vn):this.lineralizeSegments(W,Vn).pipe((0,Le.z)(zi=>this.expandSegment(O,w,B,zi.concat(pn),pe,!1)))}matchSegmentAgainstRoute(O,w,B,W,le){return"**"===B.path?(O=Do(B,O),B.loadChildren?(B._loadedRoutes?(0,Y.of)({routes:B._loadedRoutes,injector:B._loadedInjector}):this.configLoader.loadChildren(O,B)).pipe((0,Xe.U)(dt=>(B._loadedRoutes=dt.routes,B._loadedInjector=dt.injector,new on(W,{})))):(0,Y.of)(new on(W,{}))):ss(w,B,W,O).pipe((0,Me.w)(({matched:pe,consumedSegments:dt,remainingSegments:Ut})=>{var pn;return pe?(O=null!==(pn=B._injector)&&void 0!==pn?pn:O,this.getChildConfig(O,B,W).pipe((0,Le.z)(Vn=>{var zi;const Ui=null!==(zi=Vn.injector)&&void 0!==zi?zi:O,Ji=Vn.routes,{segmentGroup:wo,slicedSegments:Ys}=to(w,dt,Ut,Ji),ua=new on(wo.segments,wo.children);if(0===Ys.length&&ua.hasChildren())return this.expandChildren(Ui,Ji,ua).pipe((0,Xe.U)(da=>new on(dt,da)));if(0===Ji.length&&0===Ys.length)return(0,Y.of)(new on(dt,{}));const Ls=is(B)===le;return this.expandSegment(Ui,ua,Ji,Ys,Ls?Dt:le,!0).pipe((0,Xe.U)(Bs=>new on(dt.concat(Bs.segments),Bs.children)))}))):va(w)}))}getChildConfig(O,w,B){return w.children?(0,Y.of)({routes:w.children,injector:O}):w.loadChildren?void 0!==w._loadedRoutes?(0,Y.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function Hs(R,O,w,B){const W=O.canLoad;if(void 0===W||0===W.length)return(0,Y.of)(!0);const le=W.map(pe=>{const dt=A(pe,R);return ir(function Ii(R){return R&&er(R.canLoad)}(dt)?dt.canLoad(O,w):R.runInContext(()=>dt(O,w)))});return(0,Y.of)(le).pipe(St(),Hi())}(O,w,B).pipe((0,Le.z)(W=>W?this.configLoader.loadChildren(O,w).pipe((0,mt.b)(le=>{w._loadedRoutes=le.routes,w._loadedInjector=le.injector})):function Ea(R){return(0,De._)(qi(ya,3))}())):(0,Y.of)({routes:[],injector:O})}lineralizeSegments(O,w){let B=[],W=w.root;for(;;){if(B=B.concat(W.segments),0===W.numberOfChildren)return(0,Y.of)(B);if(W.numberOfChildren>1||!W.children[Dt])return O.redirectTo,(0,De._)(new m.vHH(4e3,ya));W=W.children[Dt]}}applyRedirectCommands(O,w,B){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),O,B)}applyRedirectCreateUrlTree(O,w,B,W){const le=this.createSegmentGroup(O,w.root,B,W);return new bn(le,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(O,w){const B={};return tn(O,(W,le)=>{if("string"==typeof W&&W.startsWith(":")){const dt=W.substring(1);B[le]=w[dt]}else B[le]=W}),B}createSegmentGroup(O,w,B,W){const le=this.createSegments(O,w.segments,B,W);let pe={};return tn(w.children,(dt,Ut)=>{pe[Ut]=this.createSegmentGroup(O,dt,B,W)}),new on(le,pe)}createSegments(O,w,B,W){return w.map(le=>le.path.startsWith(":")?this.findPosParam(O,le,W):this.findOrReturn(le,B))}findPosParam(O,w,B){const W=B[w.path.substring(1)];if(!W)throw new m.vHH(4001,ya);return W}findOrReturn(O,w){let B=0;for(const W of w){if(W.path===O.path)return w.splice(B),W;B++}return O}}class Kl{}class Ri{constructor(O,w,B,W,le,pe,dt){this.injector=O,this.rootComponentType=w,this.config=B,this.urlTree=W,this.url=le,this.paramsInheritanceStrategy=pe,this.urlSerializer=dt}recognize(){const O=to(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,O,Dt).pipe((0,Xe.U)(w=>{if(null===w)return null;const B=new Br([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dt,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new Yn(B,w),le=new Ki(this.url,W);return this.inheritParamsAndData(le._root),le}))}inheritParamsAndData(O){const w=O.value,B=zr(w,this.paramsInheritanceStrategy);w.params=Object.freeze(B.params),w.data=Object.freeze(B.data),O.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(O,w,B,W){return 0===B.segments.length&&B.hasChildren()?this.processChildren(O,w,B):this.processSegment(O,w,B,B.segments,W)}processChildren(O,w,B){return(0,g.D)(Object.keys(B.children)).pipe((0,Je.b)(W=>{const le=B.children[W],pe=Ti(w,W);return this.processSegmentGroup(O,pe,le,W)}),(0,ve.R)((W,le)=>W&&le?(W.push(...le),W):null),function vt(R,O=!1){return(0,It.e)((w,B)=>{let W=0;w.subscribe((0,ze.x)(B,le=>{const pe=R(le,W++);(pe||O)&&B.next(le),!pe&&B.complete()}))})}(W=>null!==W),(0,Pt.d)(null),At(),(0,Xe.U)(W=>{if(null===W)return null;const le=ql(W);return function Ol(R){R.sort((O,w)=>O.value.outlet===Dt?-1:w.value.outlet===Dt?1:O.value.outlet.localeCompare(w.value.outlet))}(le),le}))}processSegment(O,w,B,W,le){return(0,g.D)(w).pipe((0,Je.b)(pe=>{var dt;return this.processSegmentAgainstRoute(null!==(dt=pe._injector)&&void 0!==dt?dt:O,pe,B,W,le)}),(0,Re.P)(pe=>!!pe),(0,Ye.K)(pe=>{if(Gt(pe))return Xo(B,W,le)?(0,Y.of)([]):(0,Y.of)(null);throw pe}))}processSegmentAgainstRoute(O,w,B,W,le){if(w.redirectTo||!vs(w,B,W,le))return(0,Y.of)(null);let pe;if("**"===w.path){var dt,Ut;const pn=W.length>0?hn(W).parameters:{},Wn=Si(B)+W.length,Vn=new Br(W,pn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,la(w),is(w),null!==(dt=null!==(Ut=w.component)&&void 0!==Ut?Ut:w._loadedComponent)&&void 0!==dt?dt:null,w,Ja(B),Wn,U(w));pe=(0,Y.of)({snapshot:Vn,consumedSegments:[],remainingSegments:[]})}else pe=ss(B,w,W,O).pipe((0,Xe.U)(({matched:pn,consumedSegments:Wn,remainingSegments:Vn,parameters:zi})=>{var Ui,Ji;if(!pn)return null;const wo=Si(B)+Wn.length;return{snapshot:new Br(Wn,zi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,la(w),is(w),null!==(Ui=null!==(Ji=w.component)&&void 0!==Ji?Ji:w._loadedComponent)&&void 0!==Ui?Ui:null,w,Ja(B),wo,U(w)),consumedSegments:Wn,remainingSegments:Vn}}));return pe.pipe((0,Me.w)(pn=>{var Wn,Vn;if(null===pn)return(0,Y.of)(null);const{snapshot:zi,consumedSegments:Ui,remainingSegments:Ji}=pn;O=null!==(Wn=w._injector)&&void 0!==Wn?Wn:O;const wo=null!==(Vn=w._loadedInjector)&&void 0!==Vn?Vn:O,Ys=function Gs(R){return R.children?R.children:R.loadChildren?R._loadedRoutes:[]}(w),{segmentGroup:ua,slicedSegments:Ls}=to(B,Ui,Ji,Ys.filter(Bs=>void 0===Bs.redirectTo));if(0===Ls.length&&ua.hasChildren())return this.processChildren(wo,Ys,ua).pipe((0,Xe.U)(Bs=>null===Bs?null:[new Yn(zi,Bs)]));if(0===Ys.length&&0===Ls.length)return(0,Y.of)([new Yn(zi,[])]);const Ko=is(w)===le;return this.processSegment(wo,Ys,ua,Ls,Ko?Dt:le).pipe((0,Xe.U)(Bs=>null===Bs?null:[new Yn(zi,Bs)]))}))}}function ea(R){const O=R.value.routeConfig;return O&&""===O.path&&void 0===O.redirectTo}function ql(R){const O=[],w=new Set;for(const B of R){if(!ea(B)){O.push(B);continue}const W=O.find(le=>B.value.routeConfig===le.value.routeConfig);void 0!==W?(W.children.push(...B.children),w.add(W)):O.push(B)}for(const B of w){const W=ql(B.children);O.push(new Yn(B.value,W))}return O.filter(B=>!w.has(B))}function Ja(R){let O=R;for(;O._sourceSegment;)O=O._sourceSegment;return O}function Si(R){var O;let w=R,B=null!==(O=w._segmentIndexShift)&&void 0!==O?O:0;for(;w._sourceSegment;){var W;w=w._sourceSegment,B+=null!==(W=w._segmentIndexShift)&&void 0!==W?W:0}return B-1}function la(R){return R.data||{}}function U(R){return R.resolve||{}}function Fn(R){return"string"==typeof R.title||null===R.title}function Sr(R){return(0,Me.w)(O=>{const w=R(O);return w?(0,g.D)(w).pipe((0,Xe.U)(()=>O)):(0,Y.of)(O)})}const Pr=new m.OlP("ROUTES");let Mr=(()=>{class R{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,m.f3M)(m.Sil)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,Y.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const B=ir(w.loadComponent()).pipe((0,Xe.U)(yr),(0,mt.b)(le=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=le}),(0,qe.x)(()=>{this.componentLoaders.delete(w)})),W=new Ne.c(B,()=>new je.x).pipe((0,We.x)());return this.componentLoaders.set(w,W),W}loadChildren(w,B){if(this.childrenLoaders.get(B))return this.childrenLoaders.get(B);if(B._loadedRoutes)return(0,Y.of)({routes:B._loadedRoutes,injector:B._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(B);const le=this.loadModuleFactoryOrRoutes(B.loadChildren).pipe((0,Xe.U)(dt=>{this.onLoadEndListener&&this.onLoadEndListener(B);let Ut,pn,Wn=!1;Array.isArray(dt)?pn=dt:(Ut=dt.create(w).injector,pn=zn(Ut.get(Pr,[],m.XFs.Self|m.XFs.Optional)));return{routes:pn.map(ws),injector:Ut}}),(0,qe.x)(()=>{this.childrenLoaders.delete(B)})),pe=new Ne.c(le,()=>new je.x).pipe((0,We.x)());return this.childrenLoaders.set(B,pe),pe}loadModuleFactoryOrRoutes(w){return ir(w()).pipe((0,Xe.U)(yr),(0,Le.z)(B=>B instanceof m.YKP||Array.isArray(B)?(0,Y.of)(B):(0,g.D)(this.compiler.compileModuleAsync(B))))}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();function yr(R){return function os(R){return R&&"object"==typeof R&&"default"in R}(R)?R.default:R}let Ws=(()=>{class R{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new je.x,this.configLoader=(0,m.f3M)(Mr),this.environmentInjector=(0,m.f3M)(m.lqb),this.urlSerializer=(0,m.f3M)(pr),this.rootContexts=(0,m.f3M)(js),this.navigationId=0,this.afterPreactivation=()=>(0,Y.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=W=>this.events.next(new Kt(W)),this.configLoader.onLoadStartListener=W=>this.events.next(new $t(W))}complete(){var w;null===(w=this.transitions)||void 0===w||w.complete()}handleNavigationRequest(w){var B;const W=++this.navigationId;null===(B=this.transitions)||void 0===B||B.next({...this.transitions.value,...w,id:W})}setupNavigations(w){return this.transitions=new ie.X({id:0,targetPageId:0,currentUrlTree:w.currentUrlTree,currentRawUrl:w.currentUrlTree,extractedUrl:w.urlHandlingStrategy.extract(w.currentUrlTree),urlAfterRedirects:w.urlHandlingStrategy.extract(w.currentUrlTree),rawUrl:w.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Fr,restoredState:null,currentSnapshot:w.routerState.snapshot,targetSnapshot:null,currentRouterState:w.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,et.h)(B=>0!==B.id),(0,Xe.U)(B=>({...B,extractedUrl:w.urlHandlingStrategy.extract(B.rawUrl)})),(0,Me.w)(B=>{let W=!1,le=!1;return(0,Y.of)(B).pipe((0,mt.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.rawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Me.w)(pe=>{var dt;const Ut=w.browserUrlTree.toString(),pn=!w.navigated||pe.extractedUrl.toString()!==Ut||Ut!==w.currentUrlTree.toString(),Wn=null!==(dt=pe.extras.onSameUrlNavigation)&&void 0!==dt?dt:w.onSameUrlNavigation;if(!pn&&"reload"!==Wn){const Vn="";return this.events.next(new ae(pe.id,w.serializeUrl(B.rawUrl),Vn,0)),w.rawUrlTree=pe.rawUrl,pe.resolve(null),be.E}if(w.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl))return ao(pe.source)&&(w.browserUrlTree=pe.extractedUrl),(0,Y.of)(pe).pipe((0,Me.w)(Vn=>{var zi,Ui;const Ji=null===(zi=this.transitions)||void 0===zi?void 0:zi.getValue();return this.events.next(new mi(Vn.id,this.urlSerializer.serialize(Vn.extractedUrl),Vn.source,Vn.restoredState)),Ji!==(null===(Ui=this.transitions)||void 0===Ui?void 0:Ui.getValue())?be.E:Promise.resolve(Vn)}),function ml(R,O,w,B){return(0,Me.w)(W=>function wa(R,O,w,B,W){return new Wo(R,O,w,B,W).apply()}(R,O,w,W.extractedUrl,B).pipe((0,Xe.U)(le=>({...W,urlAfterRedirects:le}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,w.config),(0,mt.b)(Vn=>{this.currentNavigation={...this.currentNavigation,finalUrl:Vn.urlAfterRedirects},B.urlAfterRedirects=Vn.urlAfterRedirects}),function ee(R,O,w,B,W){return(0,Le.z)(le=>function Fo(R,O,w,B,W,le,pe="emptyOnly"){return new Ri(R,O,w,B,W,pe,le).recognize().pipe((0,Me.w)(dt=>null===dt?function zs(R){return new he.y(O=>O.error(R))}(new Kl):(0,Y.of)(dt)))}(R,O,w,le.urlAfterRedirects,B.serialize(le.urlAfterRedirects),B,W).pipe((0,Xe.U)(pe=>({...le,targetSnapshot:pe}))))}(this.environmentInjector,this.rootComponentType,w.config,this.urlSerializer,w.paramsInheritanceStrategy),(0,mt.b)(Vn=>{if(B.targetSnapshot=Vn.targetSnapshot,"eager"===w.urlUpdateStrategy){if(!Vn.extras.skipLocationChange){const Ui=w.urlHandlingStrategy.merge(Vn.urlAfterRedirects,Vn.rawUrl);w.setBrowserUrl(Ui,Vn)}w.browserUrlTree=Vn.urlAfterRedirects}const zi=new Ze(Vn.id,this.urlSerializer.serialize(Vn.extractedUrl),this.urlSerializer.serialize(Vn.urlAfterRedirects),Vn.targetSnapshot);this.events.next(zi)}));if(pn&&w.urlHandlingStrategy.shouldProcessUrl(w.rawUrlTree)){const{id:Vn,extractedUrl:zi,source:Ui,restoredState:Ji,extras:wo}=pe,Ys=new mi(Vn,this.urlSerializer.serialize(zi),Ui,Ji);this.events.next(Ys);const ua=Cs(zi,this.rootComponentType).snapshot;return B={...pe,targetSnapshot:ua,urlAfterRedirects:zi,extras:{...wo,skipLocationChange:!1,replaceUrl:!1}},(0,Y.of)(B)}{const Vn="";return this.events.next(new ae(pe.id,w.serializeUrl(B.extractedUrl),Vn,1)),w.rawUrlTree=pe.rawUrl,pe.resolve(null),be.E}}),(0,mt.b)(pe=>{const dt=new Te(pe.id,this.urlSerializer.serialize(pe.extractedUrl),this.urlSerializer.serialize(pe.urlAfterRedirects),pe.targetSnapshot);this.events.next(dt)}),(0,Xe.U)(pe=>B={...pe,guards:S(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)}),function Dr(R,O){return(0,Le.z)(w=>{const{targetSnapshot:B,currentSnapshot:W,guards:{canActivateChecks:le,canDeactivateChecks:pe}}=w;return 0===pe.length&&0===le.length?(0,Y.of)({...w,guardsResult:!0}):function Xr(R,O,w,B){return(0,g.D)(R).pipe((0,Le.z)(W=>function es(R,O,w,B,W){const le=O&&O.routeConfig?O.routeConfig.canDeactivate:null;if(!le||0===le.length)return(0,Y.of)(!0);const pe=le.map(dt=>{var Ut;const pn=null!==(Ut=_s(O))&&void 0!==Ut?Ut:W,Wn=A(dt,pn);return ir(function D(R){return R&&er(R.canDeactivate)}(Wn)?Wn.canDeactivate(R,O,w,B):pn.runInContext(()=>Wn(R,O,w,B))).pipe((0,Re.P)())});return(0,Y.of)(pe).pipe(St())}(W.component,W.route,w,O,B)),(0,Re.P)(W=>!0!==W,!0))}(pe,B,W,R).pipe((0,Le.z)(dt=>dt&&function Tn(R){return"boolean"==typeof R}(dt)?function ti(R,O,w,B){return(0,g.D)(O).pipe((0,Je.b)(W=>(0,fe.z)(function Bi(R,O){return null!==R&&O&&O(new Jt(R)),(0,Y.of)(!0)}(W.route.parent,B),function $r(R,O){return null!==R&&O&&O(new qn(R)),(0,Y.of)(!0)}(W.route,B),function Ps(R,O,w){const B=O[O.length-1],le=O.slice(0,O.length-1).reverse().map(pe=>function Z(R){const O=R.routeConfig?R.routeConfig.canActivateChild:null;return O&&0!==O.length?{node:R,guards:O}:null}(pe)).filter(pe=>null!==pe).map(pe=>(0,de.P)(()=>{const dt=pe.guards.map(Ut=>{var pn;const Wn=null!==(pn=_s(pe.node))&&void 0!==pn?pn:w,Vn=A(Ut,Wn);return ir(function I(R){return R&&er(R.canActivateChild)}(Vn)?Vn.canActivateChild(B,R):Wn.runInContext(()=>Vn(B,R))).pipe((0,Re.P)())});return(0,Y.of)(dt).pipe(St())}));return(0,Y.of)(le).pipe(St())}(R,W.path,w),function ki(R,O,w){const B=O.routeConfig?O.routeConfig.canActivate:null;if(!B||0===B.length)return(0,Y.of)(!0);const W=B.map(le=>(0,de.P)(()=>{var pe;const dt=null!==(pe=_s(O))&&void 0!==pe?pe:w,Ut=A(le,dt);return ir(function C(R){return R&&er(R.canActivate)}(Ut)?Ut.canActivate(O,R):dt.runInContext(()=>Ut(O,R))).pipe((0,Re.P)())}));return(0,Y.of)(W).pipe(St())}(R,W.route,w))),(0,Re.P)(W=>!0!==W,!0))}(B,le,R,O):(0,Y.of)(dt)),(0,Xe.U)(dt=>({...w,guardsResult:dt})))})}(this.environmentInjector,pe=>this.events.next(pe)),(0,mt.b)(pe=>{if(B.guardsResult=pe.guardsResult,Rt(pe.guardsResult))throw xs(0,pe.guardsResult);const dt=new tt(pe.id,this.urlSerializer.serialize(pe.extractedUrl),this.urlSerializer.serialize(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.events.next(dt)}),(0,et.h)(pe=>!!pe.guardsResult||(w.restoreHistory(pe),this.cancelNavigationTransition(pe,"",3),!1)),Sr(pe=>{if(pe.guards.canActivateChecks.length)return(0,Y.of)(pe).pipe((0,mt.b)(dt=>{const Ut=new nt(dt.id,this.urlSerializer.serialize(dt.extractedUrl),this.urlSerializer.serialize(dt.urlAfterRedirects),dt.targetSnapshot);this.events.next(Ut)}),(0,Me.w)(dt=>{let Ut=!1;return(0,Y.of)(dt).pipe(function z(R,O){return(0,Le.z)(w=>{const{targetSnapshot:B,guards:{canActivateChecks:W}}=w;if(!W.length)return(0,Y.of)(w);let le=0;return(0,g.D)(W).pipe((0,Je.b)(pe=>function se(R,O,w,B){const W=R.routeConfig,le=R._resolve;return void 0!==(null==W?void 0:W.title)&&!Fn(W)&&(le[zt]=W.title),function Ge(R,O,w,B){const W=function Ht(R){return[...Object.keys(R),...Object.getOwnPropertySymbols(R)]}(R);if(0===W.length)return(0,Y.of)({});const le={};return(0,g.D)(W).pipe((0,Le.z)(pe=>function Zt(R,O,w,B){var W;const le=null!==(W=_s(O))&&void 0!==W?W:B,pe=A(R,le);return ir(pe.resolve?pe.resolve(O,w):le.runInContext(()=>pe(O,w)))}(R[pe],O,w,B).pipe((0,Re.P)(),(0,mt.b)(dt=>{le[pe]=dt}))),lt(1),(0,Ke.h)(le),(0,Ye.K)(pe=>Gt(pe)?be.E:(0,De._)(pe)))}(le,R,O,B).pipe((0,Xe.U)(pe=>(R._resolvedData=pe,R.data=zr(R,w).resolve,W&&Fn(W)&&(R.data[zt]=W.title),null)))}(pe.route,B,R,O)),(0,mt.b)(()=>le++),lt(1),(0,Le.z)(pe=>le===W.length?(0,Y.of)(w):be.E))})}(w.paramsInheritanceStrategy,this.environmentInjector),(0,mt.b)({next:()=>Ut=!0,complete:()=>{Ut||(w.restoreHistory(dt),this.cancelNavigationTransition(dt,"",2))}}))}),(0,mt.b)(dt=>{const Ut=new Nt(dt.id,this.urlSerializer.serialize(dt.extractedUrl),this.urlSerializer.serialize(dt.urlAfterRedirects),dt.targetSnapshot);this.events.next(Ut)}))}),Sr(pe=>{const dt=Ut=>{var pn;const Wn=[];null!==(pn=Ut.routeConfig)&&void 0!==pn&&pn.loadComponent&&!Ut.routeConfig._loadedComponent&&Wn.push(this.configLoader.loadComponent(Ut.routeConfig).pipe((0,mt.b)(Vn=>{Ut.component=Vn}),(0,Xe.U)(()=>{})));for(const Vn of Ut.children)Wn.push(...dt(Vn));return Wn};return(0,Ae.a)(dt(pe.targetSnapshot.root)).pipe((0,Pt.d)(),(0,Se.q)(1))}),Sr(()=>this.afterPreactivation()),(0,Xe.U)(pe=>{const dt=function Oo(R,O,w){const B=ci(R,O._root,w?w._root:void 0);return new Qr(B,O)}(w.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return B={...pe,targetRouterState:dt}}),(0,mt.b)(pe=>{w.currentUrlTree=pe.urlAfterRedirects,w.rawUrlTree=w.urlHandlingStrategy.merge(pe.urlAfterRedirects,pe.rawUrl),w.routerState=pe.targetRouterState,"deferred"===w.urlUpdateStrategy&&(pe.extras.skipLocationChange||w.setBrowserUrl(w.rawUrlTree,pe),w.browserUrlTree=pe.urlAfterRedirects)}),((R,O,w)=>(0,Xe.U)(B=>(new Ms(O,B.targetRouterState,B.currentRouterState,w).activate(R),B)))(this.rootContexts,w.routeReuseStrategy,pe=>this.events.next(pe)),(0,Se.q)(1),(0,mt.b)({next:pe=>{var dt;W=!0,this.lastSuccessfulNavigation=this.currentNavigation,w.navigated=!0,this.events.next(new Wi(pe.id,this.urlSerializer.serialize(pe.extractedUrl),this.urlSerializer.serialize(w.currentUrlTree))),null===(dt=w.titleStrategy)||void 0===dt||dt.updateTitle(pe.targetRouterState.snapshot),pe.resolve(!0)},complete:()=>{W=!0}}),(0,qe.x)(()=>{var pe;W||le||this.cancelNavigationTransition(B,"",1),(null===(pe=this.currentNavigation)||void 0===pe?void 0:pe.id)===B.id&&(this.currentNavigation=null)}),(0,Ye.K)(pe=>{if(le=!0,Ts(pe)){Ba(pe)||(w.navigated=!0,w.restoreHistory(B,!0));const Ut=new wr(B.id,this.urlSerializer.serialize(B.extractedUrl),pe.message,pe.cancellationCode);if(this.events.next(Ut),Ba(pe)){const pn=w.urlHandlingStrategy.merge(pe.url,w.rawUrlTree),Wn={skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===w.urlUpdateStrategy||ao(B.source)};w.scheduleNavigation(pn,Fr,null,Wn,{resolve:B.resolve,reject:B.reject,promise:B.promise})}else B.resolve(!1)}else{var dt;w.restoreHistory(B,!0);const Ut=new xe(B.id,this.urlSerializer.serialize(B.extractedUrl),pe,null!==(dt=B.targetSnapshot)&&void 0!==dt?dt:void 0);this.events.next(Ut);try{B.resolve(w.errorHandler(pe))}catch(pn){B.reject(pn)}}return be.E}))}))}cancelNavigationTransition(w,B,W){const le=new wr(w.id,this.urlSerializer.serialize(w.extractedUrl),B,W);this.events.next(le),w.resolve(!1)}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();function ao(R){return R!==Fr}let Lo=(()=>{class R{buildTitle(w){let B,W=w.root;for(;void 0!==W;){var le;B=null!==(le=this.getResolvedTitleForRoute(W))&&void 0!==le?le:B,W=W.children.find(pe=>pe.outlet===Dt)}return B}getResolvedTitleForRoute(w){return w.data[zt]}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=m.Yz7({token:R,factory:function(){return(0,m.f3M)(Ks)},providedIn:"root"}),R})(),Ks=(()=>{class R extends Lo{constructor(w){super(),this.title=w}updateTitle(w){const B=this.buildTitle(w);void 0!==B&&this.title.setTitle(B)}}return R.\u0275fac=function(w){return new(w||R)(m.LFG(_t.Dx))},R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),qs=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=m.Yz7({token:R,factory:function(){return(0,m.f3M)(no)},providedIn:"root"}),R})();class Bo{shouldDetach(O){return!1}store(O,w){}shouldAttach(O){return!1}retrieve(O){return null}shouldReuseRoute(O,w){return O.routeConfig===w.routeConfig}}let no=(()=>{class R extends Bo{}return R.\u0275fac=function(){let O;return function(B){return(O||(O=m.n5z(R)))(B||R)}}(),R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();const ca=new m.OlP("",{providedIn:"root",factory:()=>({})});let hu=(()=>{class R{}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=m.Yz7({token:R,factory:function(){return(0,m.f3M)(Ia)},providedIn:"root"}),R})(),Ia=(()=>{class R{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,B){return w}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();function ro(R){throw R}function Eo(R,O,w){return O.parse("/")}const _l={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Os=(()=>{class R{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var w;if("computed"===this.canceledNavigationResolution)return null===(w=this.location.getState())||void 0===w?void 0:w.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var w;this.disposed=!1,this.currentPageId=0,this.console=(0,m.f3M)(m.c2e),this.isNgZoneEnabled=!1,this.options=(0,m.f3M)(ca,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ro,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Eo,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,m.f3M)(hu),this.routeReuseStrategy=(0,m.f3M)(qs),this.urlCreationStrategy=(0,m.f3M)(Tt),this.titleStrategy=(0,m.f3M)(Lo),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=zn(null!==(w=(0,m.f3M)(Pr,{optional:!0}))&&void 0!==w?w:[]),this.navigationTransitions=(0,m.f3M)(Ws),this.urlSerializer=(0,m.f3M)(pr),this.location=(0,m.f3M)(Ue.Ye),this.isNgZoneEnabled=(0,m.f3M)(m.R0b)instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new bn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Cs(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(B=>{var W;this.lastSuccessfulId=B.id,this.currentPageId=null!==(W=this.browserPageId)&&void 0!==W?W:0},B=>{this.console.warn(`Unhandled Navigation Error: ${B}`)})}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const w=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Fr,w)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const B="popstate"===w.type?"popstate":"hashchange";"popstate"===B&&setTimeout(()=>{this.navigateToSyncWithBrowser(w.url,B,w.state)},0)}))}navigateToSyncWithBrowser(w,B,W){const le={replaceUrl:!0},pe=null!=W&&W.navigationId?W:null;if(W){const Ut={...W};delete Ut.navigationId,delete Ut.\u0275routerPageId,0!==Object.keys(Ut).length&&(le.state=Ut)}const dt=this.parseUrl(w);this.scheduleNavigation(dt,B,pe,le)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(w){this.config=w.map(ws),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,B={}){const{relativeTo:W,queryParams:le,fragment:pe,queryParamsHandling:dt,preserveFragment:Ut}=B,pn=Ut?this.currentUrlTree.fragment:pe;let Wn=null;switch(dt){case"merge":Wn={...this.currentUrlTree.queryParams,...le};break;case"preserve":Wn=this.currentUrlTree.queryParams;break;default:Wn=le||null}return null!==Wn&&(Wn=this.removeEmptyProps(Wn)),this.urlCreationStrategy.createUrlTree(W,this.routerState,this.currentUrlTree,w,Wn,null!=pn?pn:null)}navigateByUrl(w,B={skipLocationChange:!1}){const W=Rt(w)?w:this.parseUrl(w),le=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(le,Fr,null,B)}navigate(w,B={skipLocationChange:!1}){return function yn(R){for(let O=0;O<R.length;O++){const w=R[O];if(null==w)throw new m.vHH(4008,false)}}(w),this.navigateByUrl(this.createUrlTree(w,B),B)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let B;try{B=this.urlSerializer.parse(w)}catch(W){B=this.malformedUriErrorHandler(W,this.urlSerializer,w)}return B}isActive(w,B){let W;if(W=!0===B?{..._l}:!1===B?{...Yl}:B,Rt(w))return xn(this.currentUrlTree,w,W);const le=this.parseUrl(w);return xn(this.currentUrlTree,le,W)}removeEmptyProps(w){return Object.keys(w).reduce((B,W)=>{const le=w[W];return null!=le&&(B[W]=le),B},{})}scheduleNavigation(w,B,W,le,pe){if(this.disposed)return Promise.resolve(!1);let dt,Ut,pn,Wn;if(pe?(dt=pe.resolve,Ut=pe.reject,pn=pe.promise):pn=new Promise((zi,Ui)=>{dt=zi,Ut=Ui}),"computed"===this.canceledNavigationResolution)if(W&&W.\u0275routerPageId)Wn=W.\u0275routerPageId;else{var Vn;Wn=(null!==(Vn=this.browserPageId)&&void 0!==Vn?Vn:0)+1}else Wn=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:Wn,source:B,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:le,resolve:dt,reject:Ut,promise:pn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),pn.catch(zi=>Promise.reject(zi))}setBrowserUrl(w,B){const W=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo(W)||B.extras.replaceUrl){const pe={...B.extras.state,...this.generateNgRouterState(B.id,this.browserPageId)};this.location.replaceState(W,"",pe)}else{const le={...B.extras.state,...this.generateNgRouterState(B.id,B.targetPageId)};this.location.go(W,"",le)}}restoreHistory(w,B=!1){if("computed"===this.canceledNavigationResolution){var W,le;const pe=null!==(W=this.browserPageId)&&void 0!==W?W:this.currentPageId,dt=this.currentPageId-pe;0!==dt?this.location.historyGo(dt):this.currentUrlTree===(null===(le=this.getCurrentNavigation())||void 0===le?void 0:le.finalUrl)&&0===dt&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(B&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,B){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:B}:{navigationId:w}}}return R.\u0275fac=function(w){return new(w||R)},R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),ni=(()=>{class R{constructor(w,B,W,le,pe,dt){var Ut;this.router=w,this.route=B,this.tabIndexAttribute=W,this.renderer=le,this.el=pe,this.locationStrategy=dt,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new je.x;const pn=null===(Ut=pe.nativeElement.tagName)||void 0===Ut?void 0:Ut.toLowerCase();this.isAnchorElement="a"===pn||"area"===pn,this.isAnchorElement?this.subscription=w.events.subscribe(Wn=>{Wn instanceof Wi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(w){this._preserveFragment=(0,m.D6c)(w)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(w){this._skipLocationChange=(0,m.D6c)(w)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(w){this._replaceUrl=(0,m.D6c)(w)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,B,W,le,pe){return!!(null===this.urlTree||this.isAnchorElement&&(0!==w||B||W||le||pe||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var w;null===(w=this.subscription)||void 0===w||w.unsubscribe()}updateHref(){var w;this.href=null!==this.urlTree&&this.locationStrategy?null===(w=this.locationStrategy)||void 0===w?void 0:w.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const B=null===this.href?null:(0,m.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",B)}applyAttributeValue(w,B){const W=this.renderer,le=this.el.nativeElement;null!==B?W.setAttribute(le,w,B):W.removeAttribute(le,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return R.\u0275fac=function(w){return new(w||R)(m.Y36(Os),m.Y36(qr),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Ue.S$))},R.\u0275dir=m.lG2({type:R,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(w,B){1&w&&m.NdJ("click",function(le){return B.onClick(le.button,le.ctrlKey,le.shiftKey,le.altKey,le.metaKey)}),2&w&&m.uIk("target",B.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),R})();class Zn{}let Un=(()=>{class R{constructor(w,B,W,le,pe){this.router=w,this.injector=W,this.preloadingStrategy=le,this.loader=pe}setUpPreloading(){this.subscription=this.router.events.pipe((0,et.h)(w=>w instanceof Wi),(0,Je.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,B){const W=[];for(const Ut of B){var le,pe;Ut.providers&&!Ut._injector&&(Ut._injector=(0,m.MMx)(Ut.providers,w,`Route: ${Ut.path}`));const pn=null!==(le=Ut._injector)&&void 0!==le?le:w,Wn=null!==(pe=Ut._loadedInjector)&&void 0!==pe?pe:pn;var dt;(Ut.loadChildren&&!Ut._loadedRoutes&&void 0===Ut.canLoad||Ut.loadComponent&&!Ut._loadedComponent)&&W.push(this.preloadConfig(pn,Ut)),(Ut.children||Ut._loadedRoutes)&&W.push(this.processRoutes(Wn,null!==(dt=Ut.children)&&void 0!==dt?dt:Ut._loadedRoutes))}return(0,g.D)(W).pipe((0,Q.J)())}preloadConfig(w,B){return this.preloadingStrategy.preload(B,()=>{let W;W=B.loadChildren&&void 0===B.canLoad?this.loader.loadChildren(w,B):(0,Y.of)(null);const le=W.pipe((0,Le.z)(pe=>{var dt;return null===pe?(0,Y.of)(void 0):(B._loadedRoutes=pe.routes,B._loadedInjector=pe.injector,this.processRoutes(null!==(dt=pe.injector)&&void 0!==dt?dt:w,pe.routes))}));if(B.loadComponent&&!B._loadedComponent){const pe=this.loader.loadComponent(B);return(0,g.D)([le,pe]).pipe((0,Q.J)())}return le})}}return R.\u0275fac=function(w){return new(w||R)(m.LFG(Os),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(Zn),m.LFG(Mr))},R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();const Lt=new m.OlP("");let an=(()=>{class R{constructor(w,B,W,le,pe={}){this.urlSerializer=w,this.transitions=B,this.viewportScroller=W,this.zone=le,this.options=pe,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},pe.scrollPositionRestoration=pe.scrollPositionRestoration||"disabled",pe.anchorScrolling=pe.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof mi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof Wi&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof sr&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,B){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sr(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,B))})},0)})}ngOnDestroy(){var w,B;null===(w=this.routerEventsSubscription)||void 0===w||w.unsubscribe(),null===(B=this.scrollEventsSubscription)||void 0===B||B.unsubscribe()}}return R.\u0275fac=function(w){m.$Z()},R.\u0275prov=m.Yz7({token:R,factory:R.\u0275fac}),R})();var br=(()=>((br=br||{})[br.COMPLETE=0]="COMPLETE",br[br.FAILED=1]="FAILED",br[br.REDIRECTING=2]="REDIRECTING",br))();const $o=!1;function Ql(R,...O){return(0,m.MR2)([{provide:Pr,multi:!0,useValue:R},$o?{provide:kl,useValue:!0}:[],{provide:qr,useFactory:$a,deps:[Os]},{provide:m.tb,multi:!0,useFactory:vl},O.map(w=>w.\u0275providers)])}function $a(R){return R.routerState.root}function ba(R,O){return{\u0275kind:R,\u0275providers:O}}const kl=new m.OlP("",{providedIn:"root",factory:()=>!1});function vl(){const R=(0,m.f3M)(m.zs3);return O=>{var w,B;const W=R.get(m.z2F);if(O!==W.components[0])return;const le=R.get(Os),pe=R.get(nl);1===R.get(Rr)&&le.initialNavigation(),null===(w=R.get(tr,null,m.XFs.Optional))||void 0===w||w.setUpPreloading(),null===(B=R.get(Lt,null,m.XFs.Optional))||void 0===B||B.init(),le.resetRootComponentType(W.componentTypes[0]),pe.closed||(pe.next(),pe.complete(),pe.unsubscribe())}}const nl=new m.OlP($o?"bootstrap done indicator":"",{factory:()=>new je.x}),Rr=new m.OlP($o?"initial navigation":"",{providedIn:"root",factory:()=>1});function us(){let R=[];return R=$o?[{provide:m.Xts,multi:!0,useFactory:()=>{const O=(0,m.f3M)(Os);return()=>O.events.subscribe(w=>{var B,W,le,pe;null===(B=(W=console).group)||void 0===B||B.call(W,`Router Event: ${w.constructor.name}`),console.log(function ji(R){var O,w,B,W;if(!("type"in R))return`Unknown Router Event: ${R.constructor.name}`;switch(R.type){case 14:return`ActivationEnd(path: '${(null===(O=R.snapshot.routeConfig)||void 0===O?void 0:O.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(w=R.snapshot.routeConfig)||void 0===w?void 0:w.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(B=R.snapshot.routeConfig)||void 0===B?void 0:B.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(W=R.snapshot.routeConfig)||void 0===W?void 0:W.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${R.id}, url: '${R.url}', urlAfterRedirects: '${R.urlAfterRedirects}', state: ${R.state}, shouldActivate: ${R.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${R.id}, url: '${R.url}', urlAfterRedirects: '${R.urlAfterRedirects}', state: ${R.state})`;case 2:return`NavigationCancel(id: ${R.id}, url: '${R.url}')`;case 16:return`NavigationSkipped(id: ${R.id}, url: '${R.url}')`;case 1:return`NavigationEnd(id: ${R.id}, url: '${R.url}', urlAfterRedirects: '${R.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${R.id}, url: '${R.url}', error: ${R.error})`;case 0:return`NavigationStart(id: ${R.id}, url: '${R.url}')`;case 6:return`ResolveEnd(id: ${R.id}, url: '${R.url}', urlAfterRedirects: '${R.urlAfterRedirects}', state: ${R.state})`;case 5:return`ResolveStart(id: ${R.id}, url: '${R.url}', urlAfterRedirects: '${R.urlAfterRedirects}', state: ${R.state})`;case 10:return`RouteConfigLoadEnd(path: ${R.route.path})`;case 9:return`RouteConfigLoadStart(path: ${R.route.path})`;case 4:return`RoutesRecognized(id: ${R.id}, url: '${R.url}', urlAfterRedirects: '${R.urlAfterRedirects}', state: ${R.state})`;case 15:return`Scroll(anchor: '${R.anchor}', position: '${R.position?`${R.position[0]}, ${R.position[1]}`:null}')`}}(w)),console.log(w),null===(le=(pe=console).groupEnd)||void 0===le||le.call(pe)})}}]:[],ba(1,R)}const tr=new m.OlP($o?"router preloader":"");function Fl(R){return ba(0,[{provide:tr,useExisting:Un},{provide:Zn,useExisting:R}])}const On=!1,Jl=new m.OlP(On?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),rl=[Ue.Ye,{provide:pr,useClass:ii},Os,js,{provide:qr,useFactory:$a,deps:[Os]},Mr,On?{provide:kl,useValue:!0}:[]];function Fd(){return new m.PXZ("Router",Os)}let Yc=(()=>{class R{constructor(w){}static forRoot(w,B){return{ngModule:R,providers:[rl,On&&null!=B&&B.enableTracing?us().\u0275providers:[],{provide:Pr,multi:!0,useValue:w},{provide:Jl,useFactory:Fs,deps:[[Os,new m.FiY,new m.tp0]]},{provide:ca,useValue:B||{}},null!=B&&B.useHash?{provide:Ue.S$,useClass:Ue.Do}:{provide:Ue.S$,useClass:Ue.b0},{provide:Lt,useFactory:()=>{const R=(0,m.f3M)(Ue.EM),O=(0,m.f3M)(m.R0b),w=(0,m.f3M)(ca),B=(0,m.f3M)(Ws),W=(0,m.f3M)(pr);return w.scrollOffset&&R.setOffset(w.scrollOffset),new an(W,B,R,O,w)}},null!=B&&B.preloadingStrategy?Fl(B.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:Fd},null!=B&&B.initialNavigation?co(B):[],[{provide:Ua,useFactory:vl},{provide:m.tb,multi:!0,useExisting:Ua}]]}}static forChild(w){return{ngModule:R,providers:[{provide:Pr,multi:!0,useValue:w}]}}}return R.\u0275fac=function(w){return new(w||R)(m.LFG(Jl,8))},R.\u0275mod=m.oAB({type:R}),R.\u0275inj=m.cJS({imports:[Js]}),R})();function Fs(R){if(On&&R)throw new m.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function co(R){return["disabled"===R.initialNavigation?ba(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const O=(0,m.f3M)(Os);return()=>{O.setUpLocationChangeListener()}}},{provide:Rr,useValue:2}]).\u0275providers:[],"enabledBlocking"===R.initialNavigation?ba(2,[{provide:Rr,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:O=>{const w=O.get(Ue.V_,Promise.resolve());return()=>w.then(()=>new Promise(B=>{const W=O.get(Os),le=O.get(nl);(function wc(R,O){R.events.pipe((0,et.h)(w=>w instanceof Wi||w instanceof wr||w instanceof xe||w instanceof ae),(0,Xe.U)(w=>w instanceof Wi||w instanceof ae?br.COMPLETE:w instanceof wr&&(0===w.code||1===w.code)?br.REDIRECTING:br.FAILED),(0,et.h)(w=>w!==br.REDIRECTING),(0,Se.q)(1)).subscribe(()=>{O()})})(W,()=>{B(!0)}),O.get(Ws).afterPreactivation=()=>(B(!0),le.closed?(0,Y.of)(void 0):le),W.initialNavigation()}))}}]).\u0275providers:[]]}const Ua=new m.OlP(On?"Router Initializer":"")},3942:(cn,at,$)=>{"use strict";$.d(at,{Z:()=>Ue});var m=$(2090),g=$(4859),Y=$(6881),ie=$(1877);class Pe{constructor(Me,Se){this._delegate=Me,this.firebase=Se,(0,Y._addComponent)(Me,new g.wA("app-compat",()=>this,"PUBLIC")),this.container=Me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Me){this._delegate.automaticDataCollectionEnabled=Me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Me=>{this._delegate.checkDestroyed(),Me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Y.deleteApp)(this._delegate)))}_getService(Me,Se=Y._DEFAULT_ENTRY_NAME){var oe;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(Me);return!et.isInitialized()&&"EXPLICIT"===(null===(oe=et.getComponent())||void 0===oe?void 0:oe.instantiationMode)&&et.initialize(),et.getImmediate({identifier:Se})}_removeServiceInstance(Me,Se=Y._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Me).clearInstance(Se)}_addComponent(Me){(0,Y._addComponent)(this._delegate,Me)}_addOrOverwriteComponent(Me){(0,Y._addOrOverwriteComponent)(this._delegate,Me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),De=function Fe(){const Xe=function de(Xe){const Me={},Se={__esModule:!0,initializeApp:function Le(Ye,ve={}){const It=Y.initializeApp(Ye,ve);if((0,m.r3)(Me,It.name))return Me[It.name];const ze=new Xe(It,Se);return Me[It.name]=ze,ze},app:et,registerVersion:Y.registerVersion,setLogLevel:Y.setLogLevel,onLog:Y.onLog,apps:null,SDK_VERSION:Y.SDK_VERSION,INTERNAL:{registerComponent:function Je(Ye){const ve=Ye.name,It=ve.replace("-compat","");if(Y._registerComponent(Ye)&&"PUBLIC"===Ye.type){const ze=(lt=et())=>{if("function"!=typeof lt[It])throw fe.create("invalid-app-argument",{appName:ve});return lt[It]()};void 0!==Ye.serviceProps&&(0,m.ZB)(ze,Ye.serviceProps),Se[It]=ze,Xe.prototype[It]=function(...lt){return this._getService.bind(this,ve).apply(this,Ye.multipleInstances?lt:[])}}return"PUBLIC"===Ye.type?Se[It]:null},removeApp:function oe(Ye){delete Me[Ye]},useAsService:function mt(Ye,ve){return"serverAuth"===ve?null:ve},modularAPIs:Y}};function et(Ye){if(!(0,m.r3)(Me,Ye=Ye||Y._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Ye});return Me[Ye]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function Re(){return Object.keys(Me).map(Ye=>Me[Ye])}}),et.App=Xe,Se}(Pe);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:Fe,extendNamespace:function Me(Se){(0,m.ZB)(Xe,Se)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Xe}(),he=new ie.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){he.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xe=self.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&he.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ue=De;!function je(Xe){(0,Y.registerVersion)("@firebase/app-compat","0.2.9",Xe)}()},6881:(cn,at,$)=>{"use strict";$.r(at),$.d(at,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>vi,_DEFAULT_ENTRY_NAME:()=>Hr,_addComponent:()=>bn,_addOrOverwriteComponent:()=>on,_apps:()=>Tr,_clearComponents:()=>_i,_components:()=>Qn,_getProvider:()=>oi,_registerComponent:()=>vr,_removeServiceInstance:()=>mr,deleteApp:()=>ai,getApp:()=>Pi,getApps:()=>Xn,initializeApp:()=>rr,onLog:()=>Nr,registerVersion:()=>li,setLogLevel:()=>si});var m=$(5861),g=$(4859),Y=$(1877),ie=$(2090);const Pe=(kt,Mt)=>Mt.some(nn=>kt instanceof nn);let Ae,fe;const De=new WeakMap,he=new WeakMap,be=new WeakMap,Ne=new WeakMap,je=new WeakMap;let Me={get(kt,Mt,nn){if(kt instanceof IDBTransaction){if("done"===Mt)return he.get(kt);if("objectStoreNames"===Mt)return kt.objectStoreNames||be.get(kt);if("store"===Mt)return nn.objectStoreNames[1]?void 0:nn.objectStore(nn.objectStoreNames[0])}return Le(kt[Mt])},set:(kt,Mt,nn)=>(kt[Mt]=nn,!0),has:(kt,Mt)=>kt instanceof IDBTransaction&&("done"===Mt||"store"===Mt)||Mt in kt};function et(kt){return"function"==typeof kt?function oe(kt){return kt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Fe(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(kt)?function(...Mt){return kt.apply(Re(this),Mt),Le(De.get(this))}:function(...Mt){return Le(kt.apply(Re(this),Mt))}:function(Mt,...nn){const Pn=kt.call(Re(this),Mt,...nn);return be.set(Pn,Mt.sort?Mt.sort():[Mt]),Le(Pn)}}(kt):(kt instanceof IDBTransaction&&function Xe(kt){if(he.has(kt))return;const Mt=new Promise((nn,Pn)=>{const Kn=()=>{kt.removeEventListener("complete",cr),kt.removeEventListener("error",Mn),kt.removeEventListener("abort",Mn)},cr=()=>{nn(),Kn()},Mn=()=>{Pn(kt.error||new DOMException("AbortError","AbortError")),Kn()};kt.addEventListener("complete",cr),kt.addEventListener("error",Mn),kt.addEventListener("abort",Mn)});he.set(kt,Mt)}(kt),Pe(kt,function de(){return Ae||(Ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(kt,Me):kt)}function Le(kt){if(kt instanceof IDBRequest)return function Ue(kt){const Mt=new Promise((nn,Pn)=>{const Kn=()=>{kt.removeEventListener("success",cr),kt.removeEventListener("error",Mn)},cr=()=>{nn(Le(kt.result)),Kn()},Mn=()=>{Pn(kt.error),Kn()};kt.addEventListener("success",cr),kt.addEventListener("error",Mn)});return Mt.then(nn=>{nn instanceof IDBCursor&&De.set(nn,kt)}).catch(()=>{}),je.set(Mt,kt),Mt}(kt);if(Ne.has(kt))return Ne.get(kt);const Mt=et(kt);return Mt!==kt&&(Ne.set(kt,Mt),je.set(Mt,kt)),Mt}const Re=kt=>je.get(kt),Ye=["get","getKey","getAll","getAllKeys","count"],ve=["put","add","delete","clear"],It=new Map;function ze(kt,Mt){if(!(kt instanceof IDBDatabase)||Mt in kt||"string"!=typeof Mt)return;if(It.get(Mt))return It.get(Mt);const nn=Mt.replace(/FromIndex$/,""),Pn=Mt!==nn,Kn=ve.includes(nn);if(!(nn in(Pn?IDBIndex:IDBObjectStore).prototype)||!Kn&&!Ye.includes(nn))return;const cr=function(){var Mn=(0,m.Z)(function*(Lr,...Er){const lr=this.transaction(Lr,Kn?"readwrite":"readonly");let ur=lr.store;return Pn&&(ur=ur.index(Er.shift())),(yield Promise.all([ur[nn](...Er),Kn&&lr.done]))[0]});return function(Er){return Mn.apply(this,arguments)}}();return It.set(Mt,cr),cr}!function Se(kt){Me=kt(Me)}(kt=>({...kt,get:(Mt,nn,Pn)=>ze(Mt,nn)||kt.get(Mt,nn,Pn),has:(Mt,nn)=>!!ze(Mt,nn)||kt.has(Mt,nn)}));class lt{constructor(Mt){this.container=Mt}getPlatformInfoString(){return this.container.getProviders().map(nn=>{if(function xt(kt){const Mt=kt.getComponent();return"VERSION"===(null==Mt?void 0:Mt.type)}(nn)){const Pn=nn.getImmediate();return`${Pn.library}/${Pn.version}`}return null}).filter(nn=>nn).join(" ")}}const Pt="@firebase/app",At=new Y.Yd("@firebase/app"),Hr="[DEFAULT]",Ur={[Pt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tr=new Map,Qn=new Map;function bn(kt,Mt){try{kt.container.addComponent(Mt)}catch(nn){At.debug(`Component ${Mt.name} failed to register with FirebaseApp ${kt.name}`,nn)}}function on(kt,Mt){kt.container.addOrOverwriteComponent(Mt)}function vr(kt){const Mt=kt.name;if(Qn.has(Mt))return At.debug(`There were multiple attempts to register component ${Mt}.`),!1;Qn.set(Mt,kt);for(const nn of Tr.values())bn(nn,kt);return!0}function oi(kt,Mt){const nn=kt.container.getProvider("heartbeat").getImmediate({optional:!0});return nn&&nn.triggerHeartbeat(),kt.container.getProvider(Mt)}function mr(kt,Mt,nn=Hr){oi(kt,Mt).clearInstance(nn)}function _i(){Qn.clear()}const ii=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gn{constructor(Mt,nn,Pn){this._isDeleted=!1,this._options=Object.assign({},Mt),this._config=Object.assign({},nn),this._name=nn.name,this._automaticDataCollectionEnabled=nn.automaticDataCollectionEnabled,this._container=Pn,this.container.addComponent(new g.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Mt){this.checkDestroyed(),this._automaticDataCollectionEnabled=Mt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Mt){this._isDeleted=Mt}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}const vi="9.21.0";function rr(kt,Mt={}){let nn=kt;"object"!=typeof Mt&&(Mt={name:Mt});const Pn=Object.assign({name:Hr,automaticDataCollectionEnabled:!1},Mt),Kn=Pn.name;if("string"!=typeof Kn||!Kn)throw ii.create("bad-app-name",{appName:String(Kn)});if(nn||(nn=(0,ie.aH)()),!nn)throw ii.create("no-options");const cr=Tr.get(Kn);if(cr){if((0,ie.vZ)(nn,cr.options)&&(0,ie.vZ)(Pn,cr.config))return cr;throw ii.create("duplicate-app",{appName:Kn})}const Mn=new g.H0(Kn);for(const Er of Qn.values())Mn.addComponent(Er);const Lr=new Gn(nn,Pn,Mn);return Tr.set(Kn,Lr),Lr}function Pi(kt=Hr){const Mt=Tr.get(kt);if(!Mt&&kt===Hr)return rr();if(!Mt)throw ii.create("no-app",{appName:kt});return Mt}function Xn(){return Array.from(Tr.values())}function ai(kt){return ei.apply(this,arguments)}function ei(){return(ei=(0,m.Z)(function*(kt){const Mt=kt.name;Tr.has(Mt)&&(Tr.delete(Mt),yield Promise.all(kt.container.getProviders().map(nn=>nn.delete())),kt.isDeleted=!0)})).apply(this,arguments)}function li(kt,Mt,nn){var Pn;let Kn=null!==(Pn=Ur[kt])&&void 0!==Pn?Pn:kt;nn&&(Kn+=`-${nn}`);const cr=Kn.match(/\s|\//),Mn=Mt.match(/\s|\//);if(cr||Mn){const Lr=[`Unable to register library "${Kn}" with version "${Mt}":`];return cr&&Lr.push(`library name "${Kn}" contains illegal characters (whitespace or "/")`),cr&&Mn&&Lr.push("and"),Mn&&Lr.push(`version name "${Mt}" contains illegal characters (whitespace or "/")`),void At.warn(Lr.join(" "))}vr(new g.wA(`${Kn}-version`,()=>({library:Kn,version:Mt}),"VERSION"))}function Nr(kt,Mt){if(null!==kt&&"function"!=typeof kt)throw ii.create("invalid-log-argument");(0,Y.Am)(kt,Mt)}function si(kt){(0,Y.Ub)(kt)}const Zr="firebase-heartbeat-database",Kr=1,Qe="firebase-heartbeat-store";let He=null;function ce(){return He||(He=function Je(kt,Mt,{blocked:nn,upgrade:Pn,blocking:Kn,terminated:cr}={}){const Mn=indexedDB.open(kt,Mt),Lr=Le(Mn);return Pn&&Mn.addEventListener("upgradeneeded",Er=>{Pn(Le(Mn.result),Er.oldVersion,Er.newVersion,Le(Mn.transaction),Er)}),nn&&Mn.addEventListener("blocked",Er=>nn(Er.oldVersion,Er.newVersion,Er)),Lr.then(Er=>{cr&&Er.addEventListener("close",()=>cr()),Kn&&Er.addEventListener("versionchange",lr=>Kn(lr.oldVersion,lr.newVersion,lr))}).catch(()=>{}),Lr}(Zr,Kr,{upgrade:(kt,Mt)=>{0===Mt&&kt.createObjectStore(Qe)}}).catch(kt=>{throw ii.create("idb-open",{originalErrorMessage:kt.message})})),He}function ue(){return(ue=(0,m.Z)(function*(kt){try{return(yield ce()).transaction(Qe).objectStore(Qe).get(Ve(kt))}catch(Mt){if(Mt instanceof ie.ZR)At.warn(Mt.message);else{const nn=ii.create("idb-get",{originalErrorMessage:null==Mt?void 0:Mt.message});At.warn(nn.message)}}})).apply(this,arguments)}function ot(kt,Mt){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,m.Z)(function*(kt,Mt){try{const Pn=(yield ce()).transaction(Qe,"readwrite");return yield Pn.objectStore(Qe).put(Mt,Ve(kt)),Pn.done}catch(nn){if(nn instanceof ie.ZR)At.warn(nn.message);else{const Pn=ii.create("idb-set",{originalErrorMessage:null==nn?void 0:nn.message});At.warn(Pn.message)}}})).apply(this,arguments)}function Ve(kt){return`${kt.name}!${kt.options.appId}`}class Rt{constructor(Mt){this.container=Mt,this._heartbeatsCache=null;const nn=this.container.getProvider("app").getImmediate();this._storage=new _n(nn),this._heartbeatsCachePromise=this._storage.read().then(Pn=>(this._heartbeatsCache=Pn,Pn))}triggerHeartbeat(){var Mt=this;return(0,m.Z)(function*(){const Pn=Mt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Kn=Yt();if(null===Mt._heartbeatsCache&&(Mt._heartbeatsCache=yield Mt._heartbeatsCachePromise),Mt._heartbeatsCache.lastSentHeartbeatDate!==Kn&&!Mt._heartbeatsCache.heartbeats.some(cr=>cr.date===Kn))return Mt._heartbeatsCache.heartbeats.push({date:Kn,agent:Pn}),Mt._heartbeatsCache.heartbeats=Mt._heartbeatsCache.heartbeats.filter(cr=>{const Mn=new Date(cr.date).valueOf();return Date.now()-Mn<=2592e6}),Mt._storage.overwrite(Mt._heartbeatsCache)})()}getHeartbeatsHeader(){var Mt=this;return(0,m.Z)(function*(){if(null===Mt._heartbeatsCache&&(yield Mt._heartbeatsCachePromise),null===Mt._heartbeatsCache||0===Mt._heartbeatsCache.heartbeats.length)return"";const nn=Yt(),{heartbeatsToSend:Pn,unsentEntries:Kn}=function Dn(kt,Mt=1024){const nn=[];let Pn=kt.slice();for(const Kn of kt){const cr=nn.find(Mn=>Mn.agent===Kn.agent);if(cr){if(cr.dates.push(Kn.date),Jn(nn)>Mt){cr.dates.pop();break}}else if(nn.push({agent:Kn.agent,dates:[Kn.date]}),Jn(nn)>Mt){nn.pop();break}Pn=Pn.slice(1)}return{heartbeatsToSend:nn,unsentEntries:Pn}}(Mt._heartbeatsCache.heartbeats),cr=(0,ie.L)(JSON.stringify({version:2,heartbeats:Pn}));return Mt._heartbeatsCache.lastSentHeartbeatDate=nn,Kn.length>0?(Mt._heartbeatsCache.heartbeats=Kn,yield Mt._storage.overwrite(Mt._heartbeatsCache)):(Mt._heartbeatsCache.heartbeats=[],Mt._storage.overwrite(Mt._heartbeatsCache)),cr})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class _n{constructor(Mt){this.app=Mt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Mt=this;return(0,m.Z)(function*(){return(yield Mt._canUseIndexedDBPromise)&&(yield function Ee(kt){return ue.apply(this,arguments)}(Mt.app))||{heartbeats:[]}})()}overwrite(Mt){var nn=this;return(0,m.Z)(function*(){var Pn;if(yield nn._canUseIndexedDBPromise){const cr=yield nn.read();return ot(nn.app,{lastSentHeartbeatDate:null!==(Pn=Mt.lastSentHeartbeatDate)&&void 0!==Pn?Pn:cr.lastSentHeartbeatDate,heartbeats:Mt.heartbeats})}})()}add(Mt){var nn=this;return(0,m.Z)(function*(){var Pn;if(yield nn._canUseIndexedDBPromise){const cr=yield nn.read();return ot(nn.app,{lastSentHeartbeatDate:null!==(Pn=Mt.lastSentHeartbeatDate)&&void 0!==Pn?Pn:cr.lastSentHeartbeatDate,heartbeats:[...cr.heartbeats,...Mt.heartbeats]})}})()}}function Jn(kt){return(0,ie.L)(JSON.stringify({version:2,heartbeats:kt})).length}!function kr(kt){vr(new g.wA("platform-logger",Mt=>new lt(Mt),"PRIVATE")),vr(new g.wA("heartbeat",Mt=>new Rt(Mt),"PRIVATE")),li(Pt,"0.9.9",kt),li(Pt,"0.9.9","esm2017"),li("fire-js","")}("")},4859:(cn,at,$)=>{"use strict";$.d(at,{H0:()=>de,wA:()=>Y,zt:()=>Pe});var m=$(5861),g=$(2090);class Y{constructor(De,he,be){this.name=De,this.instanceFactory=he,this.type=be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(De){return this.instantiationMode=De,this}setMultipleInstances(De){return this.multipleInstances=De,this}setServiceProps(De){return this.serviceProps=De,this}setInstanceCreatedCallback(De){return this.onInstanceCreated=De,this}}const ie="[DEFAULT]";class Pe{constructor(De,he){this.name=De,this.container=he,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(De){const he=this.normalizeInstanceIdentifier(De);if(!this.instancesDeferred.has(he)){const be=new g.BH;if(this.instancesDeferred.set(he,be),this.isInitialized(he)||this.shouldAutoInitialize())try{const Ne=this.getOrInitializeService({instanceIdentifier:he});Ne&&be.resolve(Ne)}catch{}}return this.instancesDeferred.get(he).promise}getImmediate(De){var he;const be=this.normalizeInstanceIdentifier(null==De?void 0:De.identifier),Ne=null!==(he=null==De?void 0:De.optional)&&void 0!==he&&he;if(!this.isInitialized(be)&&!this.shouldAutoInitialize()){if(Ne)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:be})}catch(je){if(Ne)return null;throw je}}getComponent(){return this.component}setComponent(De){if(De.name!==this.name)throw Error(`Mismatching Component ${De.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=De,this.shouldAutoInitialize()){if(function fe(Fe){return"EAGER"===Fe.instantiationMode}(De))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[he,be]of this.instancesDeferred.entries()){const Ne=this.normalizeInstanceIdentifier(he);try{const je=this.getOrInitializeService({instanceIdentifier:Ne});be.resolve(je)}catch{}}}}clearInstance(De=ie){this.instancesDeferred.delete(De),this.instancesOptions.delete(De),this.instances.delete(De)}delete(){var De=this;return(0,m.Z)(function*(){const he=Array.from(De.instances.values());yield Promise.all([...he.filter(be=>"INTERNAL"in be).map(be=>be.INTERNAL.delete()),...he.filter(be=>"_delete"in be).map(be=>be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(De=ie){return this.instances.has(De)}getOptions(De=ie){return this.instancesOptions.get(De)||{}}initialize(De={}){const{options:he={}}=De,be=this.normalizeInstanceIdentifier(De.instanceIdentifier);if(this.isInitialized(be))throw Error(`${this.name}(${be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ne=this.getOrInitializeService({instanceIdentifier:be,options:he});for(const[je,Ue]of this.instancesDeferred.entries())be===this.normalizeInstanceIdentifier(je)&&Ue.resolve(Ne);return Ne}onInit(De,he){var be;const Ne=this.normalizeInstanceIdentifier(he),je=null!==(be=this.onInitCallbacks.get(Ne))&&void 0!==be?be:new Set;je.add(De),this.onInitCallbacks.set(Ne,je);const Ue=this.instances.get(Ne);return Ue&&De(Ue,Ne),()=>{je.delete(De)}}invokeOnInitCallbacks(De,he){const be=this.onInitCallbacks.get(he);if(be)for(const Ne of be)try{Ne(De,he)}catch{}}getOrInitializeService({instanceIdentifier:De,options:he={}}){let be=this.instances.get(De);if(!be&&this.component&&(be=this.component.instanceFactory(this.container,{instanceIdentifier:(Fe=De,Fe===ie?void 0:Fe),options:he}),this.instances.set(De,be),this.instancesOptions.set(De,he),this.invokeOnInitCallbacks(be,De),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,De,be)}catch{}var Fe;return be||null}normalizeInstanceIdentifier(De=ie){return this.component?this.component.multipleInstances?De:ie:De}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(De){this.name=De,this.providers=new Map}addComponent(De){const he=this.getProvider(De.name);if(he.isComponentSet())throw new Error(`Component ${De.name} has already been registered with ${this.name}`);he.setComponent(De)}addOrOverwriteComponent(De){this.getProvider(De.name).isComponentSet()&&this.providers.delete(De.name),this.addComponent(De)}getProvider(De){if(this.providers.has(De))return this.providers.get(De);const he=new Pe(De,this);return this.providers.set(De,he),he}getProviders(){return Array.from(this.providers.values())}}},1877:(cn,at,$)=>{"use strict";$.d(at,{Am:()=>Fe,Ub:()=>de,Yd:()=>fe,in:()=>g});const m=[];var g=(()=>{return(De=g||(g={}))[De.DEBUG=0]="DEBUG",De[De.VERBOSE=1]="VERBOSE",De[De.INFO=2]="INFO",De[De.WARN=3]="WARN",De[De.ERROR=4]="ERROR",De[De.SILENT=5]="SILENT",g;var De})();const Y={debug:g.DEBUG,verbose:g.VERBOSE,info:g.INFO,warn:g.WARN,error:g.ERROR,silent:g.SILENT},ie=g.INFO,Pe={[g.DEBUG]:"log",[g.VERBOSE]:"log",[g.INFO]:"info",[g.WARN]:"warn",[g.ERROR]:"error"},Ae=(De,he,...be)=>{if(he<De.logLevel)return;const Ne=(new Date).toISOString(),je=Pe[he];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${he})`);console[je](`[${Ne}]  ${De.name}:`,...be)};class fe{constructor(he){this.name=he,this._logLevel=ie,this._logHandler=Ae,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(he){if(!(he in g))throw new TypeError(`Invalid value "${he}" assigned to \`logLevel\``);this._logLevel=he}setLogLevel(he){this._logLevel="string"==typeof he?Y[he]:he}get logHandler(){return this._logHandler}set logHandler(he){if("function"!=typeof he)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=he}get userLogHandler(){return this._userLogHandler}set userLogHandler(he){this._userLogHandler=he}debug(...he){this._userLogHandler&&this._userLogHandler(this,g.DEBUG,...he),this._logHandler(this,g.DEBUG,...he)}log(...he){this._userLogHandler&&this._userLogHandler(this,g.VERBOSE,...he),this._logHandler(this,g.VERBOSE,...he)}info(...he){this._userLogHandler&&this._userLogHandler(this,g.INFO,...he),this._logHandler(this,g.INFO,...he)}warn(...he){this._userLogHandler&&this._userLogHandler(this,g.WARN,...he),this._logHandler(this,g.WARN,...he)}error(...he){this._userLogHandler&&this._userLogHandler(this,g.ERROR,...he),this._logHandler(this,g.ERROR,...he)}}function de(De){m.forEach(he=>{he.setLogLevel(De)})}function Fe(De,he){for(const be of m){let Ne=null;he&&he.level&&(Ne=Y[he.level]),be.userLogHandler=null===De?null:(je,Ue,...Xe)=>{const Me=Xe.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch{return null}}).filter(Se=>Se).join(" ");Ue>=(null!=Ne?Ne:je.logLevel)&&De({level:g[Ue].toLowerCase(),message:Me,args:Xe,type:je.name})}}}},9972:(cn,at,$)=>{"use strict";$.d(at,{Br:()=>Qa,vB:()=>is,TH:()=>Ti,dr:()=>Cr,BJ:()=>Hr,YG:()=>vr,hM:()=>rr,W2:()=>Xn,IJ:()=>li,W4:()=>Nr,gu:()=>He,Xz:()=>ce,pK:()=>ot,Ie:()=>Oe,Q$:()=>Dn,uN:()=>cr,d8:()=>Co,jP:()=>qi,PQ:()=>ae,Pc:()=>oo,r4:()=>_s,j9:()=>zn,yF:()=>As});var m=$(5861),g=$(4650),Y=$(4006),ie=$(655),Pe=$(4968),Ae=$(7579),fe=$(1135),de=$(6159),Fe=$(9613),be=($(3551),$(1138),$(2225)),Ne=$(1898),je=$(5273),Ue=$(3577),Xe=$(3982),Me=$(9866),oe=($(8126),$(2583)),Re=($(3457),$(4349),$(4083)),mt=$(9300),Ye=$(3900),ve=$(1884),It=$(6895);const lt=je.i,Be=["*"];function We(S,Z){if(1&S&&g.GkF(0,1),2&S){const A=g.oxw();g.Q6J("ngTemplateOutlet",A.template)}}const Q=S=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(S):"function"==typeof requestAnimationFrame?requestAnimationFrame(S):setTimeout(S);let _t=(()=>{class S{constructor(A,q){this.injector=A,this.el=q,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(A){this.el.nativeElement.value=this.lastValue=A,Dt(this.el)}handleValueChange(A,q){A===this.el.nativeElement&&(q!==this.lastValue&&(this.lastValue=q,this.onChange(q)),Dt(this.el))}_handleBlurEvent(A){A===this.el.nativeElement&&(this.onTouched(),Dt(this.el))}registerOnChange(A){this.onChange=A}registerOnTouched(A){this.onTouched=A}setDisabledState(A){this.el.nativeElement.disabled=A}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let A;try{A=this.injector.get(Y.a5)}catch{}if(!A)return;A.statusChanges&&(this.statusChanges=A.statusChanges.subscribe(()=>Dt(this.el)));const q=A.control;q&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Xt=>{if(typeof q[Xt]<"u"){const $n=q[Xt].bind(q);q[Xt]=(...er)=>{$n(...er),Dt(this.el)}}})}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.zs3),g.Y36(g.SBq))},S.\u0275dir=g.lG2({type:S,hostBindings:function(A,q){1&A&&g.NdJ("ionBlur",function(Xt){return q._handleBlurEvent(Xt.target)})}}),S})();const Dt=S=>{Q(()=>{const Z=S.nativeElement,A=null!=Z.value&&Z.value.toString().length>0,q=zt(Z);un(Z,q);const Ie=Z.closest("ion-item");Ie&&un(Ie,A?[...q,"item-has-value"]:q)})},zt=S=>{const Z=S.classList,A=[];for(let q=0;q<Z.length;q++){const Ie=Z.item(q);null!==Ie&&Et(Ie,"ng-")&&A.push(`ion-${Ie.substring(3)}`)}return A},un=(S,Z)=>{const A=S.classList;A.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),A.add(...Z)},Et=(S,Z)=>S.substring(0,Z.length)===Z;let zn=(()=>{class S extends _t{constructor(A,q){super(A,q)}_handleInputEvent(A){this.handleValueChange(A,A.value)}}return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.zs3),g.Y36(g.SBq))},S.\u0275dir=g.lG2({type:S,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(A,q){1&A&&g.NdJ("ionInput",function(Xt){return q._handleInputEvent(Xt.target)})},features:[g._Bn([{provide:Y.JU,useExisting:S,multi:!0}]),g.qOj]}),S})();const hn=(S,Z)=>{const A=S.prototype;Z.forEach(q=>{Object.defineProperty(A,q,{get(){return this.el[q]},set(Ie){this.z.runOutsideAngular(()=>this.el[q]=Ie)}})})},wn=(S,Z)=>{const A=S.prototype;Z.forEach(q=>{A[q]=function(){const Ie=arguments;return this.z.runOutsideAngular(()=>this.el[q].apply(this.el,Ie))}})},tn=(S,Z,A)=>{A.forEach(q=>S[q]=(0,Pe.R)(Z,q))};function Qt(S){return function(A){const{defineCustomElementFn:q,inputs:Ie,methods:Xt}=S;return void 0!==q&&q(),Ie&&hn(A,Ie),Xt&&wn(A,Xt),A}}let Cr=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-app"]],ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({})],S),S})(),Hr=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-avatar"]],ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({})],S),S})(),vr=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement,tn(this,this.el,["ionFocus","ionBlur"])}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],S),S})(),rr=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-chip"]],inputs:{color:"color",disabled:"disabled",mode:"mode",outline:"outline"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["color","disabled","mode","outline"]})],S),S})(),Xn=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement,tn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],S),S})(),li=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],S),S})(),Nr=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement,tn(this,this.el,["ionFocus","ionBlur"])}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],S),S})(),He=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],S),S})(),ce=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement,tn(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["alt","src"]})],S),S})(),ot=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement,tn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],S),S})(),Oe=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],S),S})(),Dn=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["color","mode","position"]})],S),S})(),cr=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-note"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["color","mode"]})],S),S})(),ae=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,A.detach(),this.el=q.nativeElement}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-spinner"]],inputs:{color:"color",duration:"duration",name:"name",paused:"paused"},ngContentSelectors:Be,decls:1,vars:0,template:function(A,q){1&A&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["color","duration","name","paused"]})],S),S})(),qn=(()=>{class S{get(A,q){const Ie=sr();return Ie?Ie.get(A,q):null}getBoolean(A,q){const Ie=sr();return!!Ie&&Ie.getBoolean(A,q)}getNumber(A,q){const Ie=sr();return Ie?Ie.getNumber(A,q):0}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Ln=new g.OlP("USERCONFIG"),sr=()=>{if(typeof window<"u"){const S=window.Ionic;if(null!=S&&S.config)return S.config}return null};let ji=(()=>{class S{constructor(A,q){this.doc=A,this.backButton=new Ae.x,this.keyboardDidShow=new Ae.x,this.keyboardDidHide=new Ae.x,this.pause=new Ae.x,this.resume=new Ae.x,this.resize=new Ae.x,q.run(()=>{var Ie;let Xt;this.win=A.defaultView,this.backButton.subscribeWithPriority=function($n,er){return this.subscribe(Tn=>Tn.register($n,Ii=>q.run(()=>er(Ii))))},ft(this.pause,A,"pause"),ft(this.resume,A,"resume"),ft(this.backButton,A,"ionBackButton"),ft(this.resize,this.win,"resize"),ft(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),ft(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise($n=>{Xt=$n}),null!==(Ie=this.win)&&void 0!==Ie&&Ie.cordova?A.addEventListener("deviceready",()=>{Xt("cordova")},{once:!0}):Xt("dom")})}is(A){return(0,je.a)(this.win,A)}platforms(){return(0,je.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(A){return Zi(this.win.location.href,A)}isLandscape(){return!this.isPortrait()}isPortrait(){var A,q;return null===(A=(q=this.win).matchMedia)||void 0===A?void 0:A.call(q,"(orientation: portrait)").matches}testUserAgent(A){const q=this.win.navigator;return!!(null!=q&&q.userAgent&&q.userAgent.indexOf(A)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return S.\u0275fac=function(A){return new(A||S)(g.LFG(It.K0),g.LFG(g.R0b))},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Zi=(S,Z)=>{Z=Z.replace(/[[\]\\]/g,"\\$&");const q=new RegExp("[\\?&]"+Z+"=([^&#]*)").exec(S);return q?decodeURIComponent(q[1].replace(/\+/g," ")):null},ft=(S,Z,A)=>{Z&&Z.addEventListener(A,q=>{S.next(null!=q?q.detail:void 0)})};let st=(()=>{class S{constructor(A,q,Ie,Xt){this.location=q,this.serializer=Ie,this.router=Xt,this.direction=qt,this.animated=en,this.guessDirection="forward",this.lastNavId=-1,Xt&&Xt.events.subscribe($n=>{if($n instanceof de.OD){const er=$n.restoredState?$n.restoredState.navigationId:$n.id;this.guessDirection=er<this.lastNavId?"back":"forward",this.guessAnimation=$n.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?$n.id:er}}),A.backButton.subscribeWithPriority(0,$n=>{this.pop(),$n()})}navigateForward(A,q={}){return this.setDirection("forward",q.animated,q.animationDirection,q.animation),this.navigate(A,q)}navigateBack(A,q={}){return this.setDirection("back",q.animated,q.animationDirection,q.animation),this.navigate(A,q)}navigateRoot(A,q={}){return this.setDirection("root",q.animated,q.animationDirection,q.animation),this.navigate(A,q)}back(A={animated:!0,animationDirection:"back"}){return this.setDirection("back",A.animated,A.animationDirection,A.animation),this.location.back()}pop(){var A=this;return(0,m.Z)(function*(){let q=A.topOutlet;for(;q&&!(yield q.pop());)q=q.parentOutlet})()}setDirection(A,q,Ie,Xt){this.direction=A,this.animated=Tt(A,q,Ie),this.animationBuilder=Xt}setTopOutlet(A){this.topOutlet=A}consumeTransition(){let q,A="root";const Ie=this.animationBuilder;return"auto"===this.direction?(A=this.guessDirection,q=this.guessAnimation):(q=this.animated,A=this.direction),this.direction=qt,this.animated=en,this.animationBuilder=void 0,{direction:A,animation:q,animationBuilder:Ie}}navigate(A,q){if(Array.isArray(A))return this.router.navigate(A,q);{const Ie=this.serializer.parse(A.toString());return void 0!==q.queryParams&&(Ie.queryParams={...q.queryParams}),void 0!==q.fragment&&(Ie.fragment=q.fragment),this.router.navigateByUrl(Ie,q)}}}return S.\u0275fac=function(A){return new(A||S)(g.LFG(ji),g.LFG(It.Ye),g.LFG(de.Hx),g.LFG(de.F0,8))},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Tt=(S,Z,A)=>{if(!1!==Z){if(void 0!==A)return A;if("forward"===S||"back"===S)return S;if("root"===S&&!0===Z)return"forward"}},qt="auto",en=void 0;class or{constructor(Z={}){this.data=Z}get(Z){return this.data[Z]}}let Yn=(()=>{class S{constructor(){this.zone=(0,g.f3M)(g.R0b),this.applicationRef=(0,g.f3M)(g.z2F)}create(A,q,Ie){return new fr(A,q,this.applicationRef,this.zone,Ie)}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac}),S})();class fr{constructor(Z,A,q,Ie,Xt){this.environmentInjector=Z,this.injector=A,this.applicationRef=q,this.zone=Ie,this.elementReferenceKey=Xt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(Z,A,q,Ie){return this.zone.run(()=>new Promise(Xt=>{const $n={...q};void 0!==this.elementReferenceKey&&($n[this.elementReferenceKey]=Z),Xt(Qr(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,Z,A,$n,Ie))}))}removeViewFromDom(Z,A){return this.zone.run(()=>new Promise(q=>{const Ie=this.elRefMap.get(A);if(Ie){Ie.destroy(),this.elRefMap.delete(A);const Xt=this.elEventsMap.get(A);Xt&&(Xt(),this.elEventsMap.delete(A))}q()}))}}const Qr=(S,Z,A,q,Ie,Xt,$n,er,Tn,Ii)=>{const C=g.zs3.create({providers:zr(Tn),parent:A}),I=(0,g.LMc)(er,{environmentInjector:Z,elementInjector:C}),D=I.instance,V=I.location.nativeElement;if(Tn&&Object.assign(D,Tn),Ii)for(const ct of Ii)V.classList.add(ct);const _e=ks(S,D,V);return $n.appendChild(V),q.attachView(I.hostView),Ie.set(V,I),Xt.set(V,_e),V},Cs=[Me.L,Me.a,Me.b,Me.c,Me.d],ks=(S,Z,A)=>S.run(()=>{const q=Cs.filter(Ie=>"function"==typeof Z[Ie]).map(Ie=>{const Xt=$n=>Z[Ie]($n.detail);return A.addEventListener(Ie,Xt),()=>A.removeEventListener(Ie,Xt)});return()=>q.forEach(Ie=>Ie())}),qr=new g.OlP("NavParamsToken"),zr=S=>[{provide:qr,useValue:S},{provide:or,useFactory:Gr,deps:[qr]}],Gr=S=>new or(S),Ki=(S,Z)=>((S=S.filter(A=>A.stackId!==Z.stackId)).push(Z),S),_o=(S,Z)=>{const A=S.createUrlTree(["."],{relativeTo:Z});return S.serializeUrl(A)},Oo=(S,Z)=>{if(!S)return;const A=ci(Z);for(let q=0;q<A.length;q++){if(q>=S.length)return A[q];if(A[q]!==S[q])return}},ci=S=>S.split("/").map(Z=>Z.trim()).filter(Z=>""!==Z),xr=S=>{S&&(S.ref.destroy(),S.unlistenEvents())};class Ds{constructor(Z,A,q,Ie,Xt,$n){this.containerEl=A,this.router=q,this.navCtrl=Ie,this.zone=Xt,this.location=$n,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==Z?ci(Z):void 0}createView(Z,A){var q;const Ie=_o(this.router,A),Xt=null==Z||null===(q=Z.location)||void 0===q?void 0:q.nativeElement,$n=ks(this.zone,Z.instance,Xt);return{id:this.nextId++,stackId:Oo(this.tabsPrefix,Ie),unlistenEvents:$n,element:Xt,ref:Z,url:Ie}}getExistingView(Z){const A=_o(this.router,Z),q=this.views.find(Ie=>Ie.url===A);return q&&q.ref.changeDetectorRef.reattach(),q}setActive(Z){var A,q,Ie;const Xt=this.navCtrl.consumeTransition();let{direction:$n,animation:er,animationBuilder:Tn}=Xt;const Ii=this.activeView,C=((S,Z)=>!Z||S.stackId!==Z.stackId)(Z,Ii);C&&($n="back",er=void 0);const I=this.views.slice();let D;const V=this.router;V.getCurrentNavigation?D=V.getCurrentNavigation():null!==(A=V.navigations)&&void 0!==A&&A.value&&(D=V.navigations.value),null!==(q=D)&&void 0!==q&&null!==(Ie=q.extras)&&void 0!==Ie&&Ie.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const _e=this.views.includes(Z),ct=this.insertView(Z,$n);_e||Z.ref.changeDetectorRef.detectChanges();const Gt=Z.animationBuilder;return void 0===Tn&&"back"===$n&&!C&&void 0!==Gt&&(Tn=Gt),Ii&&(Ii.animationBuilder=Tn),this.zone.runOutsideAngular(()=>this.wait(()=>(Ii&&Ii.ref.changeDetectorRef.detach(),Z.ref.changeDetectorRef.reattach(),this.transition(Z,Ii,er,this.canGoBack(1),!1,Tn).then(()=>pa(Z,ct,I,this.location,this.zone)).then(()=>({enteringView:Z,direction:$n,animation:er,tabSwitch:C})))))}canGoBack(Z,A=this.getActiveStackId()){return this.getStack(A).length>Z}pop(Z,A=this.getActiveStackId()){return this.zone.run(()=>{const q=this.getStack(A);if(q.length<=Z)return Promise.resolve(!1);const Ie=q[q.length-Z-1];let Xt=Ie.url;const $n=Ie.savedData;if($n){var er,Tn;const C=$n.get("primary");null!=C&&null!==(er=C.route)&&void 0!==er&&null!==(Tn=er._routerState)&&void 0!==Tn&&Tn.snapshot.url&&(Xt=C.route._routerState.snapshot.url)}const{animationBuilder:Ii}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Xt,{...Ie.savedExtras,animation:Ii}).then(()=>!0)})}startBackTransition(){const Z=this.activeView;if(Z){const A=this.getStack(Z.stackId),q=A[A.length-2],Ie=q.animationBuilder;return this.wait(()=>this.transition(q,Z,"back",this.canGoBack(2),!0,Ie))}return Promise.resolve()}endBackTransition(Z){Z?(this.skipTransition=!0,this.pop(1)):this.activeView&&xs(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(Z){const A=this.getStack(Z);return A.length>0?A[A.length-1]:void 0}getRootUrl(Z){const A=this.getStack(Z);return A.length>0?A[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(xr),this.activeView=void 0,this.views=[]}getStack(Z){return this.views.filter(A=>A.stackId===Z)}insertView(Z,A){return this.activeView=Z,this.views=((S,Z,A)=>"root"===A?Ki(S,Z):"forward"===A?((S,Z)=>(S.indexOf(Z)>=0?S=S.filter(q=>q.stackId!==Z.stackId||q.id<=Z.id):S.push(Z),S))(S,Z):((S,Z)=>S.indexOf(Z)>=0?S.filter(q=>q.stackId!==Z.stackId||q.id<=Z.id):Ki(S,Z))(S,Z))(this.views,Z,A),this.views.slice()}transition(Z,A,q,Ie,Xt,$n){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(A===Z)return Promise.resolve(!1);const er=Z?Z.element:void 0,Tn=A?A.element:void 0,Ii=this.containerEl;return er&&er!==Tn&&(er.classList.add("ion-page"),er.classList.add("ion-page-invisible"),er.parentElement!==Ii&&Ii.appendChild(er),Ii.commit)?Ii.commit(er,Tn,{duration:void 0===q?0:void 0,direction:q,showGoBack:Ie,progressAnimation:Xt,animationBuilder:$n}):Promise.resolve(!1)}wait(Z){var A=this;return(0,m.Z)(function*(){void 0!==A.runningTask&&(yield A.runningTask,A.runningTask=void 0);const q=A.runningTask=Z();return q.finally(()=>A.runningTask=void 0),q})()}}const pa=(S,Z,A,q,Ie)=>"function"==typeof requestAnimationFrame?new Promise(Xt=>{requestAnimationFrame(()=>{xs(S,Z,A,q,Ie),Xt()})}):Promise.resolve(),xs=(S,Z,A,q,Ie)=>{Ie.run(()=>A.filter(Xt=>!Z.includes(Xt)).forEach(xr)),Z.forEach(Xt=>{const er=q.path().split("?")[0].split("#")[0];if(Xt!==S&&Xt.url!==er){const Tn=Xt.element;Tn.setAttribute("aria-hidden","true"),Tn.classList.add("ion-page-hidden"),Xt.ref.changeDetectorRef.detach()}})};let qi=(()=>{class S{constructor(A,q,Ie,Xt,$n,er,Tn,Ii){this.parentOutlet=Ii,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new fe.X(null),this.stackEvents=new g.vpe,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.parentContexts=(0,g.f3M)(de.y6),this.location=(0,g.f3M)(g.s_b),this.environmentInjector=(0,g.f3M)(g.lqb),this.config=(0,g.f3M)(qn),this.navCtrl=(0,g.f3M)(st),this.nativeEl=Xt.nativeElement,this.name=A||de.eC,this.tabsPrefix="true"===q?_o($n,Tn):void 0,this.stackCtrl=new Ds(this.tabsPrefix,this.nativeEl,$n,this.navCtrl,er,Ie),this.parentContexts.onChildOutletCreated(this.name,this)}set animation(A){this.nativeEl.animation=A}set animated(A){this.nativeEl.animated=A}set swipeGesture(A){this._swipeGesture=A,this.nativeEl.swipeHandler=A?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:q=>this.stackCtrl.endBackTransition(q)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const A=this.getContext();null!=A&&A.route&&this.activateWith(A.route,A.injector)}new Promise(A=>(0,Ue.c)(this.nativeEl,A)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(A,q){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const q=this.getContext();this.activatedView.savedData=new Map(q.children.contexts);const Ie=this.activatedView.savedData.get("primary");if(Ie&&q.route&&(Ie.route={...q.route}),this.activatedView.savedExtras={},q.route){const Xt=q.route.snapshot;this.activatedView.savedExtras.queryParams=Xt.queryParams,this.activatedView.savedExtras.fragment=Xt.fragment}}const A=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(A)}}activateWith(A,q){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=A;let Ie,Xt=this.stackCtrl.getExistingView(A);if(Xt){Ie=this.activated=Xt.ref;const er=Xt.savedData;er&&(this.getContext().children.contexts=er),this.updateActivatedRouteProxy(Ie.instance,A)}else{var $n;const er=A._futureSnapshot,Tn=this.parentContexts.getOrCreateContext(this.name).children,Ii=new fe.X(null),C=this.createActivatedRouteProxy(Ii,A),I=new Ba(C,Tn,this.location.injector),D=null!==($n=er.routeConfig.component)&&void 0!==$n?$n:er.component;Ie=this.activated=this.location.createComponent(D,{index:this.location.length,injector:I,environmentInjector:null!=q?q:this.environmentInjector}),Ii.next(Ie.instance),Xt=this.stackCtrl.createView(this.activated,A),this.proxyMap.set(Ie.instance,C),this.currentActivatedRoute$.next({component:Ie.instance,activatedRoute:A})}this.activatedView=Xt,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(Xt).then(er=>{this.activateEvents.emit(Ie.instance),this.stackEvents.emit(er)})}canGoBack(A=1,q){return this.stackCtrl.canGoBack(A,q)}pop(A=1,q){return this.stackCtrl.pop(A,q)}getLastUrl(A){const q=this.stackCtrl.getLastUrl(A);return q?q.url:void 0}getLastRouteView(A){return this.stackCtrl.getLastUrl(A)}getRootView(A){return this.stackCtrl.getRootUrl(A)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(A,q){const Ie=new de.gz;return Ie._futureSnapshot=q._futureSnapshot,Ie._routerState=q._routerState,Ie.snapshot=q.snapshot,Ie.outlet=q.outlet,Ie.component=q.component,Ie._paramMap=this.proxyObservable(A,"paramMap"),Ie._queryParamMap=this.proxyObservable(A,"queryParamMap"),Ie.url=this.proxyObservable(A,"url"),Ie.params=this.proxyObservable(A,"params"),Ie.queryParams=this.proxyObservable(A,"queryParams"),Ie.fragment=this.proxyObservable(A,"fragment"),Ie.data=this.proxyObservable(A,"data"),Ie}proxyObservable(A,q){return A.pipe((0,mt.h)(Ie=>!!Ie),(0,Ye.w)(Ie=>this.currentActivatedRoute$.pipe((0,mt.h)(Xt=>null!==Xt&&Xt.component===Ie),(0,Ye.w)(Xt=>Xt&&Xt.activatedRoute[q]),(0,ve.x)())))}updateActivatedRouteProxy(A,q){const Ie=this.proxyMap.get(A);if(!Ie)throw new Error("Could not find activated route proxy for view");Ie._futureSnapshot=q._futureSnapshot,Ie._routerState=q._routerState,Ie.snapshot=q.snapshot,Ie.outlet=q.outlet,Ie.component=q.component,this.currentActivatedRoute$.next({component:A,activatedRoute:q})}}return S.\u0275fac=function(A){return new(A||S)(g.$8M("name"),g.$8M("tabs"),g.Y36(It.Ye),g.Y36(g.SBq),g.Y36(de.F0),g.Y36(g.R0b),g.Y36(de.gz),g.Y36(S,12))},S.\u0275dir=g.lG2({type:S,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),S})();class Ba{constructor(Z,A,q){this.route=Z,this.childContexts=A,this.parent=q}get(Z,A){return Z===de.gz?this.route:Z===de.y6?this.childContexts:this.parent.get(Z,A)}}let Co=(()=>{let S=class{constructor(A,q,Ie){this.z=Ie,this.isCmpOpen=!1,this.el=q.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,A.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,A.detectChanges()}),tn(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}};return S.\u0275fac=function(A){return new(A||S)(g.Y36(g.sBO),g.Y36(g.SBq),g.Y36(g.R0b))},S.\u0275cmp=g.Xpm({type:S,selectors:[["ion-popover"]],contentQueries:function(A,q,Ie){if(1&A&&g.Suo(Ie,g.Rgc,5),2&A){let Xt;g.iGM(Xt=g.CRH())&&(q.template=Xt.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"},decls:1,vars:1,consts:[[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(A,q){1&A&&g.YNc(0,We,1,1,"ng-container",0),2&A&&g.Q6J("ngIf",q.isCmpOpen||q.keepContentsMounted)},dependencies:[It.O5,It.tP],encapsulation:2,changeDetection:0}),S=(0,ie.gn)([Qt({inputs:["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],methods:["present","dismiss","onDidDismiss","onWillDismiss"]})],S),S})();class Js{constructor(Z){this.ctrl=Z}create(Z){return this.ctrl.create(Z||{})}dismiss(Z,A,q){return this.ctrl.dismiss(Z,A,q)}getTop(){return this.ctrl.getTop()}}let Qa=(()=>{class S extends Js{constructor(){super(oe.a)}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Vr=(()=>{class S extends Js{constructor(){super(oe.m),this.angularDelegate=(0,g.f3M)(Yn),this.injector=(0,g.f3M)(g.zs3),this.environmentInjector=(0,g.f3M)(g.lqb)}create(A){return super.create({...A,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac}),S})(),gs=(()=>{class S extends Js{constructor(){super(oe.c),this.angularDelegate=(0,g.f3M)(Yn),this.injector=(0,g.f3M)(g.zs3),this.environmentInjector=(0,g.f3M)(g.lqb)}create(A){return super.create({...A,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac}),S})(),As=(()=>{class S extends Js{constructor(){super(oe.t)}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),is=(()=>{class S{create(A){return(0,Fe.c)(A)}easingTime(A,q,Ie,Xt,$n){return(0,be.g)(A,q,Ie,Xt,$n)}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Ti=(()=>{class S{constructor(A){this.zone=A}create(A,q=!1){return q&&Object.getOwnPropertyNames(A).forEach(Ie=>{if("function"==typeof A[Ie]){const Xt=A[Ie];A[Ie]=(...$n)=>this.zone.run(()=>Xt(...$n))}}),(0,Ne.createGesture)(A)}}return S.\u0275fac=function(A){return new(A||S)(g.LFG(g.R0b))},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();class _s{shouldDetach(Z){return!1}shouldAttach(Z){return!1}store(Z,A){}retrieve(Z){return null}shouldReuseRoute(Z,A){if(Z.routeConfig!==A.routeConfig)return!1;const q=Z.params,Ie=A.params,Xt=Object.keys(q),$n=Object.keys(Ie);if(Xt.length!==$n.length)return!1;for(const er of Xt)if(Ie[er]!==q[er])return!1;return!0}}const ls=(S,Z,A)=>()=>{if(Z.defaultView&&typeof window<"u"){(0,Xe.s)({...S,_zoneGate:Xt=>A.run(Xt)});const Ie="__zone_symbol__addEventListener"in Z.body?"__zone_symbol__addEventListener":"addEventListener";return function ze(){var S=[];if(typeof window<"u"){var Z=window;(!Z.customElements||Z.Element&&(!Z.Element.prototype.closest||!Z.Element.prototype.matches||!Z.Element.prototype.remove||!Z.Element.prototype.getRootNode))&&S.push($.e(6748).then($.t.bind($,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||Z.NodeList&&!Z.NodeList.prototype.forEach||!Z.fetch||!function(){try{var q=new URL("b","http://a");return q.pathname="c%20d","http://a/c%20d"===q.href&&q.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&S.push($.e(2214).then($.t.bind($,4144,23)))}return Promise.all(S)}().then(()=>((S,Z)=>typeof window>"u"?Promise.resolve():(0,Re.p)().then(()=>(lt(),(0,Re.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[34,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"legacy":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),Z))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Q,jmp:Xt=>A.runOutsideAngular(Xt),ael(Xt,$n,er,Tn){Xt[Ie]($n,er,Tn)},rel(Xt,$n,er,Tn){Xt.removeEventListener($n,er,Tn)}}))}};let oo=(()=>{class S{static forRoot(A){return{ngModule:S,providers:[{provide:Ln,useValue:A},{provide:g.ip1,useFactory:ls,multi:!0,deps:[Ln,It.K0,g.R0b]}]}}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({providers:[Yn,Vr,gs],imports:[It.ez]}),S})()},259:(cn,at,$)=>{"use strict";$.d(at,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=$(6881);(0,m.registerVersion)("firebase","9.21.0","app")},9260:(cn,at,$)=>{"use strict";$.d(at,{Z:()=>m.Z});var m=$(3942);m.Z.registerVersion("firebase","9.21.0","app-compat")},9568:(cn,at,$)=>{"use strict";$.r(at);var m=$(5861),g=$(3942),Y=$(8502),ie=$(2090),fe=($(6881),$(1877),$(4859));function de(){return window}const Fe=2e3;function he(){return he=(0,m.Z)(function*(ce,Ee,ue){var ot;const{BuildInfo:Oe}=de();(0,Y.as)(Ee.sessionId,"AuthEvent did not contain a session ID");const Ve=yield function Se(ce){return oe.apply(this,arguments)}(Ee.sessionId),we={};return(0,Y.at)()?we.ibi=Oe.packageName:(0,Y.au)()?we.apn=Oe.packageName:(0,Y.av)(ce,"operation-not-supported-in-this-environment"),Oe.displayName&&(we.appDisplayName=Oe.displayName),we.sessionId=Ve,(0,Y.aw)(ce,ue,Ee.type,void 0,null!==(ot=Ee.eventId)&&void 0!==ot?ot:void 0,we)}),he.apply(this,arguments)}function Ne(){return(Ne=(0,m.Z)(function*(ce){const{BuildInfo:Ee}=de(),ue={};(0,Y.at)()?ue.iosBundleId=Ee.packageName:(0,Y.au)()?ue.androidPackageName=Ee.packageName:(0,Y.av)(ce,"operation-not-supported-in-this-environment"),yield(0,Y.ax)(ce,ue)})).apply(this,arguments)}function Xe(){return(Xe=(0,m.Z)(function*(ce,Ee,ue){const{cordova:ot}=de();let Oe=()=>{};try{yield new Promise((Ve,we)=>{let rt=null;function Rt(){var _n;Ve();const Jn=null===(_n=ot.plugins.browsertab)||void 0===_n?void 0:_n.close;"function"==typeof Jn&&Jn(),"function"==typeof(null==ue?void 0:ue.close)&&ue.close()}function Yt(){rt||(rt=window.setTimeout(()=>{we((0,Y.az)(ce,"redirect-cancelled-by-user"))},Fe))}function Dn(){"visible"===(null==document?void 0:document.visibilityState)&&Yt()}Ee.addPassiveListener(Rt),document.addEventListener("resume",Yt,!1),(0,Y.au)()&&document.addEventListener("visibilitychange",Dn,!1),Oe=()=>{Ee.removePassiveListener(Rt),document.removeEventListener("resume",Yt,!1),document.removeEventListener("visibilitychange",Dn,!1),rt&&window.clearTimeout(rt)}})}finally{Oe()}})).apply(this,arguments)}function oe(){return(oe=(0,m.Z)(function*(ce){const Ee=function et(ce){if((0,Y.as)(/[0-9a-zA-Z]+/.test(ce),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(ce);const Ee=new ArrayBuffer(ce.length),ue=new Uint8Array(Ee);for(let ot=0;ot<ce.length;ot++)ue[ot]=ce.charCodeAt(ot);return ue}(ce),ue=yield crypto.subtle.digest("SHA-256",Ee);return Array.from(new Uint8Array(ue)).map(Oe=>Oe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Le=20;class Re extends Y.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Ee=>{this.resolveInialized=Ee})}addPassiveListener(Ee){this.passiveListeners.add(Ee)}removePassiveListener(Ee){this.passiveListeners.delete(Ee)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Ee){return this.resolveInialized(),this.passiveListeners.forEach(ue=>ue(Ee)),super.onEvent(Ee)}initialized(){var Ee=this;return(0,m.Z)(function*(){yield Ee.initPromise})()}}function Ye(ce){return ve.apply(this,arguments)}function ve(){return(ve=(0,m.Z)(function*(ce){const Ee=yield lt()._get(xt(ce));return Ee&&(yield lt()._remove(xt(ce))),Ee})).apply(this,arguments)}function ze(){const ce=[],Ee="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let ue=0;ue<Le;ue++){const ot=Math.floor(Math.random()*Ee.length);ce.push(Ee.charAt(ot))}return ce.join("")}function lt(){return(0,Y.aC)(Y.b)}function xt(ce){return(0,Y.aD)("authEvent",ce.config.apiKey,ce.name)}function At(ce){if(null==ce||!ce.includes("?"))return{};const[Ee,...ue]=ce.split("?");return(0,ie.zd)(ue.join("?"))}const qe=class Ke{constructor(){this._redirectPersistence=Y.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Y.aE,this._overrideRedirectResult=Y.aF}_initialize(Ee){var ue=this;return(0,m.Z)(function*(){const ot=Ee._key();let Oe=ue.eventManagers.get(ot);return Oe||(Oe=new Re(Ee),ue.eventManagers.set(ot,Oe),ue.attachCallbackListeners(Ee,Oe)),Oe})()}_openPopup(Ee){(0,Y.av)(Ee,"operation-not-supported-in-this-environment")}_openRedirect(Ee,ue,ot,Oe){var Ve=this;return(0,m.Z)(function*(){!function Me(ce){var Ee,ue,ot,Oe,Ve,we,rt,Rt,Yt,Dn;const _n=de();(0,Y.aA)("function"==typeof(null===(Ee=null==_n?void 0:_n.universalLinks)||void 0===Ee?void 0:Ee.subscribe),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,Y.aA)(typeof(null===(ue=null==_n?void 0:_n.BuildInfo)||void 0===ue?void 0:ue.packageName)<"u",ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,Y.aA)("function"==typeof(null===(Ve=null===(Oe=null===(ot=null==_n?void 0:_n.cordova)||void 0===ot?void 0:ot.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===Ve?void 0:Ve.openUrl),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,Y.aA)("function"==typeof(null===(Rt=null===(rt=null===(we=null==_n?void 0:_n.cordova)||void 0===we?void 0:we.plugins)||void 0===rt?void 0:rt.browsertab)||void 0===Rt?void 0:Rt.isAvailable),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,Y.aA)("function"==typeof(null===(Dn=null===(Yt=null==_n?void 0:_n.cordova)||void 0===Yt?void 0:Yt.InAppBrowser)||void 0===Dn?void 0:Dn.open),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Ee);const we=yield Ve._initialize(Ee);yield we.initialized(),we.resetRedirect(),(0,Y.aG)(),yield Ve._originValidation(Ee);const rt=function Je(ce,Ee,ue=null){return{type:Ee,eventId:ue,urlResponse:null,sessionId:ze(),postBody:null,tenantId:ce.tenantId,error:(0,Y.az)(ce,"no-auth-event")}}(Ee,ot,Oe);yield function mt(ce,Ee){return lt()._set(xt(ce),Ee)}(Ee,rt);const Rt=yield function De(ce,Ee,ue){return he.apply(this,arguments)}(Ee,rt,ue),Yt=yield function je(ce){const{cordova:Ee}=de();return new Promise(ue=>{Ee.plugins.browsertab.isAvailable(ot=>{let Oe=null;ot?Ee.plugins.browsertab.openUrl(ce):Oe=Ee.InAppBrowser.open(ce,(0,Y.ay)()?"_blank":"_system","location=yes"),ue(Oe)})})}(Rt);return function Ue(ce,Ee,ue){return Xe.apply(this,arguments)}(Ee,we,Yt)})()}_isIframeWebStorageSupported(Ee,ue){throw new Error("Method not implemented.")}_originValidation(Ee){const ue=Ee._key();return this.originValidationPromises[ue]||(this.originValidationPromises[ue]=function be(ce){return Ne.apply(this,arguments)}(Ee)),this.originValidationPromises[ue]}attachCallbackListeners(Ee,ue){const{universalLinks:ot,handleOpenURL:Oe,BuildInfo:Ve}=de(),we=setTimeout((0,m.Z)(function*(){yield Ye(Ee),ue.onEvent(We())}),500),rt=function(){var Dn=(0,m.Z)(function*(_n){clearTimeout(we);const Jn=yield Ye(Ee);let kr=null;Jn&&null!=_n&&_n.url&&(kr=function It(ce,Ee){var ue,ot;const Oe=function Be(ce){const Ee=At(ce),ue=Ee.link?decodeURIComponent(Ee.link):void 0,ot=At(ue).link,Oe=Ee.deep_link_id?decodeURIComponent(Ee.deep_link_id):void 0;return At(Oe).link||Oe||ot||ue||ce}(Ee);if(Oe.includes("/__/auth/callback")){const Ve=At(Oe),we=Ve.firebaseError?function Pt(ce){try{return JSON.parse(ce)}catch{return null}}(decodeURIComponent(Ve.firebaseError)):null,rt=null===(ot=null===(ue=null==we?void 0:we.code)||void 0===ue?void 0:ue.split("auth/"))||void 0===ot?void 0:ot[1],Rt=rt?(0,Y.az)(rt):null;return Rt?{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,error:Rt,urlResponse:null,sessionId:null,postBody:null}:{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,sessionId:ce.sessionId,urlResponse:Oe,postBody:null}}return null}(Jn,_n.url)),ue.onEvent(kr||We())});return function(Jn){return Dn.apply(this,arguments)}}();typeof ot<"u"&&"function"==typeof ot.subscribe&&ot.subscribe(null,rt);const Rt=Oe,Yt=`${Ve.packageName.toLowerCase()}://`;de().handleOpenURL=function(){var Dn=(0,m.Z)(function*(_n){if(_n.toLowerCase().startsWith(Yt)&&rt({url:_n}),"function"==typeof Rt)try{Rt(_n)}catch(Jn){console.error(Jn)}});return function(_n){return Dn.apply(this,arguments)}}()}};function We(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,Y.az)("no-auth-event")}}const zt=1e3;function un(){var ce;return(null===(ce=null==self?void 0:self.location)||void 0===ce?void 0:ce.protocol)||null}function ut(ce=(0,ie.z$)()){return!("file:"!==un()&&"ionic:"!==un()&&"capacitor:"!==un()||!ce.toLowerCase().match(/iphone|ipad|ipod|android/))}function hn(){try{const ce=self.localStorage,Ee=Y.aL();if(ce)return ce.setItem(Ee,"1"),ce.removeItem(Ee),!function zn(ce=(0,ie.z$)()){return function sn(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Cn(ce=(0,ie.z$)()){return/Edge\/\d+/.test(ce)}(ce)}()||(0,ie.hl)()}catch{return wn()&&(0,ie.hl)()}return!1}function wn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function tn(){return(function Et(){return"http:"===un()||"https:"===un()}()||(0,ie.ru)()||ut())&&!function Ot(){return(0,ie.b$)()||(0,ie.UG)()}()&&hn()&&!wn()}function ir(){return ut()&&typeof document<"u"}function jn(){return(jn=(0,m.Z)(function*(){return!!ir()&&new Promise(ce=>{const Ee=setTimeout(()=>{ce(!1)},zt);document.addEventListener("deviceready",()=>{clearTimeout(Ee),ce(!0)})})})).apply(this,arguments)}const xn={LOCAL:"local",NONE:"none",SESSION:"session"},Di=Y.aA,Cr="persistence";function Ur(ce){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,m.Z)(function*(ce){yield ce._initializationPromise;const Ee=bn(),ue=Y.aD(Cr,ce.config.apiKey,ce.name);Ee&&Ee.setItem(ue,ce._getPersistence())})).apply(this,arguments)}function bn(){var ce;try{return(null===(ce=function fn(){return typeof window<"u"?window:null}())||void 0===ce?void 0:ce.sessionStorage)||null}catch{return null}}const on=Y.aA;class vr{constructor(){this.browserResolver=Y.aC(Y.k),this.cordovaResolver=Y.aC(qe),this.underlyingResolver=null,this._redirectPersistence=Y.a,this._completeRedirectFn=Y.aE,this._overrideRedirectResult=Y.aF}_initialize(Ee){var ue=this;return(0,m.Z)(function*(){return yield ue.selectUnderlyingResolver(),ue.assertedUnderlyingResolver._initialize(Ee)})()}_openPopup(Ee,ue,ot,Oe){var Ve=this;return(0,m.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openPopup(Ee,ue,ot,Oe)})()}_openRedirect(Ee,ue,ot,Oe){var Ve=this;return(0,m.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openRedirect(Ee,ue,ot,Oe)})()}_isIframeWebStorageSupported(Ee,ue){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Ee,ue)}_originValidation(Ee){return this.assertedUnderlyingResolver._originValidation(Ee)}get _shouldInitProactively(){return ir()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return on(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Ee=this;return(0,m.Z)(function*(){if(Ee.underlyingResolver)return;const ue=yield function Qt(){return jn.apply(this,arguments)}();Ee.underlyingResolver=ue?Ee.cordovaResolver:Ee.browserResolver})()}}function oi(ce){return ce.unwrap()}function _i(ce){return ii(ce)}function ii(ce){const{_tokenResponse:Ee}=ce instanceof ie.ZR?ce.customData:ce;if(!Ee)return null;if(!(ce instanceof ie.ZR)&&"temporaryProof"in Ee&&"phoneNumber"in Ee)return Y.P.credentialFromResult(ce);const ue=Ee.providerId;if(!ue||ue===Y.p.PASSWORD)return null;let ot;switch(ue){case Y.p.GOOGLE:ot=Y.V;break;case Y.p.FACEBOOK:ot=Y.U;break;case Y.p.GITHUB:ot=Y.W;break;case Y.p.TWITTER:ot=Y.Z;break;default:const{oauthIdToken:Oe,oauthAccessToken:Ve,oauthTokenSecret:we,pendingToken:rt,nonce:Rt}=Ee;return Ve||we||Oe||rt?rt?ue.startsWith("saml.")?Y.aO._create(ue,rt):Y.L._fromParams({providerId:ue,signInMethod:ue,pendingToken:rt,idToken:Oe,accessToken:Ve}):new Y.X(ue).credential({idToken:Oe,accessToken:Ve,rawNonce:Rt}):null}return ce instanceof ie.ZR?ot.credentialFromError(ce):ot.credentialFromResult(ce)}function Gn(ce,Ee){return Ee.catch(ue=>{throw ue instanceof ie.ZR&&function pr(ce,Ee){var ue;const ot=null===(ue=Ee.customData)||void 0===ue?void 0:ue._tokenResponse;if("auth/multi-factor-auth-required"===(null==Ee?void 0:Ee.code))Ee.resolver=new Pi(ce,Y.aq(ce,Ee));else if(ot){const Oe=ii(Ee),Ve=Ee;Oe&&(Ve.credential=Oe,Ve.tenantId=ot.tenantId||void 0,Ve.email=ot.email||void 0,Ve.phoneNumber=ot.phoneNumber||void 0)}}(ce,ue),ue}).then(ue=>{const Oe=ue.user;return{operationType:ue.operationType,credential:_i(ue),additionalUserInfo:Y.ao(ue),user:Xn.getOrCreate(Oe)}})}function vi(ce,Ee){return rr.apply(this,arguments)}function rr(){return(rr=(0,m.Z)(function*(ce,Ee){const ue=yield Ee;return{verificationId:ue.verificationId,confirm:ot=>Gn(ce,ue.confirm(ot))}})).apply(this,arguments)}class Pi{constructor(Ee,ue){this.resolver=ue,this.auth=function mr(ce){return ce.wrapped()}(Ee)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Ee){return Gn(oi(this.auth),this.resolver.resolveSignIn(Ee))}}class Xn{constructor(Ee){this._delegate=Ee,this.multiFactor=Y.ar(Ee)}static getOrCreate(Ee){return Xn.USER_MAP.has(Ee)||Xn.USER_MAP.set(Ee,new Xn(Ee)),Xn.USER_MAP.get(Ee)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Ee){return this._delegate.getIdTokenResult(Ee)}getIdToken(Ee){return this._delegate.getIdToken(Ee)}linkAndRetrieveDataWithCredential(Ee){return this.linkWithCredential(Ee)}linkWithCredential(Ee){var ue=this;return(0,m.Z)(function*(){return Gn(ue.auth,Y.a0(ue._delegate,Ee))})()}linkWithPhoneNumber(Ee,ue){var ot=this;return(0,m.Z)(function*(){return vi(ot.auth,Y.l(ot._delegate,Ee,ue))})()}linkWithPopup(Ee){var ue=this;return(0,m.Z)(function*(){return Gn(ue.auth,Y.d(ue._delegate,Ee,vr))})()}linkWithRedirect(Ee){var ue=this;return(0,m.Z)(function*(){return yield Ur(Y.aH(ue.auth)),Y.g(ue._delegate,Ee,vr)})()}reauthenticateAndRetrieveDataWithCredential(Ee){return this.reauthenticateWithCredential(Ee)}reauthenticateWithCredential(Ee){var ue=this;return(0,m.Z)(function*(){return Gn(ue.auth,Y.a1(ue._delegate,Ee))})()}reauthenticateWithPhoneNumber(Ee,ue){return vi(this.auth,Y.r(this._delegate,Ee,ue))}reauthenticateWithPopup(Ee){return Gn(this.auth,Y.e(this._delegate,Ee,vr))}reauthenticateWithRedirect(Ee){var ue=this;return(0,m.Z)(function*(){return yield Ur(Y.aH(ue.auth)),Y.h(ue._delegate,Ee,vr)})()}sendEmailVerification(Ee){return Y.ae(this._delegate,Ee)}unlink(Ee){var ue=this;return(0,m.Z)(function*(){return yield Y.an(ue._delegate,Ee),ue})()}updateEmail(Ee){return Y.aj(this._delegate,Ee)}updatePassword(Ee){return Y.ak(this._delegate,Ee)}updatePhoneNumber(Ee){return Y.u(this._delegate,Ee)}updateProfile(Ee){return Y.ai(this._delegate,Ee)}verifyBeforeUpdateEmail(Ee,ue){return Y.af(this._delegate,Ee,ue)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xn.USER_MAP=new WeakMap;const ai=Y.aA;let ei=(()=>{class ce{constructor(ue,ot){if(this.app=ue,ot.isInitialized())return this._delegate=ot.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Oe}=ue.options;ai(Oe,"invalid-api-key",{appName:ue.name}),ai(Oe,"invalid-api-key",{appName:ue.name});const Ve=typeof window<"u"?vr:void 0;this._delegate=ot.initialize({options:{persistence:Nr(Oe,ue.name),popupRedirectResolver:Ve}}),this._delegate._updateErrorMap(Y.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(ue){this._delegate.languageCode=ue}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(ue){this._delegate.tenantId=ue}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(ue,ot){Y.I(this._delegate,ue,ot)}applyActionCode(ue){return Y.a5(this._delegate,ue)}checkActionCode(ue){return Y.a6(this._delegate,ue)}confirmPasswordReset(ue,ot){return Y.a4(this._delegate,ue,ot)}createUserWithEmailAndPassword(ue,ot){var Oe=this;return(0,m.Z)(function*(){return Gn(Oe._delegate,Y.a8(Oe._delegate,ue,ot))})()}fetchProvidersForEmail(ue){return this.fetchSignInMethodsForEmail(ue)}fetchSignInMethodsForEmail(ue){return Y.ad(this._delegate,ue)}isSignInWithEmailLink(ue){return Y.ab(this._delegate,ue)}getRedirectResult(){var ue=this;return(0,m.Z)(function*(){ai(tn(),ue._delegate,"operation-not-supported-in-this-environment");const ot=yield Y.j(ue._delegate,vr);return ot?Gn(ue._delegate,Promise.resolve(ot)):{credential:null,user:null}})()}addFrameworkForLogging(ue){!function Q(ce,Ee){(0,Y.aH)(ce)._logFramework(Ee)}(this._delegate,ue)}onAuthStateChanged(ue,ot,Oe){const{next:Ve,error:we,complete:rt}=li(ue,ot,Oe);return this._delegate.onAuthStateChanged(Ve,we,rt)}onIdTokenChanged(ue,ot,Oe){const{next:Ve,error:we,complete:rt}=li(ue,ot,Oe);return this._delegate.onIdTokenChanged(Ve,we,rt)}sendSignInLinkToEmail(ue,ot){return Y.aa(this._delegate,ue,ot)}sendPasswordResetEmail(ue,ot){return Y.a3(this._delegate,ue,ot||void 0)}setPersistence(ue){var ot=this;return(0,m.Z)(function*(){let Oe;switch(function Hr(ce,Ee){Di(Object.values(xn).includes(Ee),ce,"invalid-persistence-type"),(0,ie.b$)()?Di(Ee!==xn.SESSION,ce,"unsupported-persistence-type"):(0,ie.UG)()?Di(Ee===xn.NONE,ce,"unsupported-persistence-type"):wn()?Di(Ee===xn.NONE||Ee===xn.LOCAL&&(0,ie.hl)(),ce,"unsupported-persistence-type"):Di(Ee===xn.NONE||hn(),ce,"unsupported-persistence-type")}(ot._delegate,ue),ue){case xn.SESSION:Oe=Y.a;break;case xn.LOCAL:Oe=(yield Y.aC(Y.i)._isAvailable())?Y.i:Y.b;break;case xn.NONE:Oe=Y.N;break;default:return Y.av("argument-error",{appName:ot._delegate.name})}return ot._delegate.setPersistence(Oe)})()}signInAndRetrieveDataWithCredential(ue){return this.signInWithCredential(ue)}signInAnonymously(){return Gn(this._delegate,Y._(this._delegate))}signInWithCredential(ue){return Gn(this._delegate,Y.$(this._delegate,ue))}signInWithCustomToken(ue){return Gn(this._delegate,Y.a2(this._delegate,ue))}signInWithEmailAndPassword(ue,ot){return Gn(this._delegate,Y.a9(this._delegate,ue,ot))}signInWithEmailLink(ue,ot){return Gn(this._delegate,Y.ac(this._delegate,ue,ot))}signInWithPhoneNumber(ue,ot){return vi(this._delegate,Y.s(this._delegate,ue,ot))}signInWithPopup(ue){var ot=this;return(0,m.Z)(function*(){return ai(tn(),ot._delegate,"operation-not-supported-in-this-environment"),Gn(ot._delegate,Y.c(ot._delegate,ue,vr))})()}signInWithRedirect(ue){var ot=this;return(0,m.Z)(function*(){return ai(tn(),ot._delegate,"operation-not-supported-in-this-environment"),yield Ur(ot._delegate),Y.f(ot._delegate,ue,vr)})()}updateCurrentUser(ue){return this._delegate.updateCurrentUser(ue)}verifyPasswordResetCode(ue){return Y.a7(this._delegate,ue)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ce.Persistence=xn,ce})();function li(ce,Ee,ue){let ot=ce;"function"!=typeof ce&&({next:ot,error:Ee,complete:ue}=ce);const Oe=ot;return{next:we=>Oe(we&&Xn.getOrCreate(we)),error:Ee,complete:ue}}function Nr(ce,Ee){const ue=function Qn(ce,Ee){const ue=bn();if(!ue)return[];const ot=Y.aD(Cr,ce,Ee);switch(ue.getItem(ot)){case xn.NONE:return[Y.N];case xn.LOCAL:return[Y.i,Y.a];case xn.SESSION:return[Y.a];default:return[]}}(ce,Ee);if(typeof self<"u"&&!ue.includes(Y.i)&&ue.push(Y.i),typeof window<"u")for(const ot of[Y.b,Y.a])ue.includes(ot)||ue.push(ot);return ue.includes(Y.N)||ue.push(Y.N),ue}class si{constructor(){this.providerId="phone",this._delegate=new Y.P(oi(g.Z.auth()))}static credential(Ee,ue){return Y.P.credential(Ee,ue)}verifyPhoneNumber(Ee,ue){return this._delegate.verifyPhoneNumber(Ee,ue)}unwrap(){return this._delegate}}si.PHONE_SIGN_IN_METHOD=Y.P.PHONE_SIGN_IN_METHOD,si.PROVIDER_ID=Y.P.PROVIDER_ID;const Zr=Y.aA;class Kr{constructor(Ee,ue,ot=g.Z.app()){var Oe;Zr(null===(Oe=ot.options)||void 0===Oe?void 0:Oe.apiKey,"invalid-api-key",{appName:ot.name}),this._delegate=new Y.R(Ee,ue,ot.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function He(ce){ce.INTERNAL.registerComponent(new fe.wA("auth-compat",Ee=>{const ue=Ee.getProvider("app-compat").getImmediate(),ot=Ee.getProvider("auth");return new ei(ue,ot)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Y.A.EMAIL_SIGNIN,PASSWORD_RESET:Y.A.PASSWORD_RESET,RECOVER_EMAIL:Y.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Y.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Y.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Y.A.VERIFY_EMAIL}},EmailAuthProvider:Y.Q,FacebookAuthProvider:Y.U,GithubAuthProvider:Y.W,GoogleAuthProvider:Y.V,OAuthProvider:Y.X,SAMLAuthProvider:Y.Y,PhoneAuthProvider:si,PhoneMultiFactorGenerator:Y.m,RecaptchaVerifier:Kr,TwitterAuthProvider:Y.Z,Auth:ei,AuthCredential:Y.J,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ce.registerVersion("@firebase/auth-compat","0.4.1")}(g.Z)},5861:(cn,at,$)=>{"use strict";function m(Y,ie,Pe,Ae,fe,de,Fe){try{var De=Y[de](Fe),he=De.value}catch(be){return void Pe(be)}De.done?ie(he):Promise.resolve(he).then(Ae,fe)}function g(Y){return function(){var ie=this,Pe=arguments;return new Promise(function(Ae,fe){var de=Y.apply(ie,Pe);function Fe(he){m(de,Ae,fe,Fe,De,"next",he)}function De(he){m(de,Ae,fe,Fe,De,"throw",he)}Fe(void 0)})}}$.d(at,{Z:()=>g})}},cn=>{cn(cn.s=875)}]);